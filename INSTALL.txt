# QUICK INSTALLATION INSTRUCTIONS

1. Get the HoTT library at https://github.com/HoTT/HoTT.git. Go to the
   root of the HoTT created directory.

2. Install a custom Coq from https://github.com/HoTT/coq. This is a
   fork of the trunk and is compatible with standard Coq 8.4 trunk,
   except that it supports the the homotopy theory
   interpretation. Because our Coq fork changes frequently, HoTT may
   fail with any particular commit of HoTT/coq.  (We attempt to keep
   the master branch of this repository working with the trunk of
   HoTT/coq, and the stable branch of this repository working with the
   stable branch of HoTT/coq.) Thus, unless you know what you are
   doing, you should use the version of Coq bundled with this
   repository, which can obtain and install by running:

       ./etc/ci/install_coq.sh -local

   Arguments passed to this script get passed to Coq's `./configure`.
   Passing -local will compile Coq in place, so you can run it
   straight from the source directory.

   If you run debian (or some version of linux with `apt-get`), you
   can probably get the dependencies of Coq by running

      ./etc/ci/install_coq_deps.sh

3. If you installed custom Coq so that it is found in the `PATH`, run

       ./autogen.sh
       ./configure
       make

   If you installed custom Coq in a location not in PATH (the default
   with the command above), tell ./configure where to find it as
   follows:

       ./autogen.sh
       ./configure COQBIN=<absolute-directory-containing-coq-executables>
       make

   If you used the -local argument above, you can run:

       ./autogen.sh
       ./configure COQBIN="`cd coq-HoTT && pwd`"
       make

4. You can now use the HoTT library in place by running ./hoqtop and
   ./hoqc. You can also use ./hoqide which is the version of coqide
   running the hoqtop toplevel if you have compiled it successfully.

5. The library can be loaded with `Require Import HoTT.`

6. You can install the library globally with `make install`, although
   this has not been thoroughly tested.

7. To use the emacs tags facility with the *.v files here, run the command

   	make TAGS

   (The emacs command `M-x find-tag`, bound to `M-.` , will take you to
   a definition or theorem, the default name for which is located under
   your cursor. Read the help on that emacs command with `C-h k M-.` ,
   and learn the other facilities provided, such as the use of `M-*` to
   get back where you were, or the use of `M-x tags-search` to search
   throughout the code for locations matching a given regular
   expression.)

# LONG INSTALLATION INSTRUCTIONS

## INSTALLATION OF HoTT

Clone the HoTT repository with

   git clone https://github.com/HoTT/HoTT.git

Even better, if you would like to contribute to HoTT, first fork the
repository on github and then use your own fork. This way you will be
able to make pull requests.

If you do not want to deal with git at all, you may download an
archive of HoTT at https://github.com/HoTT/HoTT/archive/master.zip and
unpack that. We do not recommend this option because the HoTT library
is under heavy development and you want to be able to easily track
changes.  Additionally, downloading the archive requires a working
version of autoreconf.

### PREREQUISITES

The HoTT library requires a custom version of Coq which supports the the
command-line option `-indices-matter`, universe polymorphism and private
types. The first one changes the interpretation of equality to one that
conforms to the homotopy-theoretic interpretation, the second one is
needed to avoid certain universe inconsistency errors (which are not
really there but Coq 8.4 cannot see that), and the third one allows us
to implement higher-inductive types, sort of.

At present only our fork of the Coq trunk supports these options, but we
hope to get them into the official Coq soon. Unfortunately for you
that means you will have to compile a version of Coq, available at

   https://github.com/HoTT/coq

If you have never compiled Coq you may prefer to ask a friend for
help. If you feel brave you should try doing it yourself:

Note that obtaining the prerequisites for Coq is automated on debian
by the script ./etc/ci/install_coq_deps.sh, and installing Coq itself
can by automated by the script ./etc/ci/install_coq.sh.  If you want
more control over the configuration, you can run the following steps
manually.

1. Obtain the custom Coq fork. Since we bundle the version of Coq we
   depend on, you can run the following in the root of the HoTT
   directory:

       git submodule sync
       git submodule update --init --recursive

  This will give you the relevant version of HoTT/coq in the
  subdirectory coq-HoTT.

  Alternatively, if you have git, clone the fork with

       git clone https://github.com/HoTT/coq.git
       git checkout stable

   If you do not have git, you may still download the files as an
   archive file at https://github.com/HoTT/coq/archive/stable.zip (but
   it is better for you in the long run to learn git).

2. Compile Coq, as explained in the INSTALL.txt file of Coq
   distribution. You will need some prerequisites for compilation, such
   as OCaml 3.11.2 or later.

   If you do not want the custom Coq to override one that you already
   have installed, configure Coq with either `./configure -local` so
   that it will work in-place, or use

   `./configure -prefix <dir>`, as explained by `./configure -help`.


### Configuration of the HoTT library

Next you should configure the HoTT library:

1. If you installed the custom Coq as your default version of Coq,
   which means that it it can be fond in PATH, run

       ./autogen.sh
       ./configure

   in the HoTT directory.

2. If you installed the custom Coq somewhere special or configured it
   with `-local`, you should tell ./configure where to find the custom
   Coq:

       ./autogen.sh
       ./configure COQBIN=<directory-containing-coq-executables>

   where you should specify the *absolute* path name (starting with /)
   of the directory which contains `coqtop`, `coqc`, etc.

To compile the HoTT library type

    make

Because it is a bit tricky to run Coq with a custom standard library,
we provided scripts `hoqtop` and `hoqc` that do this for you, so you
can run

    ./hoqtop

directly from the HoTT directory to start using the library. Load it
with

   Require Import HoTT.

There is also `hoqc` for compiling files. You may prefer to install
`hoqtop`, `hoqc` and the library files globally, in which case you
type

    sudo make install

By default the files will be installed in `/usr/local/bin` and
`/usr/local/share/hott`.  You can change the location by using
standard `configure` parameters when you run it.  For example

    ./configure --bindir=$HOME/bin --datadir-$HOME/stuff

will install `hoqtop` and `hoqc` in the `bin` subdirectory of your
home directory and the HoTT library in `stuff/hott` subdirectory of
your home directory.

If you are using ProofGeneral (PG), do not forget to change the name
of the Coq program called by PG. For instance you can edit the name of
the executable called by PG by typing 'M-x customize-variable', then
'proof-prog-name' which displays a customization utility. An other
option is to type 'M-x customize-variable', then
'proof-prog-name-ask', to click on the 'Toogle' button in front of
Proof Prog Name Ask and to save this for future sessions. This will
prompt PG to ask you for the name of the coq toplevel to be used each
time you start evaluating a file.
