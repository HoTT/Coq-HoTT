language: c
env:
# If you want to mark that the current tip of this repository should
# compile with a different version of HoTT/coq (trunk), you should
# update the SHA1 hash in the following line to match that of the
# version given by `git log`, and update the comment with the commit
# message.
 - BRANCH=trunk   COMMITISH=e88e47ca76200a5e52bd0f9397fe4900fa9b241b
# commit e88e47ca76200a5e52bd0f9397fe4900fa9b241b
# Author: Matthieu Sozeau <mattam@mattam.org>
# Date:   Thu Aug 1 02:01:08 2013 +0200
#
#     - Relax identification of metas in Ltac to not compare universes syntactically.
#     - add constr_eq_nounivs tactic to compare constrs without comparing universes.
 - BRANCH=trunk   COMMITISH=HEAD
 - BRANCH=stable  COMMITISH=HEAD
matrix:
 allow_failures:
# we're on trunk, so allow stable to fail
  - env: BRANCH=stable  COMMITISH=HEAD
before_script:
 - sudo apt-get update -q
 - sudo apt-get install -q ocaml camlp5
 - git clone --depth=5 --branch=$BRANCH git://github.com/HoTT/coq.git coq-HoTT
 - pushd coq-HoTT
 -   git remote update
 -   git checkout $COMMITISH
 -   ./configure -prefix /usr/local -debug -no-native-compiler
 -   make coqlight
 -   sudo make install-coqlight
 - popd
script: "./configure && make"
