<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>IWType.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk0"><span class="kn">From</span> HoTT <span class="kn">Require Import</span> Basics.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Types.Forall Types.Sigma Types.Prod Types.WType.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** In this file we define indexed W-types. We show that indexed W-types can be reduced to W-types whilst still having definitional computation rules. We also characterize the path space of indexed W-types. This allows us to derive sufficient conditions for an indexed W-type to be truncated. *)</span>

<span class="sd">(** This is mostly adapted from Jasper Hugunin&#39;s formalization in Coq: https://github.com/jashug/IWTypes *)</span>

<span class="sd">(** On a more meta-theoretic note, this partly justifies the use of indexed inductive types in Coq with respect to homotopy type theory. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">IW</span>
  (<span class="nv">I</span> : <span class="kt">Type</span>) (** The indexing type *)
  (<span class="nv">A</span> : <span class="kt">Type</span>) (** The <span class="kp">type of</span> labels / constructors / data *)
  (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (** The <span class="kp">type of</span> arities / arguments / children *)
  (<span class="nv">i</span> : A -&gt; I) (** The index map (<span class="kr">for</span> labels) *)
  (<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span>, B x -&gt; I) (** The index map <span class="kr">for</span> arguments *)
  : I -&gt; <span class="kt">Type</span> :=
| iw_sup (x : A)
    : (<span class="kr">forall</span> (<span class="nv">y</span> : B x), IW I A B i j (j x y)) -&gt; IW I A B i j (i x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">iw_label</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">I</span> <span class="nv">i</span> <span class="nv">j</span>} {<span class="nv">l</span> : I} (<span class="nv">w</span> : IW I A B i j l) : A :=
  <span class="kr">match</span> w <span class="kr">with</span>
  | iw_sup x y =&gt; x
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">iw_arity</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">I</span> <span class="nv">i</span> <span class="nv">j</span>} (<span class="nv">l</span> : I) (<span class="nv">w</span> : IW I A B i j l)
  : <span class="kr">forall</span> (<span class="nv">y</span> : B (iw_label w)), IW I A B i j (j (iw_label w) y) :=
  <span class="kr">match</span> w <span class="kr">with</span>
  | iw_sup x y =&gt; y
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk1"><span class="kn">Definition</span> <span class="nf">path_index_iw_label</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">I</span> <span class="nv">i</span> <span class="nv">j</span>} (<span class="nv">l</span> : I) (<span class="nv">w</span> : IW I A B i j l)
  : i (iw_label w) = l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i (iw_label w) = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i (iw_label w) = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> w.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3"><span class="kn">Definition</span> <span class="nf">iw_eta</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">I</span> <span class="nv">i</span> <span class="nv">j</span>} (<span class="nv">l</span> : I) (<span class="nv">w</span> : IW I A B i j l)
  : path_index_iw_label l w # iw_sup I A B i j (iw_label w) (iw_arity l w) = w.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (IW I A B i j) (path_index_iw_label l w)
  (iw_sup I A B i j (iw_label w) (iw_arity l w)) = w</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (IW I A B i j) (path_index_iw_label l w)
  (iw_sup I A B i j (iw_label w) (iw_arity l w)) = w</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> w.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We have a canonical map from the IW-type to the fiber of the index map *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk5"><span class="kn">Definition</span> <span class="nf">iw_to_hfiber_index</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">I</span> <span class="nv">i</span> <span class="nv">j</span>} (<span class="nv">l</span> : I) : IW I A B i j l -&gt; hfiber i l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I A B i j l -&gt; hfiber i l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I A B i j l -&gt; hfiber i l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7"><span class="nb">intros</span> w.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber i l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8"><span class="kr">exists</span> (<span class="nv">iw_label</span> <span class="nv">w</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>I</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i (iw_label w) = l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> path_index_iw_label.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9"><span class="kn">Definition</span> <span class="nf">pointwise_paths_ind</span> `{Funext} {A : <span class="kt">Type</span>} {B : A -&gt; <span class="kt">Type</span>}
  (a : <span class="kr">forall</span> <span class="nv">x</span>, B x)
  (P : <span class="kr">forall</span> <span class="nv">b</span>, a == b -&gt; <span class="kt">Type</span>)
  (f : P a (<span class="kr">fun</span> <span class="nv">_</span> =&gt; <span class="mi">1</span>%path))
  {b : <span class="kr">forall</span> <span class="nv">x</span>, B x} (p : a == b)
  : P b p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x, a == b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>P a (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; <span class="mi">1</span>)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a == b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x, a == b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>P a (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; <span class="mi">1</span>)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a == b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb"><span class="nb">refine</span> (equiv_ind apD10 (P b) _ p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x, a == b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>P a (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; <span class="mi">1</span>)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a == b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : a = b, P b (apD10 x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc"><span class="nb">intros</span> [].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x, a == b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>P a (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; <span class="mi">1</span>)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a == b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P a (apD10 <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Reduction of indexed W-types to W-types *)</span>

<span class="sd">(** Jasper Hugunin found this construction (typecheck un-indexed trees) in &quot;Indexed Containers by Thorsten Altenkirch and Peter Morris&quot;. http://www.cs.nott.ac.uk/~psztxa/publ/ICont.pdf</span>
<span class="sd">This references the following:</span>
<span class="sd">  * M. Abbott, T. Altenkirch, and N. Ghani. Containers - constructing strictly positive types. Theoretical Computer Science, 342:327, September 2005. Applied Semantics: Selected Topics.</span>
<span class="sd">  * N. Gambino and M. Hyland. Well-founded trees and dependent polynomial functors. In S. Berardi, M. Coppo, and F. Damiani, editors, types for Proofs and Programs (TYPES 2003), Lecture Notes in Computer Science, 2004</span>
<span class="sd">as previous examples of the technique. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Reduction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> (<span class="nv">I</span> : <span class="kt">Type</span>) (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>)
    (<span class="nv">i</span> : A -&gt; I) (<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span>, B x -&gt; I).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">IsIndexedBy</span> (<span class="nv">x</span> : I) (<span class="nv">w</span> : W A B) : <span class="kt">Type</span> :=
    <span class="kr">match</span> w <span class="kr">with</span>
    | w_sup a b =&gt; (i a = x) * (<span class="kr">forall</span> <span class="nv">c</span>, IsIndexedBy (j a c) (b c))
    <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">IW&#39;</span> (<span class="nv">x</span> : I) := sig (IsIndexedBy x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">iw_sup&#39;</span> (<span class="nv">x</span> : A) (<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">z</span> : B x, IW&#39; (j x z)) : IW&#39; (i x)
    := (w_sup A B x (<span class="kr">fun</span> <span class="nv">a</span> =&gt; pr1 (y a)); (idpath, (<span class="kr">fun</span> <span class="nv">a</span> =&gt; pr2 (y a)))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We can derive the induction principle for IW-types *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd"><span class="kn">Definition</span> <span class="nf">IW&#39;_ind</span> (<span class="nv">P</span> : <span class="kr">forall</span> <span class="nv">i</span>, IW&#39; i -&gt; <span class="kt">Type</span>)
    (<span class="nv">S</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span>, (<span class="kr">forall</span> <span class="nv">c</span>, P _ (y c)) -&gt; P _ (iw_sup&#39; x y))
    : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">w</span>, P x w.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : I) (<span class="nv">w</span> : IW&#39; x), P x w</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : I) (<span class="nv">w</span> : IW&#39; x), P x w</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkf"><span class="nb">intros</span> x [w r].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>w</var><span class="hyp-type"><b>: </b><span>W A B</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>IsIndexedBy x w</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x (w; r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk10"><span class="nb">revert</span> w x r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">w</span> : W A B) (<span class="nv">x</span> : I) (<span class="nv">r</span> : IsIndexedBy x w),
P x (w; r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk11"><span class="nb">induction</span> w <span class="kr">as</span> [a b k].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B a -&gt; W A B</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I)
(<span class="nv">r</span> : IsIndexedBy x (b b0)), P x (b b0; r)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : I) (<span class="nv">r</span> : IsIndexedBy x (w_sup A B a b)),
P x (w_sup A B a b; r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk12"><span class="nb">intros</span> x [p IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B a -&gt; W A B</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I)
(<span class="nv">r</span> : IsIndexedBy x (b b0)), P x (b b0; r)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>i a = x</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IsIndexedBy (j a c) (b c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P x (w_sup A B a b; (p, IH))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk13"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B a -&gt; W A B</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I)
(<span class="nv">r</span> : IsIndexedBy x (b b0)), P x (b b0; r)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IsIndexedBy (j a c) (b c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i a) (w_sup A B a b; (<span class="mi">1</span>, IH))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk14"><span class="nb">refine</span> (S a (<span class="kr">fun</span> <span class="nv">c</span> =&gt; (b c; IH c)) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B a -&gt; W A B</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I)
(<span class="nv">r</span> : IsIndexedBy x (b b0)), P x (b b0; r)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IsIndexedBy (j a c) (b c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c</span> : B a, P (j a c) (b c; IH c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk15"><span class="nb">intros</span> c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : I, IW&#39; i -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, P (j x c) (y c)) -&gt;
P (i x) (iw_sup&#39; x y)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B a -&gt; W A B</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I)
(<span class="nv">r</span> : IsIndexedBy x (b b0)), P x (b b0; r)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IsIndexedBy (j a c) (b c)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (j a c) (b c; IH c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We have definitional computation rules for this eliminator. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">IW&#39;_ind_beta_iw_sup&#39;</span> (<span class="nv">P</span> : <span class="kr">forall</span> <span class="nv">i</span>, IW&#39; i -&gt; <span class="kt">Type</span>)
    (<span class="nv">S</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span>, (<span class="kr">forall</span> <span class="nv">c</span>, P _ (y c)) -&gt; P _ (iw_sup&#39; x y)) <span class="nv">x</span> <span class="nv">y</span>
    : IW&#39;_ind P S _ (iw_sup&#39; x y) = S x y (<span class="kr">fun</span> <span class="nv">c</span> =&gt; IW&#39;_ind P S _ (y c))
    := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Showing that IW-types are equivalent to W-types requires funext. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk16"><span class="kn">Definition</span> <span class="nf">equiv_wtype_iwtype</span> `{Funext} (x : I)
    : IW&#39; x &lt;~&gt; IW I A B i j x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39; x &lt;~&gt; IW I A B i j x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk17"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39; x &lt;~&gt; IW I A B i j x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk18">snapply equiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39; x -&gt; IW I A B i j x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk19"><hr></label><div class="goal-conclusion">IW I A B i j x -&gt; IW&#39; x</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk1a"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk1b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk1b"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o <span class="nl">?f</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk1c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39; x -&gt; IW I A B i j x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk1d">rapply (IW&#39;_ind (<span class="kr">fun</span> <span class="nv">l</span> <span class="nv">_</span> =&gt; IW I A B i j l)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)) -&gt;
(<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)) -&gt;
IW I A B i j (i x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk1e"><span class="nb">intros</span> a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I A B i j (i a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk1f"><span class="nb">apply</span> iw_sup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk20"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>B a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I A B i j (j a y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> c.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk21">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I A B i j x -&gt; IW&#39; x</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk22" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk22"><hr></label><div class="goal-conclusion">IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x o <span class="nl">?g</span> ==
idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk23" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk23"><hr></label><div class="goal-conclusion"><span class="nl">?g</span>
o IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
    (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
       (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
     iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x ==
idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk24">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I A B i j x -&gt; IW&#39; x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk25">rapply (IW_rect I A B i j (<span class="kr">fun</span> <span class="nv">l</span> <span class="nv">_</span> =&gt; IW&#39; l)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)) -&gt;
(<span class="kr">forall</span> <span class="nv">y</span> : B x, IW&#39; (j x y)) -&gt; IW&#39; (i x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk26"><span class="nb">intros</span> a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39; (i a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk27"><span class="nb">apply</span> iw_sup&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">z</span> : B a, IW&#39; (j a z)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk28"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>B a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39; (j a y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> c.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk29">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x
o IW_rect I A B i j
    (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
    (<span class="kr">fun</span> (<span class="nv">a</span> : A)
       (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
       (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
     iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x == idmap</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk2a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk2a"><hr></label><div class="goal-conclusion">IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x
o IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
    (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
       (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
     iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x ==
idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk2b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x
o IW_rect I A B i j
    (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
    (<span class="kr">fun</span> (<span class="nv">a</span> : A)
       (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
       (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
     iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk2c">rapply (IW_rect I A B i j (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> =&gt; IW&#39;_ind _ _ x _ = y)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">i0</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
(<span class="kr">forall</span> <span class="nv">y</span> : B x,
 IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
   (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
      (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
    iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j x y)
   (IW_rect I A B i j
      (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
      (<span class="kr">fun</span> (<span class="nv">a</span> : A)
         (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
         (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
       iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j x y)
      (i0 y)) = i0 y) -&gt;
IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) (i x)
  (IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) (i x)
     (iw_sup I A B i j x i0)) = iw_sup I A B i j x i0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk2d"><span class="nb">cbn</span>; <span class="nb">intros</span> a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a,
IW&#39;_ind
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0))
  (j a y)
  (IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a,
             IW I A B i j (j a y0))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
     (b y)) = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j a
  (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt;
   W_rect A B
     (<span class="kr">fun</span> <span class="nv">w</span> : W A B =&gt;
      <span class="kr">forall</span> <span class="nv">x</span> : I, IsIndexedBy x w -&gt; IW I A B i j x)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B a -&gt; W A B)
        (<span class="nv">k</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I),
             IsIndexedBy x (b b0) -&gt; IW I A B i j x)
        (<span class="nv">x</span> : I)
        (<span class="nv">r</span> : (i a = x) *
             (<span class="kr">forall</span> <span class="nv">c</span> : B a,
              IsIndexedBy (j a c) (b c))) =&gt;
      <span class="kr">match</span>
        fst r <span class="kr">in</span> (_ = i0) <span class="kr">return</span> (IW I A B i j i0)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt;
          iw_sup I A B i j a
            (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; k y0 (j a y0) (snd r y0))
      <span class="kr">end</span>)
     (IW_rect I A B i j
        (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
        (<span class="kr">fun</span> (<span class="nv">a</span> : A)
           (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
           (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
         iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
        (b y)).<span class="mi">1</span> (j a y)
     (IW_rect I A B i j
        (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
        (<span class="kr">fun</span> (<span class="nv">a</span> : A)
           (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
           (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
         iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
        (b y)).<span class="mi">2</span>) = iw_sup I A B i j a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk2e"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a,
IW&#39;_ind
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0))
  (j a y)
  (IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a,
             IW I A B i j (j a y0))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
     (b y)) = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt;
 W_rect A B
   (<span class="kr">fun</span> <span class="nv">w</span> : W A B =&gt;
    <span class="kr">forall</span> <span class="nv">x</span> : I, IsIndexedBy x w -&gt; IW I A B i j x)
   (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B a -&gt; W A B)
      (<span class="nv">k</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I),
           IsIndexedBy x (b b0) -&gt; IW I A B i j x)
      (<span class="nv">x</span> : I)
      (<span class="nv">r</span> : (i a = x) *
           (<span class="kr">forall</span> <span class="nv">c</span> : B a, IsIndexedBy (j a c) (b c)))
    =&gt;
    <span class="kr">match</span>
      fst r <span class="kr">in</span> (_ = i0) <span class="kr">return</span> (IW I A B i j i0)
    <span class="kr">with</span>
    | <span class="mi">1</span> =&gt;
        iw_sup I A B i j a
          (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; k y0 (j a y0) (snd r y0))
    <span class="kr">end</span>)
   (IW_rect I A B i j
      (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
      (<span class="kr">fun</span> (<span class="nv">a</span> : A)
         (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
         (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
       iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y) (b y)).<span class="mi">1</span>
   (j a y)
   (IW_rect I A B i j
      (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
      (<span class="kr">fun</span> (<span class="nv">a</span> : A)
         (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
         (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
       iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y) (b y)).<span class="mi">2</span>) =
b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk2f">funext y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B a,
IW&#39;_ind
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
   iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0))
  (j a y)
  (IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a,
             IW I A B i j (j a y0))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
     (b y)) = b y</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>B a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">W_rect A B
  (<span class="kr">fun</span> <span class="nv">w</span> : W A B =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> : I, IsIndexedBy x w -&gt; IW I A B i j x)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B a -&gt; W A B)
     (<span class="nv">k</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I),
          IsIndexedBy x (b b0) -&gt; IW I A B i j x)
     (<span class="nv">x</span> : I)
     (<span class="nv">r</span> : (i a = x) *
          (<span class="kr">forall</span> <span class="nv">c</span> : B a, IsIndexedBy (j a c) (b c)))
   =&gt;
   <span class="kr">match</span>
     fst r <span class="kr">in</span> (_ = i0) <span class="kr">return</span> (IW I A B i j i0)
   <span class="kr">with</span>
   | <span class="mi">1</span> =&gt;
       iw_sup I A B i j a
         (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; k y (j a y) (snd r y))
   <span class="kr">end</span>)
  (IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) (j a y) (b y)).<span class="mi">1</span>
  (j a y)
  (IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) (j a y) (b y)).<span class="mi">2</span> =
b y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> c.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk30">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x
o IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
    (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
       (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
     iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk31"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x0</span> : IW&#39; x =&gt;
 IW_rect I A B i j
   (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
   (<span class="kr">fun</span> (<span class="nv">a</span> : A)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
      (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
    iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x
   (IW&#39;_ind
      (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
      (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x1</span> : B a, IW&#39; (j a x1))
         (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
       iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x x0)) ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk32"><span class="nb">intro</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW&#39; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x
  (IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
      iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) x y) =
y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk33">rapply (IW&#39;_ind (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> =&gt; IW_rect I A B i j _ _ x _ = y)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW&#39; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">y</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B x, IW&#39; (j x x0)),
(<span class="kr">forall</span> <span class="nv">c</span> : B x,
 IW_rect I A B i j
   (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
   (<span class="kr">fun</span> (<span class="nv">a</span> : A)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
      (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
    iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c0 y0)) (j x c)
   (IW&#39;_ind
      (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
      (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
         (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B a, IW I A B i j (j a c0))
       =&gt; iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c0 y0))
      (j x c) (y c)) = y c) -&gt;
IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (i x)
  (IW&#39;_ind (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">c</span> : B a, IW I A B i j (j a c)) =&gt;
      iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (i x)
     (iw_sup&#39; x y)) = iw_sup&#39; x y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk34"><span class="nb">cbn</span>; <span class="nb">intros</span> a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW&#39; x</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a,
IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c0 y)) (j a c)
  (IW&#39;_ind
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
        (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B a,
              IW I A B i j (j a c0)) =&gt;
      iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c0 y))
     (j a c) (b c)) = b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup&#39; a
  (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt;
   IW_rect I A B i j
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
        (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
      iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
     (W_rect A B
        (<span class="kr">fun</span> <span class="nv">w</span> : W A B =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : I,
         IsIndexedBy x w -&gt; IW I A B i j x)
        (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B a -&gt; W A B)
           (<span class="nv">k</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I),
                IsIndexedBy x (b b0) -&gt; IW I A B i j x)
           (<span class="nv">x</span> : I)
           (<span class="nv">r</span> : (i a = x) *
                (<span class="kr">forall</span> <span class="nv">c</span> : B a,
                 IsIndexedBy (j a c) (b c))) =&gt;
         <span class="kr">match</span>
           fst r <span class="kr">in</span> (_ = i0) <span class="kr">return</span> (IW I A B i j i0)
         <span class="kr">with</span>
         | <span class="mi">1</span> =&gt;
             iw_sup I A B i j a
               (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt;
                k y0 (j a y0) (snd r y0))
         <span class="kr">end</span>) (b y).<span class="mi">1</span> (j a y) (b y).<span class="mi">2</span>)) = iw_sup&#39; a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk35"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW&#39; x</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a,
IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c0 y)) (j a c)
  (IW&#39;_ind
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
        (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B a,
              IW I A B i j (j a c0)) =&gt;
      iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c0 y))
     (j a c) (b c)) = b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt;
 IW_rect I A B i j
   (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
   (<span class="kr">fun</span> (<span class="nv">a</span> : A)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW I A B i j (j a y0))
      (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B a, IW&#39; (j a y0)) =&gt;
    iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; c y0)) (j a y)
   (W_rect A B
      (<span class="kr">fun</span> <span class="nv">w</span> : W A B =&gt;
       <span class="kr">forall</span> <span class="nv">x</span> : I, IsIndexedBy x w -&gt; IW I A B i j x)
      (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B a -&gt; W A B)
         (<span class="nv">k</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I),
              IsIndexedBy x (b b0) -&gt; IW I A B i j x)
         (<span class="nv">x</span> : I)
         (<span class="nv">r</span> : (i a = x) *
              (<span class="kr">forall</span> <span class="nv">c</span> : B a,
               IsIndexedBy (j a c) (b c))) =&gt;
       <span class="kr">match</span>
         fst r <span class="kr">in</span> (_ = i0) <span class="kr">return</span> (IW I A B i j i0)
       <span class="kr">with</span>
       | <span class="mi">1</span> =&gt;
           iw_sup I A B i j a
             (<span class="kr">fun</span> <span class="nv">y0</span> : B a =&gt; k y0 (j a y0) (snd r y0))
       <span class="kr">end</span>) (b y).<span class="mi">1</span> (j a y) (b y).<span class="mi">2</span>)) = b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk36">funext d.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW&#39; x</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0)</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B a,
IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c0 y)) (j a c)
  (IW&#39;_ind
     (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW&#39; l) =&gt; IW I A B i j l)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x0</span> : B a, IW&#39; (j a x0))
        (<span class="nv">c0</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B a,
              IW I A B i j (j a c0)) =&gt;
      iw_sup I A B i j a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c0 y))
     (j a c) (b c)) = b c</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>B a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I A B i j
  (<span class="kr">fun</span> (<span class="nv">l</span> : I) (<span class="nv">_</span> : IW I A B i j l) =&gt; IW&#39; l)
  (<span class="kr">fun</span> (<span class="nv">a</span> : A)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW I A B i j (j a y))
     (<span class="nv">c</span> : <span class="kr">forall</span> <span class="nv">y</span> : B a, IW&#39; (j a y)) =&gt;
   iw_sup&#39; a (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; c y)) (j a d)
  (W_rect A B
     (<span class="kr">fun</span> <span class="nv">w</span> : W A B =&gt;
      <span class="kr">forall</span> <span class="nv">x</span> : I, IsIndexedBy x w -&gt; IW I A B i j x)
     (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B a -&gt; W A B)
        (<span class="nv">k</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B a) (<span class="nv">x</span> : I),
             IsIndexedBy x (b b0) -&gt; IW I A B i j x)
        (<span class="nv">x</span> : I)
        (<span class="nv">r</span> : (i a = x) *
             (<span class="kr">forall</span> <span class="nv">c</span> : B a,
              IsIndexedBy (j a c) (b c))) =&gt;
      <span class="kr">match</span>
        fst r <span class="kr">in</span> (_ = i0) <span class="kr">return</span> (IW I A B i j i0)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt;
          iw_sup I A B i j a
            (<span class="kr">fun</span> <span class="nv">y</span> : B a =&gt; k y (j a y) (snd r y))
      <span class="kr">end</span>) (b d).<span class="mi">1</span> (j a d) (b d).<span class="mi">2</span>) = b d</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Reduction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Characterization of path types of IW-types. Argument due to Jasper Hugunin. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Paths</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> `{Funext}
    (I : <span class="kt">Type</span>) (A : <span class="kt">Type</span>) (B : A -&gt; <span class="kt">Type</span>)
    (i : A -&gt; I) (j : <span class="kr">forall</span> <span class="nv">x</span>, B x -&gt; I).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We wish to show that path types of IW-types are IW-types themselves. We do this by showing the path type satisfies the same induction principle as the IW-type hence they are equivalent. *)</span>

</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">I&#39;</span> : <span class="kt">Type</span> := {k : I &amp; IW I A B i j k * IW I A B i j k}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">A&#39;</span> : <span class="kt">Type</span> := {e : A &amp; (<span class="kr">forall</span> <span class="nv">c</span>, IW I A B i j (j e c)) * (<span class="kr">forall</span> <span class="nv">c</span>, IW I A B i j (j e c))}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">B&#39;</span> : A&#39; -&gt; <span class="kt">Type</span> := <span class="kr">fun</span> <span class="nv">X</span> =&gt; B X.<span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">i&#39;</span> : A&#39; -&gt; I&#39; := functor_sigma i (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; functor_prod (iw_sup I A B i j a) (iw_sup I A B i j a)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">j&#39;</span> : <span class="kr">forall</span> <span class="nv">k</span>, B&#39; k -&gt; I&#39; := <span class="kr">fun</span> <span class="nv">k</span> <span class="nv">c</span> =&gt; (j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">IWPath</span> : I&#39; -&gt; <span class="kt">Type</span> := <span class="kr">fun</span> <span class="nv">x</span> =&gt; fst (pr2 x) = snd (pr2 x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk37"><span class="kn">Definition</span> <span class="nf">iwpath_sup</span> (<span class="nv">x</span> : A&#39;)
    : (<span class="kr">forall</span> <span class="nv">y</span> : B&#39; x, IWPath (j&#39; x y)) -&gt; IWPath (i&#39; x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">y</span> : B&#39; x, IWPath (j&#39; x y)) -&gt; IWPath (i&#39; x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk38"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">y</span> : B&#39; x, IWPath (j&#39; x y)) -&gt; IWPath (i&#39; x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk39"><span class="nb">destruct</span> x <span class="kr">as</span> [x [c1 c2]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">y</span> : B&#39; (x; (c1, c2)),
 IWPath (j&#39; (x; (c1, c2)) y)) -&gt;
IWPath (i&#39; (x; (c1, c2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3a"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; (x; (c1, c2)),
IWPath (j&#39; (x; (c1, c2)) y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath (i&#39; (x; (c1, c2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3b"><span class="nb">unfold</span> IWPath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; (x; (c1, c2)),
IWPath (j&#39; (x; (c1, c2)) y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fst (i&#39; (x; (c1, c2))).<span class="mi">2</span> = snd (i&#39; (x; (c1, c2))).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3c"><span class="nb">cbn</span>; <span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; (x; (c1, c2)),
IWPath (j&#39; (x; (c1, c2)) y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c1 = c2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3d">funext l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1, c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; (x; (c1, c2)),
IWPath (j&#39; (x; (c1, c2)) y)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>B x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c1 l = c2 l</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> y.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3e"><span class="kn">Definition</span> <span class="nf">iwpath_sup_refl</span> (<span class="nv">x</span> : A) (<span class="nv">a</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c))
    : iwpath_sup (x; (a, a)) (apD10 <span class="mi">1</span>) = idpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iwpath_sup (x; (a, a)) (apD10 <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk3f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iwpath_sup (x; (a, a)) (apD10 <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk40"><span class="nb">unfold</span> iwpath_sup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (iw_sup I A B i j x)
  (path_forall a a (<span class="kr">fun</span> <span class="nv">l</span> : B x =&gt; apD10 <span class="mi">1</span> l)) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk41"><span class="nb">rewrite</span> path_forall_1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (iw_sup I A B i j x) <span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Ind</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      (<span class="nv">P</span> : <span class="kr">forall</span> <span class="nv">xab</span>, IWPath xab -&gt; <span class="kt">Type</span>)
      (<span class="nv">S</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, (<span class="kr">forall</span> <span class="nv">c</span>, P _ (b c)) -&gt; P (i&#39; a) (iwpath_sup a b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk42"><span class="kn">Definition</span> <span class="nf">IWPath_ind_refl</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">a</span>, P (l ; (a, a)) idpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> : IW I A B i j l), P (l; (a, a)) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk43"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> : IW I A B i j l), P (l; (a, a)) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk44">rapply (IW_rect I A B i j (<span class="kr">fun</span> <span class="nv">l</span> <span class="nv">a</span> =&gt; P (l; (a, a)) idpath)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">i0</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
(<span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (i0 y, i0 y)) <span class="mi">1</span>) -&gt;
P
  (i x;
  (iw_sup I A B i j x i0, iw_sup I A B i j x i0)) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk45"><span class="nb">intros</span> x a q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (a y, a y)) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i x; (iw_sup I A B i j x a, iw_sup I A B i j x a))
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk46"><span class="nb">pose</span> (S (x; (a, a)) _ q) <span class="kr">as</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (a y, a y)) <span class="mi">1</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>S (x; (a, a)) (<span class="kr">fun</span> <span class="nv">y</span> : B x =&gt; <span class="mi">1</span>) q</span></span><span class="hyp-type"><b>: </b><span>P (i&#39; (x; (a, a)))
  (iwpath_sup (x; (a, a)) (<span class="kr">fun</span> <span class="nv">y</span> : B x =&gt; <span class="mi">1</span>))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i x; (iw_sup I A B i j x a, iw_sup I A B i j x a))
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk47"><span class="nb">unfold</span> iwpath_sup <span class="kr">in</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (a y, a y)) <span class="mi">1</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>S (x; (a, a)) (<span class="kr">fun</span> <span class="nv">y</span> : B x =&gt; <span class="mi">1</span>) q</span></span><span class="hyp-type"><b>: </b><span>P (i&#39; (x; (a, a)))
  (ap (iw_sup I A B i j x)
     (path_forall a a (<span class="kr">fun</span> <span class="nv">l</span> : B x =&gt; <span class="mi">1</span>)))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i x; (iw_sup I A B i j x a, iw_sup I A B i j x a))
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk48"><span class="nb">refine</span> (transport (P (i x; (iw_sup I A B i j x a, iw_sup I A B i j x a))) _ p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (a y, a y)) <span class="mi">1</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>S (x; (a, a)) (<span class="kr">fun</span> <span class="nv">y</span> : B x =&gt; <span class="mi">1</span>) q</span></span><span class="hyp-type"><b>: </b><span>P (i&#39; (x; (a, a)))
  (ap (iw_sup I A B i j x)
     (path_forall a a (<span class="kr">fun</span> <span class="nv">l</span> : B x =&gt; <span class="mi">1</span>)))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (iw_sup I A B i j x)
  (path_forall a a (<span class="kr">fun</span> <span class="nv">l</span> : B x =&gt; <span class="mi">1</span>)) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk49"><span class="nb">change</span> (ap (iw_sup I A B i j x) (path_forall a a (apD10 idpath))
        = ap (iw_sup I A B i j x) <span class="mi">1</span>%path).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (a y, a y)) <span class="mi">1</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>S (x; (a, a)) (<span class="kr">fun</span> <span class="nv">y</span> : B x =&gt; <span class="mi">1</span>) q</span></span><span class="hyp-type"><b>: </b><span>P (i&#39; (x; (a, a)))
  (ap (iw_sup I A B i j x)
     (path_forall a a (<span class="kr">fun</span> <span class="nv">l</span> : B x =&gt; <span class="mi">1</span>)))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (iw_sup I A B i j x) (path_forall a a (apD10 <span class="mi">1</span>)) =
ap (iw_sup I A B i j x) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4a"><span class="nb">refine</span> (ap _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, P (j x y; (a y, a y)) <span class="mi">1</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>S (x; (a, a)) (<span class="kr">fun</span> <span class="nv">y</span> : B x =&gt; <span class="mi">1</span>) q</span></span><span class="hyp-type"><b>: </b><span>P (i&#39; (x; (a, a)))
  (ap (iw_sup I A B i j x)
     (path_forall a a (<span class="kr">fun</span> <span class="nv">l</span> : B x =&gt; <span class="mi">1</span>)))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">path_forall a a (apD10 <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> eissect.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4b"><span class="kn">Definition</span> <span class="nf">IWPath_ind</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">p</span>, P x p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : I&#39;) (<span class="nv">p</span> : IWPath x), P x p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : I&#39;) (<span class="nv">p</span> : IWPath x), P x p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4d"><span class="nb">intros</span> [x [a b]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">p</span> : IWPath (x; (a, b)), P (x; (a, b)) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4e"><span class="nb">unfold</span> IWPath; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">p</span> : a = b, P (x; (a, b)) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk4f"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (x; (a, a)) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IWPath_ind_refl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** The computation rule for the induction principle. *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk50"><span class="kn">Definition</span> <span class="nf">IWPath_ind_beta_iwpath_sup</span> (<span class="nv">x</span> : A&#39;) (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; x, IWPath (j&#39; x y))
      : IWPath_ind _ (iwpath_sup x h)
        = S x h (<span class="kr">fun</span> <span class="nv">c</span> =&gt; IWPath_ind _ (h c)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; x, IWPath (j&#39; x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; x) (iwpath_sup x h) =
S x h (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; x =&gt; IWPath_ind (j&#39; x c) (h c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk51"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; x, IWPath (j&#39; x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; x) (iwpath_sup x h) =
S x h (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; x =&gt; IWPath_ind (j&#39; x c) (h c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk52"><span class="nb">destruct</span> x <span class="kr">as</span> [x [a b]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; (x; (a, b)),
IWPath (j&#39; (x; (a, b)) y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; (x; (a, b))) (iwpath_sup (x; (a, b)) h) =
S (x; (a, b)) h
  (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; (x; (a, b)) =&gt;
   IWPath_ind (j&#39; (x; (a, b)) c) (h c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk53"><span class="nb">cbv</span> <span class="kr">in</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; (x; (a, b))) (iwpath_sup (x; (a, b)) h) =
S (x; (a, b)) h
  (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; (x; (a, b)) =&gt;
   IWPath_ind (j&#39; (x; (a, b)) c) (h c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk54"><span class="nb">refine</span> (_ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; (x; (a, b))) (iwpath_sup (x; (a, b)) h) =
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk55"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> =
S (x; (a, b)) h
  (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; (x; (a, b)) =&gt;
   IWPath_ind (j&#39; (x; (a, b)) c) (h c))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk56">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; (x; (a, b))) (iwpath_sup (x; (a, b)) h) =
<span class="nl">?Goal</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk57"><span class="nb">refine</span> (_ @ ap _ (eisadj (path_forall _ _) h)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind (i&#39; (x; (a, b))) (iwpath_sup (x; (a, b)) h) =
<span class="nl">?Goal1</span> (eisretr (path_forall a b) (path_forall a b h))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk58"><span class="nb">refine</span> (paths_ind _
          (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">p&#39;</span> =&gt;
            paths_ind _ (<span class="kr">fun</span> <span class="nv">r</span> <span class="nv">p&#39;&#39;</span> =&gt; P (i x ; (iw_sup I A B i j x a , r)) p&#39;&#39;)
              (IWPath_ind_refl (i x) (iw_sup I A B i j x a))
              _ (ap (iw_sup I A B i j x) p&#39;)
            = paths_rec (path_forall _ _ (apD10 p&#39;))
                (<span class="kr">fun</span> <span class="nv">p&#39;&#39;</span> =&gt; P (_ ; (_, _)) (ap (iw_sup I A B i j x) p&#39;&#39;))
                (S (x ; (a, b)) (apD10 p&#39;)
                (<span class="kr">fun</span> <span class="nv">c</span> =&gt; IWPath_ind (_ ; (_, _)) (apD10 p&#39; c)))
                p&#39; (eissect apD10 p&#39;))
          _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">paths_ind (iw_sup I A B i j x a)
  (<span class="kr">fun</span> (<span class="nv">r</span> : IW I A B i j (i x))
     (<span class="nv">p&#39;&#39;</span> : iw_sup I A B i j x a = r) =&gt;
   P (i x; (iw_sup I A B i j x a, r)) p&#39;&#39;)
  (IWPath_ind_refl (i x) (iw_sup I A B i j x a))
  (iw_sup I A B i j x a) (ap (iw_sup I A B i j x) <span class="mi">1</span>) =
paths_rec (path_forall a a (apD10 <span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">p&#39;&#39;</span> : a = a =&gt;
   P
     (i x;
     (iw_sup I A B i j x a, iw_sup I A B i j x a))
     (ap (iw_sup I A B i j x) p&#39;&#39;))
  (S (x; (a, a)) (apD10 <span class="mi">1</span>)
     (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; (x; (a, a)) =&gt;
      IWPath_ind (j x c; (a c, a c)) (apD10 <span class="mi">1</span> c))) <span class="mi">1</span>
  (eissect apD10 <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (transport_compose _ _ _ _)^.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk59">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">xab</span> : I&#39;, IWPath xab -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A&#39;)
(<span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; a, IWPath (j&#39; a x)),
(<span class="kr">forall</span> <span class="nv">c</span> : B&#39; a, P (j&#39; a c) (b c)) -&gt;
P (i&#39; a) (iwpath_sup a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, a y = b y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">paths_rec
  (path_forall a (snd (x; (a, b)).<span class="mi">2</span>)
     (apD10
        (path_forall (fst (x; (a, b)).<span class="mi">2</span>)
           (snd (x; (a, b)).<span class="mi">2</span>)
           ((<span class="kr">fun</span> <span class="nv">l</span> : B (x; (a, b)).<span class="mi">1</span> =&gt; h l)
            :
            fst (x; (a, b)).<span class="mi">2</span> == snd (x; (a, b)).<span class="mi">2</span>))))
  (<span class="kr">fun</span> <span class="nv">p&#39;&#39;</span> : a = snd (x; (a, b)).<span class="mi">2</span> =&gt;
   P
     (i x;
     (iw_sup I A B i j x a,
     iw_sup I A B i j x (snd (x; (a, b)).<span class="mi">2</span>)))
     (ap (iw_sup I A B i j x) p&#39;&#39;))
  (S (x; (a, snd (x; (a, b)).<span class="mi">2</span>))
     (apD10
        (path_forall (fst (x; (a, b)).<span class="mi">2</span>)
           (snd (x; (a, b)).<span class="mi">2</span>)
           ((<span class="kr">fun</span> <span class="nv">l</span> : B (x; (a, b)).<span class="mi">1</span> =&gt; h l)
            :
            fst (x; (a, b)).<span class="mi">2</span> == snd (x; (a, b)).<span class="mi">2</span>)))
     (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; (x; (a, snd (x; (a, b)).<span class="mi">2</span>)) =&gt;
      IWPath_ind (j x c; (a c, snd (x; (a, b)).<span class="mi">2</span> c))
        (apD10
           (path_forall (fst (x; (a, b)).<span class="mi">2</span>)
              (snd (x; (a, b)).<span class="mi">2</span>)
              ((<span class="kr">fun</span> <span class="nv">l</span> : B (x; (a, b)).<span class="mi">1</span> =&gt; h l)
               :
               fst (x; (a, b)).<span class="mi">2</span> == snd (x; (a, b)).<span class="mi">2</span>))
           c)))
  (path_forall (fst (x; (a, b)).<span class="mi">2</span>) (snd (x; (a, b)).<span class="mi">2</span>)
     ((<span class="kr">fun</span> <span class="nv">l</span> : B (x; (a, b)).<span class="mi">1</span> =&gt; h l)
      :
      fst (x; (a, b)).<span class="mi">2</span> == snd (x; (a, b)).<span class="mi">2</span>))
  (ap (path_forall a b) (eissect (path_forall a b) h)) =
S (x; (a, b)) h
  (<span class="kr">fun</span> <span class="nv">c</span> : B&#39; (x; (a, b)) =&gt;
   IWPath_ind (j&#39; (x; (a, b)) c) (h c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">cbn</span>; <span class="nb">destruct</span> (eisretr apD10 h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Ind</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The path type of an IW-type is again an IW-type. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk5a"><span class="kn">Definition</span> <span class="nf">equiv_path_iwtype</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j x)
    : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) &lt;~&gt; a = b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) &lt;~&gt; a = b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk5b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) &lt;~&gt; a = b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk5c"><span class="nb">change</span> (IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) &lt;~&gt; IWPath (x; (a,b))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) &lt;~&gt; IWPath (x; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk5d">snapply equiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) -&gt; IWPath (x; (a, b))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk5e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk5e"><hr></label><div class="goal-conclusion">IWPath (x; (a, b)) -&gt; IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b))</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk5f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk5f"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk60" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk60"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o <span class="nl">?f</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk61">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) -&gt; IWPath (x; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk62"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath (x; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk63"><span class="nb">induction</span> y <span class="kr">as</span> [e f g].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath (i&#39; e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk64"><span class="nb">apply</span> iwpath_sup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk65"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>B&#39; e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath (j&#39; e y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> g.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk66">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath (x; (a, b)) -&gt; IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk67" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk67"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) =&gt;
 <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
 IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
   (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s0) =&gt;
    IWPath s0)
   (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
           IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
      (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
    iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) s y) o 
<span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk68" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk68"><hr></label><div class="goal-conclusion"><span class="nl">?g</span>
o (<span class="kr">fun</span> <span class="nv">y</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) =&gt;
   <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
   IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s0) =&gt;
      IWPath s0)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
      iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) s y) ==
idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk69">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath (x; (a, b)) -&gt; IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk6a"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IWPath (x; (a, b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk6b"><span class="nb">induction</span> y <span class="kr">as</span> [e f g] <span class="nb">using</span> IWPath_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (i&#39; e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk6c"><span class="nb">apply</span> iw_sup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk6d"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>B&#39; e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> g.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk6e">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) =&gt;
 <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
 IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
   (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s0) =&gt;
    IWPath s0)
   (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
           IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
      (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
    iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) s y)
o (<span class="kr">fun</span> <span class="nv">y</span> : IWPath (x; (a, b)) =&gt;
   <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
   IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IWPath s0) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s0)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
     s y) == idmap</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk6f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk6f"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : IWPath (x; (a, b)) =&gt;
 <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
 IWPath_ind
   (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IWPath s0) =&gt;
    IW I&#39; A&#39; B&#39; i&#39; j&#39; s0)
   (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
      (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c))
    =&gt; iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
   s y)
o (<span class="kr">fun</span> <span class="nv">y</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) =&gt;
   <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
   IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s0) =&gt;
      IWPath s0)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
      iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) s y) ==
idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk70">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) =&gt;
 <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
 IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
   (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s0) =&gt;
    IWPath s0)
   (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
           IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
      (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
    iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) s y)
o (<span class="kr">fun</span> <span class="nv">y</span> : IWPath (x; (a, b)) =&gt;
   <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
   IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IWPath s0) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s0)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
     s y) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk71"><span class="nb">intros</span> y; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IWPath (x; (a, b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt; IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) (x; (a, b))
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y))
     (x; (a, b)) y) = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk72"><span class="nb">induction</span> y <span class="kr">as</span> [a&#39; b&#39; IH] <span class="nb">using</span> IWPath_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; a&#39;, IWPath (j&#39; a&#39; x)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; a&#39;,
IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
   IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
  (j&#39; a&#39; c)
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c0)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
        (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
     (j&#39; a&#39; c) (b&#39; c)) = 
b&#39; c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt; IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) (i&#39; a&#39;)
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y))
     (i&#39; a&#39;) (iwpath_sup a&#39; b&#39;)) = iwpath_sup a&#39; b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk73"><span class="nb">rewrite</span> IWPath_ind_beta_iwpath_sup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; a&#39;, IWPath (j&#39; a&#39; x)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; a&#39;,
IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
   IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
  (j&#39; a&#39; c)
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c0)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
        (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
     (j&#39; a&#39; c) (b&#39; c)) = 
b&#39; c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt; IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) (i&#39; a&#39;)
  (iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; a&#39;
     (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; a&#39; =&gt;
      IWPath_ind
        (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
         IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
        (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
           (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
           (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
                IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
         iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
           (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) (j&#39; a&#39; y) (b&#39; y))) =
iwpath_sup a&#39; b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk74"><span class="nb">simpl</span>; f_ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; a&#39;, IWPath (j&#39; a&#39; x)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; a&#39;,
IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
   IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
  (j&#39; a&#39; c)
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c0)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
        (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
     (j&#39; a&#39; c) (b&#39; c)) = 
b&#39; c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : B&#39; a&#39; =&gt;
 IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
   (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt; IWPath s)
   (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
           IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
      (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
    iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) (j&#39; a&#39; y)
   (IWPath_ind
      (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
       IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
      (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
         (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
         (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
              IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
       iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
      (j&#39; a&#39; y) (b&#39; y))) = b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk75">funext c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>a'</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B&#39; a&#39;, IWPath (j&#39; a&#39; x)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B&#39; a&#39;,
IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
   IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
  (j&#39; a&#39; c)
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c0)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
        (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) 
     (j&#39; a&#39; c) (b&#39; c)) = 
b&#39; c</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B&#39; a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt; IWPath s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
   iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) (j&#39; a&#39; c)
  (IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y))
     (j&#39; a&#39; c) (b&#39; c)) = b&#39; c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IH.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk76">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y</span> : IWPath (x; (a, b)) =&gt;
 <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
 IWPath_ind
   (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IWPath s0) =&gt;
    IW I&#39; A&#39; B&#39; i&#39; j&#39; s0)
   (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
      (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
      (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c))
    =&gt; iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
   s y)
o (<span class="kr">fun</span> <span class="nv">y</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b)) =&gt;
   <span class="kr">let</span> <span class="nv">s</span> := (x; (a, b)) <span class="kr">in</span>
   IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s0</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s0) =&gt;
      IWPath s0)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0)) =&gt;
      iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) s y) ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk77"><span class="nb">intros</span> y; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW I&#39; A&#39; B&#39; i&#39; j&#39; (x; (a, b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt; IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c))
   =&gt; iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y))
  (x; (a, b))
  (IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
      IWPath s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
      iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) (x; (a, b))
     y) = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk78"><span class="nb">induction</span> y <span class="kr">as</span> [e f IH].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
IWPath_ind
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
   IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
   iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
     (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) 
  (j&#39; e y)
  (IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
      IWPath s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0))
      =&gt; iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
     (j&#39; e y) (f y)) = f y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt; IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c))
   =&gt; iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y))
  (i&#39; e)
  (IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
      IWPath s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IWPath (j&#39; e y)) =&gt;
      iwpath_sup e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y)) (i&#39; e)
     (iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e f)) =
iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk79"><span class="nb">rewrite</span> IWPath_ind_beta_iwpath_sup.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
IWPath_ind
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
   IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
   iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
     (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) 
  (j&#39; e y)
  (IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
      IWPath s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0))
      =&gt; iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
     (j&#39; e y) (f y)) = f y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
  (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt;
   IWPath_ind
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
      IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
      iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
     (j&#39; e y)
     ((<span class="kr">fix</span> F
         (y0 : I&#39;) (i : IW I&#39; A&#39; B&#39; i&#39; j&#39; y0) {<span class="kr">struct</span>
          i} : IWPath y0 :=
         <span class="kr">match</span>
           i <span class="kr">in</span> (IW _ _ _ _ _ y1) <span class="kr">return</span> (IWPath y1)
         <span class="kr">with</span>
         | @iw_sup _ _ _ _ _ x i0 =&gt;
             iwpath_sup x
               (<span class="kr">fun</span> <span class="nv">y1</span> : B&#39; x =&gt; F (j&#39; x y1) (i0 y1))
         <span class="kr">end</span>) (j&#39; e y) (f y))) =
iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7a">f_ap; funext c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y)</span></span></span><br><span><var>IH</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B&#39; e,
IWPath_ind
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt;
   IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
     (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e,
          IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c)) =&gt;
   iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e
     (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0)) 
  (j&#39; e y)
  (IW_rect I&#39; A&#39; B&#39; i&#39; j&#39;
     (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IW I&#39; A&#39; B&#39; i&#39; j&#39; s) =&gt;
      IWPath s)
     (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;)
        (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e,
             IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e y0))
        (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B&#39; e, IWPath (j&#39; e y0))
      =&gt; iwpath_sup e (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; e =&gt; g y0))
     (j&#39; e y) (f y)) = f y</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B&#39; e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IWPath_ind
  (<span class="kr">fun</span> (<span class="nv">s</span> : I&#39;) (<span class="nv">_</span> : IWPath s) =&gt; IW I&#39; A&#39; B&#39; i&#39; j&#39; s)
  (<span class="kr">fun</span> (<span class="nv">e</span> : A&#39;) (<span class="nv">_</span> : <span class="kr">forall</span> <span class="nv">x</span> : B&#39; e, IWPath (j&#39; e x))
     (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">c</span> : B&#39; e, IW I&#39; A&#39; B&#39; i&#39; j&#39; (j&#39; e c))
   =&gt; iw_sup I&#39; A&#39; B&#39; i&#39; j&#39; e (<span class="kr">fun</span> <span class="nv">y</span> : B&#39; e =&gt; g y))
  (j&#39; e c)
  ((<span class="kr">fix</span> F
      (y : I&#39;) (i : IW I&#39; A&#39; B&#39; i&#39; j&#39; y) {<span class="kr">struct</span> i} :
        IWPath y :=
      <span class="kr">match</span>
        i <span class="kr">in</span> (IW _ _ _ _ _ y0) <span class="kr">return</span> (IWPath y0)
      <span class="kr">with</span>
      | @iw_sup _ _ _ _ _ x i0 =&gt;
          iwpath_sup x
            (<span class="kr">fun</span> <span class="nv">y0</span> : B&#39; x =&gt; F (j&#39; x y0) (i0 y0))
      <span class="kr">end</span>) (j&#39; e c) (f c)) = f c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IH.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Characterization of fiber *)</span>

  <span class="sd">(** We begin with two auxiliary lemmas that will be explained shortly. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">adjust_hfiber</span> {<span class="nv">X</span> <span class="nv">Y</span>} {<span class="nv">f</span> : X -&gt; Y} {<span class="nv">y</span> <span class="nv">z</span>}
    : hfiber f y -&gt; y = z -&gt; hfiber f z
    := <span class="kr">fun</span> &#39;(x ; p) =&gt; <span class="kr">match</span> p <span class="kr">with</span> idpath =&gt; <span class="kr">fun</span> <span class="nv">q</span> =&gt; (x ; q) <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7b"><span class="kn">Local Definition</span> <span class="nf">adjust_hfiber_idpath</span> {<span class="nv">X</span> <span class="nv">Y</span>} {<span class="nv">f</span> : X -&gt; Y} {<span class="nv">y</span> <span class="nv">xp</span>}
    : adjust_hfiber (f:=f) xp (idpath : y = y) = xp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Y</span></span></span><br><span><var>xp</var><span class="hyp-type"><b>: </b><span>hfiber f y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">adjust_hfiber xp (<span class="mi">1</span> : y = y) = xp</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Y</span></span></span><br><span><var>xp</var><span class="hyp-type"><b>: </b><span>hfiber f y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">adjust_hfiber xp (<span class="mi">1</span> : y = y) = xp</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">destruct</span> xp <span class="kr">as</span> [x []].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We wish to show an induction principle coming from the path type of the fiber. However to do this we need to be a bit more general by allowing the elements of the IW-type to differ in label up to equality. This allows us to do prove this induction principle easily, and later we will derive the induction principle where the labels are the same. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7d"><span class="kn">Local Definition</span> <span class="nf">path_iw_to_hfiber_ind&#39;</span>
    (<span class="nv">P</span> : <span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) (<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
      iw_to_hfiber_index la a = adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span>)
    (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">a</span> <span class="nv">b</span>,
      P (i x) (i x) idpath (iw_sup I A B i j x a) (iw_sup I A B i j x b) idpath)
    : <span class="kr">forall</span> <span class="nv">la</span> <span class="nv">lb</span> <span class="nv">le</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span>, P la lb le a b p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb)
(<span class="nv">p</span> : iw_to_hfiber_index la a =
     adjust_hfiber (iw_to_hfiber_index lb b) le),
P la lb le a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb)
(<span class="nv">p</span> : iw_to_hfiber_index la a =
     adjust_hfiber (iw_to_hfiber_index lb b) le),
P la lb le a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk7f"><span class="nb">intros</span> la lb le a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>la, lb</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>le</var><span class="hyp-type"><b>: </b><span>lb = la</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>IW I A B i j la</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j lb</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">p</span> : iw_to_hfiber_index la a =
    adjust_hfiber (iw_to_hfiber_index lb b) le,
P la lb le a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk80"><span class="nb">destruct</span> a <span class="kr">as</span> [xa cha], b <span class="kr">as</span> [xb chb].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>xa, xb</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>le</var><span class="hyp-type"><b>: </b><span>i xb = i xa</span></span></span><br><span><var>cha</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xa, IW I A B i j (j xa y)</span></span></span><br><span><var>chb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xb, IW I A B i j (j xb y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">p</span> : iw_to_hfiber_index (i xa)
      (iw_sup I A B i j xa cha) =
    adjust_hfiber
      (iw_to_hfiber_index (i xb)
         (iw_sup I A B i j xb chb)) le,
P (i xa) (i xb) le (iw_sup I A B i j xa cha)
  (iw_sup I A B i j xb chb) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk81"><span class="nb">intros</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>xa, xb</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>le</var><span class="hyp-type"><b>: </b><span>i xb = i xa</span></span></span><br><span><var>cha</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xa, IW I A B i j (j xa y)</span></span></span><br><span><var>chb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xb, IW I A B i j (j xb y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index (i xa)
  (iw_sup I A B i j xa cha) =
adjust_hfiber
  (iw_to_hfiber_index (i xb)
     (iw_sup I A B i j xb chb)) le</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i xa) (i xb) le (iw_sup I A B i j xa cha)
  (iw_sup I A B i j xb chb) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk82"><span class="nb">refine</span> (paths_ind _
      (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">q</span> =&gt; <span class="kr">forall</span> <span class="nv">chb</span>, P _ _ _ _ (iw_sup _ _ _ _ _ _ chb) q) _ _ p chb).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>xa, xb</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>le</var><span class="hyp-type"><b>: </b><span>i xb = i xa</span></span></span><br><span><var>cha</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xa, IW I A B i j (j xa y)</span></span></span><br><span><var>chb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xb, IW I A B i j (j xb y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index (i xa)
  (iw_sup I A B i j xa cha) =
adjust_hfiber
  (iw_to_hfiber_index (i xb)
     (iw_sup I A B i j xb chb)) le</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">chb</span> : <span class="kr">forall</span>
      <span class="nv">y</span> : B
            (iw_to_hfiber_index (i xa)
               (iw_sup I A B i j xa cha)).<span class="mi">1</span>,
      IW I A B i j
        (j
           (iw_to_hfiber_index (i xa)
              (iw_sup I A B i j xa cha)).<span class="mi">1</span> y),
P (i xa)
  (i
     (iw_to_hfiber_index (i xa)
        (iw_sup I A B i j xa cha)).<span class="mi">1</span>)
  (iw_to_hfiber_index (i xa) (iw_sup I A B i j xa cha)).<span class="mi">2</span>
  (iw_sup I A B i j xa cha)
  (iw_sup I A B i j
     (iw_to_hfiber_index (i xa)
        (iw_sup I A B i j xa cha)).<span class="mi">1</span> chb) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk83"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>xa, xb</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>le</var><span class="hyp-type"><b>: </b><span>i xb = i xa</span></span></span><br><span><var>cha</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xa, IW I A B i j (j xa y)</span></span></span><br><span><var>chb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B xb, IW I A B i j (j xb y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index (i xa)
  (iw_sup I A B i j xa cha) =
adjust_hfiber
  (iw_to_hfiber_index (i xb)
     (iw_sup I A B i j xb chb)) le</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">y</span> : B
      (iw_to_hfiber_index 
         (i xa) (iw_sup I A B i j xa cha)).<span class="mi">1</span>,
IW I A B i j
  (j
     (iw_to_hfiber_index 
        (i xa) (iw_sup I A B i j xa cha)).<span class="mi">1</span> y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i xa)
  (i
     (iw_to_hfiber_index (i xa)
        (iw_sup I A B i j xa cha)).<span class="mi">1</span>)
  (iw_to_hfiber_index (i xa) (iw_sup I A B i j xa cha)).<span class="mi">2</span>
  (iw_sup I A B i j xa cha)
  (iw_sup I A B i j
     (iw_to_hfiber_index (i xa)
        (iw_sup I A B i j xa cha)).<span class="mi">1</span> x) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Induction principle for paths in the fiber. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk84"><span class="kn">Local Definition</span> <span class="nf">path_iw_to_hfiber_ind</span>
    (<span class="nv">P</span> : <span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
      iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt; <span class="kt">Type</span>)
    (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">a</span> <span class="nv">b</span>,
      P (i x) (iw_sup I A B i j x a) (iw_sup I A B i j x b) idpath)
    : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span>, P l a b p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : iw_to_hfiber_index l a = iw_to_hfiber_index l b),
P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk85"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : iw_to_hfiber_index l a = iw_to_hfiber_index l b),
P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk86"><span class="nb">intros</span> l a b p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk87">transparent <span class="nb">assert</span> (Q : (<span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
      (<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
      iw_to_hfiber_index la a = adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk88" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="nl">?Goal</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk88"><hr></label><div class="goal-conclusion">P l a b p</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk89">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8a"><span class="nb">intros</span> la lb le.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>la, lb</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>le</var><span class="hyp-type"><b>: </b><span>lb = la</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8b"><span class="nb">destruct</span> le.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>lb</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : IW I A B i j lb,
iw_to_hfiber_index lb a =
adjust_hfiber (iw_to_hfiber_index lb b) <span class="mi">1</span> -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8c"><span class="nb">intros</span> a&#39; b&#39; p&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>lb</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a', b'</var><span class="hyp-type"><b>: </b><span>IW I A B i j lb</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index lb a&#39; =
adjust_hfiber (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8d"><span class="nb">refine</span> (P lb _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>lb</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a', b'</var><span class="hyp-type"><b>: </b><span>IW I A B i j lb</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index lb a&#39; =
adjust_hfiber (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_to_hfiber_index lb <span class="nl">?Goal0</span> =
iw_to_hfiber_index lb <span class="nl">?Goal1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (p&#39; @ adjust_hfiber_idpath).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8e">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk8f">transparent <span class="nb">assert</span> (h&#39; : ((<span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
        Q (i x) (i x) idpath (iw_sup I A B i j x a) (iw_sup I A B i j x b) idpath))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>h'</var><span><span class="hyp-body"><b>:= </b><span><span class="nl">?Goal</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span></span><br></div><label class="goal-separator" for="iwtype-v-chk90"><hr></label><div class="goal-conclusion">P l a b p</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk91">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk92"><span class="nb">intros</span> x a&#39; b&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a', b'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a&#39;)
  (iw_sup I A B i j x b&#39;) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> h.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk93">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>h'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y))
=&gt; h x a&#39; b&#39;</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk94"><span class="nb">pose</span> (path_iw_to_hfiber_ind&#39; Q h&#39; l l idpath a b (p @ adjust_hfiber_idpath^)) <span class="kr">as</span> q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>h'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y))
=&gt; h x a&#39; b&#39;</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>path_iw_to_hfiber_ind&#39; Q h&#39; l l <span class="mi">1</span> a b
  (p @ adjust_hfiber_idpath^)</span></span><span class="hyp-type"><b>: </b><span>Q l l <span class="mi">1</span> a b (p @ adjust_hfiber_idpath^)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk95"><span class="nb">refine</span> (transport (P l a b) _ q).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_to_hfiber_index l a = iw_to_hfiber_index l b</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la) =&gt;
<span class="kr">match</span>
  le <span class="kr">as</span> p <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (<span class="kr">forall</span> (<span class="nv">a</span> : IW I A B i j i0)
     (<span class="nv">b</span> : IW I A B i j lb),
     iw_to_hfiber_index i0 a =
     adjust_hfiber (iw_to_hfiber_index lb b) p -&gt;
     <span class="kt">Type</span>)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt;
    <span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : IW I A B i j lb)
      (<span class="nv">p&#39;</span> : iw_to_hfiber_index lb a&#39; =
            adjust_hfiber
              (iw_to_hfiber_index lb b&#39;) <span class="mi">1</span>) =&gt;
    P lb a&#39; b&#39; (p&#39; @ adjust_hfiber_idpath)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">la</span> <span class="nv">lb</span> : I) (<span class="nv">le</span> : lb = la)
(<span class="nv">a</span> : IW I A B i j la) (<span class="nv">b</span> : IW I A B i j lb),
iw_to_hfiber_index la a =
adjust_hfiber (iw_to_hfiber_index lb b) le -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>h'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y))
=&gt; h x a&#39; b&#39;</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
Q (i x) (i x) <span class="mi">1</span> (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) <span class="mi">1</span></span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>path_iw_to_hfiber_ind&#39; Q h&#39; l l <span class="mi">1</span> a b
  (p @ adjust_hfiber_idpath^)</span></span><span class="hyp-type"><b>: </b><span>Q l l <span class="mi">1</span> a b (p @ adjust_hfiber_idpath^)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(p @ adjust_hfiber_idpath^) @ adjust_hfiber_idpath = p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_pV_p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Induction principle for families over hfiber of i&#39; *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk96"><span class="kn">Local Definition</span> <span class="nf">hfiber_ind</span>
    (<span class="nv">P</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span>, hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span>)
    (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">a</span> <span class="nv">b</span>, P (i x) (iw_sup I A B i j x a)
      (iw_sup I A B i j x b) ((x; (a, b)); idpath))
    : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span>, P l a b p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : hfiber i&#39; (l; (a, b))), P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk97"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : hfiber i&#39; (l; (a, b))), P l a b p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk98"><span class="nb">intros</span> l a b [[x [y z]] p].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>i&#39; (x; (y, z)) = (l; (a, b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b ((x; (y, z)); p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk99"><span class="nb">unfold</span> i&#39;, functor_sigma, functor_prod <span class="kr">in</span> p; <span class="nb">simpl</span> <span class="kr">in</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(i x;
(iw_sup I A B i j x y, iw_sup I A B i j x z)) =
(l; (a, b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b ((x; (y, z)); p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9a"><span class="nb">revert</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">p</span> : (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z)) =
    (l; (a, b)), P l a b ((x; (y, z)); p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9b"><span class="nb">refine</span> (equiv_ind (equiv_path_sigma _ _ _) _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">x0</span> : {p
     : (i x;
       (iw_sup I A B i j x y, iw_sup I A B i j x z)).<span class="mi">1</span> =
       (l; (a, b)).<span class="mi">1</span> &amp;
     transport
       (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
       p
       (i x;
       (iw_sup I A B i j x y, iw_sup I A B i j x z)).<span class="mi">2</span> =
     (l; (a, b)).<span class="mi">2</span>},
P l a b
  ((x; (y, z));
  equiv_path_sigma
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (l; (a, b)) x0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9c"><span class="nb">intros</span> [p q]; <span class="nb">simpl</span> <span class="kr">in</span> p, q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>i x = l</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>transport
  (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k) p
  (iw_sup I A B i j x y, iw_sup I A B i j x z) =
(a, b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P l a b
  ((x; (y, z));
  equiv_path_sigma
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (l; (a, b)) (p; q))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9d"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>transport
  (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k) <span class="mi">1</span>
  (iw_sup I A B i j x y, iw_sup I A B i j x z) =
(a, b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i x) a b
  ((x; (y, z));
  equiv_path_sigma
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (i x; (a, b)) (<span class="mi">1</span>; q))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9e"><span class="nb">revert</span> q; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">q</span> : (iw_sup I A B i j x y, iw_sup I A B i j x z) =
    (a, b),
P (i x) a b
  ((x; (y, z));
  path_sigma_uncurried
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (i x; (a, b)) (<span class="mi">1</span>; q))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chk9f"><span class="nb">refine</span> (equiv_ind (equiv_path_prod _ _) _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">x0</span> : (fst (iw_sup I A B i j x y, iw_sup I A B i j x z) =
      fst (a, b)) *
     (snd (iw_sup I A B i j x y, iw_sup I A B i j x z) =
      snd (a, b)),
P (i x) a b
  ((x; (y, z));
  path_sigma_uncurried
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (i x; (a, b))
    (<span class="mi">1</span>;
    equiv_path_prod
      (iw_sup I A B i j x y, iw_sup I A B i j x z)
      (a, b) x0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka0"><span class="nb">cbn</span>; <span class="nb">intros</span> [p q].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>iw_sup I A B i j x y = a</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>iw_sup I A B i j x z = b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i x) a b
  ((x; (y, z));
  path_sigma_uncurried
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (i x; (a, b))
    (<span class="mi">1</span>;
    path_prod_uncurried
      (iw_sup I A B i j x y, iw_sup I A B i j x z)
      (a, b) (p, q)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka1"><span class="nb">destruct</span> p, q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
hfiber i&#39; (l; (a, b)) -&gt; <span class="kt">Type</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
P (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b) 
  ((x; (a, b)); <span class="mi">1</span>)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, z</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P (i x) (iw_sup I A B i j x y) (iw_sup I A B i j x z)
  ((x; (y, z));
  path_sigma_uncurried
    (<span class="kr">fun</span> <span class="nv">k</span> : I =&gt; IW I A B i j k * IW I A B i j k)
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (i x;
    (iw_sup I A B i j x y, iw_sup I A B i j x z))
    (<span class="mi">1</span>;
    path_prod_uncurried
      (iw_sup I A B i j x y, iw_sup I A B i j x z)
      (iw_sup I A B i j x y, iw_sup I A B i j x z)
      (<span class="mi">1</span>, <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">path_iw_to_hfiber</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span>
    : iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt; hfiber i&#39; (l; (a, b))
    := path_iw_to_hfiber_ind (<span class="kr">fun</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">_</span> =&gt; hfiber i&#39; (l ; (a, b)))
        (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; ((x ; (a, b)); idpath)) l a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">hfiber_to_path_iw</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span>
    : hfiber i&#39; (l; (a, b)) -&gt; iw_to_hfiber_index l a = iw_to_hfiber_index l b
    := hfiber_ind
        (<span class="kr">fun</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">_</span> =&gt; iw_to_hfiber_index l a = iw_to_hfiber_index l b)
        (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; idpath) l a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka2"><span class="kn">Local Definition</span> <span class="nf">path_iw_to_hfiber_to_path_iw</span>
    : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span>, path_iw_to_hfiber l a b (hfiber_to_path_iw l a b p) = p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : hfiber i&#39; (l; (a, b))),
path_iw_to_hfiber l a b (hfiber_to_path_iw l a b p) =
p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : hfiber i&#39; (l; (a, b))),
path_iw_to_hfiber l a b (hfiber_to_path_iw l a b p) =
p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka4"><span class="nb">refine</span> (hfiber_ind (<span class="kr">fun</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span>
      =&gt; path_iw_to_hfiber l a b (hfiber_to_path_iw l a b p) = p) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
path_iw_to_hfiber (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b)
  (hfiber_to_path_iw (i x) (iw_sup I A B i j x a)
     (iw_sup I A B i j x b) ((x; (a, b)); <span class="mi">1</span>)) =
((x; (a, b)); <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka5"><span class="nb">intros</span> x a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">path_iw_to_hfiber (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b)
  (hfiber_to_path_iw (i x) (iw_sup I A B i j x a)
     (iw_sup I A B i j x b) ((x; (a, b)); <span class="mi">1</span>)) =
((x; (a, b)); <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka6"><span class="kn">Local Definition</span> <span class="nf">hfiber_to_path_iw_to_hfiber</span>
    : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">p</span>, hfiber_to_path_iw l a b (path_iw_to_hfiber l a b p) = p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : iw_to_hfiber_index l a = iw_to_hfiber_index l b),
hfiber_to_path_iw l a b (path_iw_to_hfiber l a b p) =
p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
(<span class="nv">p</span> : iw_to_hfiber_index l a = iw_to_hfiber_index l b),
hfiber_to_path_iw l a b (path_iw_to_hfiber l a b p) =
p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka8">rapply path_iw_to_hfiber_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">a</span> <span class="nv">b</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)),
hfiber_to_path_iw (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b)
  (path_iw_to_hfiber (i x) (iw_sup I A B i j x a)
     (iw_sup I A B i j x b) <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chka9"><span class="nb">intros</span> x a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber_to_path_iw (i x) (iw_sup I A B i j x a)
  (iw_sup I A B i j x b)
  (path_iw_to_hfiber (i x) (iw_sup I A B i j x a)
     (iw_sup I A B i j x b) <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The path type of the fibers of [i] is equivalent to the fibers of [i&#39;]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkaa"><span class="kn">Definition</span> <span class="nf">equiv_path_hfiber_index</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l)
    : iw_to_hfiber_index l a = iw_to_hfiber_index l b &lt;~&gt; hfiber i&#39; (l; (a, b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_to_hfiber_index l a = iw_to_hfiber_index l b &lt;~&gt;
hfiber i&#39; (l; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_to_hfiber_index l a = iw_to_hfiber_index l b &lt;~&gt;
hfiber i&#39; (l; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkac">srapply equiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
hfiber i&#39; (l; (a, b))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chkad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chkad"><hr></label><div class="goal-conclusion">hfiber i&#39; (l; (a, b)) -&gt;
iw_to_hfiber_index l a = iw_to_hfiber_index l b</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chkae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chkae"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="iwtype-v-chkaf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chkaf"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o <span class="nl">?f</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_to_hfiber_index l a = iw_to_hfiber_index l b -&gt;
hfiber i&#39; (l; (a, b))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> path_iw_to_hfiber.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber i&#39; (l; (a, b)) -&gt;
iw_to_hfiber_index l a = iw_to_hfiber_index l b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hfiber_to_path_iw.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">path_iw_to_hfiber l a b o hfiber_to_path_iw l a b ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply path_iw_to_hfiber_to_path_iw.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>I'</var><span><span class="hyp-body"><b>:= </b><span>{k : I &amp; IW I A B i j k * IW I A B i j k}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>A'</var><span><span class="hyp-body"><b>:= </b><span>{e : A &amp;
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
(<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>B'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">X</span> : A&#39; =&gt; B X.<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>i'</var><span><span class="hyp-body"><b>:= </b><span>functor_sigma i
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
   functor_prod (iw_sup I A B i j a)
     (iw_sup I A B i j a))</span></span><span class="hyp-type"><b>: </b><span>A&#39; -&gt; I&#39;</span></span></span></span><br><span><var>j'</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">k</span> : A&#39;) (<span class="nv">c</span> : B&#39; k) =&gt;
(j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">k</span> : A&#39;, B&#39; k -&gt; I&#39;</span></span></span></span><br><span><var>IWPath</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : I&#39; =&gt; fst x.<span class="mi">2</span> = snd x.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>I&#39; -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber_to_path_iw l a b o path_iw_to_hfiber l a b ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply hfiber_to_path_iw_to_hfiber.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Paths</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Some properties of the (fibers of the) index map [i] hold for the IW-type as well. For example, if [i] is an embedding then the corresponding IW-type is a hprop. *)</span>

<span class="sd">(** ** IW-types preserve truncation *)</span>

<span class="sd">(** We can show that if the index map is an embedding then the IW-type is a hprop. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb4"><span class="kn">Instance</span> <span class="nf">ishprop_iwtype</span> `{Funext}
  (I : <span class="kt">Type</span>) (A : <span class="kt">Type</span>) (B : A -&gt; <span class="kt">Type</span>)
  (i : A -&gt; I) (j : <span class="kr">forall</span> <span class="nv">x</span>, B x -&gt; I) {h : IsEmbedding i}
  : <span class="kr">forall</span> <span class="nv">x</span>, IsHProp (IW I A B i j x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : I, IsHProp (IW I A B i j x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : I, IsHProp (IW I A B i j x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb6"><span class="nb">intros</span> l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsHProp (IW I A B i j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb7"><span class="nb">apply</span> hprop_allpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : IW I A B i j l, x = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb8"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : IW I A B i j l, x = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkb9"><span class="nb">induction</span> x <span class="kr">as</span> [x x&#39; IHx].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : IW I A B i j (i x),
iw_sup I A B i j x x&#39; = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkba"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; = y</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  <span class="sd">(** We need to induct on y and at the same time generalize the goal to become a dependent equality. This can be difficult to do with tactics so we just refine the corresponding match statement. All we have done is turn the RHS into a transport over an equality allowing the induction on y to go through. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkbb"><span class="nb">refine</span> (
    <span class="kr">match</span> y <span class="kr">in</span> (IW _ _ _ _ _ l)
      <span class="kr">return</span> (<span class="kr">forall</span> <span class="nv">q</span> : l = i x,
        iw_sup I A B i j x x&#39; = q # y)
    <span class="kr">with</span> iw_sup y y&#39; =&gt; _ <span class="kr">end</span> idpath).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">q</span> : i y = i x,
iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j y y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkbc"><span class="nb">intros</span> q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j y y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkbd"><span class="nb">pose</span> (r := @path_ishprop _ (h (i x)) (x; idpath) (y; q)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (y; q)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; q)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j y y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkbe"><span class="nb">set</span> (r2 := r..<span class="mi">2</span>); <span class="nb">cbn</span> <span class="kr">in</span> r2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (y; q)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; q)</span></span></span></span><br><span><var>r2</var><span><span class="hyp-body"><b>:= </b><span>r ..<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>transport (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; i x0 = i x) r ..<span class="mi">1</span> <span class="mi">1</span> = q</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j y y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkbf"><span class="nb">set</span> (r1 := r..<span class="mi">1</span>) <span class="kr">in</span> r2; <span class="nb">cbn</span> <span class="kr">in</span> r1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (y; q)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; q)</span></span></span></span><br><span><var>r1</var><span><span class="hyp-body"><b>:= </b><span>r ..<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span>x = y</span></span></span></span><br><span><var>r2</var><span><span class="hyp-body"><b>:= </b><span>r ..<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span>transport (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; i x0 = i x) r1 <span class="mi">1</span> = q</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j y y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc0"><span class="nb">clearbody</span> r1 r2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (y; q)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; q)</span></span></span></span><br><span><var>r1</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>r2</var><span class="hyp-type"><b>: </b><span>transport (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; i x0 = i x) r1 <span class="mi">1</span> = q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j y y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc1"><span class="nb">destruct</span> r1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i x = i x</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (x; q)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (x; q)</span></span></span></span><br><span><var>r2</var><span class="hyp-type"><b>: </b><span>transport (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; i x0 = i x) <span class="mi">1</span> <span class="mi">1</span> = q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j x y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc2"><span class="nb">simpl</span> <span class="kr">in</span> r2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>i x = i x</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (x; q)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (x; q)</span></span></span></span><br><span><var>r2</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) q (iw_sup I A B i j x y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc3"><span class="nb">destruct</span> r2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (x; <span class="mi">1</span>)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (x; <span class="mi">1</span>)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">iw_sup I A B i j x x&#39; =
transport (IW I A B i j) <span class="mi">1</span> (iw_sup I A B i j x y&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc4"><span class="nb">cbn</span>; f_ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (x; <span class="mi">1</span>)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (x; <span class="mi">1</span>)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x&#39; = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc5">funext a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsEmbedding i</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>IHx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">y</span> : B x) (<span class="nv">y0</span> : IW I A B i j (j x y)), x&#39; y = y0</span></span></span><br><span><var>y0</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>y'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>r</var><span><span class="hyp-body"><b>:= </b><span>path_ishprop (x; <span class="mi">1</span>) (x; <span class="mi">1</span>)</span></span><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (x; <span class="mi">1</span>)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x&#39; a = y&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> IHx.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Now by induction on truncation indices we show that IW-types are n.+1 truncated if the index maps are also n.+1 truncated. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc6"><span class="kn">Instance</span> <span class="nf">istrunc_iwtype</span> `{Funext}
  (I : <span class="kt">Type</span>) (A : <span class="kt">Type</span>) (B : A -&gt; <span class="kt">Type</span>) (i : A -&gt; I)
  (j : <span class="kr">forall</span> <span class="nv">x</span>, B x -&gt; I) (n : trunc_index) {h : IsTruncMap n.+<span class="mi">1</span> i} (l : I)
  : IsTrunc n.+<span class="mi">1</span> (IW I A B i j l).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">1</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">1</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** We need a general induction hypothesis *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc8"><span class="nb">revert</span> n I A B i j h l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> : trunc_index) (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>)
(<span class="nv">i</span> : A -&gt; I) (<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt;
<span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkc9"><span class="nb">induction</span> n <span class="kr">as</span> [|n IHn].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsEmbedding i -&gt;
<span class="kr">forall</span> <span class="nv">l</span> : I, IsHProp (IW I A B i j l)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chkca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chkca"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">2</span> i -&gt;
<span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">2</span> (IW I A B i j l)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkcb"><span class="mi">1</span>: <span class="bp">exact</span> ishprop_iwtype.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">2</span> i -&gt;
<span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">2</span> (IW I A B i j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkcc"><span class="nb">intros</span> I A B i j h l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">2</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTrunc n.+<span class="mi">2</span> (IW I A B i j l)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkcd"><span class="nb">apply</span> istrunc_S.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">2</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : IW I A B i j l, IsTrunc n.+<span class="mi">1</span> (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkce"><span class="nb">intros</span> x y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">2</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTrunc n.+<span class="mi">1</span> (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkcf"><span class="nb">refine</span> (istrunc_equiv_istrunc _
    (equiv_path_iwtype I A B i j l x y) (n := n.+<span class="mi">1</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">2</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTrunc n.+<span class="mi">1</span>
  (IW {k : I &amp; IW I A B i j k * IW I A B i j k}
     {e : A &amp;
     (<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
     (<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))}
     (<span class="kr">fun</span>
        <span class="nv">X</span> : {e : A &amp;
            (<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
            (<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))} =&gt;
      B X.<span class="mi">1</span>)
     (functor_sigma i
        (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
         functor_prod (iw_sup I A B i j a)
           (iw_sup I A B i j a)))
     (<span class="kr">fun</span>
        (<span class="nv">k</span> : {e : A &amp;
             (<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c)) *
             (<span class="kr">forall</span> <span class="nv">c</span> : B e, IW I A B i j (j e c))})
        (<span class="nv">c</span> : B k.<span class="mi">1</span>) =&gt;
      (j k.<span class="mi">1</span> c; (fst k.<span class="mi">2</span> c, snd k.<span class="mi">2</span> c))) (l; (x, y)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd0"><span class="nb">apply</span> IHn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">2</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTruncMap n.+<span class="mi">1</span>
  (functor_sigma i
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
      functor_prod (iw_sup I A B i j a)
        (iw_sup I A B i j a)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd1"><span class="nb">intros</span> [k [a b]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">I</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">i</span> : A -&gt; I)
(<span class="nv">j</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I),
IsTruncMap n.+<span class="mi">1</span> i -&gt; <span class="kr">forall</span> <span class="nv">l</span> : I, IsTrunc n.+<span class="mi">1</span> (IW I A B i j l)</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>IsTruncMap n.+<span class="mi">2</span> i</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsTrunc n.+<span class="mi">1</span>
  (hfiber
     (functor_sigma i
        (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
         functor_prod (iw_sup I A B i j a)
           (iw_sup I A B i j a))) (k; (a, b)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** The crucial step is to characterize the fiber of [i&#39;] which was done previously. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (istrunc_equiv_istrunc _
    (equiv_path_hfiber_index I A B i j k a b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Decidable equality for IW-types *)</span>

<span class="sd">(** If A has decidable paths then it is a hset and therefore equality of sigma types over it are determined by the second component. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd2"><span class="kn">Local Definition</span> <span class="nf">inj_right_pair_on</span>
  {<span class="nv">A</span> : <span class="kt">Type</span>} {<span class="nv">A_dec</span> : DecidablePaths A}
  (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">x</span> : A) (<span class="nv">y</span> <span class="nv">y&#39;</span> : P x)
    (<span class="nv">H</span> : (x; y) = (x; y&#39;)) : y = y&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_dec</var><span class="hyp-type"><b>: </b><span>DecidablePaths A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, y'</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(x; y) = (x; y&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_dec</var><span class="hyp-type"><b>: </b><span>DecidablePaths A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, y'</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>(x; y) = (x; y&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd4"><span class="nb">apply</span> (equiv_path_sigma _ _ _)^-<span class="mi">1</span>%equiv <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_dec</var><span class="hyp-type"><b>: </b><span>DecidablePaths A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, y'</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>{p : (x; y).<span class="mi">1</span> = (x; y&#39;).<span class="mi">1</span> &amp;
transport P p (x; y).<span class="mi">2</span> = (x; y&#39;).<span class="mi">2</span>}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd5"><span class="nb">destruct</span> H <span class="kr">as</span> [p q]; <span class="nb">cbn</span> <span class="kr">in</span> p, q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_dec</var><span class="hyp-type"><b>: </b><span>DecidablePaths A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, y'</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>transport P p y = y&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd6"><span class="nb">assert</span> (r : idpath = p) <span class="bp">by</span> <span class="nb">apply</span> path_ishprop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_dec</var><span class="hyp-type"><b>: </b><span>DecidablePaths A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, y'</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>x = x</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>transport P p y = y&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd7"><span class="nb">destruct</span> r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_dec</var><span class="hyp-type"><b>: </b><span>DecidablePaths A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y, y'</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>transport P <span class="mi">1</span> y = y&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y = y&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> q.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** IW-types have decidable equality if [liftP] holds and the fibers of the indexing map have decidable paths. Notably, if B x is finitely enumerable, then [liftP] holds. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">DecidablePaths</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> `{Funext}
    (I : <span class="kt">Type</span>) (A : <span class="kt">Type</span>) (B : A -&gt; <span class="kt">Type</span>) (i : A -&gt; I) (j : <span class="kr">forall</span> <span class="nv">x</span>, B x -&gt; I)
    (liftP : <span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
     (<span class="kr">forall</span> <span class="nv">c</span>, Decidable (P c)) -&gt; Decidable (<span class="kr">forall</span> <span class="nv">c</span>, P c))
    (fibers_dec : <span class="kr">forall</span> <span class="nv">x</span>, DecidablePaths (hfiber i x)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">children_for</span> (<span class="nv">x</span> : A) : <span class="kt">Type</span> := <span class="kr">forall</span> <span class="nv">c</span>, IW I A B i j (j x c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">getfib</span> {<span class="nv">x</span>} (<span class="nv">a</span> : IW I A B i j x) : hfiber i x
    := <span class="kr">match</span> a <span class="kr">with</span> iw_sup x _ =&gt; (x ; idpath) <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">getfib_computes</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">children</span> <span class="nv">p</span>
    : getfib (paths_rec (i y) _ (iw_sup _ _ _ _ _ y children) (i x) p) = exist _ y p
    := <span class="kr">match</span> p
         <span class="kr">return</span> getfib (paths_rec _ _ (iw_sup _ _ _ _ _ y children) _ p) = exist _ y p
       <span class="kr">with</span> idpath =&gt; idpath <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">getfib_plus</span> {<span class="nv">x</span>} (<span class="nv">a</span> : IW I A B i j x)
    : {f : hfiber i x &amp; children_for (pr1 f)}
    := <span class="kr">match</span> a <span class="kr">with</span> iw_sup x c =&gt; ((x; idpath); c) <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">children_eq</span> (<span class="nv">x</span> : A) (<span class="nv">c1</span> <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span>, IW I A B i j (j x c))
    : iw_sup I A B i j x c1 = iw_sup I A B i j x c2 -&gt; c1 = c2
    := <span class="kr">fun</span> <span class="nv">r</span> =&gt; inj_right_pair_on (<span class="kr">fun</span> <span class="nv">f</span> =&gt; children_for (pr1 f))
         (x; idpath) _ _ (ap getfib_plus r).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd8"><span class="kn">Fixpoint</span> <span class="nf">decide_eq</span> <span class="nv">l</span> (<span class="nv">a</span> : IW I A B i j l) : <span class="kr">forall</span> <span class="nv">b</span>, Decidable (a = b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : IW I A B i j l, Decidable (a = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkd9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>IW I A B i j l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : IW I A B i j l, Decidable (a = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkda"><span class="nb">destruct</span> a <span class="kr">as</span> [x c1].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : IW I A B i j (i x),
Decidable (iw_sup I A B i j x c1 = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkdb"><span class="nb">intro</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (iw_sup I A B i j x c1 = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkdc">transparent <span class="nb">assert</span> (decide_children : (<span class="kr">forall</span> <span class="nv">c2</span>, Decidable (c1 = c2))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y),
Decidable (c1 = c2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chkdd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="nl">?Goal</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br></div><label class="goal-separator" for="iwtype-v-chkdd"><hr></label><div class="goal-conclusion">Decidable (iw_sup I A B i j x c1 = b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkde">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y),
Decidable (c1 = c2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkdf"><span class="nb">intros</span> c2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (c1 = c2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke0"><span class="nb">destruct</span> (liftP x (<span class="kr">fun</span> <span class="nv">c</span> =&gt; c1 c = c2 c) (<span class="kr">fun</span> <span class="nv">c</span> =&gt; decide_eq _ (c1 c) (c2 c)))
        <span class="kr">as</span> [p|p].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, c1 c = c2 c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (c1 = c2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chke1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>~ (<span class="kr">forall</span> <span class="nv">c</span> : B x, c1 c = c2 c)</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chke1"><hr></label><div class="goal-conclusion">Decidable (c1 = c2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke2">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : B x, c1 c = c2 c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (c1 = c2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>; <span class="bp">by</span> <span class="nb">apply</span> path_forall.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>~ (<span class="kr">forall</span> <span class="nv">c</span> : B x, c1 c = c2 c)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (c1 = c2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">right</span>; <span class="nb">intro</span> h; <span class="bp">by</span> <span class="nb">apply</span> p, apD10.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke4">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (iw_sup I A B i j x c1 = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke5">snrefine (
      <span class="kr">match</span> b <span class="kr">in</span> (IW _ _ _ _ _ l)
        <span class="kr">return</span>
          <span class="kr">forall</span> <span class="nv">iy</span> : l = i x,
            Decidable (iw_sup I A B i j x c1
              = paths_rec l (IW I A B i j) b (i x) iy)
      <span class="kr">with</span> iw_sup y c2 =&gt; <span class="kr">fun</span> <span class="nv">iy</span> : i y = i x =&gt; _ <span class="kr">end</span> idpath).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 =
   paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y c2) (i x) iy)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke6"><span class="nb">destruct</span> (fibers_dec (i x) (x ; idpath) (y ; iy)) <span class="kr">as</span> [feq|fneq].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 =
   paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y c2) (i x) iy)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chke7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>fneq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) &lt;&gt; (y; iy)</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chke7"><hr></label><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 =
   paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y c2) 
     (i x) iy)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 =
   paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y c2) (i x) iy)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chke9"><span class="nb">refine</span> (
        <span class="kr">match</span> feq <span class="kr">in</span> (_ = (y ; iy))
          <span class="kr">return</span> <span class="kr">forall</span> <span class="nv">c2</span>,
            Decidable (iw_sup _ _ _ _ _ x c1
              = paths_rec (i y) (IW I A B i j) (iw_sup _ _ _ _ _ y c2) (i x) iy)
          <span class="kr">with</span> idpath =&gt; _
        <span class="kr">end</span> c2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">iV</span> := (x; <span class="mi">1</span>)) (<span class="nv">y</span> := iV.<span class="mi">1</span>) (<span class="nv">iy</span> := iV.<span class="mi">2</span>)
(<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)),
Decidable
  (iw_sup I A B i j x c1 =
   paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y c2) (i x) iy)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkea"><span class="nb">cbn</span>; <span class="nb">intros</span> c3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 = iw_sup I A B i j x c3)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkeb"><span class="nb">destruct</span> (decide_children c3) <span class="kr">as</span> [ceq | cneq].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>ceq</var><span class="hyp-type"><b>: </b><span>c1 = c3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 = iw_sup I A B i j x c3)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="iwtype-v-chkec" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>cneq</var><span class="hyp-type"><b>: </b><span>c1 &lt;&gt; c3</span></span></span><br></div><label class="goal-separator" for="iwtype-v-chkec"><hr></label><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 = iw_sup I A B i j x c3)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chked">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>ceq</var><span class="hyp-type"><b>: </b><span>c1 = c3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 = iw_sup I A B i j x c3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">left</span>; <span class="bp">exact</span> (ap _ ceq).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkee">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>cneq</var><span class="hyp-type"><b>: </b><span>c1 &lt;&gt; c3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 = iw_sup I A B i j x c3)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkef"><span class="nb">right</span>; <span class="nb">intros</span> r; <span class="nb">apply</span> cneq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) = (y; iy)</span></span></span><br><span><var>c3</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>cneq</var><span class="hyp-type"><b>: </b><span>c1 &lt;&gt; c3</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>iw_sup I A B i j x c1 = iw_sup I A B i j x c3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c1 = c3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (children_eq x c1 c3 r).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkf0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>fneq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) &lt;&gt; (y; iy)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable
  (iw_sup I A B i j x c1 =
   paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y c2) (i x) iy)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkf1"><span class="nb">right</span>; <span class="nb">intros</span> r; <span class="nb">apply</span> fneq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>decide_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">l</span> : I) (<span class="nv">a</span> <span class="nv">b</span> : IW I A B i j l),
Decidable (a = b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B x, IW I A B i j (j x y)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>IW I A B i j (i x)</span></span></span><br><span><var>decide_children</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span>
  <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
       IW I A B i j (j x y) =&gt;
<span class="kr">let</span> <span class="nv">d</span> :=
  liftP x
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt; c1 c = c2 c)
    (<span class="kr">fun</span> <span class="nv">c</span> : B x =&gt;
     decide_eq (j x c) (c1 c) (c2 c))
  <span class="kr">in</span>
<span class="kr">match</span> d <span class="kr">with</span>
| inl p =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p0</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c =&gt;
     inl (path_forall c1 c2 p0)) p
| inr n =&gt;
    (<span class="kr">fun</span>
       <span class="nv">p</span> : ~
           (<span class="kr">forall</span> <span class="nv">c</span> : B x,
            c1 c = c2 c) =&gt;
     inr
       ((<span class="kr">fun</span> <span class="nv">h</span> : c1 = c2 =&gt;
         p (apD10 h))
        :
        c1 &lt;&gt; c2)) n
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span>
<span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">y</span> : B x,
     IW I A B i j (j x y),
Decidable (c1 = c2)</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y0</span> : B y, IW I A B i j (j y y0)</span></span></span><br><span><var>iy</var><span class="hyp-type"><b>: </b><span>i y = i x</span></span></span><br><span><var>fneq</var><span class="hyp-type"><b>: </b><span>(x; <span class="mi">1</span>) &lt;&gt; (y; iy)</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>iw_sup I A B i j x c1 =
paths_rec (i y) (IW I A B i j)
  (iw_sup I A B i j y c2) 
  (i x) iy</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(x; <span class="mi">1</span>) = (y; iy)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap getfib r @ getfib_computes x y c2 iy).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkf2"><span class="kn">Definition</span> <span class="nf">decidablepaths_iwtype</span>
    : <span class="kr">forall</span> <span class="nv">x</span>, DecidablePaths (IW I A B i j x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (IW I A B i j x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkf3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (IW I A B i j x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="iwtype-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="iwtype-v-chkf4"><span class="nb">intros</span> x a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>I, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>A -&gt; I</span></span></span><br><span><var>j</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B x -&gt; I</span></span></span><br><span><var>liftP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">P</span> : B x -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">c</span> : B x, Decidable (P c)) -&gt;
Decidable (<span class="kr">forall</span> <span class="nv">c</span> : B x, P c)</span></span></span><br><span><var>fibers_dec</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, DecidablePaths (hfiber i x)</span></span></span><br><span><var>children_for</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">c</span> : B x, IW I A B i j (j x c)</span></span><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>getfib</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0) <span class="kr">return</span> (hfiber i i0)
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 _ =&gt; (x0; <span class="mi">1</span>)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I, IW I A B i j x -&gt; hfiber i x</span></span></span></span><br><span><var>getfib_computes</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
  (<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
              IW I A B i j (j y y0))
  (<span class="nv">p</span> : i y = i x) =&gt;
<span class="kr">match</span>
  p <span class="kr">as</span> p0 <span class="kr">in</span> (_ = i0)
  <span class="kr">return</span>
    (getfib
       (paths_rec (i y)
          (IW I A B i j)
          (iw_sup I A B i j y
             children) i0 p0) =
     (y; p0))
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> <span class="nv">y</span> : A)
(<span class="nv">children</span> : <span class="kr">forall</span> <span class="nv">y0</span> : B y,
            IW I A B i j (j y y0))
(<span class="nv">p</span> : i y = i x),
getfib
  (paths_rec (i y) (IW I A B i j)
     (iw_sup I A B i j y children)
     (i x) p) = (y; p)</span></span></span></span><br><span><var>getfib_plus</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : I) (<span class="nv">a</span> : IW I A B i j x) =&gt;
<span class="kr">match</span>
  a <span class="kr">in</span> (IW _ _ _ _ _ i0)
  <span class="kr">return</span>
    {f : hfiber i i0 &amp; children_for f.<span class="mi">1</span>}
<span class="kr">with</span>
| @iw_sup _ _ _ _ _ x0 c =&gt; ((x0; <span class="mi">1</span>); c)
<span class="kr">end</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : I,
IW I A B i j x -&gt;
{f : hfiber i x &amp; children_for f.<span class="mi">1</span>}</span></span></span></span><br><span><var>children_eq</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">x</span> : A)
  (<span class="nv">c1</span>
   <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
        IW I A B i j (j x c))
  (<span class="nv">r</span> : iw_sup I A B i j x c1 =
       iw_sup I A B i j x c2) =&gt;
inj_right_pair_on
  (<span class="kr">fun</span> <span class="nv">f</span> : {x0 : A &amp; i x0 = i x} =&gt;
   children_for f.<span class="mi">1</span>) (x; <span class="mi">1</span>) c1 c2
  (ap getfib_plus r)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">x</span> : A)
(<span class="nv">c1</span>
 <span class="nv">c2</span> : <span class="kr">forall</span> <span class="nv">c</span> : B x,
      IW I A B i j (j x c)),
iw_sup I A B i j x c1 =
iw_sup I A B i j x c2 -&gt; 
c1 = c2</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>I</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>IW I A B i j x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Decidable (a = b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> decide_eq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">DecidablePaths</span>.</span></span></pre>
</div>
</div></body>
</html>
