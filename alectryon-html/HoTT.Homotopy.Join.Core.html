<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>Core.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk20d"><span class="kn">From</span> HoTT <span class="kn">Require Import</span> Basics Types.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Cubical.DPath Cubical.PathSquare.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Homotopy.NullHomotopy.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Extensions.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Colimits.Pushout.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Truncations.Core Truncations.Connectedness.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Pointed.Core.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> WildCat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Spaces.Nat.Core.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> pointed_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> path_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Joins *)</span>

<span class="sd">(** The join is the pushout of two types under their product. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Join</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Join</span> (<span class="nv">A</span> : <span class="kt">Type</span>@{i}) (<span class="nv">B</span> : <span class="kt">Type</span>@{j})
    := Pushout@{k i j k} (@fst A B) (@snd A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">joinl</span> {<span class="nv">A</span> <span class="nv">B</span>} : A -&gt; Join A B
    := <span class="kr">fun</span> <span class="nv">a</span> =&gt; @pushl (A*B) A B fst snd a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">joinr</span> {<span class="nv">A</span> <span class="nv">B</span>} : B -&gt; Join A B
    := <span class="kr">fun</span> <span class="nv">b</span> =&gt; @pushr (A*B) A B fst snd b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">jglue</span> {<span class="nv">A</span> <span class="nv">B</span>} <span class="nv">a</span> <span class="nv">b</span> : joinl a = joinr b
    := @pglue (A*B) A B fst snd (a , b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk20e"><span class="kn">Definition</span> <span class="nf">Join_ind</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">P</span> : Join A B -&gt; <span class="kt">Type</span>)
    (<span class="nv">P_A</span> : <span class="kr">forall</span> <span class="nv">a</span>, P (joinl a)) (<span class="nv">P_B</span> : <span class="kr">forall</span> <span class="nv">b</span>, P (joinr b))
    (<span class="nv">P_g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, transport P (jglue a b) (P_A a) = (P_B b))
    : <span class="kr">forall</span> (<span class="nv">x</span> : Join A B), P x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (joinl a)</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (joinr b)</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), transport P (jglue a b) (P_A a) = P_B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk20f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (joinl a)</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (joinr b)</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), transport P (jglue a b) (P_A a) = P_B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk210"><span class="nb">apply</span> (Pushout_ind P P_A P_B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (joinl a)</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (joinr b)</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), transport P (jglue a b) (P_A a) = P_B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A * B,
transport P (pglue a) (P_A (fst a)) = P_B (snd a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">ab</span> =&gt; P_g (fst ab) (snd ab)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Join_ind_beta_jglue</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">P</span> : Join A B -&gt; <span class="kt">Type</span>)
    (<span class="nv">P_A</span> : <span class="kr">forall</span> <span class="nv">a</span>, P (joinl a)) (<span class="nv">P_B</span> : <span class="kr">forall</span> <span class="nv">b</span>, P (joinr b))
    (<span class="nv">P_g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, transport P (jglue a b) (P_A a) = (P_B b)) <span class="nv">a</span> <span class="nv">b</span>
    : apD (Join_ind P P_A P_B P_g) (jglue a b) = P_g a b
    := Pushout_ind_beta_pglue _ _ _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** A version of [Join_ind] specifically for proving that two functions defined on a [Join] are homotopic. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk211"><span class="kn">Definition</span> <span class="nf">Join_ind_FlFr</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> <span class="nv">g</span> : Join A B -&gt; P)
    (<span class="nv">Hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, f (joinl a) = g (joinl a))
    (<span class="nv">Hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, f (joinr b) = g (joinr b))
    (<span class="nv">Hglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, ap f (jglue a b) @ Hr b = Hl a @ ap g (jglue a b))
    : f == g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = g (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = g (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b =
Hl a @ ap g (jglue a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f == g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk212"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = g (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = g (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b =
Hl a @ ap g (jglue a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f == g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk213">snapply (Join_ind _ Hl Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = g (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = g (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b =
Hl a @ ap g (jglue a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; f x = g x) (jglue a b)
  (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk214"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = g (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = g (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b =
Hl a @ ap g (jglue a b)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; f x = g x) (jglue a b)
  (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk215">transport_paths FlFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = g (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = g (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b =
Hl a @ ap g (jglue a b)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (jglue a b) @ Hr b = Hl a @ ap g (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk216"><span class="kn">Definition</span> <span class="nf">Join_ind_Flr</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : Join A B -&gt; Join A B)
    (<span class="nv">Hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, f (joinl a) = joinl a)
    (<span class="nv">Hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, f (joinr b) = joinr b)
    (<span class="nv">Hglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, ap f (jglue a b) @ Hr b = Hl a @ jglue a b)
    : <span class="kr">forall</span> <span class="nv">x</span>, f x = x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b = Hl a @ jglue a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, f x = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk217"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b = Hl a @ jglue a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, f x = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk218">snapply (Join_ind _ Hl Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b = Hl a @ jglue a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; f x = x) (jglue a b)
  (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk219"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b = Hl a @ jglue a b</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; f x = x) (jglue a b)
  (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk21a">transport_paths Flr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, f (joinl a) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, f (joinr b) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap f (jglue a b) @ Hr b = Hl a @ jglue a b</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (jglue a b) @ Hr b = Hl a @ jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** And a version for showing that a composite is homotopic to the identity. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk21b"><span class="kn">Definition</span> <span class="nf">Join_ind_FFlr</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : Join A B -&gt; P) (<span class="nv">g</span> : P -&gt; Join A B)
    (<span class="nv">Hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, g (f (joinl a)) = joinl a)
    (<span class="nv">Hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, g (f (joinr b)) = joinr b)
    (<span class="nv">Hglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, ap g (ap f (jglue a b)) @ Hr b = Hl a @ jglue a b)
    : <span class="kr">forall</span> <span class="nv">x</span>, g (f x) = x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ jglue a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, g (f x) = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk21c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ jglue a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, g (f x) = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk21d">snapply (Join_ind _ Hl Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ jglue a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; g (f x) = x)
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk21e"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ jglue a b</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; g (f x) = x)
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk21f">transport_paths FFlr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Join A B</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = joinl a</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = joinr b</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ jglue a b</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (ap f (jglue a b)) @ Hr b = Hl a @ jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk220"><span class="kn">Definition</span> <span class="nf">Join_ind_FFlFr</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>}
    (<span class="nv">f</span> : Join A B -&gt; C) (<span class="nv">g</span> : C -&gt; P) (<span class="nv">h</span> : Join A B -&gt; P)
    (<span class="nv">Hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, g (f (joinl a)) = h (joinl a))
    (<span class="nv">Hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, g (f (joinr b)) = h (joinr b))
    (<span class="nv">Hglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, ap g (ap f (jglue a b)) @ Hr b = Hl a @ ap h (jglue a b))
    : g o f == h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = h (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = h (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ ap h (jglue a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g o f == h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk221" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk221"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = h (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = h (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ ap h (jglue a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g o f == h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk222">snapply (Join_ind _ Hl Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = h (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = h (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ ap h (jglue a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; (g o f) x = h x)
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk223"><span class="nb">intros</span> a b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = h (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = h (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ ap h (jglue a b)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; g (f x) = h x)
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk224">transport_paths FFlFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, g (f (joinl a)) = h (joinl a)</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, g (f (joinr b)) = h (joinr b)</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap g (ap f (jglue a b)) @ Hr b =
Hl a @ ap h (jglue a b)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (ap f (jglue a b)) @ Hr b =
Hl a @ ap h (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk225"><span class="kn">Definition</span> <span class="nf">Join_ind_FlFFr</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>}
    (<span class="nv">f</span> : Join A B -&gt; C) (<span class="nv">g</span> : C -&gt; P) (<span class="nv">h</span> : Join A B -&gt; P)
    (<span class="nv">Hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, h (joinl a) = g (f (joinl a)))
    (<span class="nv">Hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, h (joinr b) = g (f (joinr b)))
    (<span class="nv">Hglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, ap h (jglue a b) @ Hr b = Hl a @ ap g (ap f (jglue a b)))
    : h == g o f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, h (joinl a) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, h (joinr b) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap h (jglue a b) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h == g o f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk226"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, h (joinl a) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, h (joinr b) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap h (jglue a b) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h == g o f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk227">snapply (Join_ind _ Hl Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, h (joinl a) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, h (joinr b) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap h (jglue a b) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; h x = (g o f) x)
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk228"><span class="nb">intros</span> a b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, h (joinl a) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, h (joinr b) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap h (jglue a b) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; h x = g (f x))
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk229">transport_paths FlFFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, h (joinl a) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, h (joinr b) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap h (jglue a b) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap h (jglue a b) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk22a"><span class="kn">Definition</span> <span class="nf">Join_ind_FFlFFr</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> <span class="nv">P</span> : <span class="kt">Type</span>}
    (<span class="nv">f</span> : Join A B -&gt; C) (<span class="nv">g</span> : C -&gt; P) (<span class="nv">h</span> : Join A B -&gt; D) (<span class="nv">i</span> : D -&gt; P)
    (<span class="nv">Hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, i (h (joinl a)) = g (f (joinl a)))
    (<span class="nv">Hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, i (h (joinr b)) = g (f (joinr b)))
    (<span class="nv">Hglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, ap i (ap h (jglue a b)) @ Hr b = Hl a @ ap g (ap f (jglue a b)))
    : i o h == g o f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; D</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, i (h (joinl a)) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, i (h (joinr b)) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap i (ap h (jglue a b)) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i o h == g o f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk22b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; D</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, i (h (joinl a)) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, i (h (joinr b)) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap i (ap h (jglue a b)) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">i o h == g o f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk22c">snapply (Join_ind _ Hl Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; D</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, i (h (joinl a)) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, i (h (joinr b)) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap i (ap h (jglue a b)) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; (i o h) x = (g o f) x)
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk22d"><span class="nb">intros</span> a b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; D</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, i (h (joinl a)) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, i (h (joinr b)) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap i (ap h (jglue a b)) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; i (h x) = g (f x))
  (jglue a b) (Hl a) = Hr b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk22e">transport_paths FFlFFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; D</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; P</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, i (h (joinl a)) = g (f (joinl a))</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, i (h (joinr b)) = g (f (joinr b))</span></span></span><br><span><var>Hglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap i (ap h (jglue a b)) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap i (ap h (jglue a b)) @ Hr b =
Hl a @ ap g (ap f (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk22f"><span class="kn">Definition</span> <span class="nf">Join_rec</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">P_A</span> : A -&gt; P) (<span class="nv">P_B</span> : B -&gt; P)
    (<span class="nv">P_g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, P_A a = P_B b) : Join A B -&gt; P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk230"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk231"><span class="nb">apply</span> (Pushout_rec P P_A P_B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A * B, P_A (fst a) = P_B (snd a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">ab</span> =&gt; P_g (fst ab) (snd ab)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk232"><span class="kn">Definition</span> <span class="nf">Join_rec_beta_jglue</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">P_A</span> : A -&gt; P)
    (<span class="nv">P_B</span> : B -&gt; P) (<span class="nv">P_g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, P_A a = P_B b) <span class="nv">a</span> <span class="nv">b</span>
    : ap (Join_rec P_A P_B P_g) (jglue a b) = P_g a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (Join_rec P_A P_B P_g) (jglue a b) = P_g a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk233"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (Join_rec P_A P_B P_g) (jglue a b) = P_g a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Pushout_rec_beta_pglue _ _ _ _ (a, b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** If [A] is pointed, so is [Join A B]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">pjoin</span> (<span class="nv">A</span> : pType) (<span class="nv">B</span> : <span class="kt">Type</span>) : pType
    := [Join A B, joinl pt].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Join</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> joinl {A B}%_type_scope _ , [A] B _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> joinr {A B}%_type_scope _ , A [B] _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Zigzags in joins *)</span>

<span class="sd">(** These paths are very common, so we give them names. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">zigzag</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">a</span> <span class="nv">a&#39;</span> : A) (<span class="nv">b</span> : B)
  : joinl a = joinl a&#39;
  := jglue a b @ (jglue a&#39; b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">zagzig</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">a</span> : A) (<span class="nv">b</span> <span class="nv">b&#39;</span> : B)
  : joinr b = joinr b&#39;
  := (jglue a b)^ @ jglue a b&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And we give a beta rule for zigzags. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk234"><span class="kn">Definition</span> <span class="nf">Join_rec_beta_zigzag</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">P_A</span> : A -&gt; P)
  (<span class="nv">P_B</span> : B -&gt; P) (<span class="nv">P_g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, P_A a = P_B b) <span class="nv">a</span> <span class="nv">a&#39;</span> <span class="nv">b</span>
  : ap (Join_rec P_A P_B P_g) (zigzag a a&#39; b) = P_g a b @ (P_g a&#39; b)^.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (Join_rec P_A P_B P_g) (zigzag a a&#39; b) =
P_g a b @ (P_g a&#39; b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk235"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (Join_rec P_A P_B P_g) (zigzag a a&#39; b) =
P_g a b @ (P_g a&#39; b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk236">lhs napply ap_pV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_A</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>P_B</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), P_A a = P_B b</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (Join_rec P_A P_B P_g) (jglue a b) @
(ap (Join_rec P_A P_B P_g) (jglue a&#39; b))^ =
P_g a b @ (P_g a&#39; b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Join_rec_beta_jglue _ _ _ a b @@ inverse2 (Join_rec_beta_jglue _ _ _ a&#39; b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * [Join_rec] gives an equivalence of 0-groupoids</span>

<span class="sd">  We now prove many things about [Join_rec], for example, that it is an equivalence of 0-groupoids from the [JoinRecData] that we define next.  The framework we use is a bit elaborate, but it parallels the framework used in TriJoin.v, where careful organization is essential. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">JoinRecData</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} := {
    jl : A -&gt; P;
    jr : B -&gt; P;
    jg : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, jl a = jr b;
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> JoinRecData : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> Build_JoinRecData {A B P}%_type_scope (jl jr jg)%_function_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We use the name [join_rec] for the version of [Join_rec] defined on this data. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_rec</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : JoinRecData A B P)
  : Join A B $-&gt; P
  := Join_rec (jl f) (jr f) (jg f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_rec_beta_jg</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : JoinRecData A B P) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B)
  : ap (join_rec f) (jglue a b) = jg f a b
  := Join_rec_beta_jglue _ _ _ a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We&#39;re next going to define a map in the other direction.  We do it via showing that [JoinRecData] is a 0-coherent 1-functor to [Type]. We&#39;ll later show that it is a 1-functor to 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk237" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk237"><span class="kn">Definition</span> <span class="nf">joinrecdata_fun</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q) (<span class="nv">f</span> : JoinRecData A B P)
  : JoinRecData A B Q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecData A B Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk238"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecData A B Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk239" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk239">snapply Build_JoinRecData.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Q</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk23a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><label class="goal-separator" for="core-v-chk23a"><hr></label><div class="goal-conclusion">B -&gt; Q</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk23b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><label class="goal-separator" for="core-v-chk23b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), <span class="nl">?jl</span> a = <span class="nl">?jr</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk23c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (g o jl f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk23d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (g o jr f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk23e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), (g o jl f) a = (g o jr f) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; ap g (jg f a b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The join itself has canonical [JoinRecData]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">joinrecdata_join</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) : JoinRecData A B (Join A B)
  := Build_JoinRecData joinl joinr jglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Combining these gives a function going in the opposite direction to [join_rec]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_rec_inv</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : Join A B -&gt; P)
  : JoinRecData A B P
  := joinrecdata_fun f (joinrecdata_join A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Under [Funext], [join_rec] and [join_rec_inv] should be inverse equivalences.  We&#39;ll avoid [Funext] and show that they are equivalences of 0-groupoids, where we choose the path structures carefully. *)</span>

<span class="sd">(** ** The graph structure on [JoinRecData A B P]</span>

<span class="sd">  Under [Funext], this type will be equivalent to the identity type.  But without [Funext], this definition will be more useful. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">JoinRecPath</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">f</span> <span class="nv">g</span> : JoinRecData A B P} := {
    hl : <span class="kr">forall</span> <span class="nv">a</span>, jl f a = jl g a;
    hr : <span class="kr">forall</span> <span class="nv">b</span>, jr f b = jr g b;
    hg : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, jg f a b @ hr b = hl a @ jg g a b;
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> JoinRecPath {A B P} f g.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** In the special case where the first two components of [f] and [g] agree definitionally, [hl] and [hr] can be identity paths, and [hg] simplifies slightly. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk23f"><span class="kn">Definition</span> <span class="nf">bundle_joinrecpath</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">jl&#39;</span> : A -&gt; P} {<span class="nv">jr&#39;</span> : B -&gt; P}
  {<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, jl&#39; a = jr&#39; b}
  (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, f a b = g a b)
  : JoinRecPath (Build_JoinRecData jl&#39; jr&#39; f) (Build_JoinRecData jl&#39; jr&#39; g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>jl'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>jr'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jl&#39; a = jr&#39; b</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a b = g a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath {| jl := jl&#39;; jr := jr&#39;; jg := f |}
  {| jl := jl&#39;; jr := jr&#39;; jg := g |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk240"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>jl'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>jr'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jl&#39; a = jr&#39; b</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a b = g a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath {| jl := jl&#39;; jr := jr&#39;; jg := f |}
  {| jl := jl&#39;; jr := jr&#39;; jg := g |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk241">snapply Build_JoinRecPath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>jl'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>jr'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jl&#39; a = jr&#39; b</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a b = g a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
jl {| jl := jl&#39;; jr := jr&#39;; jg := f |} a =
jl {| jl := jl&#39;; jr := jr&#39;; jg := g |} a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk242" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>jl'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>jr'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jl&#39; a = jr&#39; b</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a b = g a b</span></span></span><br></div><label class="goal-separator" for="core-v-chk242"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
jr {| jl := jl&#39;; jr := jr&#39;; jg := f |} b =
jr {| jl := jl&#39;; jr := jr&#39;; jg := g |} b</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk243" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>jl'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>jr'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jl&#39; a = jr&#39; b</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a b = g a b</span></span></span><br></div><label class="goal-separator" for="core-v-chk243"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
jg {| jl := jl&#39;; jr := jr&#39;; jg := f |} a b @ <span class="nl">?hr</span> b =
<span class="nl">?hl</span> a @ jg {| jl := jl&#39;; jr := jr&#39;; jg := g |} a b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk244"><span class="mi">1</span>, <span class="mi">2</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>jl'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>jr'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jl&#39; a = jr&#39; b</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a b = g a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
jg {| jl := jl&#39;; jr := jr&#39;; jg := f |} a b @
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @
jg {| jl := jl&#39;; jr := jr&#39;; jg := g |} a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">apply</span> equiv_p1_1q, h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** A tactic that helps us apply the previous result. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">bundle_joinrecpath</span> :=
  <span class="nb">hnf</span>;
  <span class="kr">match goal with</span> |- JoinRecPath <span class="nl">?F</span> <span class="nl">?G</span> =&gt;
    <span class="nb">refine</span> (bundle_joinrecpath (f:=jg F) (g:=jg G) _) <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Using [JoinRecPath], we can restate the beta rule for [join_rec]. This says that [join_rec_inv] is split surjective. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_rec_beta</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : JoinRecData A B P)
  : JoinRecPath (join_rec_inv (join_rec f)) f
  := bundle_joinrecpath (join_rec_beta_jg f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [join_rec_inv] is essentially injective, as a map between 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">isinj_join_rec_inv</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">f</span> <span class="nv">g</span> : Join A B -&gt; P}
  (<span class="nv">h</span> : JoinRecPath (join_rec_inv f) (join_rec_inv g))
  : f == g
  := Join_ind_FlFr _ _ (hl h) (hr h) (hg h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Lemmas and tactics about intervals and squares</span>

<span class="sd">  We now introduce several lemmas and tactics that will dispense with some routine goals. The idea is that a generic interval can be assumed to be trivial on the first vertex, and a generic square can be assumed to be the identity on the domain edge. In order to apply the [paths_ind] and [square_ind] lemmas that make this precise, we need to generalize various terms in the goal. *)</span>

<span class="sd">(** This destructs a three component term [f], generalizes each piece evaluated appropriately, and clears all pieces. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">generalize_three</span> f a b :=
  <span class="kr">let</span> <span class="nv">fg</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">fr</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">fl</span> := <span class="kp">fresh</span> <span class="kr">in</span>
  <span class="nb">destruct</span> f <span class="kr">as</span> [fl fr fg]; <span class="nb">cbn</span>;
  <span class="nb">generalize</span> (fg a b); <span class="nb">clear</span> fg;
  <span class="nb">generalize</span> (fr b); <span class="nb">clear</span> fr;
  <span class="nb">generalize</span> (fl a); <span class="nb">clear</span> fl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** For [f : JoinRecData A B P], if we have [a] and [b] and are trying to prove a statement only involving [jl f a], [jr f b] and [jg f a b], we can assume [jr f b] is [jl f a] and that [jg f a b] is reflexivity.  This is just path induction, but it requires generalizing the goal appropriately. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">interval_ind</span> f a b :=
  generalize_three f a b;
  <span class="nb">intro</span> f; <span class="c">(* We really only wanted two of them generalized here, so we intro one. *)</span>
  <span class="nb">apply</span> paths_ind.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Similarly, for [h : JoinRecPath f g], if we have [a] and [b] and are trying to prove a goal only involving [h] and [g] evaluated at those points, we can assume that [g] is [f] and that [h] is &quot;reflexivity&quot;.  For this, we first define a lemma that is like &quot;path induction on h&quot;, and then a tactic that uses it. *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk245" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk245"><span class="kn">Definition</span> <span class="nf">square_ind</span> {<span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">a</span> <span class="nv">b</span> : P) (<span class="nv">ab</span> : a = b)
  (<span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;) (<span class="nv">hb</span> : b = b&#39;) (<span class="nv">k</span> : ab @ hb = ha @ ab&#39;), <span class="kt">Type</span>)
  (<span class="nv">s</span> : Q a b ab idpath idpath (equiv_p1_1q idpath))
  : <span class="kr">forall</span> <span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">ab&#39;</span> <span class="nv">ha</span> <span class="nv">hb</span> <span class="nv">k</span>, Q a&#39; b&#39; ab&#39; ha hb k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;), ab @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b ab <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;) (<span class="nv">k</span> : ab @ hb = ha @ ab&#39;),
Q a&#39; b&#39; ab&#39; ha hb k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk246"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;), ab @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b ab <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;) (<span class="nv">k</span> : ab @ hb = ha @ ab&#39;),
Q a&#39; b&#39; ab&#39; ha hb k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk247"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;), ab @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b ab <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</span></span></span><br><span><var>a', b'</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a&#39; = b&#39;</span></span></span><br><span><var>ha</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>hb</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>ab @ hb = ha @ ab&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a&#39; b&#39; ab&#39; ha hb k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk248"><span class="nb">destruct</span> ha, hb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;), ab @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b ab <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>ab @ <span class="mi">1</span> = <span class="mi">1</span> @ ab&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a b ab&#39; <span class="mi">1</span> <span class="mi">1</span> k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk249" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk249"><span class="nb">revert</span> k; equiv_intro (equiv_p1_1q (p:=ab) (q:=ab&#39;)) k&#39;; <span class="nb">destruct</span> k&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : b = b&#39;), ab @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b ab <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a b ab <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk24a"><span class="nb">destruct</span> ab.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ha</span> : a = a&#39;)
(<span class="nv">hb</span> : a = b&#39;), <span class="mi">1</span> @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="c">(* [g] should be the codomain of [h]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global Ltac</span> <span class="nf">square_ind</span> g h a b :=
  generalize_three h a b;
  generalize_three g a b;
  <span class="nb">apply</span> square_ind.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Use the WildCat library to organize things *)</span>

<span class="sd">(** We begin by showing that [JoinRecData A B P] is a 0-groupoid, one piece at a time. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">isgraph_joinrecdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>) : IsGraph (JoinRecData A B P)
  := {| Hom := JoinRecPath |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk24b"><span class="kn">Instance</span> <span class="nf">is01cat_joinrecdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>) : Is01Cat (JoinRecData A B P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is01Cat (JoinRecData A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk24c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is01Cat (JoinRecData A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk24d"><span class="nb">apply</span> Build_Is01Cat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : JoinRecData A B P, a $-&gt; a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk24e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk24e"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : JoinRecData A B P,
(b $-&gt; c) -&gt; (a $-&gt; b) -&gt; a $-&gt; c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk24f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : JoinRecData A B P, a $-&gt; a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk250"><span class="nb">intro</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f $-&gt; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk251">bundle_joinrecpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), jg f a b = jg f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk252">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : JoinRecData A B P,
(b $-&gt; c) -&gt; (a $-&gt; b) -&gt; a $-&gt; c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk253"><span class="nb">intros</span> f1 f2 f3 h2 h1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f1 $-&gt; f3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk254" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk254">snapply Build_JoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jl f1 a = jl f3 a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk255" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk255"><hr></label><div class="goal-conclusion">jr f1 b = jr f3 b</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk256" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk256"><hr></label><div class="goal-conclusion">jg f1 a b @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ jg f3 a b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk257">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jl f1 a = jl f3 a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hl h1 a @ hl h2 a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk258" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk258">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jr f1 b = jr f3 b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hr h1 b @ hr h2 b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk259">+ <span class="c">(* Some simple path algebra works as well. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg f1 a b @ (hr h1 b @ hr h2 b) =
(hl h1 a @ hl h2 a) @ jg f3 a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk25a">square_ind f3 h2 a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg f1 a b @ (hr h1 b @ <span class="mi">1</span>) = (hl h1 a @ <span class="mi">1</span>) @ jg f2 a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk25b">square_ind f2 h1 a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg f1 a b @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ jg f1 a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> interval_ind f1 a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk25c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk25c"><span class="kn">Instance</span> <span class="nf">is0gpd_joinrecdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>) : Is0Gpd (JoinRecData A B P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Gpd (JoinRecData A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk25d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Gpd (JoinRecData A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk25e"><span class="nb">apply</span> Build_Is0Gpd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : JoinRecData A B P, (a $-&gt; b) -&gt; b $-&gt; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk25f"><span class="nb">intros</span> f g h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g $-&gt; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk260">snapply Build_JoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jl g a = jl f a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk261" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk261"><hr></label><div class="goal-conclusion">jr g b = jr f b</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk262" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk262"><hr></label><div class="goal-conclusion">jg g a b @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ jg f a b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk263">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jl g a = jl f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hl h a)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk264" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk264">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jr g b = jr f b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (hr h b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk265">+ <span class="c">(* Some simple path algebra works as well. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg g a b @ (hr h b)^ = (hl h a)^ @ jg f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk266">square_ind g h a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg f a b @ <span class="mi">1</span>^ = <span class="mi">1</span>^ @ jg f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> interval_ind f a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">joinrecdata_0gpd</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>) : ZeroGpd
  := Build_ZeroGpd (JoinRecData A B P) _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** [joinrecdata_0gpd A B] is a 1-functor from [Type] to [ZeroGpd]</span>

<span class="sd">  It&#39;s a 1-functor that lands in [ZeroGpd], and the morphisms of [ZeroGpd] are 0-functors, so it&#39;s easy to get confused about the levels. *)</span>

<span class="sd">(** First we need to show that the induced map is a morphism in [ZeroGpd], i.e. that it is a 0-functor. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk267" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk267"><span class="kn">Instance</span> <span class="nf">is0functor_joinrecdata_fun</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q)
  : Is0Functor (@joinrecdata_fun A B P Q g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (joinrecdata_fun g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk268"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (joinrecdata_fun g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk269" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk269"><span class="nb">apply</span> Build_Is0Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : JoinRecData A B P,
(a $-&gt; b) -&gt;
joinrecdata_fun g a $-&gt; joinrecdata_fun g b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk26a"><span class="nb">intros</span> f1 f2 h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_fun g f1 $-&gt; joinrecdata_fun g f2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk26b">snapply Build_JoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g (jl f1 a) = g (jl f2 a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk26c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk26c"><hr></label><div class="goal-conclusion">g (jr f1 b) = g (jr f2 b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk26d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk26d"><hr></label><div class="goal-conclusion">ap g (jg f1 a b) @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ ap g (jg f2 a b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk26e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g (jl f1 a) = g (jl f2 a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap g (hl h a)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk26f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk26f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g (jr f1 b) = g (jr f2 b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap g (hr h b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk270">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (jg f1 a b) @ ap g (hr h b) =
ap g (hl h a) @ ap g (jg f2 a b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk271" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk271">square_ind f2 h a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (jg f1 a b) @ ap g <span class="mi">1</span> = ap g <span class="mi">1</span> @ ap g (jg f1 a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> interval_ind f1 a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [joinrecdata_0gpd A B] is a 0-functor from [Type] to [ZeroGpd] (one level up). *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk272" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk272"><span class="kn">Instance</span> <span class="nf">is0functor_joinrecdata_0gpd</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) : Is0Functor (joinrecdata_0gpd A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (joinrecdata_0gpd A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk273"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (joinrecdata_0gpd A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk274"><span class="nb">apply</span> Build_Is0Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span>,
(a $-&gt; b) -&gt;
joinrecdata_0gpd A B a $-&gt; joinrecdata_0gpd A B b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk275"><span class="nb">intros</span> P Q g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd A B P $-&gt; joinrecdata_0gpd A B Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk276">snapply Build_Fun01.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (joinrecdata_0gpd A B P) -&gt;
zerogpd_graph (joinrecdata_0gpd A B Q)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk277" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><label class="goal-separator" for="core-v-chk277"><hr></label><div class="goal-conclusion">Is0Functor <span class="nl">?F</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk278" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk278">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (joinrecdata_0gpd A B P) -&gt;
zerogpd_graph (joinrecdata_0gpd A B Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (joinrecdata_fun g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk279" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk279">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (joinrecdata_fun g)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> is0functor_joinrecdata_fun.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [joinrecdata_0gpd A B] is a 1-functor from [Type] to [ZeroGpd]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk27a"><span class="kn">Instance</span> <span class="nf">is1functor_joinrecdata_0gpd</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) : Is1Functor (joinrecdata_0gpd A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Functor (joinrecdata_0gpd A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk27b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Functor (joinrecdata_0gpd A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk27c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk27c"><span class="nb">apply</span> Build_Is1Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : a $-&gt; b),
f $== g -&gt;
fmap (joinrecdata_0gpd A B) f $==
fmap (joinrecdata_0gpd A B) g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk27d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk27d"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
fmap (joinrecdata_0gpd A B) (Id a) $==
Id (joinrecdata_0gpd A B a)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk27e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk27e"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; b) (<span class="nv">g</span> : b $-&gt; c),
fmap (joinrecdata_0gpd A B) (g $o f) $==
fmap (joinrecdata_0gpd A B) g $o
fmap (joinrecdata_0gpd A B) f</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* If [g1 g2 : P -&gt; Q] are homotopic, then the induced maps are homotopic: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk27f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk27f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : a $-&gt; b),
f $== g -&gt;
fmap (joinrecdata_0gpd A B) f $==
fmap (joinrecdata_0gpd A B) g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk280" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk280"><span class="nb">intros</span> P Q g1 g2 h f; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath (joinrecdata_fun g1 f)
  (joinrecdata_fun g2 f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk281">snapply Build_JoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g1 (jl f a) = g2 (jl f a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk282" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk282"><hr></label><div class="goal-conclusion">g1 (jr f b) = g2 (jr f b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk283" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk283"><hr></label><div class="goal-conclusion">ap g1 (jg f a b) @ <span class="nl">?Goal2</span> = <span class="nl">?Goal1</span> @ ap g2 (jg f a b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk284" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk284"><span class="mi">1</span>, <span class="mi">2</span>: <span class="nb">apply</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g1 (jg f a b) @ h (jr f b) =
h (jl f a) @ ap g2 (jg f a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk285">interval_ind f a b; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> @ h f = h f @ <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_1p_p1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The identity map [P -&gt; P] is sent to a map homotopic to the identity. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk286">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
fmap (joinrecdata_0gpd A B) (Id a) $==
Id (joinrecdata_0gpd A B a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk287" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk287"><span class="nb">intros</span> P f; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath (joinrecdata_fun idmap f) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk288">bundle_joinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap idmap (jg f a b) = jg f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* It respects composition. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk289" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk289">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; b) (<span class="nv">g</span> : b $-&gt; c),
fmap (joinrecdata_0gpd A B) (g $o f) $==
fmap (joinrecdata_0gpd A B) g $o
fmap (joinrecdata_0gpd A B) f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk28a"><span class="nb">intros</span> P Q R g1 g2 f; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath
  (joinrecdata_fun (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) f)
  (joinrecdata_fun g2 (joinrecdata_fun g1 f))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk28b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk28b">bundle_joinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) (jg f a b) =
ap g2 (ap g1 (jg f a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap_compose.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">joinrecdata_0gpd_fun</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) : Fun11 <span class="kt">Type</span> ZeroGpd
  := Build_Fun11 _ _ (joinrecdata_0gpd A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** By the Yoneda lemma, it follows from [JoinRecData] being a 1-functor that given [JoinRecData] in [J], we get a map [(J -&gt; P) $-&gt; (JoinRecData A B P)] of 0-groupoids which is natural in [P]. Below we will specialize to the case where [J] is [Join A B] with the canonical [JoinRecData]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk28c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk28c"><span class="kn">Definition</span> <span class="nf">join_nattrans_recdata</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">J</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : JoinRecData A B J)
  : NatTrans (opyon_0gpd J) (joinrecdata_0gpd_fun A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatTrans (opyon_0gpd J) (joinrecdata_0gpd_fun A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk28d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatTrans (opyon_0gpd J) (joinrecdata_0gpd_fun A B)</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk28e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk28e">snapply Build_NatTrans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">opyon_0gpd J $=&gt; joinrecdata_0gpd_fun A B</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk28f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><label class="goal-separator" for="core-v-chk28f"><hr></label><div class="goal-conclusion">Is1Natural (opyon_0gpd J) (joinrecdata_0gpd_fun A B)
  <span class="nl">?alpha</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk290" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk290"><span class="mi">1</span>: rapply opyoneda_0gpd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd_fun A B J</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk291" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><label class="goal-separator" for="core-v-chk291"><hr></label><div class="goal-conclusion">Is1Natural (opyon_0gpd J) (joinrecdata_0gpd_fun A B)
  (opyoneda_0gpd J (joinrecdata_0gpd_fun A B) <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk292"><span class="mi">2</span>: <span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd_fun A B J</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Thus we get a map [(Join A B -&gt; P) $-&gt; (JoinRecData A B P)] of 0-groupoids, natural in [P]. The underlying map is [join_rec_inv A B P]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_rec_inv_nattrans</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
  : NatTrans (opyon_0gpd (Join A B)) (joinrecdata_0gpd_fun A B)
  := join_nattrans_recdata (joinrecdata_join A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This natural transformation is in fact a natural equivalence of 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk293"><span class="kn">Definition</span> <span class="nf">join_rec_inv_natequiv</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
  : NatEquiv (opyon_0gpd (Join A B)) (joinrecdata_0gpd_fun A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (opyon_0gpd (Join A B))
  (joinrecdata_0gpd_fun A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk294"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (opyon_0gpd (Join A B))
  (joinrecdata_0gpd_fun A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk295">snapply Build_NatEquiv&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatTrans (opyon_0gpd (Join A B))
  (joinrecdata_0gpd_fun A B)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk296" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk296"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>, CatIsEquiv (<span class="nl">?alpha</span> a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk297"><span class="mi">1</span>: <span class="nb">apply</span> join_rec_inv_nattrans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
CatIsEquiv (join_rec_inv_nattrans A B a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk298"><span class="nb">intro</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">CatIsEquiv (join_rec_inv_nattrans A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk299"><span class="nb">apply</span> isequiv_0gpd_issurjinj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsSurjInj (join_rec_inv_nattrans A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk29a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk29a"><span class="nb">apply</span> Build_IsSurjInj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">SplEssSurj (join_rec_inv_nattrans A B P)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk29b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk29b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : zerogpd_graph (opyon_0gpd (Join A B) P),
join_rec_inv_nattrans A B P x $==
join_rec_inv_nattrans A B P y -&gt; x $== y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk29c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk29c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">SplEssSurj (join_rec_inv_nattrans A B P)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk29d"><span class="nb">intros</span> f; <span class="nb">cbn</span> <span class="kr">in</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{a : zerogpd_graph (opyon_0gpd (Join A B) P) &amp;
join_rec_inv_nattrans A B P a $== f}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk29e"><span class="kr">exists</span> (<span class="nv">join_rec</span> <span class="nv">f</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_rec_inv_nattrans A B P (join_rec f) $== f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_rec_beta.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk29f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : zerogpd_graph (opyon_0gpd (Join A B) P),
join_rec_inv_nattrans A B P x $==
join_rec_inv_nattrans A B P y -&gt; x $== y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (@isinj_join_rec_inv A B P).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It will be handy to name the inverse natural equivalence. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_rec_natequiv</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
  := natequiv_inverse (join_rec_inv_natequiv A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [join_rec_natequiv A B P] is an equivalence of 0-groupoids whose underlying function is definitionally [join_rec]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">join_rec_natequiv_check</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>)
  : equiv_fun_0gpd (join_rec_natequiv A B P) = @join_rec A B P
  := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It follows that [join_rec A B P] is a 0-functor. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a0"><span class="kn">Instance</span> <span class="nf">is0functor_join_rec</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>) : Is0Functor (@join_rec A B P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor join_rec</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor join_rec</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a2"><span class="nb">change</span> (Is0Functor (equiv_fun_0gpd (join_rec_natequiv A B P))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (equiv_fun_0gpd (join_rec_natequiv A B P))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And that [join_rec A B] is natural.   The [$==] in the statement is just [==], but we use WildCat notation so that we can invert and compose these with WildCat notation. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a3"><span class="kn">Definition</span> <span class="nf">join_rec_nat</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q) (<span class="nv">f</span> : JoinRecData A B P)
  : join_rec (joinrecdata_fun g f) $== g o join_rec f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_rec (joinrecdata_fun g f) $== g o join_rec f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>JoinRecData A B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_rec (joinrecdata_fun g f) $== g o join_rec f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (isnat (join_rec_natequiv A B) g f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We restate the previous two results using [Join_rec] for convenience. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Join_rec_homotopic</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) {<span class="nv">P</span> : <span class="kt">Type</span>}
  (<span class="nv">fl</span>  : A -&gt; P) (<span class="nv">fr</span>  : B -&gt; P) (<span class="nv">fg</span>  : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, fl  a = fr  b)
  (<span class="nv">fl&#39;</span> : A -&gt; P) (<span class="nv">fr&#39;</span> : B -&gt; P) (<span class="nv">fg&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, fl&#39; a = fr&#39; b)
  (<span class="nv">hl</span> : <span class="kr">forall</span> <span class="nv">a</span>, fl a = fl&#39; a)
  (<span class="nv">hr</span> : <span class="kr">forall</span> <span class="nv">b</span>, fr b = fr&#39; b)
  (<span class="nv">hg</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, fg a b @ hr b = hl a @ fg&#39; a b)
  : Join_rec fl fr fg == Join_rec fl&#39; fr&#39; fg&#39;
  := fmap join_rec (Build_JoinRecPath _ _ _
      {| jl:=fl; jr:=fr; jg:=fg |} {| jl:=fl&#39;; jr:=fr&#39;; jg:=fg&#39; |} hl hr hg).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Join_rec_nat</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q)
  (<span class="nv">fl</span> : A -&gt; P) (<span class="nv">fr</span> : B -&gt; P) (<span class="nv">fg</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, fl a = fr b)
  : Join_rec (g o fl) (g o fr) (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; ap g (fg a b)) == g o Join_rec fl fr fg
  := join_rec_nat _ _ g {| jl:=fl; jr:=fr; jg:=fg |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Various types of equalities between paths in joins *)</span>

<span class="sd">(** Naturality squares for given paths in [A] and [B]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">JoinNatSq</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a5"><span class="kn">Definition</span> <span class="nf">join_natsq</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} {<span class="nv">b</span> <span class="nv">b&#39;</span> : B}
    (<span class="nv">p</span> : a = a&#39;) (<span class="nv">q</span> : b = b&#39;)
    : (ap joinl p) @ (jglue a&#39; b&#39;) = (jglue a b) @ (ap joinr q).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl p @ jglue a&#39; b&#39; = jglue a b @ ap joinr q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl p @ jglue a&#39; b&#39; = jglue a b @ ap joinr q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a7"><span class="nb">destruct</span> p, q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl <span class="mi">1</span> @ jglue a b = jglue a b @ ap joinr <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_1p_p1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a8"><span class="kn">Definition</span> <span class="nf">join_natsq_v</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} {<span class="nv">b</span> <span class="nv">b&#39;</span> : B}
    (<span class="nv">p</span> : a = a&#39;) (<span class="nv">q</span> : b = b&#39;)
    : PathSquare (ap joinl p) (ap joinr q) (jglue a b) (jglue a&#39; b&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathSquare (ap joinl p) (ap joinr q) (jglue a b)
  (jglue a&#39; b&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2a9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2a9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathSquare (ap joinl p) (ap joinr q) (jglue a b)
  (jglue a&#39; b&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2aa"><span class="nb">destruct</span> p, q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathSquare (ap joinl <span class="mi">1</span>) (ap joinr <span class="mi">1</span>) (jglue a b)
  (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> sq_refl_v.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ab"><span class="kn">Definition</span> <span class="nf">join_natsq_h</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} {<span class="nv">b</span> <span class="nv">b&#39;</span> : B}
    (<span class="nv">p</span> : a = a&#39;) (<span class="nv">q</span> : b = b&#39;)
    : PathSquare (jglue a b) (jglue a&#39; b&#39;) (ap joinl p) (ap joinr q).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathSquare (jglue a b) (jglue a&#39; b&#39;) (ap joinl p)
  (ap joinr q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ac"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathSquare (jglue a b) (jglue a&#39; b&#39;) (ap joinl p)
  (ap joinr q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ad"><span class="nb">destruct</span> p, q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathSquare (jglue a b) (jglue a b) (ap joinl <span class="mi">1</span>)
  (ap joinr <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> sq_refl_h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">JoinNatSq</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The triangles that arise when one of the given paths is reflexivity. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Triangle</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ae" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ae"><span class="kn">Definition</span> <span class="nf">triangle_h</span> {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} (<span class="nv">b</span> : B) (<span class="nv">p</span> : a = a&#39;)
    : ap joinl p @ (jglue a&#39; b) = jglue a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl p @ jglue a&#39; b = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2af" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2af"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl p @ jglue a&#39; b = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b0"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl <span class="mi">1</span> @ jglue a b = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_1p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b1"><span class="kn">Definition</span> <span class="nf">triangle_h&#39;</span> {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} (<span class="nv">b</span> : B) (<span class="nv">p</span> : a = a&#39;)
    : zigzag a a&#39; b = ap joinl p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zigzag a a&#39; b = ap joinl p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zigzag a a&#39; b = ap joinl p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b3"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zigzag a a b = ap joinl <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_pV.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b4"><span class="kn">Definition</span> <span class="nf">triangle_v</span> (<span class="nv">a</span> : A) {<span class="nv">b</span> <span class="nv">b&#39;</span> : B} (<span class="nv">p</span> : b = b&#39;)
    : jglue a b @ ap joinr p = jglue a b&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jglue a b @ ap joinr p = jglue a b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jglue a b @ ap joinr p = jglue a b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b6"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jglue a b @ ap joinr <span class="mi">1</span> = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_p1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b7"><span class="kn">Definition</span> <span class="nf">triangle_v&#39;</span> (<span class="nv">a</span> : A) {<span class="nv">b</span> <span class="nv">b&#39;</span> : B} (<span class="nv">p</span> : b = b&#39;)
    : zagzig a b b&#39; = ap joinr p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zagzig a b b&#39; = ap joinr p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zagzig a b b&#39; = ap joinr p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2b9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2b9"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zagzig a b b = ap joinr <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_Vp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** For just one of the above, we give a rule for how it behaves on inverse paths. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ba"><span class="kn">Definition</span> <span class="nf">triangle_v_V</span> (<span class="nv">a</span> : A) {<span class="nv">b</span> <span class="nv">b&#39;</span> : B} (<span class="nv">p</span> : b = b&#39;)
    : triangle_v a p^ = (<span class="mi">1</span> @@ ap_V joinr p) @ moveR_pV _ _ _ (triangle_v a p)^.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">triangle_v a p^ =
(<span class="mi">1</span> @@ ap_V joinr p) @
moveR_pV (ap joinr p) (jglue a b) (jglue a b&#39;)
  (triangle_v a p)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2bb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">triangle_v a p^ =
(<span class="mi">1</span> @@ ap_V joinr p) @
moveR_pV (ap joinr p) (jglue a b) (jglue a b&#39;)
  (triangle_v a p)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2bc" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2bc"><span class="nb">destruct</span> p; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">concat_p1 (jglue a b) =
<span class="mi">1</span> @
((concat_p1 (jglue a b) @ (concat_p1 (jglue a b))^) @
 concat_p1 (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2bd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2bd">rhs napply concat_1p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">concat_p1 (jglue a b) =
(concat_p1 (jglue a b) @ (concat_p1 (jglue a b))^) @
concat_p1 (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> concat_pV_p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Triangle</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Diamond lemmas for Join *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Diamond</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Diamond</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : A) (<span class="nv">b</span> <span class="nv">b&#39;</span> : B)
    := PathSquare (jglue a b) (jglue a&#39; b&#39;)^ (jglue a b&#39;) (jglue a&#39; b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2be"><span class="kn">Definition</span> <span class="nf">diamond_h</span> {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} (<span class="nv">b</span> <span class="nv">b&#39;</span> : B) (<span class="nv">p</span> : a = a&#39;)
    : zigzag a a&#39; b = zigzag a a&#39; b&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zigzag a a&#39; b = zigzag a a&#39; b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2bf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zigzag a a&#39; b = zigzag a a&#39; b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c0"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zigzag a a b = zigzag a a b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (concat_pV _ @ (concat_pV _)^).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c1"><span class="kn">Definition</span> <span class="nf">diamond_h_sq</span> {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} (<span class="nv">b</span> <span class="nv">b&#39;</span> : B) (<span class="nv">p</span> : a = a&#39;)
    : Diamond a a&#39; b b&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Diamond a a&#39; b b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Diamond a a&#39; b b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> sq_path, diamond_h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">diamond_v</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : A) {<span class="nv">b</span> <span class="nv">b&#39;</span> : B} (<span class="nv">p</span> : b = b&#39;)
    : zigzag a a&#39; b = zigzag a a&#39; b&#39;
    := ap (zigzag a a&#39;) p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c3"><span class="kn">Definition</span> <span class="nf">diamond_v_sq</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : A) {<span class="nv">b</span> <span class="nv">b&#39;</span> : B} (<span class="nv">p</span> : b = b&#39;)
    : Diamond a a&#39; b b&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Diamond a a&#39; b b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, b'</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Diamond a a&#39; b b&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> sq_path, diamond_v.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c5"><span class="kn">Lemma</span> <span class="nf">diamond_symm</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B)
    : diamond_v_sq a a <span class="mi">1</span> = diamond_h_sq b b <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">diamond_v_sq a a <span class="mi">1</span> = diamond_h_sq b b <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">diamond_v_sq a a <span class="mi">1</span> = diamond_h_sq b b <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c7"><span class="nb">unfold</span> diamond_v_sq, diamond_h_sq, diamond_v, diamond_h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">sq_path (ap (zigzag a a) <span class="mi">1</span>) =
sq_path
  (concat_pV (jglue a b) @ (concat_pV (jglue a b))^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> ap, concat_pV.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Diamond</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c8"><span class="kn">Definition</span> <span class="nf">diamond_twist</span> {<span class="nv">A</span> : <span class="kt">Type</span>} {<span class="nv">a</span> <span class="nv">a&#39;</span> : A} (<span class="nv">p</span> : a = a&#39;)
  : DPath (<span class="kr">fun</span> <span class="nv">x</span> =&gt; Diamond a&#39; x a x) p
    (diamond_v_sq a&#39; a <span class="mi">1</span>) (diamond_h_sq a a&#39; <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">DPath (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; Diamond a&#39; x a x) p
  (diamond_v_sq a&#39; a <span class="mi">1</span>) (diamond_h_sq a a&#39; <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2c9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2c9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">DPath (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; Diamond a&#39; x a x) p
  (diamond_v_sq a&#39; a <span class="mi">1</span>) (diamond_h_sq a a&#39; <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ca" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ca"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">DPath (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; Diamond a x a x) <span class="mi">1</span>
  (diamond_v_sq a a <span class="mi">1</span>) (diamond_h_sq a a <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> diamond_symm.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Functoriality of Join. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">FunctorJoin</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** In some cases, we&#39;ll need to refer to the recursion data that defines [functor_join], so we make it a separate definition. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">functor_join_recdata</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span>} (<span class="nv">f</span> : A -&gt; C) (<span class="nv">g</span> : B -&gt; D)
    : JoinRecData A B (Join C D)
    := {| jl := joinl o f; jr := joinr o g; jg := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; jglue (f a) (g b); |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">functor_join</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span>} (<span class="nv">f</span> : A -&gt; C) (<span class="nv">g</span> : B -&gt; D)
    : Join A B -&gt; Join C D
    := join_rec (functor_join_recdata f g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">functor_join_beta_jglue</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; C) (<span class="nv">g</span> : B -&gt; D)
    (<span class="nv">a</span> : A) (<span class="nv">b</span> : B)
    : ap (functor_join f g) (jglue a b) = jglue (f a) (g b)
    := join_rec_beta_jg _ a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">functor_join_beta_zigzag</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; C) (<span class="nv">g</span> : B -&gt; D)
    (<span class="nv">a</span> <span class="nv">a&#39;</span> : A) (<span class="nv">b</span> : B)
    : ap (functor_join f g) (zigzag a a&#39; b) = zigzag (f a) (f a&#39;) (g b)
    := Join_rec_beta_zigzag _ _ _ a a&#39; b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2cb"><span class="kn">Definition</span> <span class="nf">functor_join_compose</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> <span class="nv">E</span> <span class="nv">F</span>}
    (<span class="nv">f</span> : A -&gt; C) (<span class="nv">g</span> : B -&gt; D) (<span class="nv">h</span> : C -&gt; E) (<span class="nv">i</span> : D -&gt; F)
    : functor_join (h o f) (i o g) == functor_join h i o functor_join f g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (h o f) (i o g) ==
functor_join h i o functor_join f g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2cc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (h o f) (i o g) ==
functor_join h i o functor_join f g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2cd">snapply Join_ind_FlFFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
functor_join (h o f) (i o g) (joinl a) =
functor_join h i (functor_join f g (joinl a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2ce" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br></div><label class="goal-separator" for="core-v-chk2ce"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
functor_join (h o f) (i o g) (joinr b) =
functor_join h i (functor_join f g (joinr b))</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk2cf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br></div><label class="goal-separator" for="core-v-chk2cf"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (functor_join (h o f) (i o g)) (jglue a b) @ <span class="nl">?Hr</span> b =
<span class="nl">?Hl</span> a @
ap (functor_join h i)
  (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d0"><span class="mi">1</span>,<span class="mi">2</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (functor_join (h o f) (i o g)) (jglue a b) @
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @
ap (functor_join h i)
  (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d1"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join (h o f) (i o g)) (jglue a b) @
(<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>) a @
ap (functor_join h i)
  (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d2"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (f x))
     (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; i (g x))) (jglue a b) @ <span class="mi">1</span> =
<span class="mi">1</span> @
ap (functor_join h i)
  (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d3"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (f x))
     (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; i (g x))) (jglue a b) =
ap (functor_join h i)
  (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d4">lhs napply functor_join_beta_jglue; <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join h i)
  (ap (functor_join f g) (jglue a b)) =
jglue (h (f a)) (i (g b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d5">lhs nrefine (ap _ (functor_join_beta_jglue _ _ _ _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, E, F</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; E</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>D -&gt; F</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join h i) (jglue (f a) (g b)) =
jglue (h (f a)) (i (g b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">napply (functor_join_beta_jglue _ _ (f a) (g b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d6"><span class="kn">Definition</span> <span class="nf">functor_join_idmap</span> {<span class="nv">A</span> <span class="nv">B</span>}
    : functor_join idmap idmap == (idmap : Join A B -&gt; Join A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap idmap ==
(idmap : Join A B -&gt; Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap idmap ==
(idmap : Join A B -&gt; Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2d8">snapply Join_ind_FlFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
functor_join idmap idmap (joinl a) = idmap (joinl a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2d9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk2d9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
functor_join idmap idmap (joinr b) = idmap (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk2da" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk2da"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (functor_join idmap idmap) (jglue a b) @ <span class="nl">?Hr</span> b =
<span class="nl">?Hl</span> a @ ap idmap (jglue a b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2db"><span class="mi">1</span>,<span class="mi">2</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (functor_join idmap idmap) (jglue a b) @
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @ ap idmap (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2dc" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2dc"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join idmap idmap) (jglue a b) @
(<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>) a @ ap idmap (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2dd"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join idmap idmap) (jglue a b) @ <span class="mi">1</span> =
<span class="mi">1</span> @ ap idmap (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2de"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join idmap idmap) (jglue a b) =
ap idmap (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2df" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2df">lhs napply functor_join_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jglue a b = ap idmap (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> ap_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e0"><span class="kn">Definition</span> <span class="nf">functor2_join</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span>} {<span class="nv">f</span> <span class="nv">f&#39;</span> : A -&gt; C} {<span class="nv">g</span> <span class="nv">g&#39;</span> : B -&gt; D}
    (<span class="nv">h</span> : f == f&#39;) (<span class="nv">k</span> : g == g&#39;)
    : functor_join f g == functor_join f&#39; g&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f g == functor_join f&#39; g&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f g == functor_join f&#39; g&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e2">srapply Join_ind_FlFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
functor_join f g (joinl a) =
functor_join f&#39; g&#39; (joinl a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2e3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><label class="goal-separator" for="core-v-chk2e3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
functor_join f g (joinr b) =
functor_join f&#39; g&#39; (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk2e4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><label class="goal-separator" for="core-v-chk2e4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (functor_join f g) (jglue a b) @ <span class="nl">?Hr</span> b =
<span class="nl">?Hl</span> a @ ap (functor_join f&#39; g&#39;) (jglue a b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
functor_join f g (joinl a) =
functor_join f&#39; g&#39; (joinl a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span>; <span class="nb">intros</span>; <span class="nb">apply</span> ap, h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
functor_join f g (joinr b) =
functor_join f&#39; g&#39; (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span>; <span class="nb">intros</span>; <span class="nb">apply</span> ap, k.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (functor_join f g) (jglue a b) @
((<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; ap joinr (k b0))
 :
 <span class="kr">forall</span> <span class="nv">b0</span> : B,
 functor_join f g (joinr b0) =
 functor_join f&#39; g&#39; (joinr b0)) b =
((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; ap joinl (h a0))
 :
 <span class="kr">forall</span> <span class="nv">a0</span> : A,
 functor_join f g (joinl a0) =
 functor_join f&#39; g&#39; (joinl a0)) a @
ap (functor_join f&#39; g&#39;) (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e8"><span class="nb">intros</span> a b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join f g) (jglue a b) @ ap joinr (k b) =
ap joinl (h a) @ ap (functor_join f&#39; g&#39;) (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2e9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2e9">lhs napply (functor_join_beta_jglue _ _ _ _ @@ <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jglue (f a) (g b) @ ap joinr (k b) =
ap joinl (h a) @ ap (functor_join f&#39; g&#39;) (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ea" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ea"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl (h a) @ ap (functor_join f&#39; g&#39;) (jglue a b) =
jglue (f a) (g b) @ ap joinr (k b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2eb">lhs napply (<span class="mi">1</span> @@ functor_join_beta_jglue _ _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl (h a) @ jglue (f&#39; a) (g&#39; b) =
jglue (f a) (g b) @ ap joinr (k b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_natsq.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ec" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ec">#[export] <span class="kn">Instance</span> <span class="nf">isequiv_functor_join</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span>}
    (<span class="nv">f</span> : A -&gt; C) `{!IsEquiv f} (g : B -&gt; D) `{!IsEquiv g}
    : IsEquiv (functor_join f g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_join f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ed" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ed"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_join f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ee" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ee">snapply isequiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join C D -&gt; Join A B</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2ef" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><label class="goal-separator" for="core-v-chk2ef"><hr></label><div class="goal-conclusion">functor_join f g o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk2f0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><label class="goal-separator" for="core-v-chk2f0"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o functor_join f g == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join C D -&gt; Join A B</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor_join f^-<span class="mi">1</span> g^-<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f g o functor_join f^-<span class="mi">1</span> g^-<span class="mi">1</span> == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f3"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f g o functor_join f^-<span class="mi">1</span> g^-<span class="mi">1</span> == <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2f4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><label class="goal-separator" for="core-v-chk2f4"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f5"><span class="mi">1</span>: <span class="nb">symmetry</span>; <span class="nb">apply</span> functor_join_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (<span class="kr">fun</span> <span class="nv">x</span> : C =&gt; f (f^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> <span class="nv">x</span> : D =&gt; g (g^-<span class="mi">1</span> x)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f6"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (<span class="kr">fun</span> <span class="nv">x</span> : C =&gt; f (f^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> <span class="nv">x</span> : D =&gt; g (g^-<span class="mi">1</span> x)) == <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2f7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><label class="goal-separator" for="core-v-chk2f7"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f8"><span class="mi">1</span>: <span class="bp">exact</span> (functor2_join (eisretr f) (eisretr g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap idmap == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> functor_join_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2f9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2f9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f^-<span class="mi">1</span> g^-<span class="mi">1</span> o functor_join f g == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2fa"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f^-<span class="mi">1</span> g^-<span class="mi">1</span> o functor_join f g == <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2fb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><label class="goal-separator" for="core-v-chk2fb"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2fc" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2fc"><span class="mi">1</span>: <span class="nb">symmetry</span>; <span class="nb">apply</span> functor_join_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x))
  (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g^-<span class="mi">1</span> (g x)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2fd"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x))
  (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g^-<span class="mi">1</span> (g x)) == <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk2fe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><label class="goal-separator" for="core-v-chk2fe"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk2ff" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk2ff"><span class="mi">1</span>: <span class="bp">exact</span> (functor2_join (eissect f) (eissect g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap idmap == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> functor_join_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_functor_join</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span>} (<span class="nv">f</span> : A &lt;~&gt; C) (<span class="nv">g</span> : B &lt;~&gt; D)
    : Join A B &lt;~&gt; Join C D := Build_Equiv _ _ (functor_join f g) _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk300">#[export] <span class="kn">Instance</span> <span class="nf">is0bifunctor_join</span> : Is0Bifunctor Join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Bifunctor Join</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk301" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk301"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Bifunctor Join</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk302" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk302">snapply Build_Is0Bifunctor&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is01Cat <span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is01Cat <span class="kt">Type</span></div></blockquote><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (uncurry Join)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk303"><span class="mi">1</span>,<span class="mi">2</span>: <span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (uncurry Join)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk304" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk304"><span class="nb">apply</span> Build_Is0Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span> * <span class="kt">Type</span>,
(a $-&gt; b) -&gt; uncurry Join a $-&gt; uncurry Join b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk305" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk305"><span class="nb">intros</span> A B [f g].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span>(<span class="kt">Type</span> * <span class="kt">Type</span>)%type</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>fst A $-&gt; fst B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>snd A $-&gt; snd B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uncurry Join A $-&gt; uncurry Join B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor_join f g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk306" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk306">#[export] <span class="kn">Instance</span> <span class="nf">is1bifunctor_join</span> : Is1Bifunctor Join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Bifunctor Join</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk307" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk307"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Bifunctor Join</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk308">snapply Build_Is1Bifunctor&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Functor (uncurry Join)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk309">napply Build_Is1Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span> * <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : a $-&gt; b),
f $== g -&gt;
fmap (uncurry Join) f $== fmap (uncurry Join) g</div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span> * <span class="kt">Type</span>,
fmap (uncurry Join) (Id a) $== Id (uncurry Join a)</div></blockquote><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span> * <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; b)
(<span class="nv">g</span> : b $-&gt; c),
fmap (uncurry Join) (g $o f) $==
fmap (uncurry Join) g $o fmap (uncurry Join) f</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk30a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk30a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span> * <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : a $-&gt; b),
f $== g -&gt;
fmap (uncurry Join) f $== fmap (uncurry Join) g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk30b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk30b"><span class="nb">intros</span> A B f g [p q].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span>(<span class="kt">Type</span> * <span class="kt">Type</span>)%type</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>fst f $-&gt; fst g</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>snd f $-&gt; snd g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fmap (uncurry Join) f $== fmap (uncurry Join) g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor2_join p q).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk30c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk30c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span> * <span class="kt">Type</span>,
fmap (uncurry Join) (Id a) $== Id (uncurry Join a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> A; <span class="bp">exact</span> functor_join_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk30d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk30d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span> * <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; b)
(<span class="nv">g</span> : b $-&gt; c),
fmap (uncurry Join) (g $o f) $==
fmap (uncurry Join) g $o fmap (uncurry Join) f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk30e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk30e"><span class="nb">intros</span> A B C [f g] [h k].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span>(<span class="kt">Type</span> * <span class="kt">Type</span>)%type</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>fst A $-&gt; fst B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>snd A $-&gt; snd B</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>fst B $-&gt; fst C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>snd B $-&gt; snd C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fmap (uncurry Join) ((h, k) $o (f, g)) $==
fmap (uncurry Join) (h, k) $o
fmap (uncurry Join) (f, g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor_join_compose f g h k).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">FunctorJoin</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Symmetry of Join</span>

<span class="sd">  We&#39;ll use the recursion equivalence above to prove the symmetry of Join, using the Yoneda lemma.  The idea is that [Join A B -&gt; P] is equivalent (as a 0-groupoid) to [JoinRecData A B P], and the latter is very symmetrical by construction, which makes it easy to show that it is equivalent to [JoinRecData B A P].  Going back along the first equivalence gets us to [Join B A -&gt; P].  These equivalences are natural in [P], so the symmetry equivalence follows from the Yoneda lemma.  This is mainly meant as a warm-up to proving the associativity of the join. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">JoinSym</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk30f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk30f"><span class="kn">Definition</span> <span class="nf">joinrecdata_sym</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>)
    : joinrecdata_0gpd A B P $-&gt; joinrecdata_0gpd B A P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd A B P $-&gt; joinrecdata_0gpd B A P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk310" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk310"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd A B P $-&gt; joinrecdata_0gpd B A P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk311" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk311">snapply Build_Fun01.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (joinrecdata_0gpd A B P) -&gt;
zerogpd_graph (joinrecdata_0gpd B A P)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk312" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk312"><hr></label><div class="goal-conclusion">Is0Functor <span class="nl">?F</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* The map of types [JoinRecData A B P -&gt; JoinRecData B A P]: *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk313" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk313">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (joinrecdata_0gpd A B P) -&gt;
zerogpd_graph (joinrecdata_0gpd B A P)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk314" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk314"><span class="nb">intros</span> [fl fr fg].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>fg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), fl a = fr b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (joinrecdata_0gpd B A P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk315" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk315">snapply (Build_JoinRecData fr fl).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>fg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), fl a = fr b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A), fr a = fl b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> b a; <span class="bp">exact</span> (fg a b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* It respects the paths. *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk316" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk316">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor
  (<span class="kr">fun</span> <span class="nv">X</span> : zerogpd_graph (joinrecdata_0gpd A B P) =&gt;
   (<span class="kr">fun</span> (<span class="nv">fl</span> : A -&gt; P) (<span class="nv">fr</span> : B -&gt; P)
      (<span class="nv">fg</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), fl a = fr b) =&gt;
    {|
      jl := fr;
      jr := fl;
      jg := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (fg a b)^
    |}) (jl X) (jr X) (jg X))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk317" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk317"><span class="nb">apply</span> Build_Is0Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : zerogpd_graph (joinrecdata_0gpd A B P),
(a $-&gt; b) -&gt;
{|
  jl := jr a;
  jr := jl a;
  jg := <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (jg a a0 b0)^
|} $-&gt;
{|
  jl := jr b;
  jr := jl b;
  jg := <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (jg b a0 b0)^
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk318" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk318"><span class="nb">intros</span> f g h; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath
  {|
    jl := jr f;
    jr := jl f;
    jg := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (jg f a b)^
  |}
  {|
    jl := jr g;
    jr := jl g;
    jg := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (jg g a b)^
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk319" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk319">snapply Build_JoinRecPath; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B, jr f a = jr g a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk31a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><label class="goal-separator" for="core-v-chk31a"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : A, jl f b = jl g b</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk31b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><label class="goal-separator" for="core-v-chk31b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A),
(jg f b a)^ @ <span class="nl">?Goal0</span> b = <span class="nl">?Goal</span> a @ (jg g b a)^</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk31c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk31c"><span class="mi">1</span>, <span class="mi">2</span>: <span class="nb">intros</span>; <span class="nb">apply</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A),
(jg f b a)^ @ (<span class="kr">fun</span> <span class="nv">b0</span> : A =&gt; <span class="kr">let</span> <span class="nv">X</span> := hl h <span class="kr">in</span> X b0) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : B =&gt; <span class="kr">let</span> <span class="nv">X</span> := hr h <span class="kr">in</span> X a0) a @ (jg g b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk31d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk31d"><span class="nb">intros</span> b a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(jg f a b)^ @ (<span class="kr">fun</span> <span class="nv">b</span> : A =&gt; <span class="kr">let</span> <span class="nv">X</span> := hl h <span class="kr">in</span> X b) a =
(<span class="kr">fun</span> <span class="nv">a</span> : B =&gt; <span class="kr">let</span> <span class="nv">X</span> := hr h <span class="kr">in</span> X a) b @ (jg g a b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk31e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk31e">square_ind g h a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(jg f a b)^ @ <span class="mi">1</span> = <span class="mi">1</span> @ (jg f a b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> interval_ind f a b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** This map is its own inverse in the 1-category of 0-groupoids. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk31f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk31f"><span class="kn">Definition</span> <span class="nf">joinrecdata_sym_inv</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">P</span> : <span class="kt">Type</span>)
    : joinrecdata_sym B A P $o joinrecdata_sym A B P $== Id _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_sym B A P $o joinrecdata_sym A B P $==
Id (joinrecdata_0gpd A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk320" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk320"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_sym B A P $o joinrecdata_sym A B P $==
Id (joinrecdata_0gpd A B P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk321" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk321"><span class="nb">intro</span> f; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath
  {|
    jl := jl f;
    jr := jr f;
    jg := <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">a</span> : B) =&gt; ((jg f b a)^)^
  |} f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk322" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk322">bundle_joinrecpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
jg
  {|
    jl := jl f;
    jr := jr f;
    jg := <span class="kr">fun</span> (<span class="nv">b0</span> : A) (<span class="nv">a0</span> : B) =&gt; ((jg f b0 a0)^)^
  |} a b = jg f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk323" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk323"><span class="nb">intros</span> a b; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd A B P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((jg f a b)^)^ = jg f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inv_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We get the symmetry natural equivalence on [TriJoinRecData]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk324" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk324"><span class="kn">Definition</span> <span class="nf">joinrecdata_sym_natequiv</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : NatEquiv (joinrecdata_0gpd_fun A B) (joinrecdata_0gpd_fun B A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (joinrecdata_0gpd_fun A B)
  (joinrecdata_0gpd_fun B A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk325" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk325"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (joinrecdata_0gpd_fun A B)
  (joinrecdata_0gpd_fun B A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk326" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk326">snapply Build_NatEquiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
joinrecdata_0gpd_fun A B a $&lt;~&gt;
joinrecdata_0gpd_fun B A a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk327" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk327"><hr></label><div class="goal-conclusion">Is1Natural (joinrecdata_0gpd_fun A B)
  (joinrecdata_0gpd_fun B A) (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; <span class="nl">?e</span> a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* An equivalence of 0-groupoids for each [P]: *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk328" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk328">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
joinrecdata_0gpd_fun A B a $&lt;~&gt;
joinrecdata_0gpd_fun B A a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk329" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk329"><span class="nb">intro</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd_fun A B P $&lt;~&gt;
joinrecdata_0gpd_fun B A P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk32a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk32a">snapply cate_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_0gpd_fun A B P $-&gt;
joinrecdata_0gpd_fun B A P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk32b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk32b"><hr></label><div class="goal-conclusion">joinrecdata_0gpd_fun B A P $-&gt;
joinrecdata_0gpd_fun A B P</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk32c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk32c"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> $o <span class="nl">?g</span> $== Id (joinrecdata_0gpd_fun B A P)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk32d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk32d"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> $o <span class="nl">?f</span> $== Id (joinrecdata_0gpd_fun A B P)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk32e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk32e"><span class="mi">1</span>, <span class="mi">2</span>: <span class="nb">apply</span> joinrecdata_sym.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinrecdata_sym A B P $o joinrecdata_sym B A P $==
Id (joinrecdata_0gpd_fun B A P)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk32f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk32f"><hr></label><div class="goal-conclusion">joinrecdata_sym B A P $o joinrecdata_sym A B P $==
Id (joinrecdata_0gpd_fun A B P)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="mi">1</span>, <span class="mi">2</span>: <span class="nb">apply</span> joinrecdata_sym_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* Naturality: *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk330" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk330">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (joinrecdata_0gpd_fun A B)
  (joinrecdata_0gpd_fun B A)
  (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt;
   (<span class="kr">fun</span> <span class="nv">P</span> : <span class="kt">Type</span> =&gt;
    cate_adjointify (joinrecdata_sym A B P)
      (joinrecdata_sym B A P)
      (joinrecdata_sym_inv B A P)
      (joinrecdata_sym_inv A B P)) a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk331" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk331">snapply Build_Is1Natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; a&#39;),
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt;
 cate_fun
   ((<span class="kr">fun</span> <span class="nv">P</span> : <span class="kt">Type</span> =&gt;
     cate_adjointify (joinrecdata_sym A B P)
       (joinrecdata_sym B A P)
       (joinrecdata_sym_inv B A P)
       (joinrecdata_sym_inv A B P)) a0)) a&#39; $o
fmap (joinrecdata_0gpd A B) f $==
fmap (joinrecdata_0gpd B A) f $o
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt;
 cate_fun
   ((<span class="kr">fun</span> <span class="nv">P</span> : <span class="kt">Type</span> =&gt;
     cate_adjointify (joinrecdata_sym A B P)
       (joinrecdata_sym B A P)
       (joinrecdata_sym_inv B A P)
       (joinrecdata_sym_inv A B P)) a0)) a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk332" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk332"><span class="nb">intros</span> P Q g f; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd_fun A B P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">JoinRecPath
  {|
    jl := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (jr f x);
    jr := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (jl f x);
    jg := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (ap g (jg f a b))^
  |}
  (joinrecdata_fun g
     {|
       jl := jr f;
       jr := jl f;
       jg := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (jg f a b)^
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk333" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk333">bundle_joinrecpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd_fun A B P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A),
jg
  {|
    jl := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (jr f x);
    jr := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (jl f x);
    jg :=
      <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (ap g (jg f a0 b0))^
  |} a b =
jg
  (joinrecdata_fun g
     {|
       jl := jr f;
       jr := jl f;
       jg := <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (jg f a0 b0)^
     |}) a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk334" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk334"><span class="nb">intros</span> b a; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (joinrecdata_0gpd_fun A B P)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap g (jg f a b))^ = ap g (jg f a b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> ap_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Combining with the recursion equivalence [join_rec_inv_natequiv] and its inverse gives the symmetry natural equivalence between the representable functors. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">joinrecdata_fun_sym</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : NatEquiv (opyon_0gpd (Join A B)) (opyon_0gpd (Join B A))
    := natequiv_compose (join_rec_natequiv B A)
        (natequiv_compose (joinrecdata_sym_natequiv A B) (join_rec_inv_natequiv A B)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The Yoneda lemma for 0-groupoid valued functors therefore gives us an equivalence between the representing objects.  We mark this with a prime, since we&#39;ll use a homotopic map with a slightly simpler definition. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk335" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk335"><span class="kn">Definition</span> <span class="nf">equiv_join_sym&#39;</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : Join A B &lt;~&gt; Join B A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B &lt;~&gt; Join B A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk336" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk336"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B &lt;~&gt; Join B A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk337" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk337">tapply (opyon_equiv_0gpd (A:=<span class="kt">Type</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">opyon1_0gpd (Join B A) $&lt;~&gt; opyon1_0gpd (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> joinrecdata_fun_sym.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** It has the nice property that the underlying function of the inverse is again [equiv_join_sym&#39;], with arguments permuted. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">equiv_join_sym_check1</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : (equiv_join_sym&#39; A B)^-<span class="mi">1</span> = equiv_fun (equiv_join_sym&#39; B A)
    := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The definition we end up with is almost the same as the obvious one, but has an extra [ap idmap] in it. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">equiv_join_sym_check2</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : equiv_fun (equiv_join_sym&#39; A B) = Join_rec (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; joinr a) (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; joinl b)
                                          (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt; (ap idmap (jglue b a))^)
    := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The next two give the obvious definition. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_sym_recdata</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : JoinRecData A B (Join B A)
    := Build_JoinRecData joinr joinl (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; (jglue b a)^).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_sym</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : Join A B -&gt; Join B A
    := join_rec (join_sym_recdata A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_sym_beta_jglue</span> {<span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">a</span> : A) (<span class="nv">b</span> : B)
    : ap (join_sym A B) (jglue a b) = (jglue b a)^
    := Join_rec_beta_jglue _ _ _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The obvious definition is homotopic to the definition via the Yoneda lemma. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk338" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk338"><span class="kn">Definition</span> <span class="nf">join_sym_homotopic</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
    : join_sym A B == equiv_join_sym&#39; A B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym A B == equiv_join_sym&#39; A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk339" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk339"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym A B == equiv_join_sym&#39; A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk33a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk33a"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_join_sym&#39; A B == join_sym A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="sd">(** Both sides are [join_rec] applied to [JoinRecData]: *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk33b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk33b">tapply (fmap join_rec).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">natequiv_compose (joinrecdata_sym_natequiv B A)
  (join_rec_inv_natequiv B A) (Join B A)
  (Id (Join B A)) $-&gt; join_sym_recdata A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk33c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk33c">bundle_joinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap idmap (jglue b a))^ = (jglue b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk33d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk33d"><span class="nb">refine</span> (ap inverse _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap idmap (jglue b a) = jglue b a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Therefore the obvious definition is also an equivalence, and the inverse function can also be chosen to be [join_sym]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_join_sym</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) : Join A B &lt;~&gt; Join B A
    := equiv_homotopic_inverse (equiv_join_sym&#39; A B)
                              (join_sym_homotopic A B)
                              (join_sym_homotopic B A).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">isequiv_join_sym</span> <span class="nv">A</span> <span class="nv">B</span> : IsEquiv (join_sym A B)
    := equiv_isequiv (equiv_join_sym A B).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** It&#39;s also straightforward to directly prove that [join_sym] is an equivalence.  The above approach is meant to illustrate the Yoneda lemma.  In the case of [equiv_trijoin_twist], the Yoneda approach seems to be more straightforward. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk33e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk33e"><span class="kn">Definition</span> <span class="nf">join_sym_inv</span> <span class="nv">A</span> <span class="nv">B</span> : join_sym A B o join_sym B A == idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym A B o join_sym B A == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk33f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk33f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym A B o join_sym B A == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk340" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk340">snapply (Join_ind_FFlr (join_sym B A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B,
join_sym A B (join_sym B A (joinl a)) = joinl a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk341" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk341"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : A,
join_sym A B (join_sym B A (joinr b)) = joinr b</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk342" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk342"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A),
ap (join_sym A B) (ap (join_sym B A) (jglue a b)) @
<span class="nl">?Hr</span> b = <span class="nl">?Hl</span> a @ jglue a b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk343" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk343">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B,
join_sym A B (join_sym B A (joinl a)) = joinl a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk344" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk344">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : A,
join_sym A B (join_sym B A (joinr b)) = joinr b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk345" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk345">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A),
ap (join_sym A B) (ap (join_sym B A) (jglue a b)) @
(<span class="kr">fun</span> <span class="nv">b0</span> : A =&gt; <span class="mi">1</span>) b = (<span class="kr">fun</span> <span class="nv">a0</span> : B =&gt; <span class="mi">1</span>) a @ jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk346" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk346"><span class="nb">intros</span> a b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A B) (ap (join_sym B A) (jglue a b)) @ <span class="mi">1</span> =
<span class="mi">1</span> @ jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk347" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk347"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A B) (ap (join_sym B A) (jglue a b)) =
jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk348" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk348"><span class="nb">refine</span> (ap _ (join_rec_beta_jg _ a b) @ _); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A B) (jglue b a)^ = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk349" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk349"><span class="nb">refine</span> (ap_V _ (jglue b a) @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap (join_sym A B) (jglue b a))^ = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk34a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk34a"><span class="nb">refine</span> (ap inverse (join_rec_beta_jg _ b a) @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(jg (join_sym_recdata A B) b a)^ = jglue a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inv_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Finally, one can also prove that the join is symmetric using [pushout_sym] and [equiv_prod_symm], but this results in an equivalence whose inverse isn&#39;t of the same form. *)</span>

  <span class="sd">(** We give a direct proof that [join_sym] is natural. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk34b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk34b"><span class="kn">Definition</span> <span class="nf">join_sym_nat</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;)
    : join_sym A&#39; B&#39; o functor_join f g == functor_join g f o join_sym A B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym A&#39; B&#39; o functor_join f g ==
functor_join g f o join_sym A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk34c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk34c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym A&#39; B&#39; o functor_join f g ==
functor_join g f o join_sym A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk34d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk34d">snapply Join_ind_FFlFFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
join_sym A&#39; B&#39; (functor_join f g (joinl a)) =
functor_join g f (join_sym A B (joinl a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk34e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br></div><label class="goal-separator" for="core-v-chk34e"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
join_sym A&#39; B&#39; (functor_join f g (joinr b)) =
functor_join g f (join_sym A B (joinr b))</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk34f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br></div><label class="goal-separator" for="core-v-chk34f"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (join_sym A&#39; B&#39;)
  (ap (functor_join f g) (jglue a b)) @ <span class="nl">?Hr</span> b =
<span class="nl">?Hl</span> a @
ap (functor_join g f) (ap (join_sym A B) (jglue a b))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk350" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk350"><span class="mi">1</span>, <span class="mi">2</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (join_sym A&#39; B&#39;)
  (ap (functor_join f g) (jglue a b)) @
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @
ap (functor_join g f) (ap (join_sym A B) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk351" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk351"><span class="nb">intros</span> a b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A&#39; B&#39;)
  (ap (functor_join f g) (jglue a b)) @ <span class="mi">1</span> =
<span class="mi">1</span> @
ap (functor_join g f) (ap (join_sym A B) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk352" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk352"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A&#39; B&#39;)
  (ap (functor_join f g) (jglue a b)) =
ap (functor_join g f) (ap (join_sym A B) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk353" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk353">lhs nrefine (ap _ (functor_join_beta_jglue _ _ _ _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A&#39; B&#39;) (jglue (f a) (g b)) =
ap (functor_join g f) (ap (join_sym A B) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk354" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk354">lhs napply join_sym_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(jglue (g b) (f a))^ =
ap (functor_join g f) (ap (join_sym A B) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk355" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk355"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join g f) (ap (join_sym A B) (jglue a b)) =
(jglue (g b) (f a))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk356" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk356">lhs nrefine (ap _ (join_sym_beta_jglue a b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join g f) (jglue b a)^ =
(jglue (g b) (f a))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk357" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk357"><span class="nb">refine</span> (ap_V _ (jglue b a) @ ap inverse _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A', B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join g f) (jglue b a) = jglue (g b) (f a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> functor_join_beta_jglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">JoinSym</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Other miscellaneous results about joins *)</span>

<span class="sd">(** Relationship to truncation levels and connectedness. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">JoinTrunc</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Joining with a contractible type produces a contractible type *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk358" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk358">#[export] <span class="kn">Instance</span> <span class="nf">contr_join</span> <span class="nv">A</span> <span class="nv">B</span> `{Contr A} : Contr (Join A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk359" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk359"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk35a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk35a"><span class="nb">apply</span> (Build_Contr _ (joinl (center A))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : Join A B, joinl (center A) = y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk35b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk35b">snapply Join_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, joinl (center A) = joinl a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk35c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><label class="goal-separator" for="core-v-chk35c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B, joinl (center A) = joinr b</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk35d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><label class="goal-separator" for="core-v-chk35d"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (paths (joinl (center A))) 
  (jglue a b) (<span class="nl">?P_A</span> a) = 
<span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk35e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk35e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, joinl (center A) = joinl a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> a; <span class="nb">apply</span> ap, contr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk35f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk35f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B, joinl (center A) = joinr b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> b; <span class="nb">apply</span> jglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk360" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk360">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (paths (joinl (center A))) (jglue a b)
  ((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; ap joinl (contr a0)) a) =
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; jglue (center A) b0) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk361" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk361"><span class="nb">intros</span> a b; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (paths (joinl (center A))) (jglue a b)
  (ap joinl (contr a)) = jglue (center A) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk362" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk362">lhs napply transport_paths_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Contr0</var><span class="hyp-type"><b>: </b><span>Contr A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinl (contr a) @ jglue a b = jglue (center A) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> triangle_h.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The join of hprops is an hprop *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk363" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk363">#[export] <span class="kn">Instance</span> <span class="nf">ishprop_join</span> `{Funext} A B `{IsHProp A} `{IsHProp B} : IsHProp (Join A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsHProp (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk364" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk364"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsHProp (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk365" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk365"><span class="nb">apply</span> hprop_inhabited_contr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; Contr (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk366" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk366">snapply Join_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Contr (Join A B)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk367" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><label class="goal-separator" for="core-v-chk367"><hr></label><div class="goal-conclusion">B -&gt; Contr (Join A B)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk368" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><label class="goal-separator" for="core-v-chk368"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), <span class="nl">?P_A</span> a = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk369" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk369">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Contr (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk36a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk36a"><span class="nb">intros</span> a; <span class="nb">apply</span> contr_join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (contr_inhabited_hprop A a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk36b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk36b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; Contr (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk36c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk36c"><span class="nb">intros</span> b; <span class="nb">refine</span> (contr_equiv (Join B A) (equiv_join_sym B A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr (Join B A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk36d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk36d"><span class="nb">apply</span> contr_join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (contr_inhabited_hprop B b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* The two proofs of contractibility are equal because [Contr] is an [HProp].  This uses [Funext]. *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk36e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk36e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; contr_join A B) a =
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt;
 contr_equiv (Join B A) (equiv_join_sym B A)) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> a b; <span class="nb">apply</span> path_ishprop.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk36f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk36f"><span class="kn">Lemma</span> <span class="nf">equiv_into_hprop</span> `{Funext} {A B P : <span class="kt">Type</span>} `{IsHProp P} (f : A -&gt; P)
    : (Join A B -&gt; P) &lt;~&gt; (B -&gt; P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Join A B -&gt; P) &lt;~&gt; (B -&gt; P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk370" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk370"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Join A B -&gt; P) &lt;~&gt; (B -&gt; P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk371" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk371"><span class="nb">apply</span> equiv_iff_hprop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Join A B -&gt; P) -&gt; B -&gt; P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk372" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br></div><label class="goal-separator" for="core-v-chk372"><hr></label><div class="goal-conclusion">(B -&gt; P) -&gt; Join A B -&gt; P</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk373" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk373"><span class="mi">1</span>: <span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">f</span> =&gt; f o joinr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(B -&gt; P) -&gt; Join A B -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk374" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk374"><span class="nb">intros</span> g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk375" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk375">snapply Join_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk376" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br></div><label class="goal-separator" for="core-v-chk376"><hr></label><div class="goal-conclusion">B -&gt; P</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk377" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br></div><label class="goal-separator" for="core-v-chk377"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), <span class="nl">?P_A</span> a = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk378" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk378"><span class="mi">1</span>,<span class="mi">2</span>: <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f a = g b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk379" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk379"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a = g b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> path_ishprop.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** And coincides with their disjunction *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk37a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk37a"><span class="kn">Definition</span> <span class="nf">equiv_join_hor</span> `{Funext} A B `{IsHProp A} `{IsHProp B}
    : Join A B &lt;~&gt; hor A B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B &lt;~&gt; hor A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk37b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk37b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B &lt;~&gt; hor A B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk37c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk37c"><span class="nb">apply</span> equiv_iff_hprop.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; hor A B</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk37d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><label class="goal-separator" for="core-v-chk37d"><hr></label><div class="goal-conclusion">hor A B -&gt; Join A B</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk37e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk37e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; hor A B</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Join_rec (<span class="kr">fun</span> <span class="nv">a</span> =&gt; tr (inl a)) (<span class="kr">fun</span> <span class="nv">b</span> =&gt; tr (inr b)) (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; path_ishprop _ _)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk37f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk37f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsHProp0</var><span class="hyp-type"><b>: </b><span>IsHProp A</span></span></span><br><span><var>IsHProp1</var><span class="hyp-type"><b>: </b><span>IsHProp B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hor A B -&gt; Join A B</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Trunc_rec, push.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Joins add connectivity *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk380" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk380">#[export] <span class="kn">Instance</span> <span class="nf">isconnected_join</span> `{Funext} {m n : trunc_index}
         (A B : <span class="kt">Type</span>) `{IsConnected m A} `{IsConnected n B}
    : IsConnected (m +<span class="mi">2</span>+ n) (Join A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected (Tr (m +<span class="mi">2</span>+ n)) (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk381" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk381"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected (Tr (m +<span class="mi">2</span>+ n)) (Join A B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk382" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk382"><span class="nb">apply</span> isconnected_from_elim; <span class="nb">intros</span> C ? k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NullHomotopy k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk383" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk383">transparent <span class="nb">assert</span> (f : (A -&gt; {s : Unit -&gt; C &amp;
                                   <span class="kr">forall</span> <span class="nv">x</span>, s tt = k (joinr x)})).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk384" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="nl">?Goal</span></span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk384"><hr></label><div class="goal-conclusion">NullHomotopy k</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk385" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk385">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk386" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk386"><span class="nb">intros</span> a; <span class="kr">exists</span> (<span class="nv">fun</span> <span class="nv">_</span> =&gt; k (joinl a)); <span class="nb">intros</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k (joinl a) = k (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap k (jglue a b)).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk387" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk387">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NullHomotopy k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk388" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk388"><span class="nb">assert</span> (h : NullHomotopy f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NullHomotopy f</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk389" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>NullHomotopy f</span></span></span><br></div><label class="goal-separator" for="core-v-chk389"><hr></label><div class="goal-conclusion">NullHomotopy k</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk38a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk38a">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NullHomotopy f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk38b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk38b">rapply (isconnected_elim m).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In (Tr m)
  {s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">rapply (istrunc_extension_along_conn (n:=n)).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk38c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk38c">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>NullHomotopy f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NullHomotopy k</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk38d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk38d"><span class="nb">unfold</span> NullHomotopy <span class="kr">in</span> *; <span class="nb">destruct</span> h <span class="kr">as</span> [[c g] h].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : C &amp; <span class="kr">forall</span> <span class="nv">x</span> : Join A B, k x = y}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk38e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk38e"><span class="kr">exists</span> (<span class="nv">c</span> <span class="nv">tt</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : Join A B, k x = c tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk38f" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk38f">snapply Join_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinl a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk390" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><label class="goal-separator" for="core-v-chk390"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk391" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><label class="goal-separator" for="core-v-chk391"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (jglue a b)
  (<span class="nl">?P_A</span> a) = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk392" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk392">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinl a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk393" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk393"><span class="nb">intros</span> a; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k (joinl a) = c tt</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap10 (h a)..<span class="mi">1</span> tt).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk394" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk394">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk395" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk395"><span class="nb">intros</span> b; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">k (joinr b) = c tt</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (g b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk396" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk396">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (jglue a b)
  ((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt;
    ap10 (h a0) ..<span class="mi">1</span> tt
    :
    (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinl a0)) a) =
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt;
 (g b0)^ : (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinr b0))
  b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk397" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk397"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (jglue a b)
  ((<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    ap10 (h a) ..<span class="mi">1</span> tt
    :
    (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinl a)) a) =
(<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
 (g b)^ : (<span class="kr">fun</span> <span class="nv">x</span> : Join A B =&gt; k x = c tt) (joinr b))
  b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk398" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk398">transport_paths Fl.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap10 (h a) ..<span class="mi">1</span> tt = ap k (jglue a b) @ (g b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk399" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk399"><span class="nb">apply</span> moveL_pV, moveR_Mp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g b = (ap10 (h a) ..<span class="mi">1</span> tt)^ @ ap k (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk39a" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk39a">lhs_V napply (apD10 (h a)..<span class="mi">2</span> b); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">s</span> : Unit -&gt; C =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)) (h a) ..<span class="mi">1</span>
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b)) b =
(ap10 (h a) ..<span class="mi">1</span> tt)^ @ ap k (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk39b" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk39b">lhs napply transport_forall_constant.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>m, n</var><span class="hyp-type"><b>: </b><span>trunc_index</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr m) A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected (Tr n) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>In (Tr (m +<span class="mi">2</span>+ n)) C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>Join A B -&gt; C</span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
(unit_name (k (joinl a));
<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; ap k (jglue a b))</span></span><span class="hyp-type"><b>: </b><span>A -&gt;
{s : Unit -&gt; C &amp; <span class="kr">forall</span> <span class="nv">x</span> : B, s tt = k (joinr x)}</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Unit -&gt; C</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, c tt = k (joinr x)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, f x = (c; g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Unit -&gt; C =&gt; x tt = k (joinr b))
  (h a) ..<span class="mi">1</span> (ap k (jglue a b)) =
(ap10 (h a) ..<span class="mi">1</span> tt)^ @ ap k (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">napply transport_paths_Fl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">JoinTrunc</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Join with Empty *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">JoinEmpty</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk39c" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk39c"><span class="kn">Definition</span> <span class="nf">equiv_join_empty_right</span> <span class="nv">A</span> : Join A Empty &lt;~&gt; A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A Empty &lt;~&gt; A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk39d" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk39d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A Empty &lt;~&gt; A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk39e" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk39e">snapply equiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A Empty -&gt; A</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk39f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk39f"><hr></label><div class="goal-conclusion">A -&gt; Join A Empty</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk3a0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk3a0"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk3a1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="core-v-chk3a1"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o <span class="nl">?f</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A Empty -&gt; A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_rec; snapply (Build_JoinRecData idmap); <span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Join A Empty</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> joinl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_rec
  {|
    jl := idmap;
    jr :=
      <span class="kr">fun</span> <span class="nv">H</span> : Empty =&gt;
      Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) H;
    jg :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Empty) =&gt;
      Empty_rect
        (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
         a = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) b
  |} o joinl == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinl
o join_rec
    {|
      jl := idmap;
      jr :=
        <span class="kr">fun</span> <span class="nv">H</span> : Empty =&gt;
        Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) H;
      jg :=
        <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Empty) =&gt;
        Empty_rect
          (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
           a = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) b
    |} == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">snapply Join_ind; [<span class="bp">reflexivity</span>| |]; <span class="bp">contradiction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_join_empty_left</span> <span class="nv">A</span> : Join Empty A &lt;~&gt; A
    := equiv_join_empty_right _ oE equiv_join_sym _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a6">#[export] <span class="kn">Instance</span> <span class="nf">join_right_unitor</span> : RightUnitor Join Empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">RightUnitor Join Empty</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">RightUnitor Join Empty</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a8">snapply Build_NatEquiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>, flip Join Empty a $&lt;~&gt; idmap a</div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (flip Join Empty) idmap
  (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; <span class="nl">?e</span> a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3a9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>, flip Join Empty a $&lt;~&gt; idmap a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> equiv_join_empty_right.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3aa" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3aa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (flip Join Empty) idmap
  (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; equiv_join_empty_right a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3ab" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3ab">snapply Build_Is1Natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; a&#39;),
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt; cate_fun (equiv_join_empty_right a0))
  a&#39; $o fmap (flip Join Empty) f $==
fmap idmap f $o
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt; cate_fun (equiv_join_empty_right a0))
  a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3ac" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3ac"><span class="nb">intros</span> A B f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; cate_fun (equiv_join_empty_right a))
  B $o fmap (flip Join Empty) f $==
fmap idmap f $o
(<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; cate_fun (equiv_join_empty_right a))
  A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3ad" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3ad"><span class="nb">cbn</span> -[equiv_join_empty_right].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 equiv_join_empty_right B (functor_join f idmap x)) ==
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 f (equiv_join_empty_right A x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3ae" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3ae">snapply Join_ind_FlFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 equiv_join_empty_right B (functor_join f idmap x))
  (joinl a) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 f (equiv_join_empty_right A x)) (joinl a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3af" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><label class="goal-separator" for="core-v-chk3af"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : Empty,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 equiv_join_empty_right B (functor_join f idmap x))
  (joinr b) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 f (equiv_join_empty_right A x)) (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk3b0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><label class="goal-separator" for="core-v-chk3b0"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Empty),
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
   equiv_join_empty_right B (functor_join f idmap x))
  (jglue a b) @ <span class="nl">?Hr</span> b =
<span class="nl">?Hl</span> a @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
   f (equiv_join_empty_right A x)) (jglue a b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b1">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 equiv_join_empty_right B (functor_join f idmap x))
  (joinl a) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 f (equiv_join_empty_right A x)) (joinl a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b2" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b2"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 equiv_join_empty_right B (functor_join f idmap x))
  (joinl a) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 f (equiv_join_empty_right A x)) (joinl a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b3">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : Empty,
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 equiv_join_empty_right B (functor_join f idmap x))
  (joinr b) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
 f (equiv_join_empty_right A x)) (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Empty),
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
   equiv_join_empty_right B (functor_join f idmap x))
  (jglue a b) @
(<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
 <span class="kr">match</span>
   b0 <span class="kr">as</span> e
   <span class="kr">return</span>
     (equiv_join_empty_right B
        (functor_join f idmap (joinr e)) =
      f (equiv_join_empty_right A (joinr e)))
 <span class="kr">with</span>
 <span class="kr">end</span>) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join A Empty =&gt;
   f (equiv_join_empty_right A x)) (jglue a b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> a [].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b5">#[export] <span class="kn">Instance</span> <span class="nf">join_left_unitor</span> : LeftUnitor Join Empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">LeftUnitor Join Empty</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">LeftUnitor Join Empty</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b7">snapply Build_NatEquiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>, Join Empty a $&lt;~&gt; idmap a</div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (Join Empty) idmap (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; <span class="nl">?e</span> a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>, Join Empty a $&lt;~&gt; idmap a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> equiv_join_empty_left.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3b9" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3b9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (Join Empty) idmap
  (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; equiv_join_empty_left a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3ba" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3ba">snapply Build_Is1Natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; a&#39;),
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt; cate_fun (equiv_join_empty_left a0))
  a&#39; $o fmap (Join Empty) f $==
fmap idmap f $o
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt; cate_fun (equiv_join_empty_left a0))
  a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3bb" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3bb"><span class="nb">intros</span> A B f x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join Empty A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equiv_join_empty_left B $o fmap (Join Empty) f) x =
(fmap idmap f $o equiv_join_empty_left A) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3bc" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3bc"><span class="nb">cbn</span> -[equiv_join_empty_right].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join Empty A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_join_empty_right B
  (join_sym Empty B (functor_join idmap f x)) =
f (equiv_join_empty_right A (join_sym Empty A x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3bd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3bd">rhs_V rapply (isnat_natequiv join_right_unitor).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join Empty A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_join_empty_right B
  (join_sym Empty B (functor_join idmap f x)) =
(join_right_unitor B $o fmap (flip Join Empty) f)
  (join_sym Empty A x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3be" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3be"><span class="nb">cbn</span> -[equiv_join_empty_right].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A $-&gt; B</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join Empty A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_join_empty_right B
  (join_sym Empty B (functor_join idmap f x)) =
equiv_join_empty_right B
  (functor_join f idmap (join_sym Empty A x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap, join_sym_nat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">JoinEmpty</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> equiv_join_empty_right : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Iterated Join powers of a type. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">JoinPower</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The join of [n.+1] copies of a type. This is convenient because it produces [A] definitionally when [n] is [0]. We annotate the universes to reduce universe variables. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">iterated_join</span> (<span class="nv">A</span> : <span class="kt">Type</span>@{u}) (<span class="nv">n</span> : nat) : <span class="kt">Type</span>@{u}
    := nat_iter n (Join A) A.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The join of [n] copies of a type. This is sometimes convenient for proofs by induction as it gives a trivial base case. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join_power</span> (<span class="nv">A</span> : <span class="kt">Type</span>@{u}) (<span class="nv">n</span> : nat) : <span class="kt">Type</span>@{u}
    := nat_iter n (Join A) (Empty : <span class="kt">Type</span>@{u}).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3bf" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3bf"><span class="kn">Definition</span> <span class="nf">equiv_join_powers</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">n</span> : nat) : join_power A n.+<span class="mi">1</span> &lt;~&gt; iterated_join A n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_power A n.+<span class="mi">1</span> &lt;~&gt; iterated_join A n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_power A n.+<span class="mi">1</span> &lt;~&gt; iterated_join A n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c1" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c1"><span class="nb">induction</span> n <span class="kr">as</span> [|n IHn]; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A Empty &lt;~&gt; A</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3c2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>join_power A n.+<span class="mi">1</span> &lt;~&gt; iterated_join A n</span></span></span><br></div><label class="goal-separator" for="core-v-chk3c2"><hr></label><div class="goal-conclusion">Join A (Join A (join_power A n)) &lt;~&gt;
Join A (iterated_join A n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A Empty &lt;~&gt; A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (equiv_join_empty_right A).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c4" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>join_power A n.+<span class="mi">1</span> &lt;~&gt; iterated_join A n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A (Join A (join_power A n)) &lt;~&gt;
Join A (iterated_join A n)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (equiv_functor_join equiv_idmap IHn).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">JoinPower</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Double recursion for Join *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Rec2</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>} (<span class="nv">P</span> : <span class="kt">Type</span>)
    (<span class="nv">P_AC</span> : A -&gt; C -&gt; P) (<span class="nv">P_AD</span> : A -&gt; D -&gt; P) (<span class="nv">P_BC</span> : B -&gt; C -&gt; P) (<span class="nv">P_BD</span> : B -&gt; D -&gt; P)
    (<span class="nv">P_gAx</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span> <span class="nv">d</span>, P_AC a c = P_AD a d)
    (<span class="nv">P_gBx</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span>, P_BC b c = P_BD b d)
    (<span class="nv">P_gxC</span> : <span class="kr">forall</span> <span class="nv">c</span> <span class="nv">a</span> <span class="nv">b</span>, P_AC a c = P_BC b c)
    (<span class="nv">P_gxD</span> : <span class="kr">forall</span> <span class="nv">d</span> <span class="nv">a</span> <span class="nv">b</span>, P_AD a d = P_BD b d)
    (<span class="nv">P_g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span>, P_gAx a c d @ P_gxD d a b = P_gxC c a b @ P_gBx b c d).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c5"><span class="kn">Definition</span> <span class="nf">Join_rec2</span> : Join A B -&gt; Join C D -&gt; P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; Join C D -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; Join C D -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c7"><span class="nb">intros</span> x y; <span class="nb">revert</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A B -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3c8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3c8">snapply Join_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3c9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><label class="goal-separator" for="core-v-chk3c9"><hr></label><div class="goal-conclusion">B -&gt; P</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk3ca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><label class="goal-separator" for="core-v-chk3ca"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), <span class="nl">?P_A</span> a = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3cb" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3cb"><span class="mi">1</span>: <span class="nb">intros</span> a; <span class="bp">exact</span> (Join_rec (P_AC a) (P_AD a) (P_gAx a) y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3cc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><label class="goal-separator" for="core-v-chk3cc"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt;
 Join_rec (P_AC a0) (P_AD a0) (P_gAx a0) y) a = 
<span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3cd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3cd"><span class="mi">1</span>: <span class="nb">intros</span> b; <span class="bp">exact</span> (Join_rec (P_BC b) (P_BD b) (P_gBx b) y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt;
 Join_rec (P_AC a0) (P_AD a0) (P_gAx a0) y) a =
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt;
 Join_rec (P_BC b0) (P_BD b0) (P_gBx b0) y) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3ce" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3ce"><span class="nb">intros</span> a b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Join C D</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; Join_rec (P_AC a) (P_AD a) (P_gAx a) y)
  a =
(<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; Join_rec (P_BC b) (P_BD b) (P_gBx b) y)
  b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3cf" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3cf"><span class="nb">revert</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> : Join C D,
(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; Join_rec (P_AC a) (P_AD a) (P_gAx a) y)
  a =
(<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; Join_rec (P_BC b) (P_BD b) (P_gBx b) y)
  b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3d0" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3d0">snapply Join_ind_FlFr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a0</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
 (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; Join_rec (P_AC a) (P_AD a) (P_gAx a) x)
   a) (joinl a0) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
 (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; Join_rec (P_BC b) (P_BD b) (P_gBx b) x)
   b) (joinl a0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3d1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk3d1"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b0</span> : D,
(<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
 (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; Join_rec (P_AC a) (P_AD a) (P_gAx a) x)
   a) (joinr b0) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
 (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; Join_rec (P_BC b) (P_BD b) (P_gBx b) x)
   b) (joinr b0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="core-v-chk3d2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk3d2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : C) (<span class="nv">b0</span> : D),
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    Join_rec (P_AC a) (P_AD a) (P_gAx a) x) a)
  (jglue a0 b0) @ <span class="nl">?Hr</span> b0 =
<span class="nl">?Hl</span> a0 @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
    Join_rec (P_BC b) (P_BD b) (P_gBx b) x) b)
  (jglue a0 b0)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3d3" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3d3"><span class="mi">1</span>: <span class="nb">intros</span> c; <span class="bp">exact</span> (P_gxC c a b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b0</span> : D,
(<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
 (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; Join_rec (P_AC a) (P_AD a) (P_gAx a) x)
   a) (joinr b0) =
(<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
 (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; Join_rec (P_BC b) (P_BD b) (P_gBx b) x)
   b) (joinr b0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3d4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="core-v-chk3d4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : C) (<span class="nv">b0</span> : D),
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    Join_rec (P_AC a) (P_AD a) (P_gAx a) x) a)
  (jglue a0 b0) @ <span class="nl">?Hr</span> b0 =
(<span class="kr">fun</span> <span class="nv">c</span> : C =&gt; P_gxC c a b) a0 @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
    Join_rec (P_BC b) (P_BD b) (P_gBx b) x) b)
  (jglue a0 b0)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3d5" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3d5"><span class="mi">1</span>: <span class="nb">intros</span> d; <span class="bp">exact</span> (P_gxD d a b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : C) (<span class="nv">b0</span> : D),
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    Join_rec (P_AC a) (P_AD a) (P_gAx a) x) a)
  (jglue a0 b0) @ (<span class="kr">fun</span> <span class="nv">d</span> : D =&gt; P_gxD d a b) b0 =
(<span class="kr">fun</span> <span class="nv">c</span> : C =&gt; P_gxC c a b) a0 @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
    Join_rec (P_BC b) (P_BD b) (P_gBx b) x) b)
  (jglue a0 b0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3d6" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3d6"><span class="nb">intros</span> c d.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    Join_rec (P_AC a) (P_AD a) (P_gAx a) x) a)
  (jglue c d) @ (<span class="kr">fun</span> <span class="nv">d</span> : D =&gt; P_gxD d a b) d =
(<span class="kr">fun</span> <span class="nv">c</span> : C =&gt; P_gxC c a b) c @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
    Join_rec (P_BC b) (P_BD b) (P_gBx b) x) b)
  (jglue c d)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3d7" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3d7"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   Join_rec (P_AC a) (P_AD a) (P_gAx a) x) (jglue c d) @
P_gxD d a b =
P_gxC c a b @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   Join_rec (P_BC b) (P_BD b) (P_gBx b) x) (jglue c d)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3d8" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3d8">lhs napply whiskerR.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   Join_rec (P_AC a) (P_AD a) (P_gAx a) x) (jglue c d) =
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3d9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><label class="goal-separator" for="core-v-chk3d9"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> @ P_gxD d a b =
P_gxC c a b @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   Join_rec (P_BC b) (P_BD b) (P_gBx b) x) 
  (jglue c d)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3da" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3da"><span class="mi">1</span>: <span class="nb">apply</span> Join_rec_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P_gAx a c d @ P_gxD d a b =
P_gxC c a b @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   Join_rec (P_BC b) (P_BD b) (P_gBx b) x) (jglue c d)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3db" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3db">rhs napply whiskerL.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P_gAx a c d @ P_gxD d a b = P_gxC c a b @ <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="core-v-chk3dc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><label class="goal-separator" for="core-v-chk3dc"><hr></label><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join C D =&gt;
   Join_rec (P_BC b) (P_BD b) (P_gBx b) x) 
  (jglue c d) = <span class="nl">?Goal</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="core-v-chk3dd" style="display: none" type="checkbox"><label class="alectryon-input" for="core-v-chk3dd"><span class="mi">2</span>: <span class="nb">apply</span> Join_rec_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, D, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P_AC</var><span class="hyp-type"><b>: </b><span>A -&gt; C -&gt; P</span></span></span><br><span><var>P_AD</var><span class="hyp-type"><b>: </b><span>A -&gt; D -&gt; P</span></span></span><br><span><var>P_BC</var><span class="hyp-type"><b>: </b><span>B -&gt; C -&gt; P</span></span></span><br><span><var>P_BD</var><span class="hyp-type"><b>: </b><span>B -&gt; D -&gt; P</span></span></span><br><span><var>P_gAx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_AC a c = P_AD a d</span></span></span><br><span><var>P_gBx</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) (<span class="nv">d</span> : D),
P_BC b c = P_BD b d</span></span></span><br><span><var>P_gxC</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">c</span> : C) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AC a c = P_BC b c</span></span></span><br><span><var>P_gxD</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">d</span> : D) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
P_AD a d = P_BD b d</span></span></span><br><span><var>P_g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) 
(<span class="nv">d</span> : D),
P_gAx a c d @ P_gxD d a b =
P_gxC c a b @ P_gBx b c d</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>d</var><span class="hyp-type"><b>: </b><span>D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P_gAx a c d @ P_gxD d a b = P_gxC c a b @ P_gBx b c d</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (P_g a b c d).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Rec2</span>.</span></span></pre>
</div>
</div></body>
</html>
