<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>Descent.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk0"><span class="kn">Require Import</span> HoTT.Basics HoTT.Types.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> HFiber Extensions Limits.Pullback.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Modality Accessible Modalities.Localization.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> path_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> subuniverse_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Descent between subuniverses *)</span>

<span class="sd">(** We study here a strengthening of the relation [O &lt;&lt; O&#39;] saying that [O]-modal type families descend along [O&#39;]-equivalences.  Pairs of reflective subuniverses with this relation share nearly all the properties of a reflective subuniverse [O] paired with its subuniverse [Sep O] of separated types (see [Separated.v]) and also many of those of a single left exact modality (see [Lex.v]).  Thus, many of the results herein generalize those of RSS for lex modalities and those of CORS for separated subuniverses.</span>

<span class="sd">Note that this kind of descent is not the same as the &quot;modal descent&quot; of Cherubini and Rijke.  When we get around to formalizing that, we may need to worry about disambiguating the names. *)</span>

<span class="sd">(** ** Definitions *)</span>

<span class="sd">(** This definition is an analogue of the statement of Lemma 2.19 of CORS, and of Theorem 3.1(xiii) of RSS.  Note that CORS Lemma 2.19 includes uniqueness of the extension, which we don&#39;t assert explicitly.  However, uniqueness follows from the [ReflectsD] parameter -- see [ooextendable_TypeO_lex_leq] below. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">Descends</span>@{i} (O&#39; O : Subuniverse@{i}) (T : <span class="kt">Type</span>@{i})
      `{ReflectsD@{i} O&#39; O T} :=
{
  OO_descend :
    <span class="kr">forall</span> (<span class="nv">P</span> : T -&gt; <span class="kt">Type</span>@{i}) {<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x</span>, In O (P x)},
      O_reflector O&#39; T -&gt; <span class="kt">Type</span>@{i} ;
  OO_descend_inO ::
    <span class="kr">forall</span> (<span class="nv">P</span> : T -&gt; <span class="kt">Type</span>@{i}) {<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x</span>, In O (P x)} (<span class="nv">x</span> : O_reflector O&#39; T),
      In O (OO_descend P x) ;
  OO_descend_beta :
    <span class="kr">forall</span> (<span class="nv">P</span> : T -&gt; <span class="kt">Type</span>@{i}) {<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x</span>, In O (P x)} (<span class="nv">x</span> : T),
      OO_descend P (to O&#39; T x) &lt;~&gt; P x ;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> OO_descend O&#39; O {T _ _ _} P {P_inO} x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> OO_descend_inO O&#39; O {T _ _ _} P {P_inO} x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> OO_descend_beta O&#39; O {T _ _ _} P {P_inO} x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">O_lex_leq</span> (<span class="nv">O1</span> <span class="nv">O2</span> : ReflectiveSubuniverse) `{O1 &lt;&lt; O2} :=
  O_lex_leq_descends :: <span class="kr">forall</span> <span class="nv">A</span>, Descends O2 O1 A.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Infix</span> <span class="s2">&quot;&lt;&lt;&lt;&quot;</span> := O_lex_leq : subuniverse_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Unfortunately, it seems that generalizing binders don&#39;t work on notations: writing [`{O &lt;&lt;&lt; O&#39;}] doesn&#39;t automatically add the precondition [O &lt;&lt; O&#39;], although writing [`{O_lex_leq O O&#39;}] does. *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk1"><span class="kn">Definition</span> <span class="nf">O_lex_leq_eq</span> {<span class="nv">O1</span> <span class="nv">O2</span> <span class="nv">O3</span> : ReflectiveSubuniverse}
           `{O1 &lt;=&gt; O2} `{O2 &lt;&lt; O3, O2 &lt;&lt;&lt; O3}
           (Hstrong := O_strong_leq_trans_l O1 O2 O3)
  : O1 &lt;&lt;&lt; O3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;&lt;&lt; O3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;&lt;&lt; O3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk3"><span class="nb">intros</span> A; <span class="nb">unshelve</span> <span class="nb">econstructor</span>; <span class="nb">intros</span> P P_inO1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_reflector O3 A -&gt; <span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A,
In O1
  ((<span class="kr">fun</span> (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
      (<span class="nv">P_inO1</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O1 (P x0)) =&gt; 
    <span class="nl">?Goal</span>) P P_inO1 x)</div></blockquote><input class="alectryon-extra-goal-toggle" id="descent-v-chk5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk5"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">fun</span> (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
   (<span class="nv">P_inO1</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O1 (P x0)) =&gt; 
 <span class="nl">?Goal</span>) P P_inO1 (to O3 A x) &lt;~&gt; 
P x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6"><span class="kp">all</span>:<span class="nb">pose</span> (P_inO2 := <span class="kr">fun</span> <span class="nv">x</span> =&gt; inO_leq O1 O2 _ (P_inO1 x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br><span><var>P_inO2</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; inO_leq O1 O2 (P x) (P_inO1 x)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O2 (P x)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_reflector O3 A -&gt; <span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br><span><var>P_inO2</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; inO_leq O1 O2 (P x) (P_inO1 x)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O2 (P x)</span></span></span></span><br></div><label class="goal-separator" for="descent-v-chk7"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A,
In O1
  ((<span class="kr">fun</span> (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
      (<span class="nv">P_inO1</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O1 (P x0)) =&gt;
    <span class="kr">let</span> <span class="nv">P_inO2</span> :=
      <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; inO_leq O1 O2 (P x0) (P_inO1 x0)
      <span class="kr">in</span>
    <span class="nl">?Goal</span>) P P_inO1 x)</div></blockquote><input class="alectryon-extra-goal-toggle" id="descent-v-chk8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br><span><var>P_inO2</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; inO_leq O1 O2 (P x) (P_inO1 x)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O2 (P x)</span></span></span></span><br></div><label class="goal-separator" for="descent-v-chk8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">fun</span> (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
   (<span class="nv">P_inO1</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O1 (P x0)) =&gt;
 <span class="kr">let</span> <span class="nv">P_inO2</span> :=
   <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; inO_leq O1 O2 (P x0) (P_inO1 x0) <span class="kr">in</span>
 <span class="nl">?Goal</span>) P P_inO1 (to O3 A x) &lt;~&gt; 
P x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br><span><var>P_inO2</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; inO_leq O1 O2 (P x) (P_inO1 x)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O2 (P x)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_reflector O3 A -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_descend O3 O2 P).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br><span><var>P_inO2</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; inO_leq O1 O2 (P x) (P_inO1 x)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O2 (P x)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A,
In O1
  ((<span class="kr">fun</span> (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
      (<span class="nv">P_inO1</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O1 (P x0)) =&gt;
    <span class="kr">let</span> <span class="nv">P_inO2</span> :=
      <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; inO_leq O1 O2 (P x0) (P_inO1 x0)
      <span class="kr">in</span>
    OO_descend O3 O2 P) P P_inO1 x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> x; <span class="nb">apply</span> (inO_leq O2 O1), (OO_descend_inO O3 O2 P).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;=&gt; O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt;&lt; O3</span></span></span><br><span><var>Hstrong</var><span><span class="hyp-body"><b>:= </b><span>O_strong_leq_trans_l O1 O2 O3</span></span><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O3</span></span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O1 (P x)</span></span></span><br><span><var>P_inO2</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; inO_leq O1 O2 (P x) (P_inO1 x)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O2 (P x)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">fun</span> (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
   (<span class="nv">P_inO1</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O1 (P x0)) =&gt;
 <span class="kr">let</span> <span class="nv">P_inO2</span> :=
   <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; inO_leq O1 O2 (P x0) (P_inO1 x0) <span class="kr">in</span>
 OO_descend O3 O2 P) P P_inO1 (to O3 A x) &lt;~&gt; P x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_descend_beta O3 O2 P).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Left exactness properties *)</span>

<span class="sd">(** We prove analogues of the properties in section 2.4 of CORS and Theorem 3.1 of RSS, but in a different order, with different proofs, to increase the generality.  The proofs in CORS use Proposition 2.26 for everything else, but it seems that most of the other results are true in the generality of two reflective subuniverses with [O &lt;&lt;&lt; O&#39;], so we give different proofs for some of them.  (To show that this generality is non-spurious, note that a lex modality [O] satisfies [O &lt;&lt;&lt; O], but does not generally coincide with [Sep O].)</span>

<span class="sd">In the case of a single modality, most of these statements are equivalent to lex-ness (as stated in Theorem 3.1 of RSS).  We do not know if anything similar is true more generally. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">LeftExactness</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Universe</span> <span class="nf">i</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse@{i}) `{O &lt;&lt; O&#39;, O &lt;&lt;&lt; O&#39;}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Proposition 2.30 of CORS and Theorem 3.1(xii) of RSS: any [O&#39;]-equivalence is [O]-connected.  The special case when [f = to O&#39; A] requires only [O &lt;&lt; O&#39;], but the general case seems to require [O &lt;&lt;&lt; O&#39;]. It is convenient to have this as an instance in this file, but we don&#39;t make it global, as it requires that Coq guess [O&#39;]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkc"><span class="kn">Local Instance</span> <span class="nf">conn_map_OO_inverts</span>
       {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) `{O_inverts O&#39; f}
  : IsConnMap O f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chke"><span class="nb">apply</span> conn_map_from_extension_elim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">P</span> : B -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)) -&gt;
<span class="kr">forall</span> <span class="nv">d</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, P (f a), ExtensionAlong f P d</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkf"><span class="nb">intros</span> P P_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">d</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, P (f a), ExtensionAlong f P d</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk10"><span class="nb">assert</span> (E : ExtendableAlong <span class="mi">1</span>%nat f P); [ | <span class="bp">exact</span> (fst E) ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> f P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk11"><span class="nb">assert</span> (Qp := OO_descend_beta O&#39; O P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B,
OO_descend O&#39; O P (to O&#39; B x) &lt;~&gt; P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> f P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk12"><span class="nb">assert</span> (Q_inO := OO_descend_inO O&#39; O P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B,
OO_descend O&#39; O P (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B,
In O (OO_descend O&#39; O P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> f P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk13"><span class="nb">set</span> (Q := OO_descend O&#39; O P) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> f P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk14"><span class="nb">refine</span> (extendable_postcompose&#39; _ (Q o to O&#39; B) P f Qp _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> f (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; Q (to O&#39; B x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk15"><span class="nb">refine</span> (cancelL_extendable _ Q f (to O&#39; B) _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> (to O&#39; B) Q</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk16"><hr></label><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; to O&#39; B (f x)) Q</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk17"><span class="mi">1</span>:srapply (extendable_conn_map_inO O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; to O&#39; B (f x)) Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk18"><span class="nb">refine</span> (extendable_homotopic _ _ (O_functor O&#39; f o to O&#39; A) (to_O_natural O&#39; f) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span>
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; O_functor O&#39; f (to O&#39; A x)) Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk19">srapply extendable_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> (O_functor O&#39; f) Q</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk1a"><hr></label><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; Q (O_functor O&#39; f b))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk1b"><span class="mi">1</span>:srapply extendable_equiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Qp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : B, Q (to O&#39; B x) &lt;~&gt; P x</span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; B, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">1</span> (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; Q (O_functor O&#39; f b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">srapply (extendable_conn_map_inO O).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** A generalization of Lemma 2.27 of CORS: [functor_sigma] of a family of [O]-equivalences over an [O&#39;]-equivalence is an [O]-equivalence.  CORS Lemma 2.27 is the case when [f = to O&#39; A] and [g] is a family of identities. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk1c"><span class="kn">Definition</span> <span class="nf">OO_inverts_functor_sigma</span> 
       {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>} {<span class="nv">Q</span> : B -&gt; <span class="kt">Type</span>}
       (<span class="nv">f</span> : A -&gt; B) (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span>, P a -&gt; Q (f a))
       `{O_inverts O&#39; f} `{<span class="kr">forall</span> <span class="nv">a</span>, O_inverts O (g a)}
  : O_inverts O (functor_sigma f g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_sigma f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk1d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_sigma f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk1e">srapply isequiv_homotopic&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O {x : _ &amp; P x} &lt;~&gt; O {x : _ &amp; Q x}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk1f"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> == O_functor O (functor_sigma f g)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk20">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O {x : _ &amp; P x} &lt;~&gt; O {x : _ &amp; Q x}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk21"><span class="nb">refine</span> (equiv_O_sigma_O O _ oE _ oE (equiv_O_sigma_O O _)^-<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O {x : A &amp; O (P x)} &lt;~&gt; O {x : B &amp; O (Q x)}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Build_Equiv _ _ (O_functor O (functor_sigma f (<span class="kr">fun</span> <span class="nv">x</span> =&gt; O_functor O (g x)))) _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk22">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_O_sigma_O O Q
oE {|
     equiv_fun :=
       O_functor O
         (functor_sigma f
            (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; O_functor O (g x)));
     equiv_isequiv :=
       O_inverts_conn_map O
         (functor_sigma f
            (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; O_functor O (g x)))
   |} oE (equiv_O_sigma_O O P)^-<span class="mi">1</span> ==
O_functor O (functor_sigma f g)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk23"><span class="nb">apply</span> O_indpaths.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : {x : _ &amp; P x} =&gt;
 (equiv_O_sigma_O O Q
  oE {|
       equiv_fun :=
         O_functor O
           (functor_sigma f
              (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; O_functor O (g x0)));
       equiv_isequiv :=
         O_inverts_conn_map O
           (functor_sigma f
              (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; O_functor O (g x0)))
     |} oE (equiv_O_sigma_O O P)^-<span class="mi">1</span>)
   (to O {x : _ &amp; P x} x)) ==
(<span class="kr">fun</span> <span class="nv">x</span> : {x : _ &amp; P x} =&gt;
 O_functor O (functor_sigma f g)
   (to O {x : _ &amp; P x} x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk24"><span class="nb">intros</span> [x u]; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_rec
  (<span class="kr">fun</span> <span class="nv">X</span> : {x : B &amp; O (Q x)} =&gt;
   O_rec
     (<span class="kr">fun</span> <span class="nv">p</span> : Q X.<span class="mi">1</span> =&gt; to O {x : B &amp; Q x} (X.<span class="mi">1</span>; p))
     X.<span class="mi">2</span>)
  (O_functor O
     (functor_sigma f (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; O_functor O (g x)))
     (O_functor O
        (functor_sigma idmap (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; to O (P x)))
        (to O {x : _ &amp; P x} (x; u)))) =
O_functor O (functor_sigma f g)
  (to O {x : _ &amp; P x} (x; u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk25"><span class="nb">rewrite</span> !to_O_natural, O_rec_beta; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_rec (<span class="kr">fun</span> <span class="nv">p</span> : Q (f x) =&gt; to O {x : B &amp; Q x} (f x; p))
  (O_functor O (g x) (to O (P x) u)) =
to O {x : _ &amp; Q x} (functor_sigma f g (x; u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk26"><span class="nb">rewrite</span> !to_O_natural, O_rec_beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, O_inverts O (g a)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>P x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to O {x : B &amp; Q x} (f x; g x u) =
to O {x : _ &amp; Q x} (functor_sigma f g (x; u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Families of [O]-modal types descend along all [O&#39;]-equivalences (not just the [O&#39;]-units, as asserted in the definition of [&lt;&lt;&lt;]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk27"><span class="kn">Definition</span> <span class="nf">OO_descend_O_inverts</span>
           {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) `{O_inverts O&#39; f}
           (P : A -&gt; <span class="kt">Type</span>) {P_inO : <span class="kr">forall</span> <span class="nv">x</span>, In O (P x)}
  : B -&gt; <span class="kt">Type</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk28"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk29"><span class="nb">intros</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2a"><span class="nb">pose</span> (Q := OO_descend O&#39; O P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Q</var><span><span class="hyp-body"><b>:= </b><span>OO_descend O&#39; O P</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Q ((O_functor O&#39; f)^-<span class="mi">1</span> (to O&#39; B b))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">OO_descend_O_inverts_inO</span>
       {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) `{O_inverts O&#39; f}
       (P : A -&gt; <span class="kt">Type</span>) {P_inO : <span class="kr">forall</span> <span class="nv">x</span>, In O (P x)} (b : B)
  : In O (OO_descend_O_inverts f P b)
  := _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2b"><span class="kn">Definition</span> <span class="nf">OO_descend_O_inverts_beta</span>
           {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) `{O_inverts O&#39; f}
           (P : A -&gt; <span class="kt">Type</span>) {P_inO : <span class="kr">forall</span> <span class="nv">x</span>, In O (P x)} (a : A)
  : (OO_descend_O_inverts f P (f a)) &lt;~&gt; P a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend_O_inverts f P (f a) &lt;~&gt; P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend_O_inverts f P (f a) &lt;~&gt; P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2d"><span class="nb">unfold</span> OO_descend_O_inverts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend O&#39; O P
  ((O_functor O&#39; f)^-<span class="mi">1</span> (to O&#39; B (f a))) &lt;~&gt; P a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2e"><span class="nb">refine</span> (OO_descend_beta O&#39; O P a oE _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend O&#39; O P
  ((O_functor O&#39; f)^-<span class="mi">1</span> (to O&#39; B (f a))) &lt;~&gt;
OO_descend O&#39; O P (to O&#39; A a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk2f"><span class="nb">assert</span> (p := (to_O_natural O&#39; f a)^).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>to O&#39; B (f a) = O_functor O&#39; f (to O&#39; A a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend O&#39; O P
  ((O_functor O&#39; f)^-<span class="mi">1</span> (to O&#39; B (f a))) &lt;~&gt;
OO_descend O&#39; O P (to O&#39; A a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk30"><span class="nb">apply</span> moveR_equiv_V <span class="kr">in</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P x)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(O_functor O&#39; f)^-<span class="mi">1</span> (to O&#39; B (f a)) = to O&#39; A a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend O&#39; O P
  ((O_functor O&#39; f)^-<span class="mi">1</span> (to O&#39; B (f a))) &lt;~&gt;
OO_descend O&#39; O P (to O&#39; A a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (equiv_transport _ p).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Morally, an equivalent way of saying [O &lt;&lt;&lt; O&#39;] is that the universe of [O]-modal types is [O&#39;]-modal.  We can&#39;t say this directly since this type lives in a higher universe, but here is a rephrasing of it. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk31"><span class="kn">Definition</span> <span class="nf">ooextendable_TypeO_lex_leq</span> `{Univalence}
           {A B : <span class="kt">Type</span>} (f : A -&gt; B) `{O_inverts O&#39; f}
  : ooExtendableAlong f (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Type_ O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong f (<span class="kr">fun</span> <span class="nv">_</span> : B =&gt; Type_ O)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk32"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong f (<span class="kr">fun</span> <span class="nv">_</span> : B =&gt; Type_ O)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk33">rapply ooextendable_TypeO_from_extension; <span class="nb">intros</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong f (<span class="kr">fun</span> <span class="nv">_</span> : B =&gt; Type_ O) P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk34"><span class="kr">exists</span> (<span class="nv">fun</span> <span class="nv">x</span> =&gt; (OO_descend_O_inverts f P x ;
                    OO_descend_O_inverts_inO f P x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(OO_descend_O_inverts f (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; P x0) (f x);
OO_descend_O_inverts_inO f (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; P x0) (f x)) =
P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk35"><span class="nb">intros</span> x; <span class="nb">apply</span> path_TypeO, path_universe_uncurried; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_descend_O_inverts f (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; P x) (f x) &lt;~&gt;
(P x).<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_descend_O_inverts_beta f P x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We can also state it in terms of belonging to a subuniverse if we lift [O&#39;] accessibly (an analogue of Theorem 3.11(iii) of RSS). *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">inO_TypeO_lex_leq</span> `{Univalence} `{IsAccRSU O&#39;}
  : In (lift_accrsu O&#39;) (Type_ O)
  := <span class="kr">fun</span> <span class="nv">i</span> =&gt; ooextendable_TypeO_lex_leq (acc_lgen O&#39; i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** If [f] is an [O&#39;]-equivalence, then [ap f] is an [O]-equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk36">#[export] <span class="kn">Instance</span> <span class="nf">OO_inverts_ap</span>@{}
       {A B : <span class="kt">Type</span>@{i}} (f : A -&gt; B) `{O_inverts O&#39; f} (x y : A)
  : O_inverts O (@ap _ _ f x y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk37"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk38"><span class="nb">assert</span> (Pb := OO_descend_O_inverts_beta f (<span class="kr">fun</span> <span class="nv">y</span>:A =&gt; O (x = y))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
OO_descend_O_inverts f 
  (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y)) 
  (f a) &lt;~&gt; (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y)) a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk39"><span class="nb">assert</span> (P_inO := OO_descend_O_inverts_inO f (<span class="kr">fun</span> <span class="nv">y</span>:A =&gt; O (x = y))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
OO_descend_O_inverts f 
  (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y)) 
  (f a) &lt;~&gt; (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y)) a</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B,
In O
  (OO_descend_O_inverts f
     (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y)) b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk3a"><span class="nb">set</span> (P := OO_descend_O_inverts f (<span class="kr">fun</span> <span class="nv">y</span>:A =&gt; O (x = y))) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span>OO_descend_O_inverts f (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y))</span></span><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
P (f a) &lt;~&gt; (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; O (x = y)) a</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk3b"><span class="nb">clearbody</span> P; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk3c">srapply isequiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (f x = f y) -&gt; O (x = y)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk3d"><hr></label><div class="goal-conclusion">O_functor O (ap f) o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="descent-v-chk3e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk3e"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o O_functor O (ap f) == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk3f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (f x = f y) -&gt; O (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk40"><span class="nb">intros</span> q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>O (f x = f y)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk41"><span class="nb">pose</span> (t := <span class="kr">fun</span> <span class="nv">p</span> =&gt; @transport B P (f x) (f y) p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>O (f x = f y)</span></span></span><br><span><var>t</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">p</span> : f x = f y =&gt;
transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))</span></span><span class="hyp-type"><b>: </b><span>f x = f y -&gt; P (f y)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Pb y (O_rec t q)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk42">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
o (<span class="kr">fun</span> <span class="nv">q</span> : O (f x = f y) =&gt;
   <span class="kr">let</span> <span class="nv">t</span> :=
     <span class="kr">fun</span> <span class="nv">p</span> : f x = f y =&gt;
     transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)) <span class="kr">in</span>
   Pb y (O_rec t q)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk43"><span class="nb">apply</span> O_indpaths; <span class="nb">intros</span> p; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y
     (O_rec
        (<span class="kr">fun</span> <span class="nv">p</span> : f x = f y =&gt;
         transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))
        (to O (f x = f y) p))) = to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk44"><span class="nb">rewrite</span> O_rec_beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk45"><span class="nb">assert</span> (g := extension_conn_map_elim O (functor_sigma f (<span class="kr">fun</span> (<span class="nv">a</span>:A) (<span class="nv">p</span>:P (f a)) =&gt; p))
                                         (<span class="kr">fun</span> <span class="nv">bp</span> =&gt; O (f x = bp.<span class="mi">1</span>)) (<span class="kr">fun</span> <span class="nv">u</span> =&gt; O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk46"><span class="nb">pose</span> (g1 b p := g.<span class="mi">1</span> (b;p)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b),
(<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>)) (b; p)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk47"><span class="nb">cbn</span> <span class="kr">in</span> g1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk48"><span class="nb">assert</span> (e : (<span class="kr">fun</span> <span class="nv">u</span> =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk49" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="descent-v-chk49"><hr></label><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk4a"><span class="mi">1</span>:<span class="nb">intros</span> [a b]; <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk4b"><span class="nb">assert</span> (g2 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">p</span> =&gt; e _ @ g.<span class="mi">2</span> (a;p)); <span class="nb">cbn</span> <span class="kr">in</span> g2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O (ap f)
  (Pb y (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk4c"><span class="nb">refine</span> ((g2 y _)^ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g1 (f y) (transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk4d"><span class="nb">rewrite</span> (ap_transport p g1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; O (f x = b)) p
  (g1 (f x) ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk4e"><span class="nb">rewrite</span> (g2 x ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; O (f x = b)) p
  (O_functor O (ap f)
     (Pb x ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk4f"><span class="nb">rewrite</span> eisretr, to_O_natural; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; O (f x = b)) p
  (to O (f x = f x) <span class="mi">1</span>) = to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk50"><span class="nb">rewrite</span> &lt;- (ap_transport p (<span class="kr">fun</span> <span class="nv">b</span> =&gt; to O (f x = b))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to O (f x = f y) (transport (paths (f x)) p <span class="mi">1</span>) =
to O (f x = f y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk51"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (paths (f x)) p <span class="mi">1</span> = p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk52"><span class="nb">rewrite</span> transport_paths_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f x = f y</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>ExtensionAlong
  (functor_sigma f (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; idmap))
  (<span class="kr">fun</span> <span class="nv">bp</span> : {x : _ &amp; P x} =&gt; O (f x = bp.<span class="mi">1</span>))
  (<span class="kr">fun</span> <span class="nv">u</span> : {a : A &amp; P (f a)} =&gt;
   O_functor O (ap f) (Pb u.<span class="mi">1</span> u.<span class="mi">2</span>))</span></span></span><br><span><var>g1</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">p</span> : P b) =&gt; g.<span class="mi">1</span> (b; p)</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P b -&gt; O (f x = b)</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">u</span> : {x : _ &amp; P x} =&gt; g1 u.<span class="mi">1</span> u.<span class="mi">2</span>) == g.<span class="mi">1</span></span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">p</span> : P (f a)),
g1 (f a) p = O_functor O (ap f) (Pb a p)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> @ p = p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_1p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk53">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">q</span> : O (f x = f y) =&gt;
 <span class="kr">let</span> <span class="nv">t</span> :=
   <span class="kr">fun</span> <span class="nv">p</span> : f x = f y =&gt;
   transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)) <span class="kr">in</span>
 Pb y (O_rec t q)) o O_functor O (ap f) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk54"><span class="nb">apply</span> O_indpaths; <span class="nb">intros</span> p; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Pb y
  (O_rec
     (<span class="kr">fun</span> <span class="nv">p</span> : f x = f y =&gt;
      transport P p ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>)))
     (O_functor O (ap f) (to O (x = y) p))) =
to O (x = y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk55"><span class="nb">rewrite</span> to_O_natural, O_rec_beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Pb y
  (transport P (ap f p) ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))) =
to O (x = y) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk56"><span class="nb">destruct</span> p; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Pb</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (f a) &lt;~&gt; O (x = a)</span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, In O (P b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Pb x (transport P <span class="mi">1</span> ((Pb x)^-<span class="mi">1</span> (to O (x = x) <span class="mi">1</span>))) =
to O (x = x) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">srapply eisretr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_O_functor_ap_OO_inverts</span>
       {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) `{O_inverts O&#39; f} (x y : A)
  : O (x = y) &lt;~&gt; O (f x = f y)
  := Build_Equiv _ _ (O_functor O (ap f)) _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Theorem 3.1(i) of RSS: path-spaces of [O&#39;]-connected types are [O]-connected. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk57"><span class="kn">Definition</span> <span class="nf">OO_isconnected_paths</span>
           {<span class="nv">A</span> : <span class="kt">Type</span>} `{IsConnected O&#39; A} (x y : A)
  : IsConnected O (x = y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk58"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; A</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (contr_equiv&#39; _ (equiv_O_functor_ap_OO_inverts (const_tt _) x y)^-<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Proposition 2.26 of CORS and Theorem 3.1(ix) of RSS; also generalizes Theorem 7.3.12 of the book.  Here we need to add the extra assumption that [O&#39; &lt;= Sep O], which is satisfied when [O&#39; = Sep O] but also when [O] is lex and [O&#39; = O].  That some such extra hypothesis is necessary can be seen from the fact that [Tr (-2) &lt;&lt;&lt; O&#39;] for any [O&#39;], whereas this statement is certainly not true in that generality. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk59"><span class="kn">Definition</span> <span class="nf">path_OO</span> `{O&#39; &lt;= Sep O}
           {X : <span class="kt">Type</span>@{i}} (x y : X)
  : O (x = y) -&gt; (to O&#39; X x = to O&#39; X y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (x = y) -&gt; to O&#39; X x = to O&#39; X y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk5a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (x = y) -&gt; to O&#39; X x = to O&#39; X y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk5b">nrefine (O_rec (O := O) (@ap X (O&#39; X) (to O&#39; X) x y)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O (to O&#39; X x = to O&#39; X y)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk5c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><label class="goal-separator" for="descent-v-chk5c"><hr></label><div class="goal-conclusion">Reflects O (x = y)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk5d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O (to O&#39; X x = to O&#39; X y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply (@inO_leq O&#39; (Sep O)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk5e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Reflects O (x = y)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk5f">#[export] <span class="kn">Instance</span> <span class="nf">isequiv_path_OO</span> `{O&#39; &lt;= Sep O}
       {X : <span class="kt">Type</span>@{i}} (x y : X)
  : IsEquiv (path_OO x y).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (path_OO x y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk60"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (path_OO x y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk61">nrefine (isequiv_O_rec_O_inverts O _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (ap (to O&#39; X))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Typeclass search can find this, but it&#39;s quicker (and may help the reader) to give it explicitly. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (OO_inverts_ap (to O&#39; X)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_path_OO</span> `{O&#39; &lt;= Sep O}
           {X : <span class="kt">Type</span>@{i}} (x y : X)
  : O (x = y) &lt;~&gt; (to O&#39; X x = to O&#39; X y)
  := Build_Equiv _ _ (path_OO x y) _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [functor_hfiber] on a pair of [O&#39;]-equivalences is an [O]-equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk62">#[export] <span class="kn">Instance</span> <span class="nf">OO_inverts_functor_hfiber</span>
       {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>} {<span class="nv">f</span> : A -&gt; B} {<span class="nv">g</span> : C -&gt; D} {<span class="nv">h</span> : A -&gt; C} {<span class="nv">k</span> : B -&gt; D}
       (<span class="nv">p</span> : k o f == g o h) (<span class="nv">b</span> : B)
       `{O_inverts O&#39; h, O_inverts O&#39; k}
  : O_inverts O (functor_hfiber p b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_hfiber p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk63"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_hfiber p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk64"><span class="nb">unfold</span> functor_hfiber.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_sigma h
     (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">e</span> : f a = b) =&gt; (p a)^ @ ap k e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk65">snrefine (OO_inverts_functor_sigma _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; h</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk66" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br></div><label class="goal-separator" for="descent-v-chk66"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
O_inverts O
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">e</span> : f a0 = b) =&gt; (p a0)^ @ ap k e) a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk67"><span class="mi">1</span>:<span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
O_inverts O
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">e</span> : f a0 = b) =&gt; (p a0)^ @ ap k e) a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk68"><span class="nb">intros</span> a; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (<span class="kr">fun</span> <span class="nv">e</span> : f a = b =&gt; (p a)^ @ ap k e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk69"><span class="nb">refine</span> (isequiv_homotopic (O_functor O (concat (p a)^) o O_functor O (@ap _ _ k (f a) b)) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : O (f a = b) =&gt;
 O_functor O (concat (p a)^) (O_functor O (ap k) x)) ==
O_functor O (<span class="kr">fun</span> <span class="nv">e</span> : f a = b =&gt; (p a)^ @ ap k e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> O_functor_compose.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Corollary 2.29 of CORS: [O&#39;] preserves fibers up to [O]-equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6a">#[export] <span class="kn">Instance</span> <span class="nf">OO_inverts_functor_hfiber_to_O</span>
       {<span class="nv">Y</span> <span class="nv">X</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : Y -&gt; X) (<span class="nv">x</span> : X)
  : O_inverts O (functor_hfiber (<span class="kr">fun</span> <span class="nv">a</span> =&gt; (to_O_natural O&#39; f a)^) x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_hfiber
     (<span class="kr">fun</span> <span class="nv">a</span> : Y =&gt; (to_O_natural O&#39; f a)^) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_hfiber
     (<span class="kr">fun</span> <span class="nv">a</span> : Y =&gt; (to_O_natural O&#39; f a)^) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Typeclass search can find this, but it&#39;s faster to give it explicitly. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_inverts_functor_hfiber _ _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_OO_functor_hfiber_to_O</span>
           {<span class="nv">Y</span> <span class="nv">X</span> : <span class="kt">Type</span>@{i} } (<span class="nv">f</span> : Y -&gt; X) (<span class="nv">x</span> : X)
  : O (hfiber f x) &lt;~&gt; O (hfiber (O_functor O&#39; f) (to O&#39; X x))
  := Build_Equiv _ _ _ (OO_inverts_functor_hfiber_to_O f x).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Theorem 3.1(iii) of RSS: any map between [O&#39;]-connected types is [O]-connected.  (Part (ii) is just the version for dependent projections.) *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6c"><span class="kn">Definition</span> <span class="nf">OO_conn_map_isconnected</span>
       {<span class="nv">Y</span> <span class="nv">X</span> : <span class="kt">Type</span>} `{IsConnected O&#39; Y, IsConnected O&#39; X} (f : Y -&gt; X)
  : IsConnMap O f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> x; <span class="bp">exact</span> (contr_equiv&#39; _ (equiv_OO_functor_hfiber_to_O f x)^-<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">OO_isconnected_hfiber</span>
       {<span class="nv">Y</span> <span class="nv">X</span> : <span class="kt">Type</span>} `{IsConnected O&#39; Y, IsConnected O&#39; X} (f : Y -&gt; X) (x : X)
  : IsConnected O (hfiber f x)
  := OO_conn_map_isconnected f x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Theorem 3.1(iv) of RSS: an [O]-modal map between [O&#39;]-connected types is an equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6e"><span class="kn">Definition</span> <span class="nf">OO_isequiv_mapino_isconnected</span>
       {<span class="nv">Y</span> <span class="nv">X</span> : <span class="kt">Type</span>} `{IsConnected O&#39; Y, IsConnected O&#39; X} (f : Y -&gt; X) `{MapIn O _ _ f}
  : IsEquiv f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk6f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk70"><span class="nb">apply</span> (isequiv_conn_ino_map O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk71" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br></div><label class="goal-separator" for="descent-v-chk71"><hr></label><div class="goal-conclusion">MapIn O f</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk72">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> OO_conn_map_isconnected.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk73">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MapIn O f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Theorem 3.1(vi) of RSS (and part (v) is just the analogue for dependent projections). *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk74"><span class="kn">Definition</span> <span class="nf">OO_conn_map_functor_hfiber</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>}
           {<span class="nv">f</span> : A -&gt; B} {<span class="nv">g</span> : C -&gt; D} {<span class="nv">h</span> : A -&gt; C} {<span class="nv">k</span> : B -&gt; D}
           `{IsConnMap O&#39; _ _ h, IsConnMap O&#39; _ _ k}
           (p : k o f == g o h) (b : B)
  : IsConnMap O (functor_hfiber p b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; k</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O (functor_hfiber p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk75"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; k</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O (functor_hfiber p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk76"><span class="nb">intros</span> [c q].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; k</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g c = k b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O (hfiber (functor_hfiber p b) (c; q))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk77">nrefine (isconnected_equiv&#39; O _ (hfiber_functor_hfiber p b c q)^-<span class="mi">1</span> _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; h</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; k</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g c = k b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O
  (hfiber (functor_hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (p x)^) c)
     (b; q^))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> OO_isconnected_hfiber.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** An enhancement of Corollary 2.29 of CORS, corresponding to Theorem 3.1(viii) of RSS: when [O&#39;] is a modality, the map between fibers is not just an O-equivalence but is O-connected. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk78">#[export] <span class="kn">Instance</span> <span class="nf">OO_conn_map_functor_hfiber_to_O</span> `{IsModality O&#39;}
       {Y X : <span class="kt">Type</span>} (f : Y -&gt; X) (x : X)
  : IsConnMap O (functor_hfiber (<span class="kr">fun</span> <span class="nv">y</span> =&gt; (to_O_natural O&#39; f y)^) x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>IsModality0</var><span class="hyp-type"><b>: </b><span>IsModality O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O
  (functor_hfiber
     (<span class="kr">fun</span> <span class="nv">y</span> : Y =&gt; (to_O_natural O&#39; f y)^) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk79"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>IsModality0</var><span class="hyp-type"><b>: </b><span>IsModality O&#39;</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O
  (functor_hfiber
     (<span class="kr">fun</span> <span class="nv">y</span> : Y =&gt; (to_O_natural O&#39; f y)^) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> OO_conn_map_functor_hfiber.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Theorem 3.1(vii) of RSS *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk7a"><span class="kn">Definition</span> <span class="nf">OO_ispullback_connmap_mapino</span>
           {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">D</span> : <span class="kt">Type</span>} {<span class="nv">f</span> : A -&gt; B} {<span class="nv">g</span> : C -&gt; D} {<span class="nv">h</span> : A -&gt; C} {<span class="nv">k</span> : B -&gt; D}
           (<span class="nv">p</span> : k o f == g o h)
           `{O_inverts O&#39; h, O_inverts O&#39; k, MapIn O _ _ f, MapIn O _ _ g}
  : IsPullback p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsPullback p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk7b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsPullback p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk7c"><span class="nb">apply</span> ispullback_isequiv_functor_hfiber; <span class="nb">intros</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_hfiber p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk7d"><span class="nb">apply</span> (isequiv_O_inverts O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C, D</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; D</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A -&gt; C</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B -&gt; D</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k o f == g o h</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_hfiber p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> OO_inverts_functor_hfiber; <span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [functor_pullback] on a triple of [O&#39;]-equivalences is an [O]-equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk7e">#[export] <span class="kn">Instance</span> <span class="nf">OO_inverts_functor_pullback</span>
       {<span class="nv">A1</span> <span class="nv">B1</span> <span class="nv">C1</span> <span class="nv">A2</span> <span class="nv">B2</span> <span class="nv">C2</span> : <span class="kt">Type</span>}
       (<span class="nv">f1</span> : B1 -&gt; A1) (<span class="nv">g1</span> : C1 -&gt; A1)
       (<span class="nv">f2</span> : B2 -&gt; A2) (<span class="nv">g2</span> : C2 -&gt; A2)
       (<span class="nv">h</span> : A1 -&gt; A2) (<span class="nv">k</span> : B1 -&gt; B2) (<span class="nv">l</span> : C1 -&gt; C2)
       (<span class="nv">p</span> : f2 o k == h o f1) (<span class="nv">q</span> : g2 o l == h o g1)
       `{O_inverts O&#39; h, O_inverts O&#39; k, O_inverts O&#39; l}
  : O_inverts O (functor_pullback f1 g1 f2 g2 h k l p q).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_pullback f1 g1 f2 g2 h k l p q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk7f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O (functor_pullback f1 g1 f2 g2 h k l p q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk80"><span class="nb">unfold</span> functor_pullback.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_sigma k
     (<span class="kr">fun</span> <span class="nv">b1</span> : B1 =&gt;
      functor_sigma l
        (<span class="kr">fun</span> (<span class="nv">c1</span> : C1) (<span class="nv">e1</span> : f1 b1 = g1 c1) =&gt;
         (p b1 @ ap h e1) @ (q c1)^)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk81">snrefine (OO_inverts_functor_sigma _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; k</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk82" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br></div><label class="goal-separator" for="descent-v-chk82"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B1,
O_inverts O
  ((<span class="kr">fun</span> <span class="nv">b1</span> : B1 =&gt;
    functor_sigma l
      (<span class="kr">fun</span> (<span class="nv">c1</span> : C1) (<span class="nv">e1</span> : f1 b1 = g1 c1) =&gt;
       (p b1 @ ap h e1) @ (q c1)^)) a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk83"><span class="mi">1</span>:<span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B1,
O_inverts O
  ((<span class="kr">fun</span> <span class="nv">b1</span> : B1 =&gt;
    functor_sigma l
      (<span class="kr">fun</span> (<span class="nv">c1</span> : C1) (<span class="nv">e1</span> : f1 b1 = g1 c1) =&gt;
       (p b1 @ ap h e1) @ (q c1)^)) a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk84"><span class="nb">intros</span> b1; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_sigma l
     (<span class="kr">fun</span> (<span class="nv">c1</span> : C1) (<span class="nv">e1</span> : f1 b1 = g1 c1) =&gt;
      (p b1 @ ap h e1) @ (q c1)^))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk85">snrefine (OO_inverts_functor_sigma _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; l</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk86" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br></div><label class="goal-separator" for="descent-v-chk86"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : C1,
O_inverts O
  ((<span class="kr">fun</span> (<span class="nv">c1</span> : C1) (<span class="nv">e1</span> : f1 b1 = g1 c1) =&gt;
    (p b1 @ ap h e1) @ (q c1)^) a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk87"><span class="mi">1</span>:<span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : C1,
O_inverts O
  ((<span class="kr">fun</span> (<span class="nv">c1</span> : C1) (<span class="nv">e1</span> : f1 b1 = g1 c1) =&gt;
    (p b1 @ ap h e1) @ (q c1)^) a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk88"><span class="nb">intros</span> c1; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (<span class="kr">fun</span> <span class="nv">e1</span> : f1 b1 = g1 c1 =&gt;
   (p b1 @ ap h e1) @ (q c1)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk89"><span class="nb">pose</span> @isequiv_compose. <span class="c">(* Speed up typeclass search. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>@isequiv_compose</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) 
(<span class="nv">f</span> : A -&gt; B),
IsEquiv f -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B -&gt; C, IsEquiv g -&gt; IsEquiv (g o f)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (<span class="kr">fun</span> <span class="nv">e1</span> : f1 b1 = g1 c1 =&gt;
   (p b1 @ ap h e1) @ (q c1)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk8a"><span class="nb">refine</span> (isequiv_homotopic (O_functor O (<span class="kr">fun</span> <span class="nv">r</span> =&gt; r @ (q c1)^) o O_functor O (concat (p b1)) o O_functor O (@ap _ _ h (f1 b1) (g1 c1))) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>@isequiv_compose</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) 
(<span class="nv">f</span> : A -&gt; B),
IsEquiv f -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B -&gt; C, IsEquiv g -&gt; IsEquiv (g o f)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : O (f1 b1 = g1 c1) =&gt;
 O_functor O
   (<span class="kr">fun</span> <span class="nv">r</span> : f2 (k b1) = h (g1 c1) =&gt; r @ (q c1)^)
   (O_functor O (concat (p b1)) (O_functor O (ap h) x))) ==
O_functor O
  (<span class="kr">fun</span> <span class="nv">e1</span> : f1 b1 = g1 c1 =&gt;
   (p b1 @ ap h e1) @ (q c1)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk8b"><span class="nb">intros</span> r; <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>@isequiv_compose</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) 
(<span class="nv">f</span> : A -&gt; B),
IsEquiv f -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B -&gt; C, IsEquiv g -&gt; IsEquiv (g o f)</span></span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>O (f1 b1 = g1 c1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O
  (<span class="kr">fun</span> <span class="nv">e1</span> : f1 b1 = g1 c1 =&gt;
   (p b1 @ ap h e1) @ (q c1)^) r =
O_functor O
  (<span class="kr">fun</span> <span class="nv">r</span> : f2 (k b1) = h (g1 c1) =&gt; r @ (q c1)^)
  (O_functor O (concat (p b1)) (O_functor O (ap h) r))</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk8c"><span class="nb">refine</span> (_ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>@isequiv_compose</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) 
(<span class="nv">f</span> : A -&gt; B),
IsEquiv f -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B -&gt; C, IsEquiv g -&gt; IsEquiv (g o f)</span></span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>O (f1 b1 = g1 c1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O
  (<span class="kr">fun</span> <span class="nv">e1</span> : f1 b1 = g1 c1 =&gt;
   (p b1 @ ap h e1) @ (q c1)^) r = <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk8d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>@isequiv_compose</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) 
(<span class="nv">f</span> : A -&gt; B),
IsEquiv f -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B -&gt; C, IsEquiv g -&gt; IsEquiv (g o f)</span></span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>O (f1 b1 = g1 c1)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk8d"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> =
O_functor O
  (<span class="kr">fun</span> <span class="nv">r</span> : f2 (k b1) = h (g1 c1) =&gt; r @ (q c1)^)
  (O_functor O (concat (p b1)) (O_functor O (ap h) r))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk8e"><span class="mi">2</span>:<span class="nb">apply</span> O_functor_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A1, B1, C1, A2, B2, C2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>B1 -&gt; A1</span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>C1 -&gt; A1</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B2 -&gt; A2</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>C2 -&gt; A2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>C1 -&gt; C2</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f2 o k == h o f1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g2 o l == h o g1</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; h</span></span></span><br><span><var>O_inverts1</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; k</span></span></span><br><span><var>O_inverts2</var><span class="hyp-type"><b>: </b><span>O_inverts O&#39; l</span></span></span><br><span><var>b1</var><span class="hyp-type"><b>: </b><span>B1</span></span></span><br><span><var>c1</var><span class="hyp-type"><b>: </b><span>C1</span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>@isequiv_compose</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) 
(<span class="nv">f</span> : A -&gt; B),
IsEquiv f -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B -&gt; C, IsEquiv g -&gt; IsEquiv (g o f)</span></span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>O (f1 b1 = g1 c1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O
  (<span class="kr">fun</span> <span class="nv">e1</span> : f1 b1 = g1 c1 =&gt;
   (p b1 @ ap h e1) @ (q c1)^) r =
O_functor O
  (<span class="kr">fun</span> <span class="nv">x</span> : h (f1 b1) = h (g1 c1) =&gt;
   (<span class="kr">fun</span> <span class="nv">r</span> : f2 (k b1) = h (g1 c1) =&gt; r @ (q c1)^)
     (p b1 @ x)) (O_functor O (ap h) r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">cbn</span>; srapply O_functor_compose.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Proposition 2.28 of CORS, and Theorem 3.1(x) of RSS: the functor [O&#39;] preserves pullbacks up to [O]-equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk8f">#[export] <span class="kn">Instance</span> <span class="nf">OO_inverts_functor_pullback_to_O</span>
       {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : B -&gt; A) (<span class="nv">g</span> : C -&gt; A)
  : O_inverts O (functor_pullback f g (O_functor O&#39; f) (O_functor O&#39; g)
                                  (to O&#39; A) (to O&#39; B) (to O&#39; C)
                                  (to_O_natural O&#39; f) (to_O_natural O&#39; g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B -&gt; A</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_pullback f g (O_functor O&#39; f)
     (O_functor O&#39; g) (to O&#39; A) (to O&#39; B) (to O&#39; C)
     (to_O_natural O&#39; f) (to_O_natural O&#39; g))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk90"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B -&gt; A</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>C -&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O
  (functor_pullback f g (O_functor O&#39; f)
     (O_functor O&#39; g) (to O&#39; A) (to O&#39; B) (to O&#39; C)
     (to_O_natural O&#39; f) (to_O_natural O&#39; g))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> OO_inverts_functor_pullback; <span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_OO_pullback</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : B -&gt; A) (<span class="nv">g</span> : C -&gt; A)
  : O (Pullback f g) &lt;~&gt; O (Pullback (O_functor O&#39; f) (O_functor O&#39; g))
  := Build_Equiv _ _ _ (OO_inverts_functor_pullback_to_O f g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The &quot;if&quot; direction of CORS Proposition 2.31, and the nontrivial part of Theorem 3.1(xi) of RSS.  Note that we could also deduce Theorem 3.1(iii) of RSS from this. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk91"><span class="kn">Definition</span> <span class="nf">OO_cancelL_conn_map</span>
           {<span class="nv">Y</span> <span class="nv">X</span> <span class="nv">Z</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : Y -&gt; X) (<span class="nv">g</span> : X -&gt; Z)
           `{IsConnMap O&#39; _ _ (g o f)} `{IsConnMap O&#39; _ _ g}
  : IsConnMap O f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk92"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk93"><span class="nb">apply</span> conn_map_OO_inverts.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk94">napply (cancelL_isequiv (O_functor O&#39; g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk95" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; g</span></span></span><br></div><label class="goal-separator" for="descent-v-chk95"><hr></label><div class="goal-conclusion">IsEquiv
  (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; Y =&gt; O_functor O&#39; g (O_functor O&#39; f x))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk96"><span class="mi">1</span>:<span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv
  (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; Y =&gt; O_functor O&#39; g (O_functor O&#39; f x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (isequiv_homotopic _ (O_functor_compose O&#39; f g)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">LeftExactness</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Here&#39;s the &quot;only if&quot; direction of CORS Proposition 2.31.  Note that the hypotheses are different from those of the &quot;if&quot; direction, and the proof is shorter than the one given in CORS. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk97"><span class="kn">Definition</span> <span class="nf">OO_cancelR_conn_map</span>
       (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse@{u}) `{O_leq@{u u u} O O&#39;, O&#39; &lt;= Sep O}
       {Y X Z : <span class="kt">Type</span>} (f : Y -&gt; X) (g : X -&gt; Z)
       `{IsConnMap O&#39; _ _ (g o f)} `{IsConnMap O _ _ f}
  : IsConnMap O&#39; g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O&#39; g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk98"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O&#39; g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk99"><span class="nb">apply</span> conn_map_from_extension_elim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">P</span> : Z -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)) -&gt;
<span class="kr">forall</span> <span class="nv">d</span> : <span class="kr">forall</span> <span class="nv">a</span> : X, P (g a), ExtensionAlong g P d</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk9a"><span class="nb">intros</span> P P_inO h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong g P h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk9b"><span class="kr">exists</span> (<span class="nv">conn_map_elim</span> <span class="nv">O&#39;</span> (g o f) P (h o f)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : X,
conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x0</span> : Y =&gt; g (f x0)) P
  (<span class="kr">fun</span> <span class="nv">x0</span> : Y =&gt; h (f x0)) 
  (g x) = h x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk9c">nrefine (conn_map_elim O f _ _); [ <span class="bp">exact</span> _ | .. ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : X,
In O
  (conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
     (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
     (g b) = h b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chk9d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br></div><label class="goal-separator" for="descent-v-chk9d"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : Y,
conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
  (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
  (g (f a)) = h (f a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk9e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : X,
In O
  (conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
     (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
     (g b) = h b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chk9f"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O
  (conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
     (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
     (g x) = h x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka0"><span class="nb">pose proof</span> (<span class="kr">fun</span> <span class="nv">z</span> =&gt; inO_leq O&#39; (Sep O) (P z) (P_inO z)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>X</span></span></span><br><span><var>X0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : Z, In (Sep O) (P z)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O
  (conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
     (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
     (g x) = h x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : Y,
conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
  (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
  (g (f a)) = h (f a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka2"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Z -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Z, In O&#39; (P b)</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (g a)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">conn_map_elim O&#39; (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; g (f x)) P
  (<span class="kr">fun</span> <span class="nv">x</span> : Y =&gt; h (f x)) 
  (g (f y)) = h (f y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (conn_map_comp O&#39; (g o f)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka3"><span class="kn">Definition</span> <span class="nf">OO_isconnected_from_conn_map</span>
       (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse) `{O &lt;= O&#39;, O&#39; &lt;= Sep O}
       {Y X : <span class="kt">Type</span>} (f : Y -&gt; X)
       `{IsConnected O&#39; Y} `{IsConnMap O _ _ f}
  : IsConnected O&#39; X.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O&#39; X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O&#39; X</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka5"><span class="nb">apply</span> isconnected_conn_map_to_unit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;= O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O&#39; (const_tt X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_cancelR_conn_map O&#39; O f (const_tt _)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** An interesting scholium to Proposition 2.31. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka6"><span class="kn">Definition</span> <span class="nf">OO_inverts_conn_map_factor_conn_map</span>
       (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse) `{O &lt;&lt; O&#39;, O &lt;&lt;&lt; O&#39;, O&#39; &lt;= Sep O}
       {Y X Z : <span class="kt">Type</span>} (f : Y -&gt; X) (g : X -&gt; Z)
       `{IsConnMap O&#39; _ _ (g o f)} `{IsConnMap O _ _ f}
  : O_inverts O&#39; f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chka8">napply (cancelL_isequiv (O_functor O&#39; g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chka9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><label class="goal-separator" for="descent-v-chka9"><hr></label><div class="goal-conclusion">IsEquiv
  (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; Y =&gt; O_functor O&#39; g (O_functor O&#39; f x))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkaa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkab"><span class="nb">apply</span> O_inverts_conn_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O&#39; g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_cancelR_conn_map O&#39; O f g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkac">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnMap O&#39; (g o f)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv
  (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; Y =&gt; O_functor O&#39; g (O_functor O&#39; f x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (isequiv_homotopic _ (O_functor_compose O&#39; f g)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkad"><span class="kn">Definition</span> <span class="nf">OO_inverts_conn_map_isconnected_domain</span>
       (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse) `{O &lt;&lt; O&#39;, O &lt;&lt;&lt; O&#39;, O&#39; &lt;= Sep O}
       {Y X : <span class="kt">Type</span>} (f : Y -&gt; X)
       `{IsConnected O&#39; Y} `{IsConnMap O _ _ f}
  : O_inverts O&#39; f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkae"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O &lt;&lt;&lt; O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>O&#39; &lt;= Sep O</span></span></span><br><span><var>Y, X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Y -&gt; X</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>IsConnected O&#39; Y</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>IsConnMap O f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O&#39; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_inverts_conn_map_factor_conn_map O&#39; O f (const_tt _)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Here is the converse of [ooextendable_TypeO_lex_leq]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkaf"><span class="kn">Definition</span> <span class="nf">O_lex_leq_extendable_TypeO</span>
           (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse) `{O &lt;&lt; O&#39;}
           (e : <span class="kr">forall</span> (<span class="nv">A</span>:<span class="kt">Type</span>) (<span class="nv">g</span>:A-&gt;Type_ O), ExtensionAlong (to O&#39; A) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Type_ O) g)
  : O &lt;&lt;&lt; O&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O &lt;&lt;&lt; O&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O &lt;&lt;&lt; O&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb1"><span class="nb">intros</span> A; <span class="nb">unshelve</span> <span class="nb">econstructor</span>; <span class="nb">intros</span> P&#39; P_inO; <span class="nb">pose</span> (P := <span class="kr">fun</span> <span class="nv">x</span> =&gt; (P&#39; x ; P_inO x) : Type_ O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_reflector O&#39; A -&gt; <span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br></div><label class="goal-separator" for="descent-v-chkb2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A,
In O
  ((<span class="kr">fun</span> (<span class="nv">P&#39;</span> : A -&gt; <span class="kt">Type</span>)
      (<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O (P&#39; x0)) =&gt;
    <span class="kr">let</span> <span class="nv">P</span> := <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; (P&#39; x0; P_inO x0) : Type_ O
      <span class="kr">in</span>
    <span class="nl">?Goal</span>) P&#39; P_inO x)</div></blockquote><input class="alectryon-extra-goal-toggle" id="descent-v-chkb3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br></div><label class="goal-separator" for="descent-v-chkb3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">fun</span> (<span class="nv">P&#39;</span> : A -&gt; <span class="kt">Type</span>)
   (<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O (P&#39; x0)) =&gt;
 <span class="kr">let</span> <span class="nv">P</span> := <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; (P&#39; x0; P_inO x0) : Type_ O <span class="kr">in</span>
 <span class="nl">?Goal</span>) P&#39; P_inO (to O&#39; A x) &lt;~&gt; 
P&#39; x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_reflector O&#39; A -&gt; <span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ((e A P).<span class="mi">1</span> x).<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A,
In O
  ((<span class="kr">fun</span> (<span class="nv">P&#39;</span> : A -&gt; <span class="kt">Type</span>)
      (<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O (P&#39; x0)) =&gt;
    <span class="kr">let</span> <span class="nv">P</span> := <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; (P&#39; x0; P_inO x0) : Type_ O
      <span class="kr">in</span>
    <span class="kr">fun</span> <span class="nv">x0</span> : O_reflector O&#39; A =&gt; ((e A P).<span class="mi">1</span> x0).<span class="mi">1</span>) P&#39;
     P_inO x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ((e A P).<span class="mi">1</span> x).<span class="mi">2</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">fun</span> (<span class="nv">P&#39;</span> : A -&gt; <span class="kt">Type</span>)
   (<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x0</span> : A, In O (P&#39; x0)) =&gt;
 <span class="kr">let</span> <span class="nv">P</span> := <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; (P&#39; x0; P_inO x0) : Type_ O <span class="kr">in</span>
 <span class="kr">fun</span> <span class="nv">x0</span> : O_reflector O&#39; A =&gt; ((e A P).<span class="mi">1</span> x0).<span class="mi">1</span>) P&#39;
  P_inO (to O&#39; A x) &lt;~&gt; 
P&#39; x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb7"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">P&#39;</span> : A -&gt; <span class="kt">Type</span>)
   (<span class="nv">P_inO</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)) =&gt;
 <span class="kr">let</span> <span class="nv">P</span> := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O <span class="kr">in</span>
 <span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; A =&gt; ((e A P).<span class="mi">1</span> x).<span class="mi">1</span>) P&#39; P_inO
  (to O&#39; A x) &lt;~&gt; P&#39; x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb8"><span class="nb">apply</span> equiv_path.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, In O (P&#39; x)</span></span></span><br><span><var>P</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) : Type_ O</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">P</span> := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; (P&#39; x; P_inO x) <span class="kr">in</span>
 <span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; A =&gt; ((e A P).<span class="mi">1</span> x).<span class="mi">1</span>)
  (to O&#39; A x) = P&#39; x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (((e A P).<span class="mi">2</span> x)..<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And a version for the accessible case. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkb9"><span class="kn">Definition</span> <span class="nf">O_lex_leq_inO_TypeO</span>
           (<span class="nv">O&#39;</span> <span class="nv">O</span> : ReflectiveSubuniverse) `{O &lt;&lt; O&#39;}
           `{IsAccRSU O&#39;} `{In (lift_accrsu O&#39;) (Type_ O)}
  : O &lt;&lt;&lt; O&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O &lt;&lt;&lt; O&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkba"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O &lt;&lt;&lt; O&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkbb"><span class="nb">apply</span> O_lex_leq_extendable_TypeO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">g</span> : A -&gt; Type_ O),
ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkbc"><span class="nb">intros</span> A g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkbd"><span class="nb">assert</span> (O_inverts (lift_accrsu O&#39;) (to O&#39; A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts (lift_accrsu O&#39;) (to O&#39; A)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="descent-v-chkbe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O&#39;) (to O&#39; A)</span></span></span><br></div><label class="goal-separator" for="descent-v-chkbe"><hr></label><div class="goal-conclusion">ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkbf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts (lift_accrsu O&#39;) (to O&#39; A)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply (O_inverts_O_leq&#39; (lift_accrsu O&#39;) O&#39;).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="descent-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="descent-v-chkc0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O &lt;&lt; O&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsAccRSU O&#39;</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O&#39;) (Type_ O)</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; Type_ O</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O&#39;) (to O&#39; A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector O&#39; A =&gt; Type_ O) g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (fst (ooextendable_O_inverts (lift_accrsu O&#39;) (to O&#39; A) (Type_ O) <span class="mi">1</span>%nat) g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span></span></pre>
</div>
</div></body>
</html>
