<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>Localization.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="sd">(** * Localization *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk169"><span class="kn">Require Import</span> HoTT.Basics HoTT.Types.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Extensions.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> ReflectiveSubuniverse Accessible.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> nat_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> path_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Suppose given a family of maps [f : forall (i:I), S i -&gt; T i].  A type [X] is said to be [f]-local if for all [i:I], the map [(T i -&gt; X) -&gt; (S i -&gt; X)] given by precomposition with [f i] is an equivalence.  Our goal is to show that the [f]-local types form a reflective subuniverse, with a reflector constructed by localization.  That is, morally we want to say</span>

<span class="sd">&lt;&lt;</span>
<span class="sd">Inductive Localize f (X : Type) : Type :=</span>
<span class="sd">| loc : X -&gt; Localize X</span>
<span class="sd">| islocal_localize : forall i, IsEquiv (fun (g : T i -&gt; X) =&gt; g o f i).</span>
<span class="sd">&gt;&gt;</span>

<span class="sd">This is not a valid HIT by the usual rules, but if we expand out the definition of [IsEquiv] and apply [path_sigma] and [path_forall], then it becomes one.  We get a simpler definition (no 2-path constructors) if we do this with [BiInv] rather than [IsEquiv]:</span>

<span class="sd">&lt;&lt;</span>
<span class="sd">Inductive Localize f (X : Type) : Type :=</span>
<span class="sd">| loc : X -&gt; Localize X</span>
<span class="sd">| lsect : forall i (g : S i -&gt; X), T i -&gt; X</span>
<span class="sd">| lissect : forall i (g : S i -&gt; X) (s : S i), lsect i g (f i s) = g s</span>
<span class="sd">| lretr : forall i (g : S i -&gt; X), T i -&gt; X</span>
<span class="sd">| lisretr : forall i (h : T i -&gt; X) (t : T i), lretr i (h o f i) t = h t.</span>
<span class="sd">&gt;&gt;</span>

<span class="sd">This definition works, and from it one can prove that the [f]-local types form a reflective subuniverse.  However, the proof inextricably involves [Funext].  We can avoid [Funext] in the same way that we did in the definition of a [ReflectiveSubuniverse], by using pointwise path-split precomposition equivalences.  Observe that the assertion [ExtendableAlong n f C] consists entirely of points, paths, and higher paths in [C].  Therefore, for any [n] we might choose, we can define [Localize f X] as a HIT to universally force [ExtendableAlong n (f i) (fun _ =&gt; Localize f X)] to hold for all [i].  For instance, when [n] is 2 (the smallest value which will ensure that [Localize f X] is actually [f]-local), we get</span>

<span class="sd">&lt;&lt;</span>
<span class="sd">Inductive Localize f (X : Type) : Type :=</span>
<span class="sd">| loc : X -&gt; Localize X</span>
<span class="sd">| lrec : forall i (g : S i -&gt; X), T i -&gt; X</span>
<span class="sd">| lrec_beta : forall i (g : S i -&gt; X) (s : T i), lrec i g (f i s) = g s</span>
<span class="sd">| lindpaths : forall i (h k : T i -&gt; X) (p : h o f i == k o f i) (t : T i), h t = k t</span>
<span class="sd">| lindpaths_beta : forall i (h k : T i -&gt; X) (p : h o f i == k o f i) (s : S i),</span>
<span class="sd">                     lindpaths i h k p (f i s) = p s.</span>
<span class="sd">&gt;&gt;</span>

<span class="sd">However, just as for [ReflectiveSubuniverse], in order to completely avoid [Funext] we need the [oo]-version of path-splitness.  Written out as above, this would involve infinitely many constructors (but it would not otherwise be problematic, so for instance it can be constructed semantically in model categories).  We can&#39;t actually write out infinitely many constructors in Coq, of course, but since we have a finite definition of [ooExtendableAlong], we can just assert directly that [ooExtendableAlong (f i) (fun _ =&gt; Localize f X)] holds for all [i].</span>

<span class="sd">Then, however, we have to express the hypotheses of the induction principle.  We know what these should be for each path-constructor and higher path-constructor, so all we need is a way to package up those infinitely many hypotheses into a single one, analogously to [ooExtendableAlong].  Thus, we begin this file by defining a &quot;dependent&quot; version of [ooExtendableAlong], and of course we start this with a version for finite [n].  *)</span>

<span class="sd">(** ** Dependent extendability *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">ExtendableAlong_Over</span>@{a b c d m | a &lt;= m, b &lt;= m, c &lt;= m, d &lt;= m}
         (n : nat) {A : <span class="kt">Type</span>@{a}} {B : <span class="kt">Type</span>@{b}} (f : A -&gt; B)
         (C : B -&gt; <span class="kt">Type</span>@{c})
         (D : <span class="kr">forall</span> <span class="nv">b</span>, C b -&gt; <span class="kt">Type</span>@{d})
         (ext : ExtendableAlong@{a b c m} n f C)
: <span class="kt">Type</span>@{m}
  := <span class="kr">match</span> n <span class="kr">return</span> ExtendableAlong@{a b c m} n f C -&gt; <span class="kt">Type</span>@{m} <span class="kr">with</span>
       | <span class="mi">0</span> =&gt; <span class="kr">fun</span> <span class="nv">_</span> =&gt; Unit
       | S n =&gt; <span class="kr">fun</span> <span class="nv">ext&#39;</span> =&gt;
                (<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span>, C (f a)) (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span>, D (f a) (g a)),
                  sig@{m m}     <span class="sd">(** Control universe parameters *)</span>
                  (<span class="kr">fun</span> (<span class="nv">rec</span> : <span class="kr">forall</span> <span class="nv">b</span>, D b ((fst ext&#39; g).<span class="mi">1</span> b)) =&gt;
                         <span class="kr">forall</span> <span class="nv">a</span>, (fst ext&#39; g).<span class="mi">2</span> a # rec (f a) = g&#39; a )) *
                <span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span>, C b)
                       (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span>, D b (h b)) (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span>, D b (k b)),
                  ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> =&gt; h b = k b)
                    (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; c # h&#39; b = k&#39; b) (snd ext&#39; h k)
     <span class="kr">end</span> ext.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Like [ExtendableAlong], these can be postcomposed with known equivalences. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk16a"><span class="kn">Definition</span> <span class="nf">extendable_over_postcompose&#39;</span> (<span class="nv">n</span> : nat)
           {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
           (<span class="nv">ext</span> : ExtendableAlong n f C)
           (<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span>, C b -&gt; <span class="kt">Type</span>)
           (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, D b c &lt;~&gt; E b c)
: ExtendableAlong_Over n f C D ext
  -&gt; ExtendableAlong_Over n f C E ext.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f C D ext -&gt;
ExtendableAlong_Over n f C E ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk16b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f C D ext -&gt;
ExtendableAlong_Over n f C E ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk16c"><span class="nb">revert</span> C ext D E g; simple_induction n n IHn; <span class="nb">intros</span> C ext D E g; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong <span class="mi">0</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Unit -&gt; Unit</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk16d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br></div><label class="goal-separator" for="localization-v-chk16d"><hr></label><div class="goal-conclusion">(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
 g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b) (snd ext h k)) -&gt;
(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, E b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (E (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
 g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (k b)),
 ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (E b) c (h&#39; b) = k&#39; b) (snd ext h k))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk16e"><span class="mi">1</span>: <span class="bp">exact</span> idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
 g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b) (snd ext h k)) -&gt;
(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, E b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (E (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
 g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (k b)),
 ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (E b) c (h&#39; b) = k&#39; b) (snd ext h k))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk16f"><span class="nb">intros</span> ext&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, E b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (E (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
 g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (k b)),
 ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (E b) c (h&#39; b) = k&#39; b) (snd ext h k))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk170"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
(<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (g a)),
{rec : <span class="kr">forall</span> <span class="nv">b</span> : B, E b ((fst ext g).<span class="mi">1</span> b) &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (E (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
g&#39; a}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk171" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br></div><label class="goal-separator" for="localization-v-chk171"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
(<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (h b))
(<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (k b)),
ExtendableAlong_Over n f 
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (E b) c (h&#39; b) = k&#39; b) 
  (snd ext h k)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk172">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
(<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (g a)),
{rec : <span class="kr">forall</span> <span class="nv">b</span> : B, E b ((fst ext g).<span class="mi">1</span> b) &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (E (f a)) ((fst ext g).<span class="mi">2</span> a) (rec (f a)) =
g&#39; a}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk173"><span class="nb">intros</span> h k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (h a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{rec : <span class="kr">forall</span> <span class="nv">b</span> : B, E b ((fst ext h).<span class="mi">1</span> b) &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (E (f a)) ((fst ext h).<span class="mi">2</span> a) (rec (f a)) =
k a}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk174"><span class="kr">exists</span> (<span class="nv">fun</span> <span class="nv">b</span> =&gt; g b ((fst ext h).<span class="mi">1</span> b)
                     ((fst ext&#39; h (<span class="kr">fun</span> <span class="nv">a</span> =&gt; (g _ _)^-<span class="mi">1</span> (k a))).<span class="mi">1</span> b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (h a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
transport (E (f a)) ((fst ext h).<span class="mi">2</span> a)
  (g (f a) ((fst ext h).<span class="mi">1</span> (f a))
     ((fst ext&#39; h
         (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; (g (f a0) (h a0))^-<span class="mi">1</span> (k a0))).<span class="mi">1</span>
        (f a))) = k a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk175"><span class="nb">intros</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (h a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (E (f a)) ((fst ext h).<span class="mi">2</span> a)
  (g (f a) ((fst ext h).<span class="mi">1</span> (f a))
     ((fst ext&#39; h
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (g (f a) (h a))^-<span class="mi">1</span> (k a))).<span class="mi">1</span>
        (f a))) = k a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk176"><span class="nb">refine</span> ((ap_transport ((fst ext h).<span class="mi">2</span> a) (g (f a)) _)^ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (h a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g (f a) (h a)
  (transport (D (f a)) ((fst ext h).<span class="mi">2</span> a)
     ((fst ext&#39; h
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (g (f a) (h a))^-<span class="mi">1</span> (k a))).<span class="mi">1</span>
        (f a))) = k a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk177"><span class="nb">apply</span> moveR_equiv_M.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, E (f a) (h a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (D (f a)) ((fst ext h).<span class="mi">2</span> a)
  ((fst ext&#39; h (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (g (f a) (h a))^-<span class="mi">1</span> (k a))).<span class="mi">1</span>
     (f a)) = (g (f a) (h a))^-<span class="mi">1</span> (k a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> ((fst ext&#39; h (<span class="kr">fun</span> <span class="nv">a</span> =&gt; (g _ _)^-<span class="mi">1</span> (k a))).<span class="mi">2</span> a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk178">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
(<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (h b))
(<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, E b (k b)),
ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (E b) c (h&#39; b) = k&#39; b) (snd ext h k)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk179"><span class="nb">intros</span> p q p&#39; q&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>p, q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (p b)</span></span></span><br><span><var>q'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (q b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; p b = q b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : p b = q b) =&gt;
   transport (E b) c (p&#39; b) = q&#39; b) (snd ext p q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk17a"><span class="nb">refine</span> (IHn (<span class="kr">fun</span> <span class="nv">b</span> =&gt; p b = q b) _
                (<span class="kr">fun</span> <span class="nv">b</span> =&gt; <span class="kr">fun</span> <span class="nv">c</span> =&gt; transport (D b) c ((g b (p b))^-<span class="mi">1</span> (p&#39; b))
                                   = ((g b (q b))^-<span class="mi">1</span> (q&#39; b)))
                _ _
                (snd ext&#39; p q (<span class="kr">fun</span> <span class="nv">b</span> =&gt; (g b (p b))^-<span class="mi">1</span> (p&#39; b))
                              (<span class="kr">fun</span> <span class="nv">b</span> =&gt; (g b (q b))^-<span class="mi">1</span> (q&#39; b)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>p, q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (p b)</span></span></span><br><span><var>q'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (q b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : p b = q b),
transport (D b) c ((g b (p b))^-<span class="mi">1</span> (p&#39; b)) =
(g b (q b))^-<span class="mi">1</span> (q&#39; b) &lt;~&gt;
transport (E b) c (p&#39; b) = q&#39; b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk17b"><span class="nb">intros</span> b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>p, q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (p b)</span></span></span><br><span><var>q'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (q b)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>p b = q b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (D b) c ((g b (p b))^-<span class="mi">1</span> (p&#39; b)) =
(g b (q b))^-<span class="mi">1</span> (q&#39; b) &lt;~&gt;
transport (E b) c (p&#39; b) = q&#39; b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk17c"><span class="nb">refine</span> (_ oE equiv_moveR_equiv_M _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>p, q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (p b)</span></span></span><br><span><var>q'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (q b)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>p b = q b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g b (q b) (transport (D b) c ((g b (p b))^-<span class="mi">1</span> (p&#39; b))) =
q&#39; b &lt;~&gt; transport (E b) c (p&#39; b) = q&#39; b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk17d"><span class="nb">apply</span> equiv_concat_l.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>p, q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (p b)</span></span></span><br><span><var>q'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (q b)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>p b = q b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (E b) c (p&#39; b) =
g b (q b) (transport (D b) c ((g b (p b))^-<span class="mi">1</span> (p&#39; b)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk17e"><span class="nb">refine</span> (_ @ (ap_transport c (g b) _)^).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt; ExtendableAlong_Over n f C E ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D, E</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c &lt;~&gt; E b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
 (<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a) (g a)),
 {rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b ((fst ext g).<span class="mi">1</span> b) &amp;
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 transport (D (f a)) ((fst ext g).<span class="mi">2</span> a)
   (rec (f a)) = g&#39; a}) *
(<span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
 (<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (h b))
 (<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b (k b)),
 ExtendableAlong_Over n f
   (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
    transport (D b) c (h&#39; b) = k&#39; b)
   (snd ext h k))</span></span></span><br><span><var>p, q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>p'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (p b)</span></span></span><br><span><var>q'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, E b (q b)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>p b = q b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (E b) c (p&#39; b) =
transport (E b) c (g b (p b) ((g b (p b))^-<span class="mi">1</span> (p&#39; b)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap, <span class="nb">symmetry</span>, eisretr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">extendable_over_postcompose</span> (<span class="nv">n</span> : nat)
           {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
           (<span class="nv">ext</span> : ExtendableAlong n f C)
           (<span class="nv">D</span> <span class="nv">E</span> : <span class="kr">forall</span> <span class="nv">b</span>, C b -&gt; <span class="kt">Type</span>)
           (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, D b c -&gt; E b c)
           `{<span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, IsEquiv (g b c)}
: ExtendableAlong_Over n f C D ext
  -&gt; ExtendableAlong_Over n f C E ext
:= extendable_over_postcompose&#39; n C f ext D E
     (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; Build_Equiv _ _ (g b c) _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And if the dependency is trivial, we obtain them from an ordinary [ExtendableAlong]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk17f"><span class="kn">Definition</span> <span class="nf">extendable_over_const</span>
           (<span class="nv">n</span> : nat) {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
           (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>)
: ExtendableAlong n f D
  -&gt; ExtendableAlong_Over n f C (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">_</span> =&gt; D b) ext.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk180"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk181"><span class="nb">revert</span> C ext D.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk182">simple_induction n n IHn; <span class="nb">intros</span> C ext D ext&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong <span class="mi">0</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong <span class="mi">0</span> f D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over <span class="mi">0</span> f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk183" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ExtendableAlong n f C) 
(<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br></div><label class="goal-separator" for="localization-v-chk183"><hr></label><div class="goal-conclusion">ExtendableAlong_Over n.+<span class="mi">1</span> f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk184"><span class="mi">1</span>:<span class="bp">exact</span> tt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n.+<span class="mi">1</span> f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk185"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
(<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a)),
{rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">_</span> : C (f a) =&gt; D (f a))
  ((fst ext g).<span class="mi">2</span> a) (rec (f a)) = g&#39; a}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk186" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ExtendableAlong n f C) 
(<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br></div><label class="goal-separator" for="localization-v-chk186"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
(<span class="nv">h&#39;</span> <span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b),
ExtendableAlong_Over n f 
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (<span class="kr">fun</span> <span class="nv">_</span> : C b =&gt; D b) c (h&#39; b) = k&#39; b)
  (snd ext h k)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk187">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
(<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, D (f a)),
{rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">_</span> : C (f a) =&gt; D (f a))
  ((fst ext g).<span class="mi">2</span> a) (rec (f a)) = g&#39; a}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk188"><span class="nb">intros</span> g g&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, D (f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{rec : <span class="kr">forall</span> <span class="nv">b</span> : B, D b &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">_</span> : C (f a) =&gt; D (f a))
  ((fst ext g).<span class="mi">2</span> a) (rec (f a)) = g&#39; a}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk189"><span class="kr">exists</span> ((fst ext&#39; g&#39;).<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, D (f a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">_</span> : C (f a) =&gt; D (f a))
  ((fst ext g).<span class="mi">2</span> a) ((fst ext&#39; g&#39;).<span class="mi">1</span> (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">a</span> =&gt; transport_const ((fst ext g).<span class="mi">2</span> a) _
                                    @ (fst ext&#39; g&#39;).<span class="mi">2</span> a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk18a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
(<span class="nv">h&#39;</span> <span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, D b),
ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (<span class="kr">fun</span> <span class="nv">_</span> : C b =&gt; D b) c (h&#39; b) = k&#39; b)
  (snd ext h k)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk18b"><span class="nb">intros</span> h k h&#39; k&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>h', k'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, D b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (<span class="kr">fun</span> <span class="nv">_</span> : C b =&gt; D b) c (h&#39; b) = k&#39; b)
  (snd ext h k)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk18c"><span class="nb">refine</span> (extendable_over_postcompose&#39; _ _ _ _ _ _ _
              (IHn (<span class="kr">fun</span> <span class="nv">b</span> =&gt; h b = k b) (snd ext h k)
                   (<span class="kr">fun</span> <span class="nv">b</span> =&gt; h&#39; b = k&#39; b) (snd ext&#39; h&#39; k&#39;))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>),
ExtendableAlong n f D -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">_</span> : C b) =&gt; D b) ext</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f D</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>h', k'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, D b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b),
h&#39; b = k&#39; b &lt;~&gt;
transport (<span class="kr">fun</span> <span class="nv">_</span> : C b =&gt; D b) c (h&#39; b) = k&#39; b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; equiv_concat_l (transport_const c (h&#39; b)) (k&#39; b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This lemma will be used in stating the computation rule for localization. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk18d"><span class="kn">Fixpoint</span> <span class="nf">apD_extendable_eq</span> (<span class="nv">n</span> : nat) {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
         (<span class="nv">ext</span> : ExtendableAlong n f C) (<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span>, C b -&gt; <span class="kt">Type</span>)
         (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, D b c)
         (<span class="nv">ext&#39;</span> : ExtendableAlong_Over n f C D ext)
         {<span class="nv">struct</span> <span class="nv">n</span>}
: <span class="kt">Type</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk18e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk18f"><span class="nb">destruct</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong <span class="mi">0</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over <span class="mi">0</span> f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk190" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n.+<span class="mi">1</span> f C D ext</span></span></span><br></div><label class="goal-separator" for="localization-v-chk190"><hr></label><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk191">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong <span class="mi">0</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over <span class="mi">0</span> f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> Unit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk192">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n.+<span class="mi">1</span> f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk193"><span class="nb">apply</span> prod.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n.+<span class="mi">1</span> f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk194" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n.+<span class="mi">1</span> f C D ext</span></span></span><br></div><label class="goal-separator" for="localization-v-chk194"><hr></label><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk195">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n.+<span class="mi">1</span> f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">forall</span> (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">a</span>, C (f a)) (<span class="nv">b</span> : B),
               g b ((fst ext h).<span class="mi">1</span> b) = (fst ext&#39; h (<span class="kr">fun</span> <span class="nv">a</span> =&gt; g (f a) (h a))).<span class="mi">1</span> b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk196">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>apD_extendable_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">ext</span> : ExtendableAlong n f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c) -&gt;
ExtendableAlong_Over n f C D ext -&gt;
<span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ExtendableAlong n.+<span class="mi">1</span> f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ExtendableAlong_Over n.+<span class="mi">1</span> f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">Type</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span>, apD_extendable_eq
                           n A B (<span class="kr">fun</span> <span class="nv">b</span> =&gt; h b = k b) f (snd ext h k)
                           (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; c # g b (h b) = g b (k b))
                           (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; apD (g b) c)
                           (snd ext&#39; h k _ _)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Here&#39;s the [oo]-version. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ooExtendableAlong_Over</span>@{a b c d m | a &lt;= m, b &lt;= m, c &lt;= m, d &lt;= m}
         {A : <span class="kt">Type</span>@{a}} {B : <span class="kt">Type</span>@{b}} (f : A -&gt; B) (C : B -&gt; <span class="kt">Type</span>@{c})
         (D : <span class="kr">forall</span> <span class="nv">b</span>, C b -&gt; <span class="kt">Type</span>@{d}) (ext : ooExtendableAlong f C)
  := <span class="kr">forall</span> <span class="nv">n</span>, ExtendableAlong_Over@{a b c d m} n f C D (ext n).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The [oo]-version for trivial dependency. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ooextendable_over_const</span>
           {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
           (<span class="nv">ext</span> : ooExtendableAlong f C) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>)
: ooExtendableAlong f D
  -&gt; ooExtendableAlong_Over f C (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">_</span> =&gt; D b) ext
:= <span class="kr">fun</span> <span class="nv">ext&#39;</span> <span class="nv">n</span> =&gt; extendable_over_const n C f (ext n) D (ext&#39; n).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** A crucial fact: the [oo]-version is inherited by types of homotopies. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk197"><span class="kn">Definition</span> <span class="nf">ooextendable_over_homotopy</span>
           {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
           (<span class="nv">ext</span> : ooExtendableAlong f C)
           (<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span>, C b -&gt; <span class="kt">Type</span>)
           (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, D b c)
: ooExtendableAlong_Over f C D ext
  -&gt; ooExtendableAlong_Over f C (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; r b c = s b c) ext.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong_Over f C D ext -&gt;
ooExtendableAlong_Over f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk198"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong_Over f C D ext -&gt;
ooExtendableAlong_Over f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) ext</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk199"><span class="nb">intros</span> ext&#39; n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk19a"><span class="nb">revert</span> C ext D r s ext&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>)
(<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk19b">simple_induction n n IHn; <span class="nb">intros</span> C ext D r s ext&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over <span class="mi">0</span> f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext <span class="mi">0</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk19c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>)
(<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c)
  (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><label class="goal-separator" for="localization-v-chk19c"><hr></label><div class="goal-conclusion">ExtendableAlong_Over n.+<span class="mi">1</span> f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) 
  (ext n.+<span class="mi">1</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk19d"><span class="mi">1</span>:<span class="bp">exact</span> tt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n.+<span class="mi">1</span> f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n.+<span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk19e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
(<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)),
{rec
: <span class="kr">forall</span> <span class="nv">b</span> : B,
  r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
  s b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) (rec (f a)) = g&#39; a}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk19f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>)
(<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c)
  (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><label class="goal-separator" for="localization-v-chk19f"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
(<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, r b (h b) = s b (h b))
(<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, r b (k b) = s b (k b)),
ExtendableAlong_Over n f 
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (<span class="kr">fun</span> <span class="nv">c0</span> : C b =&gt; r b c0 = s b c0) c
     (h&#39; b) = k&#39; b) (snd (ext n.+<span class="mi">1</span>) h k)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, C (f a))
(<span class="nv">g&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)),
{rec
: <span class="kr">forall</span> <span class="nv">b</span> : B,
  r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
  s b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) (rec (f a)) = g&#39; a}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a1"><span class="nb">intros</span> g g&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{rec
: <span class="kr">forall</span> <span class="nv">b</span> : B,
  r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
  s b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) &amp;
<span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) (rec (f a)) = g&#39; a}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a2"><span class="nb">simple refine</span> (_;_); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
s b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1a3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>)
(<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c)
  (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1a3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) 
  (<span class="nl">?Goal0</span> (f a)) = g&#39; a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a4">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
s b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a5"><span class="nb">intros</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
s b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a6"><span class="nb">refine</span> (_ @ (fst (snd (ext&#39; <span class="mi">2</span>) _ _
                            (<span class="kr">fun</span> <span class="nv">b&#39;</span> =&gt; r b&#39; ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b&#39;))
                            (<span class="kr">fun</span> <span class="nv">b&#39;</span> =&gt; s b&#39; ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b&#39;)))
                       (<span class="kr">fun</span> <span class="nv">_</span> =&gt; <span class="mi">1</span>) _).<span class="mi">1</span> b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
transport (D b)
  ((fst
      (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
         (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span> b)
  (r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1a7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>)
(<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c)
  (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1a7"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
transport (D (f a)) <span class="mi">1</span>
  (r (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a))) =
s (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a8">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b) =
transport (D b)
  ((fst
      (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
         (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span> b)
  (r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1a9"><span class="nb">refine</span> (transport2 (D b) (p := <span class="mi">1</span>) _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(fst
   (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
      (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span> b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1aa"><span class="nb">refine</span> ((fst (snd (snd (ext <span class="mi">3</span>) _ _) (<span class="kr">fun</span> <span class="nv">b&#39;</span> =&gt; <span class="mi">1</span>)
                          ((fst (snd (ext <span class="mi">2</span>) _ _) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
                ) _).<span class="mi">1</span> b); <span class="nb">intros</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(fst
   (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
      (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span> (f a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="bp">exact</span> ((fst (snd (ext <span class="mi">2</span>) _ _) (<span class="kr">fun</span> <span class="nv">a&#39;</span> =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ab">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
transport (D (f a)) <span class="mi">1</span>
  (r (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a))) =
s (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ac"><span class="nb">intros</span> a; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a)) =
s (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (_ @
          ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)
          @ _);
        [ <span class="nb">symmetry</span>; <span class="bp">by</span> <span class="nb">apply</span> apD
        | <span class="bp">by</span> <span class="nb">apply</span> apD ].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ad">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  ((<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
    transport2 (D b)
      ((fst
          (snd
             (snd (ext <span class="mi">3</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
                (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>)
             (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
             (fst
                (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
                   (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>)
                (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
          (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt;
           ((fst
               (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
                  (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>)
               (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a0)^)).<span class="mi">1</span> b)
      (r b ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b)) @
    (fst
       (snd (ext&#39; <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
          (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
          (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt;
           r b&#39; ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b&#39;))
          (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt;
           s b&#39; ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b&#39;)))
       (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>)
       (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt;
        ((apD (r (f a0)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a0)^)^ @
         ap
           (transport (D (f a0))
              ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a0)^) (g&#39; a0)) @
        apD (s (f a0)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a0)^
        :
        transport (D (f a0)) <span class="mi">1</span>
          (r (f a0) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a0))) =
        s (f a0) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a0)))).<span class="mi">1</span> b)
     (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ae"><span class="nb">intros</span> a; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (transport2 (D (f a))
     ((fst
         (snd
            (snd (ext <span class="mi">3</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
               (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst
               (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
                  (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>)
               (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst
              (snd (ext <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
                 (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>)
              (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a)^)).<span class="mi">1</span> (f a))
     (r (f a) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> (f a))) @
   (fst
      (snd (ext&#39; <span class="mi">2</span>) (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
         (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b&#39;))
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span> b&#39;)))
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
       ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
        ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)) @
       apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
     (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1af"><span class="nb">set</span> (h := (fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (transport2 (D (f a))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a)) (r (f a) (h (f a))) @
   (fst
      (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;))) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
       ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
        ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)) @
       apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
     (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b0"><span class="kr">match goal with</span>
          |- <span class="kp">context</span>[   (fst (snd (ext&#39; <span class="mi">2</span>) _ _ <span class="nl">?k1</span> <span class="nl">?k2</span>) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; <span class="mi">1</span>) <span class="nl">?l</span>).<span class="mi">1</span> ]
          =&gt; <span class="nb">pose</span> (p := (fst (snd (ext&#39; <span class="mi">2</span>) _ _  k1  k2) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; <span class="mi">1</span>) l).<span class="mi">2</span> a);
            <span class="nb">simpl</span> <span class="kr">in</span> p
      <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>(fst
   (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
      (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;))) 
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a))
          ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) 
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">2</span> a</span></span><span class="hyp-type"><b>: </b><span>transport
  (<span class="kr">fun</span> <span class="nv">c</span> : h (f a) = h (f a) =&gt;
   transport (D (f a)) c (r (f a) (h (f a))) =
   s (f a) (h (f a)))
  ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a)
  ((fst
      (snd (ext&#39; <span class="mi">2</span>) h h
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;)))
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
       ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
        ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) 
          (g&#39; a)) @
       apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
     (f a)) =
((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
 ap
   (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
   (g&#39; a)) @
apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (transport2 (D (f a))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a)) (r (f a) (h (f a))) @
   (fst
      (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;))) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
       ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
        ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)) @
       apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
     (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b1"><span class="nb">rewrite</span> transport_paths_Fl <span class="kr">in</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : h (f a) = h (f a) =&gt;
    transport (D (f a)) x (r (f a) (h (f a))))
   ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a))^ @
(fst
   (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
      (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;)))
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a))
          ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) 
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
  (f a) =
((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
 ap
   (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
   (g&#39; a)) @
apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (transport2 (D (f a))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a)) (r (f a) (h (f a))) @
   (fst
      (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;))) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
       ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
        ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)) @
       apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
     (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b2"><span class="nb">apply</span> moveL_Mp <span class="kr">in</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(fst
   (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
      (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;)))
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
   (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
    ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a))
          ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) 
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
  (f a) =
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : h (f a) = h (f a) =&gt;
   transport (D (f a)) x (r (f a) (h (f a))))
  ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a) @
(((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
  ap
    (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
    (g&#39; a)) @
 apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (transport2 (D (f a))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a)) (r (f a) (h (f a))) @
   (fst
      (snd (ext&#39; <span class="mi">2</span>) h h (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; r b&#39; (h b&#39;))
         (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; s b&#39; (h b&#39;))) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)
      (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
       ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
        ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)) @
       apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)).<span class="mi">1</span>
     (f a)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b3"><span class="nb">refine</span> (ap (transport _ _) (<span class="mi">1</span> @@ p) @ _); <span class="nb">clear</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (transport2 (D (f a))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a)) (r (f a) (h (f a))) @
   (ap
      (<span class="kr">fun</span> <span class="nv">x</span> : h (f a) = h (f a) =&gt;
       transport (D (f a)) x (r (f a) (h (f a))))
      ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a) @
    (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
      ap
        (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
        (g&#39; a)) @
     apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^))) = 
g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b4"><span class="nb">unfold</span> transport2; <span class="nb">rewrite</span> concat_p_pp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  ((ap
      (<span class="kr">fun</span> <span class="nv">p&#39;</span> : h (f a) = h (f a) =&gt;
       transport (D (f a)) p&#39; (r (f a) (h (f a))))
      ((fst
          (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
             (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
          (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
           ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
              a)^)).<span class="mi">1</span> (f a)) @
    ap
      (<span class="kr">fun</span> <span class="nv">x</span> : h (f a) = h (f a) =&gt;
       transport (D (f a)) x (r (f a) (h (f a))))
      ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a)) @
   (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b5"><span class="kr">match goal with</span>
          |- transport <span class="nl">?P</span> <span class="nl">?p</span> ((ap <span class="nl">?f</span> <span class="nl">?q</span> @ ap <span class="nl">?f</span> <span class="nl">?r</span>) @ <span class="nl">?s</span>) = <span class="nl">?t</span>
          =&gt; <span class="nb">refine</span> (ap (transport P p) ((ap_pp f q r)^ @@ (idpath s)) @ _)
      <span class="kr">end</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (ap
     (<span class="kr">fun</span> <span class="nv">p&#39;</span> : h (f a) = h (f a) =&gt;
      transport (D (f a)) p&#39; (r (f a) (h (f a))))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a) @
      (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a) @
   (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b6"><span class="nb">pose</span> (p := (fst (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
                           ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>))
                      (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; ((fst (snd (ext <span class="mi">2</span>) h h)
                                           (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a&#39;)^)).<span class="mi">2</span> a);
        <span class="nb">simpl</span> <span class="kr">in</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br><span><var>p</var><span><span class="hyp-body"><b>:= </b><span>(fst
   (snd (snd (ext <span class="mi">3</span>) h h) 
      (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
      (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
   (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt;
    ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;0</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
       a&#39;)^)).<span class="mi">2</span> a</span></span><span class="hyp-type"><b>: </b><span>(fst
   (snd (snd (ext <span class="mi">3</span>) h h) 
      (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
      (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
   (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt;
    ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;0</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
       a&#39;)^)).<span class="mi">1</span> (f a) =
((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a)^</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (ap
     (<span class="kr">fun</span> <span class="nv">p&#39;</span> : h (f a) = h (f a) =&gt;
      transport (D (f a)) p&#39; (r (f a) (h (f a))))
     ((fst
         (snd (snd (ext <span class="mi">3</span>) h h) (<span class="kr">fun</span> <span class="nv">b&#39;</span> : B =&gt; <span class="mi">1</span>)
            (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">1</span>)
         (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
          ((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span>
             a)^)).<span class="mi">1</span> (f a) @
      (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a) @
   (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b7"><span class="nb">refine</span> (ap (transport _ _) (ap (ap _) (p @@ <span class="mi">1</span>) @@ <span class="mi">1</span>) @ _); <span class="nb">clear</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (ap
     (<span class="kr">fun</span> <span class="nv">p&#39;</span> : h (f a) = h (f a) =&gt;
      transport (D (f a)) p&#39; (r (f a) (h (f a))))
     (((fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a&#39;</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a)^ @
      (fst (snd (ext <span class="mi">2</span>) h h) (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>)).<span class="mi">2</span> a) @
   (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b8"><span class="nb">rewrite</span> concat_Vp; <span class="nb">simpl</span>; <span class="nb">rewrite</span> concat_1p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">c</span> : C (f a) =&gt; r (f a) c = s (f a) c)
  ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
    ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
      (g&#39; a)) @
   apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1b9"><span class="nb">refine</span> (transport_paths_FlFr_D _ _ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^ @
 ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
   (((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^ @
     ap
       (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
       (g&#39; a)) @
    apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)) @
apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ba"><span class="kn">Open Scope</span> long_path_scope.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     ((apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
      @&#39; ap
           (transport (D (f a))
              ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^) (g&#39; a)
      @&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1bb"><span class="nb">rewrite</span> !ap_pp, !concat_p_pp, ap_transport_pV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
@&#39; (transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
      (r (f a) (g a))
    @&#39; g&#39; a
    @&#39; (transport_pV (D (f a))
          ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) (s (f a) (g a)))^)
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      <span class="c">(* Even though https://github.com/coq/coq/issues/4533 is closed, this workaround is still needed. Without the Opaque setting, the [rewrite] unfolds the first [transport_pV] in the goal, and the first [moveR_Vp] below fails. *)</span>
</span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1bc"><span class="kn">Local</span> <span class="kn">Opaque</span> transport_pV. <span class="c">(* work around bug 4533 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
@&#39; (transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
      (r (f a) (g a))
    @&#39; g&#39; a
    @&#39; (transport_pV (D (f a))
          ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) (s (f a) (g a)))^)
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1bd"><span class="nb">rewrite</span> !concat_p_pp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
@&#39; transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
     (r (f a) (g a))
@&#39; g&#39; a
@&#39; (transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
      (s (f a) (g a)))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1be"><span class="kn">Local</span> <span class="kn">Transparent</span> transport_pV. <span class="c">(* work around bug 4533 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
@&#39; transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
     (r (f a) (g a))
@&#39; g&#39; a
@&#39; (transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
      (s (f a) (g a)))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1bf"><span class="nb">refine</span> ((((_  @@ <span class="mi">1</span>) @ concat_1p _) @@ <span class="mi">1</span> @@ <span class="mi">1</span> @@ <span class="mi">1</span>) @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
@&#39; transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
     (r (f a) (g a)) = <span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1c0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>)
(<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>)
(<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c)
  (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><label class="goal-separator" for="localization-v-chk1c0"><hr></label><div class="goal-conclusion">g&#39; a
@&#39; (transport_pV (D (f a)) 
      ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) 
      (s (f a) (g a)))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = 
g&#39; a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c1">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)^
@&#39; transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
     (r (f a) (g a)) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c2"><span class="nb">rewrite</span> ap_V, concat_pp_p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))^
@&#39; ((ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
       (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^))^
    @&#39; transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
         (r (f a) (g a))) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c3"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">apply</span> moveR_Vp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (r (f a) (g a)) =
ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
  (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
    @&#39; <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c4"><span class="nb">rewrite</span> concat_p1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (r (f a) (g a)) =
ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
  (apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (r (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> transport_pV_ap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c5">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g&#39; a
@&#39; (transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
      (s (f a) (g a)))^
@&#39; ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
     (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) = g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c6"><span class="nb">rewrite</span> !concat_pp_p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g&#39; a
@&#39; ((transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
       (s (f a) (g a)))^
    @&#39; (ap
          (transport (D (f a))
             ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
          (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
        @&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))) =
g&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c7"><span class="nb">refine</span> ((<span class="mi">1</span> @@ _) @ (concat_p1 _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
   (s (f a) (g a)))^
@&#39; (ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
      (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
    @&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c8"><span class="nb">apply</span> moveR_Vp; <span class="nb">rewrite</span> concat_p1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, C (f a)</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, r (f a) (g a) = s (f a) (g a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>(fst (ext n.+<span class="mi">1</span>) g).<span class="mi">1</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">y</span> : B, C y</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (transport (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a))
  (apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)^)
@&#39; apD (s (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a) =
transport_pV (D (f a)) ((fst (ext n.+<span class="mi">1</span>) g).<span class="mi">2</span> a)
  (s (f a) (g a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> transport_pV_ap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Close Scope</span> long_path_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1c9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b)
(<span class="nv">h&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, r b (h b) = s b (h b))
(<span class="nv">k&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, r b (k b) = s b (k b)),
ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (<span class="kr">fun</span> <span class="nv">c0</span> : C b =&gt; r b c0 = s b c0) c
     (h&#39; b) = k&#39; b) (snd (ext n.+<span class="mi">1</span>) h k)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ca"><span class="nb">intros</span> h k h&#39; k&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, r b (h b) = s b (h b)</span></span></span><br><span><var>k'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, r b (k b) = s b (k b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   transport (<span class="kr">fun</span> <span class="nv">c0</span> : C b =&gt; r b c0 = s b c0) c
     (h&#39; b) = k&#39; b) (snd (ext n.+<span class="mi">1</span>) h k)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1cb"><span class="nb">refine</span> (extendable_over_postcompose&#39; _ _ _ _ _ _
             (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; equiv_cancelL (apD (r b) c) _ _) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">C</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">ext</span> : ooExtendableAlong f C)
(<span class="nv">D</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span>) (<span class="nv">r</span> <span class="nv">s</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c),
ooExtendableAlong_Over f C D ext -&gt;
ExtendableAlong_Over n f C (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b) =&gt; r b c = s b c) (ext n)</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span>B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ext</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong f C</span></span></span><br><span><var>D</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b -&gt; <span class="kt">Type</span></span></span></span><br><span><var>r, s</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C b), D b c</span></span></span><br><span><var>ext'</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong_Over f C D ext</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, C b</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, r b (h b) = s b (h b)</span></span></span><br><span><var>k'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, r b (k b) = s b (k b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over n f (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; h b = k b)
  (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : h b = k b) =&gt;
   apD (r b) c @
   transport (<span class="kr">fun</span> <span class="nv">c0</span> : C b =&gt; r b c0 = s b c0) c
     (h&#39; b) = apD (r b) c @ k&#39; b) (snd (ext n.+<span class="mi">1</span>) h k)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (IHn _ _ _ _ _
                (<span class="kr">fun</span> <span class="nv">n</span> =&gt; snd (ext&#39; n.+<span class="mi">1</span>) h k
                              (<span class="kr">fun</span> <span class="nv">b</span> =&gt; r b (h b)) (<span class="kr">fun</span> <span class="nv">b</span> =&gt; s b (k b)))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Local types *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> IsLocal_Internal.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1cc"><span class="kn">Definition</span> <span class="nf">islocal_equiv_islocal</span> (<span class="nv">f</span> : LocalGenerators@{a})
           (<span class="nv">X</span> : <span class="kt">Type</span>@{i}) {<span class="nv">Y</span> : <span class="kt">Type</span>@{j}}
           (<span class="nv">Xloc</span> : IsLocal@{i i&#39; a} f X)
           (<span class="nv">g</span> : X -&gt; Y) `{IsEquiv@{i j} _ _ g}
: IsLocal@{j j&#39; a} f Y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Xloc</var><span class="hyp-type"><b>: </b><span>IsLocal f X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsLocal f Y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1cd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Xloc</var><span class="hyp-type"><b>: </b><span>IsLocal f X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsLocal f Y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ce"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Xloc</var><span class="hyp-type"><b>: </b><span>IsLocal f X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** We have to fiddle with the max universes to get this to work, since [ooextendable_postcompose] requires the max universe in both cases to be the same, whereas we don&#39;t want to assume that the hypothesis and conclusion are related in any way. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1cf"><span class="nb">apply</span> lift_ooextendablealong@{a a a a a a j j j k j&#39;}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Xloc</var><span class="hyp-type"><b>: </b><span>IsLocal f X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d0"><span class="nb">refine</span> (ooextendable_postcompose@{a a i j k k k k k k}
            _ _ (f i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; g) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Xloc</var><span class="hyp-type"><b>: </b><span>IsLocal f X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d1"><span class="nb">apply</span> lift_ooextendablealong@{a a a a a a i i i i&#39; k}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Xloc</var><span class="hyp-type"><b>: </b><span>IsLocal f X</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; X)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Xloc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Localization as a HIT *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Export</span> LocalizationHIT.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Cumulative</span> Private <span class="kn">Inductive</span> <span class="nf">Localize</span> (<span class="nv">f</span> : LocalGenerators@{a}) (<span class="nv">X</span> : <span class="kt">Type</span>@{i})
  : <span class="kt">Type</span>@{max(a,i)} :=
  | loc : X -&gt; Localize f X.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> loc {f X} x.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Note that the following axiom actually contains a point-constructor.  We could separate out that point-constructor and make it an actual argument of the private inductive type, thereby getting a judgmental computation rule for it.  However, since locality is an hprop, there seems little point to this. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Axiom</span> <span class="nv">islocal_localize</span>
  : <span class="kr">forall</span> (<span class="nv">f</span> : LocalGenerators@{a}) (<span class="nv">X</span> : <span class="kt">Type</span>@{i}),
      IsLocal@{i k a} f (Localize f X).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Localize_ind</span>
           (<span class="nv">f</span> : LocalGenerators@{a}) (<span class="nv">X</span> : <span class="kt">Type</span>@{i})
           (<span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>@{j})
           (<span class="nv">loc&#39;</span> : <span class="kr">forall</span> <span class="nv">x</span>, P (loc x))
           (<span class="nv">islocal&#39;</span> : <span class="kr">forall</span> <span class="nv">i</span>, ooExtendableAlong_Over@{a a i j k}
                                   (f i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Localize@{a i} f X)
                                   (<span class="kr">fun</span> <span class="nv">_</span> =&gt; P)
                                   (islocal_localize@{a i k} f X i))
           (<span class="nv">z</span> : Localize f X)
  : P z
    := <span class="kr">match</span> z <span class="kr">with</span>
         | loc x =&gt; <span class="kr">fun</span> <span class="nv">_</span> =&gt; loc&#39; x
       <span class="kr">end</span> islocal&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We now state the computation rule for [islocal_localize].  Since locality is an hprop, we never actually have any use for it, but the fact that we can state it is a reassuring check that we have defined a meaningful HIT. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Axiom</span> <span class="nv">Localize_ind_islocal_localize_beta</span> :
    <span class="kr">forall</span> (<span class="nv">f</span> : LocalGenerators) (<span class="nv">X</span> : <span class="kt">Type</span>)
           (<span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>)
           (<span class="nv">loc&#39;</span> : <span class="kr">forall</span> <span class="nv">x</span>, P (loc x))
           (<span class="nv">islocal&#39;</span> : <span class="kr">forall</span> <span class="nv">i</span>, ooExtendableAlong_Over
                                   (f i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Localize f X)
                                   (<span class="kr">fun</span> <span class="nv">_</span> =&gt; P)
                                   (islocal_localize f X i))
           <span class="nv">i</span> <span class="nv">n</span>,
      apD_extendable_eq n (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Localize f X) (f i)
                        (islocal_localize f X i n) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; P)
                        (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Localize_ind f X P loc&#39; islocal&#39;)
                        (islocal&#39; i n).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">LocalizationHIT</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Now we prove that localization is a reflective subuniverse. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Localization</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> (<span class="nv">f</span> : LocalGenerators).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The induction principle is an equivalence. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d2"><span class="kn">Definition</span> <span class="nf">ext_localize_ind</span> (<span class="nv">X</span> : <span class="kt">Type</span>)
      (<span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>)
      (<span class="nv">Ploc</span> : <span class="kr">forall</span> <span class="nv">i</span>, ooExtendableAlong_Over
                          (f i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Localize f X)
                          (<span class="kr">fun</span> <span class="nv">_</span> =&gt; P) (islocal_localize f X i))
  : ooExtendableAlong loc P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong loc P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong loc P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d4"><span class="nb">intros</span> n; <span class="nb">generalize dependent</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
 ooExtendableAlong_Over (f i)
   (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
   (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
   (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d5">simple_induction n n IHn; <span class="nb">intros</span> P Ploc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">0</span> loc P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1d6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
 ooExtendableAlong_Over (f i)
   (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
   (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
   (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1d6"><hr></label><div class="goal-conclusion">ExtendableAlong n.+<span class="mi">1</span> loc P</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d7"><span class="mi">1</span>:<span class="bp">exact</span> tt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong n.+<span class="mi">1</span> loc P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1d8"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : X, P (loc a),
ExtensionAlong loc P g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1d9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
 ooExtendableAlong_Over (f i)
   (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
   (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
   (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1d9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : Localize f X, P b,
ExtendableAlong n loc
  (<span class="kr">fun</span> <span class="nv">b</span> : Localize f X =&gt; h b = k b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1da">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : X, P (loc a),
ExtensionAlong loc P g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1db"><span class="nb">intros</span> g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (loc a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong loc P g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1dc"><span class="kr">exists</span> (<span class="nv">Localize_ind</span> <span class="nv">f</span> <span class="nv">X</span> <span class="nv">P</span> <span class="nv">g</span> <span class="nv">Ploc</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : X, P (loc a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : X, Localize_ind f X P g Ploc (loc x) = g x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> x; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1dd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : Localize f X, P b,
ExtendableAlong n loc
  (<span class="kr">fun</span> <span class="nv">b</span> : Localize f X =&gt; h b = k b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1de"><span class="nb">intros</span> h k; <span class="nb">apply</span> IHn; <span class="nb">intros</span> i m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Localize f X, P b</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong_Over m (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> (<span class="nv">_</span> : lgen_codomain f i) (<span class="nv">b</span> : Localize f X) =&gt;
   h b = k b) (islocal_localize f X i m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1df"><span class="nb">apply</span> ooextendable_over_homotopy.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">P</span> : Localize f X -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i) (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
(<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P) (islocal_localize f X i)) -&gt;
ExtendableAlong n loc P</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Localize f X -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Ploc</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; P)
  (islocal_localize f X i)</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : Localize f X, P b</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> (<span class="nv">_</span> : lgen_codomain f i) (<span class="nv">c</span> : Localize f X) =&gt;
   P c) (islocal_localize f X i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Ploc i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Localization</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e0"><span class="kn">Definition</span> <span class="nf">Loc</span>@{a i} (f : LocalGenerators@{a}) : ReflectiveSubuniverse@{i}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectiveSubuniverse</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectiveSubuniverse</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e2">snrefine (Build_ReflectiveSubuniverse
                                 (Build_Subuniverse (IsLocal f) _ _)
                                 (<span class="kr">fun</span> <span class="nv">A</span> =&gt; Build_PreReflects _ A (Localize f A) _ (@loc f A))
                                 (<span class="kr">fun</span> <span class="nv">A</span> =&gt; Build_Reflects _ _ _ _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Funext -&gt; <span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (IsLocal f T)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1e3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1e3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
IsLocal f T -&gt;
<span class="kr">forall</span> <span class="nv">f0</span> : T -&gt; U, IsEquiv f0 -&gt; IsLocal f U</div></blockquote><input class="alectryon-extra-goal-toggle" id="localization-v-chk1e4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="localization-v-chk1e4"><hr></label><div class="goal-conclusion">In
  {|
    In_internal := IsLocal f;
    hprop_inO_internal := <span class="nl">?hprop_inO_internal</span>;
    inO_equiv_inO_internal := <span class="nl">?inO_equiv_inO_internal</span>
  |} (Localize f A)</div></blockquote><input class="alectryon-extra-goal-toggle" id="localization-v-chk1e5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="localization-v-chk1e5"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
In
  {|
    In_internal := IsLocal f;
    hprop_inO_internal := <span class="nl">?hprop_inO_internal</span>;
    inO_equiv_inO_internal := <span class="nl">?inO_equiv_inO_internal</span>
  |} Q -&gt;
ooExtendableAlong
  (to
     {|
       In_internal := IsLocal f;
       hprop_inO_internal := <span class="nl">?hprop_inO_internal</span>;
       inO_equiv_inO_internal :=
         <span class="nl">?inO_equiv_inO_internal</span>
     |} A)
  (<span class="kr">fun</span>
     <span class="nv">_</span> : O_reflector
           {|
             In_internal := IsLocal f;
             hprop_inO_internal := <span class="nl">?hprop_inO_internal</span>;
             inO_equiv_inO_internal :=
               <span class="nl">?inO_equiv_inO_internal</span>
           |} A =&gt; Q)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e6">- <span class="sd">(** Typeclass inference can find this, but we give it explicitly to prevent extra universes from cropping up. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Funext -&gt; <span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (IsLocal f T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e7" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e7"><span class="nb">intros</span> ? T; <span class="nb">unfold</span> IsLocal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsHProp
  (<span class="kr">forall</span> <span class="nv">i</span> : lgen_indices f,
   ooExtendableAlong (f i)
     (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; T))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e8">nrefine (istrunc_forall@{a i i}); <span class="kp">try</span> <span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : lgen_indices f,
IsHProp
  (ooExtendableAlong (f a)
     (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f a =&gt; T))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1e9"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsHProp
  (ooExtendableAlong (f i)
     (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; T))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ishprop_ooextendable@{a a i i i
                                i i i i i
                                i i i i i i}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ea">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
IsLocal f T -&gt;
<span class="kr">forall</span> <span class="nv">f0</span> : T -&gt; U, IsEquiv f0 -&gt; IsLocal f U</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> islocal_equiv_islocal.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1eb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In
  {|
    In_internal := IsLocal f;
    hprop_inO_internal :=
      <span class="kr">fun</span> (<span class="nv">H</span> : Funext) (<span class="nv">T</span> : <span class="kt">Type</span>) =&gt;
      istrunc_forall : IsHProp (IsLocal f T);
    inO_equiv_inO_internal := islocal_equiv_islocal f
  |} (Localize f A)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> islocal_localize.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ec">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
In
  {|
    In_internal := IsLocal f;
    hprop_inO_internal :=
      <span class="kr">fun</span> (<span class="nv">H</span> : Funext) (<span class="nv">T</span> : <span class="kt">Type</span>) =&gt;
      istrunc_forall : IsHProp (IsLocal f T);
    inO_equiv_inO_internal := islocal_equiv_islocal f
  |} Q -&gt;
ooExtendableAlong
  (to
     {|
       In_internal := IsLocal f;
       hprop_inO_internal :=
         <span class="kr">fun</span> (<span class="nv">H</span> : Funext) (<span class="nv">T</span> : <span class="kt">Type</span>) =&gt;
         istrunc_forall : IsHProp (IsLocal f T);
       inO_equiv_inO_internal :=
         islocal_equiv_islocal f
     |} A)
  (<span class="kr">fun</span>
     <span class="nv">_</span> : O_reflector
           {|
             In_internal := IsLocal f;
             hprop_inO_internal :=
               <span class="kr">fun</span> (<span class="nv">H</span> : Funext) (<span class="nv">T</span> : <span class="kt">Type</span>) =&gt;
               istrunc_forall : IsHProp (IsLocal f T);
             inO_equiv_inO_internal :=
               islocal_equiv_islocal f
           |} A =&gt; Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ed"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
IsLocal f Q -&gt;
ooExtendableAlong loc (<span class="kr">fun</span> <span class="nv">_</span> : Localize f A =&gt; Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ee"><span class="nb">intros</span> Q Q_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span>IsLocal f Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong loc (<span class="kr">fun</span> <span class="nv">_</span> : Localize f A =&gt; Q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ef"><span class="nb">apply</span> ext_localize_ind; <span class="nb">intros</span> ?.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span>IsLocal f Q</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f A)
  (<span class="kr">fun</span> (<span class="nv">_</span> : lgen_codomain f i) (<span class="nv">_</span> : Localize f A) =&gt; Q)
  (islocal_localize f A i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f0"><span class="nb">apply</span> ooextendable_over_const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>A, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span>IsLocal f Q</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Q_inO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Here is the &quot;real&quot; definition of the notation [IsLocal].  Defining it this way allows it to inherit typeclass inference from [In], unlike (for instance) the slightly annoying case of [IsTrunc n] versus [In (Tr n)]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="nf">IsLocal</span> f := (In (Loc f)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">LocalTypes</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> (<span class="nv">f</span> : LocalGenerators).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** A remark on universes: recall that [ooExtendableAlong] takes four universe parameters, three for the sizes of the types involved and one for the max of all of them.  In the definition of [IsLocal f X] we set that max universe to be the same as the size of [X], so that [In (Loc f) X] would lie in the same universes as [X], which is necessary for our definition of a reflective subuniverse.  However, in practice we may need this extendability property with the max universe being larger, to avoid coalescing universes undesiredly.  Thus, in making it available by the following name, we also insert a [lift] to generalize the max universe. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ooextendable_islocal</span> {<span class="nv">X</span> : <span class="kt">Type</span>@{i}} {<span class="nv">Xloc</span> : IsLocal f X} <span class="nv">i</span>
  : ooExtendableAlong@{a a i k} (f i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; X)
    := (lift_ooextendablealong _ _ (Xloc i)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">islocal_loc</span> (<span class="nv">X</span> : <span class="kt">Type</span>) : IsLocal f (Localize f X)
    := islocal_localize f X.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">isequiv_precomp_islocal</span> `{Funext}
         {X : <span class="kt">Type</span>} `{IsLocal f X} i
  : IsEquiv (<span class="kr">fun</span> <span class="nv">g</span> =&gt; g o f i)
  := isequiv_ooextendable (<span class="kr">fun</span> <span class="nv">_</span> =&gt; X) (f i) (ooextendable_islocal i).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The non-dependent eliminator *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f1"><span class="kn">Definition</span> <span class="nf">Localize_rec</span> {<span class="nv">X</span> <span class="nv">Z</span> : <span class="kt">Type</span>} `{IsLocal f Z} (g : X -&gt; Z)
  : Localize f X -&gt; Z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsLocal0</var><span class="hyp-type"><b>: </b><span>In (Loc f) Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Localize f X -&gt; Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsLocal0</var><span class="hyp-type"><b>: </b><span>In (Loc f) Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Localize f X -&gt; Z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f3"><span class="nb">refine</span> (Localize_ind f X (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Z) g _); <span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsLocal0</var><span class="hyp-type"><b>: </b><span>In (Loc f) Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong_Over (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Localize f X)
  (<span class="kr">fun</span> (<span class="nv">_</span> : lgen_codomain f i) (<span class="nv">_</span> : Localize f X) =&gt; Z)
  (islocal_localize f X i)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f4"><span class="nb">apply</span> ooextendable_over_const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br><span><var>X, Z</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>IsLocal0</var><span class="hyp-type"><b>: </b><span>In (Loc f) Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>X -&gt; Z</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (f i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain f i =&gt; Z)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ooextendable_islocal.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">local_rec</span> {<span class="nv">X</span>} `{IsLocal f X} {i} (g : lgen_domain f i -&gt; X)
  : lgen_codomain f i -&gt; X
  := (fst (ooextendable_islocal i <span class="mi">1</span>%nat) g).<span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">local_rec_beta</span> {<span class="nv">X</span>} `{IsLocal f X} {i} (g : lgen_domain f i -&gt; X) s
  : local_rec g (f i s) = g s
    := (fst (ooextendable_islocal i <span class="mi">1</span>%nat) g).<span class="mi">2</span> s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">local_indpaths</span> {<span class="nv">X</span>} `{IsLocal f X} {i} {h k : lgen_codomain f i -&gt; X}
             (p : h o f i == k o f i)
  : h == k
    := (fst (snd (ooextendable_islocal i <span class="mi">2</span>) h k) p).<span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">local_indpaths_beta</span> {<span class="nv">X</span>} `{IsLocal f X} {i} (h k : lgen_codomain f i -&gt; X)
             (p : h o f i == k o f i) s
  : local_indpaths p (f i s) = p s
    := (fst (snd (ooextendable_islocal i <span class="mi">2</span>) h k) p).<span class="mi">2</span> s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">LocalTypes</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> local_rec : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> local_rec_beta : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> local_indpaths : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> local_indpaths_beta : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Localization and accessibility *)</span>

<span class="sd">(** Localization subuniverses are accessible, essentially by definition.  Without the universe annotations, [a] and [i] get collapsed. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f5"><span class="kn">Instance</span> <span class="nf">accrsu_loc</span>@{a i} (f : LocalGenerators@{a}) : IsAccRSU@{a i} (Loc@{a i} f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsAccRSU (Loc f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsAccRSU (Loc f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f7"><span class="nb">unshelve</span> <span class="nb">econstructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LocalGenerators</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1f8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1f8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">X</span> : <span class="kt">Type</span>,
In (Loc f) X &lt;-&gt; IsLocal_Internal.IsLocal <span class="nl">?acc_lgen</span> X</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1f9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">LocalGenerators</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1fa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>f</var><span class="hyp-type"><b>: </b><span>LocalGenerators</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">X</span> : <span class="kt">Type</span>,
In (Loc f) X &lt;-&gt; IsLocal_Internal.IsLocal f X</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">split</span>; <span class="bp">exact</span> idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Conversely, if a subuniverse is accessible, then the corresponding localization subuniverse is equivalent to it, and moreover exists at every universe level and satisfies its computation rules judgmentally.  This is called [lift_accrsu] but in fact it works equally well to *lower* the universe level, as long as both levels are no smaller than the size [a] of the generators. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">lift_accrsu</span>@{a i j} (O : Subuniverse@{i}) `{IsAccRSU@{a i} O}
  : ReflectiveSubuniverse@{j}
  := Loc@{a j} (acc_lgen O).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The lifted universe agrees with the original one, on any universe contained in both [i] and [j] *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1fb"><span class="kn">Instance</span> <span class="nf">O_eq_lift_accrsu</span>@{a i j k} (O : Subuniverse@{i}) `{IsAccRSU@{a i} O}
  : O_eq@{i j k} O (lift_accrsu@{a i j} O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O &lt;=&gt; lift_accrsu O</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1fc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O &lt;=&gt; lift_accrsu O</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Anyone stepping through this proof should do [Set Printing Universes]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1fd"><span class="nb">split</span>; <span class="nb">intros</span> A A_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In (lift_accrsu O) A</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk1fe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O) A</span></span></span><br></div><label class="goal-separator" for="localization-v-chk1fe"><hr></label><div class="goal-conclusion">In O A</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk1ff" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk1ff">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In (lift_accrsu O) A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk200"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk201"><span class="nb">assert</span> (e := fst (inO_iff_islocal O A) A_inO i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk202"><span class="nb">apply</span> (lift_ooextendablealong@{a a a a a a i j k i j} (acc_lgen O i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O)</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> e.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk203">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk204"><span class="nb">apply</span> (inO_iff_islocal O).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsLocal_Internal.IsLocal (acc_lgen O) A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk205"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O) A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk206"><span class="nb">pose</span> (e := A_inO i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O) A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O)</span></span></span><br><span><var>e</var><span><span class="hyp-body"><b>:= </b><span>A_inO i</span></span><span class="hyp-type"><b>: </b><span>ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk207"><span class="nb">apply</span> (lift_ooextendablealong@{a a a a a a j i k j i} (acc_lgen O i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O) A</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O)</span></span></span><br><span><var>e</var><span><span class="hyp-body"><b>:= </b><span>A_inO i</span></span><span class="hyp-type"><b>: </b><span>ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O) i =&gt; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> e.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk208"><span class="kn">Definition</span> <span class="nf">O_leq_lift_accrsu</span>@{a i1 i2}
           (O1 : ReflectiveSubuniverse@{i1}) (O2 : ReflectiveSubuniverse@{i2}) `{IsAccRSU@{a i1} O1}
           `{O_leq@{i1 i2 i2} O1 O2}
  : O_leq@{i2 i2 i2} (lift_accrsu@{a i1 i2} O1) O2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_accrsu O1 &lt;= O2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk209"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_accrsu O1 &lt;= O2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk20a"><span class="nb">intros</span> B B_inO1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B_inO1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O1) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O2 B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk20b"><span class="nb">apply</span> (inO_leq@{i1 i2 i2} O1 O2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B_inO1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O1) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O1 B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk20c" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk20c"><span class="nb">apply</span> (snd (inO_iff_islocal O1 B)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B_inO1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O1) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsLocal_Internal.IsLocal (acc_lgen O1) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk20d"><span class="nb">intros</span> i.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B_inO1</var><span class="hyp-type"><b>: </b><span>In (lift_accrsu O1) B</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O1)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O1 i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O1) i =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk20e"><span class="nb">specialize</span> (B_inO1 i).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O1)</span></span></span><br><span><var>B_inO1</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong (acc_lgen O1 i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O1) i =&gt; B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O1 i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O1) i =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk20f"><span class="nb">apply</span> (lift_ooextendablealong@{a a a a a a i2 i1 i2 i2 i1} (acc_lgen O1 i) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; B)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>lgen_indices (acc_lgen O1)</span></span></span><br><span><var>B_inO1</var><span class="hyp-type"><b>: </b><span>ooExtendableAlong (acc_lgen O1 i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O1) i =&gt; B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (acc_lgen O1 i)
  (<span class="kr">fun</span> <span class="nv">_</span> : lgen_codomain (acc_lgen O1) i =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> B_inO1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Similarly, because localization is a HIT that has an elimination rule into types in *all* universes, for accessible reflective subuniverses we can show that containment implies connectedness properties with the universe containments in the other order. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk210"><span class="kn">Definition</span> <span class="nf">isconnected_O_leq&#39;</span>@{a i1 i2}
           (O1 : ReflectiveSubuniverse@{i1}) (O2 : ReflectiveSubuniverse@{i2}) `{IsAccRSU@{a i1} O1}
           <span class="sd">(** Compared to [O_leq@{i1 i2 i1}] and [A : Type@{i1}] in [isconnected_O_leq], these two lines are what make [i2 &lt;= i1] instead of vice versa. *)</span>
           `{O_leq@{i1 i2 i2} O1 O2} (A : <span class="kt">Type</span>@{i2}) 
           `{IsConnected O2 A}
  : IsConnected O1 A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O1 A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk211"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O1 A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Anyone stepping through this proof should do [Set Printing Universes]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk212">srefine (isconnected_O_leq O1 (lift_accrsu@{a i1 i1} O1) A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsAccRSU O1</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk213" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><label class="goal-separator" for="localization-v-chk213"><hr></label><div class="goal-conclusion">O1 &lt;= lift_accrsu O1</div></blockquote><input class="alectryon-extra-goal-toggle" id="localization-v-chk214" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><label class="goal-separator" for="localization-v-chk214"><hr></label><div class="goal-conclusion">IsConnected (lift_accrsu O1) A</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk215"><span class="mi">1</span>-<span class="mi">2</span>:<span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected (lift_accrsu O1) A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk216"><span class="nb">change</span> (Contr@{i1} (Localize@{a i2} (acc_lgen@{a i1} O1) A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr (Localize (acc_lgen O1) A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** At this point you should also do [Unset Printing Notations] to see the universe annotation on [IsTrunc] change. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk217"><span class="nb">refine</span> (contr_equiv&#39;@{i2 i1} _ <span class="mi">1</span>%equiv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Contr (Localize (acc_lgen O1) A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk218"><span class="nb">change</span> (IsConnected@{i2} (lift_accrsu@{a i1 i2} O1) A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected (lift_accrsu O1) A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk219">srapply (isconnected_O_leq _ O2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnected O2 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lift_accrsu O1 &lt;= O2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">rapply O_leq_lift_accrsu.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And similarly for connected maps. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk21a"><span class="kn">Definition</span> <span class="nf">conn_map_O_leq&#39;</span>@{a i1 i2}
           (O1 : ReflectiveSubuniverse@{i1}) (O2 : ReflectiveSubuniverse@{i2}) `{IsAccRSU@{a i1} O1}
           `{O_leq@{i1 i2 i2} O1 O2} {A B : <span class="kt">Type</span>@{i2}}
           (f : A -&gt; B) `{IsConnMap O2 A B f}
  : IsConnMap O1 f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O1 f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk21b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O1 f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Anyone stepping through this proof should do [Set Printing Universes]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk21c"><span class="nb">intros</span> b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O1 (hfiber f b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk21d"><span class="nb">apply</span> (isconnected_equiv&#39; O1 (hfiber@{i2 i2} f b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber f b &lt;~&gt; hfiber f b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk21e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="localization-v-chk21e"><hr></label><div class="goal-conclusion">IsConnected O1 (hfiber f b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk21f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber f b &lt;~&gt; hfiber f b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk220">srapply equiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber f b -&gt; hfiber f b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk221" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="localization-v-chk221"><hr></label><div class="goal-conclusion">hfiber f b -&gt; hfiber f b</div></blockquote><input class="alectryon-extra-goal-toggle" id="localization-v-chk222" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="localization-v-chk222"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="localization-v-chk223" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="localization-v-chk223"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o <span class="nl">?f</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk224"><span class="mi">1</span>-<span class="mi">2</span>:<span class="nb">intros</span> [u p]; <span class="bp">exact</span> (u;p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">X</span> : hfiber f b =&gt;
 (<span class="kr">fun</span> (<span class="nv">u</span> : A) (<span class="nv">p</span> : f u = b) =&gt; (u; p)) X.<span class="mi">1</span> X.<span class="mi">2</span>)
o (<span class="kr">fun</span> <span class="nv">X</span> : hfiber f b =&gt;
   (<span class="kr">fun</span> (<span class="nv">u</span> : A) (<span class="nv">p</span> : f u = b) =&gt; (u; p)) X.<span class="mi">1</span> X.<span class="mi">2</span>) ==
idmap</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk225" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="localization-v-chk225"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">X</span> : hfiber f b =&gt;
 (<span class="kr">fun</span> (<span class="nv">u</span> : A) (<span class="nv">p</span> : f u = b) =&gt; (u; p)) X.<span class="mi">1</span> X.<span class="mi">2</span>)
o (<span class="kr">fun</span> <span class="nv">X</span> : hfiber f b =&gt;
   (<span class="kr">fun</span> (<span class="nv">u</span> : A) (<span class="nv">p</span> : f u = b) =&gt; (u; p)) X.<span class="mi">1</span> X.<span class="mi">2</span>) ==
idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">all</span>:<span class="nb">intros</span> [u p]; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk226">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O1 (hfiber f b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk227"><span class="nb">apply</span> (isconnected_O_leq&#39; O1 O2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>IsConnMap O2 f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnected O2 (hfiber f b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> isconnected_hfiber_conn_map.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The same is true for inverted maps, too. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk228"><span class="kn">Definition</span> <span class="nf">O_inverts_O_leq&#39;</span>@{a i1 i2}
           (O1 : ReflectiveSubuniverse@{i1}) (O2 : ReflectiveSubuniverse@{i2}) `{IsAccRSU@{a i1} O1}
           `{O_leq@{i1 i2 i2} O1 O2} {A B : <span class="kt">Type</span>@{i2}}
           (f : A -&gt; B) `{O_inverts O2 f}
  : O_inverts O1 f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O1 f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk229"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O1 f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk22a"><span class="nb">assert</span> (oleq := O_leq_lift_accrsu O1 O2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br><span><var>oleq</var><span class="hyp-type"><b>: </b><span>lift_accrsu O1 &lt;= O2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O1 f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk22b"><span class="nb">assert</span> (e := O_inverts_O_leq (lift_accrsu@{a i1 i2} O1) O2 f); <span class="nb">clear</span> oleq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O1) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts O1 f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk22c">napply (O_inverts_O_leq O1 (lift_accrsu@{a i1 i1} O1) f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O1) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;= lift_accrsu O1</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="localization-v-chk22d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O1) f</span></span></span><br></div><label class="goal-separator" for="localization-v-chk22d"><hr></label><div class="goal-conclusion">O_inverts (lift_accrsu O1) f</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk22e"><span class="mi">1</span>:<span class="bp">exact</span> _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O1) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_inverts (lift_accrsu O1) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** It looks like we can say [exact e], but that would collapse the universes [i1] and [i2].  You can check with [Set Printing Universes. Unset Printing Notations.] that [e] and the goal have different universes.  So instead we do this: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="localization-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="localization-v-chk22f"><span class="nb">refine</span> (@isequiv_homotopic _ _ _ _ e _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsAccRSU O1</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>O_inverts0</var><span class="hyp-type"><b>: </b><span>O_inverts O2 f</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>O_inverts (lift_accrsu O1) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor (lift_accrsu O1) f ==
O_functor (lift_accrsu O1) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> O_indpaths; <span class="nb">intros</span> x; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span></span></pre>
</div>
</div></body>
</html>
