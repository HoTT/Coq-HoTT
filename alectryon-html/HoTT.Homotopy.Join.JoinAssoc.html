<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>JoinAssoc.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk0"><span class="kn">From</span> HoTT <span class="kn">Require Import</span> Basics Types Join.Core Join.TriJoin Spaces.Nat.Core.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> HoTT.WildCat <span class="kn">Require Import</span> Core <span class="kn">Universe</span> <span class="nf">Equiv</span> ZeroGroupoid
  Yoneda FunctorCat NatTrans Monoidal.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * The associativity of [Join]</span>

<span class="sd">  We use the recursion principle for the triple join (from TriJoin.v) to prove the associativity of Join.  We&#39;ll use the common technique of combining symmetry and a twist equivalence.  Temporarily writing * for Join, symmetry says that [A * B &lt;~&gt; B * A] and the twist says that [A * (B * C) &lt;~&gt; B * (A * C)].  From these we get a composite equivalence [A * (B * C) &lt;~&gt; A * (C * B) &lt;~&gt; C * (A * B) &lt;~&gt; (A * B) * C].  One advantage of this approach is that both symmetry and the twist are their own inverses, so there are fewer maps to define and fewer composites to prove are homotopic to the identity. Symmetry is proved in Join/Core.v. *)</span>

<span class="sd">(** ** The twist equivalence [TriJoin A B C &lt;~&gt; TriJoin B A C]</span>

<span class="sd">  We prove the twist equivalence using the Yoneda lemma.  The idea is that [TriJoin A B C -&gt; P] is equivalent (as a 0-groupoid) to [TriJoinRecData A B C P], and the latter is very symmetrical by construction, which makes it easy to show that it is equivalent to [TriJoinRecData B A C P].  Going back along the first equivalence gets us to [TriJoin B A C -&gt; P].  These equivalences are natural in [P], so the twist equivalence follows from the Yoneda lemma. *)</span>

<span class="sd">(** First we define a map of 0-groupoids that will underlie the natural equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk1"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_twist</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>)
  : trijoinrecdata_0gpd A B C P $-&gt; trijoinrecdata_0gpd B A C P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_0gpd A B C P $-&gt;
trijoinrecdata_0gpd B A C P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_0gpd A B C P $-&gt;
trijoinrecdata_0gpd B A C P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk3">snapply Build_Fun01&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P)) -&gt;
Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd B A C P))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">a</span>
 <span class="nv">b</span> : Graph.graph_carrier
       (zerogpd_graph (trijoinrecdata_0gpd A B C P)),
(a $-&gt; b) -&gt; <span class="nl">?F</span> a $-&gt; <span class="nl">?F</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The map of types [TriJoinRecData A B C P -&gt; TriJoinRecData B A C P]: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P)) -&gt;
Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd B A C P))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk6"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecData A B C P -&gt; TriJoinRecData B A C P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7"><span class="nb">intros</span> [f1 f2 f3 f12 f13 f23 f123].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecData B A C P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8">snapply (Build_TriJoinRecData f2 f1 f3).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A), f2 a = f1 b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : C), f2 a = f3 c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chka"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : C), f1 b = f3 c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkb"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C),
<span class="nl">?j12</span> a b @ <span class="nl">?j23</span> b c = <span class="nl">?j13</span> a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A), f2 a = f1 b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> b a; <span class="bp">exact</span> (f12 a b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : C), f2 a = f3 c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> f23.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : C), f1 b = f3 c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> f13.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C),
(<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (f12 a0 b0)^) a b @ f13 b c =
f23 a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10"><span class="nb">intros</span> a b c; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(f12 b a)^ @ f13 b c = f23 a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk11"><span class="nb">apply</span> moveR_Vp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f13 b c = f12 b a @ f23 a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> f123.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* It respects the paths. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk12">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">a</span>
 <span class="nv">b</span> : Graph.graph_carrier
       (zerogpd_graph (trijoinrecdata_0gpd A B C P)),
(a $-&gt; b) -&gt;
((<span class="kr">fun</span> <span class="nv">X</span> : TriJoinRecData A B C P =&gt;
  (<span class="kr">fun</span> (<span class="nv">f1</span> : A -&gt; P) (<span class="nv">f2</span> : B -&gt; P) 
     (<span class="nv">f3</span> : C -&gt; P)
     (<span class="nv">f12</span> : <span class="kr">forall</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B), f1 a0 = f2 b0)
     (<span class="nv">f13</span> : <span class="kr">forall</span> (<span class="nv">a0</span> : A) (<span class="nv">c</span> : C), f1 a0 = f3 c)
     (<span class="nv">f23</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C), f2 b0 = f3 c)
     (<span class="nv">f123</span> : <span class="kr">forall</span> (<span class="nv">a0</span> : A) 
             (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C),
             f12 a0 b0 @ f23 b0 c = f13 a0 c) =&gt;
   {|
     j1 := f2;
     j2 := f1;
     j3 := f3;
     j12 := <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (f12 a0 b0)^;
     j13 := f23;
     j23 := f13;
     j123 :=
       <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c</span> : C) =&gt;
       moveR_Vp (f13 b0 c) 
         (f23 a0 c) (f12 b0 a0) 
         (f123 b0 a0 c)^
       :
       (<span class="kr">fun</span> (<span class="nv">b1</span> : B) (<span class="nv">a1</span> : A) =&gt; (f12 a1 b1)^) a0 b0 @
       f13 b0 c = f23 a0 c
   |}) (j1 X) (j2 X) (j3 X) 
    (j12 X) (j13 X) (j23 X) 
    (j123 X))
 :
 Graph.graph_carrier
   (zerogpd_graph (trijoinrecdata_0gpd A B C P)) -&gt;
 Graph.graph_carrier
   (zerogpd_graph (trijoinrecdata_0gpd B A C P))) a $-&gt;
((<span class="kr">fun</span> <span class="nv">X</span> : TriJoinRecData A B C P =&gt;
  (<span class="kr">fun</span> (<span class="nv">f1</span> : A -&gt; P) (<span class="nv">f2</span> : B -&gt; P) 
     (<span class="nv">f3</span> : C -&gt; P)
     (<span class="nv">f12</span> : <span class="kr">forall</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B), f1 a0 = f2 b0)
     (<span class="nv">f13</span> : <span class="kr">forall</span> (<span class="nv">a0</span> : A) (<span class="nv">c</span> : C), f1 a0 = f3 c)
     (<span class="nv">f23</span> : <span class="kr">forall</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C), f2 b0 = f3 c)
     (<span class="nv">f123</span> : <span class="kr">forall</span> (<span class="nv">a0</span> : A) 
             (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C),
             f12 a0 b0 @ f23 b0 c = f13 a0 c) =&gt;
   {|
     j1 := f2;
     j2 := f1;
     j3 := f3;
     j12 := <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (f12 a0 b0)^;
     j13 := f23;
     j23 := f13;
     j123 :=
       <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c</span> : C) =&gt;
       moveR_Vp (f13 b0 c) 
         (f23 a0 c) (f12 b0 a0) 
         (f123 b0 a0 c)^
       :
       (<span class="kr">fun</span> (<span class="nv">b1</span> : B) (<span class="nv">a1</span> : A) =&gt; (f12 a1 b1)^) a0 b0 @
       f13 b0 c = f23 a0 c
   |}) (j1 X) (j2 X) (j3 X) 
    (j12 X) (j13 X) (j23 X) 
    (j123 X))
 :
 Graph.graph_carrier
   (zerogpd_graph (trijoinrecdata_0gpd A B C P)) -&gt;
 Graph.graph_carrier
   (zerogpd_graph (trijoinrecdata_0gpd B A C P))) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk13"><span class="nb">intros</span> f g h; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath
  {|
    j1 := j2 f;
    j2 := j1 f;
    j3 := j3 f;
    j12 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (j12 f a b)^;
    j13 := j23 f;
    j23 := j13 f;
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C) =&gt;
      moveR_Vp (j13 f b c) 
        (j23 f a c) (j12 f b a) 
        (j123 f b a c)^
  |}
  {|
    j1 := j2 g;
    j2 := j1 g;
    j3 := j3 g;
    j12 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (j12 g a b)^;
    j13 := j23 g;
    j23 := j13 g;
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C) =&gt;
      moveR_Vp (j13 g b c) 
        (j23 g a c) (j12 g b a) 
        (j123 g b a c)^
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk14">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j2 f a = j2 g a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk15" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk15"><hr></label><div class="goal-conclusion">j1 f b = j1 g b</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk16"><hr></label><div class="goal-conclusion">j3 f c = j3 g c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk17" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk17"><hr></label><div class="goal-conclusion">(j12 f b a)^ @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ (j12 g b a)^</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk18"><hr></label><div class="goal-conclusion">j23 f a c @ <span class="nl">?Goal1</span> = <span class="nl">?Goal</span> @ j23 g a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk19"><hr></label><div class="goal-conclusion">j13 f b c @ <span class="nl">?Goal1</span> = <span class="nl">?Goal0</span> @ j13 g b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk1a"><hr></label><div class="goal-conclusion">prism
  (moveR_Vp (j13 f b c) (j23 f a c) 
     (j12 f b a) (j123 f b a c)^)
  (moveR_Vp (j13 g b c) (j23 g a c) 
     (j12 g b a) (j123 g b a c)^) 
  <span class="nl">?Goal2</span> <span class="nl">?Goal3</span> <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk1b"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">5</span>, <span class="mi">6</span>: <span class="nb">apply</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j12 f b a)^ @ (<span class="kr">let</span> <span class="nv">X</span> := h1 h <span class="kr">in</span> X b) =
(<span class="kr">let</span> <span class="nv">X</span> := h2 h <span class="kr">in</span> X a) @ (j12 g b a)^</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk1c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk1c"><hr></label><div class="goal-conclusion">prism
  (moveR_Vp (j13 f b c) (j23 f a c) 
     (j12 f b a) (j123 f b a c)^)
  (moveR_Vp (j13 g b c) (j23 g a c) 
     (j12 g b a) (j123 g b a c)^) 
  <span class="nl">?Goal</span> (<span class="kr">let</span> <span class="nv">X</span> := h23 h <span class="kr">in</span> X a c)
  (<span class="kr">let</span> <span class="nv">X</span> := h13 h <span class="kr">in</span> X b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk1d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j12 f b a)^ @ (<span class="kr">let</span> <span class="nv">X</span> := h1 h <span class="kr">in</span> X b) =
(<span class="kr">let</span> <span class="nv">X</span> := h2 h <span class="kr">in</span> X a) @ (j12 g b a)^</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk1e"><span class="nb">cbn</span> zeta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j12 f b a)^ @ h1 h b = h2 h a @ (j12 g b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk1f">prism_ind_two g h b a _X_; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j12 f b a)^ @ <span class="mi">1</span> = <span class="mi">1</span> @ (j12 f b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_p1_1p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk20">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism
  (moveR_Vp (j13 f b c) (j23 f a c) 
     (j12 f b a) (j123 f b a c)^)
  (moveR_Vp (j13 g b c) (j23 g a c) 
     (j12 g b a) (j123 g b a c)^)
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f a = j1 g a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f b = j2 g b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f c = j3 g c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) 
            (<span class="nv">b</span> : B),
            j12 f a b @ H0 b = H a @ j12 g a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) 
            (<span class="nv">c</span> : C),
            j13 f a c @ H1 c = H a @ j13 g a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) 
            (<span class="nv">c</span> : C),
            j23 f b c @ H1 c = H0 b @ j23 g b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) 
            (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f a b c) 
              (j123 g a b c) 
              (H2 a b) (H3 a c) 
              (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) 
       (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) 
              (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j1 f b) 
       (j2 f a) (j12 f b a)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j1 f b = a&#39;) 
          (<span class="nv">hb</span> : j2 f a = b&#39;)
          (<span class="nv">_</span> : j12 f b a @ hb = ha @ ab&#39;) =&gt;
        (j12 f b a)^ @ ha = hb @ ab&#39;^)
       (concat_p1_1p (j12 f b a)^
        :
        (j12 f b a)^ @ <span class="mi">1</span> = <span class="mi">1</span> @ (j12 f b a)^) 
       (H6 b) (H7 a) (H9 b a)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j1 f b =
          j1
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} b)
     (<span class="nv">p0</span> : j2 f a =
           j2
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} a),
     j12 f b a @ p0 =
     p @
     j12
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} b a -&gt; (j12 f b a)^ @ p = p0 @ (H9 b a)^)
      (j1 g) (j2 g) (j3 g) 
      (j12 g) (j13 g) (j23 g) 
      (j123 g) (H b) (H0 a) 
      (H2 b a)
    :
    (j12 f b a)^ @
    h1
      {|
        h1 := H;
        h2 := H0;
        h3 := H1;
        h12 := H2;
        h13 := H3;
        h23 := H4;
        h123 := H5
      |} b =
    h2
      {|
        h1 := H;
        h2 := H0;
        h3 := H1;
        h12 := H2;
        h13 := H3;
        h23 := H4;
        h123 := H5
      |} a @ (j12 g b a)^) 
     (h1 h) (h2 h) (h3 h) 
     (h12 h) (h13 h) (h23 h) 
     (h123 h)
   :
   (j12 f b a)^ @ (<span class="kr">let</span> <span class="nv">X</span> := h1 h <span class="kr">in</span> X b) =
   (<span class="kr">let</span> <span class="nv">X</span> := h2 h <span class="kr">in</span> X a) @ (j12 g b a)^)
  (<span class="kr">let</span> <span class="nv">X</span> := h23 h <span class="kr">in</span> X a c) 
  (<span class="kr">let</span> <span class="nv">X</span> := h13 h <span class="kr">in</span> X b c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk21"><span class="nb">cbn</span> beta zeta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism
  (moveR_Vp (j13 f b c) (j23 f a c) 
     (j12 f b a) (j123 f b a c)^)
  (moveR_Vp (j13 g b c) (j23 g a c) 
     (j12 g b a) (j123 g b a c)^)
  (square_ind (j1 f b) (j2 f a) 
     (j12 f b a)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f b = a&#39;) 
        (<span class="nv">hb</span> : j2 f a = b&#39;)
        (<span class="nv">_</span> : j12 f b a @ hb = ha @ ab&#39;) =&gt;
      (j12 f b a)^ @ ha = hb @ ab&#39;^)
     (concat_p1_1p (j12 f b a)^) 
     (j1 g b) (j2 g a) (j12 g b a) 
     (h1 h b) (h2 h a) (h12 h b a)) 
  (h23 h a c) (h13 h b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk22">prism_ind g h b a c; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism
  (moveR_Vp (j13 f b c) (j23 f a c) 
     (j12 f b a) (j123 f b a c)^)
  (moveR_Vp (j13 f b c) (j23 f a c) 
     (j12 f b a) (j123 f b a c)^)
  (square_ind (j1 f b) (j2 f a) 
     (j12 f b a)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f b = a&#39;) 
        (<span class="nv">hb</span> : j2 f a = b&#39;)
        (<span class="nv">_</span> : j12 f b a @ hb = ha @ ab&#39;) =&gt;
      (j12 f b a)^ @ ha = hb @ ab&#39;^)
     (concat_p1_1p (j12 f b a)^) 
     (j1 f b) (j2 f a) (j12 f b a) <span class="mi">1</span> <span class="mi">1</span> 
     (equiv_p1_1q <span class="mi">1</span>)) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f b a c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This map is its own inverse in the 1-category of 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk23"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_twist_inv</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>)
  : trijoinrecdata_twist B A C P $o trijoinrecdata_twist A B C P $== Id _.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_twist B A C P $o
trijoinrecdata_twist A B C P $==
Id (trijoinrecdata_0gpd A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk24"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_twist B A C P $o
trijoinrecdata_twist A B C P $==
Id (trijoinrecdata_0gpd A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk25"><span class="nb">intro</span> f; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath
  {|
    j1 := j1 f;
    j2 := j2 f;
    j3 := j3 f;
    j12 := <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">a</span> : B) =&gt; ((j12 f b a)^)^;
    j13 := j13 f;
    j23 := j23 f;
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      moveR_Vp (j23 f b c) (j13 f a c) (j12 f a b)^
        (moveR_Vp (j13 f a c) (j23 f b c) (j12 f a b)
           (j123 f a b c)^)^
  |} f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk26">bundle_trijoinrecpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
j12&#39;
  (unbundle_trijoinrecdata
     {|
       j1 := j1 f;
       j2 := j2 f;
       j3 := j3 f;
       j12 :=
         <span class="kr">fun</span> (<span class="nv">b0</span> : A) (<span class="nv">a0</span> : B) =&gt; ((j12 f b0 a0)^)^;
       j13 := j13 f;
       j23 := j23 f;
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
         moveR_Vp (j23 f b0 c) (j13 f a0 c)
           (j12 f a0 b0)^
           (moveR_Vp (j13 f a0 c) (j23 f b0 c)
              (j12 f a0 b0) (j123 f a0 b0 c)^)^
     |}) a b = j12&#39; (unbundle_trijoinrecdata f) a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk27"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
j13&#39;
  (unbundle_trijoinrecdata
     {|
       j1 := j1 f;
       j2 := j2 f;
       j3 := j3 f;
       j12 := <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">a0</span> : B) =&gt; ((j12 f b a0)^)^;
       j13 := j13 f;
       j23 := j23 f;
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c0</span> : C) =&gt;
         moveR_Vp (j23 f b c0) (j13 f a0 c0)
           (j12 f a0 b)^
           (moveR_Vp (j13 f a0 c0) (j23 f b c0)
              (j12 f a0 b) (j123 f a0 b c0)^)^
     |}) a c = j13&#39; (unbundle_trijoinrecdata f) a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk28" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk28"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
j23&#39;
  (unbundle_trijoinrecdata
     {|
       j1 := j1 f;
       j2 := j2 f;
       j3 := j3 f;
       j12 := <span class="kr">fun</span> (<span class="nv">b0</span> : A) (<span class="nv">a</span> : B) =&gt; ((j12 f b0 a)^)^;
       j13 := j13 f;
       j23 := j23 f;
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
         moveR_Vp (j23 f b0 c0) (j13 f a c0)
           (j12 f a b0)^
           (moveR_Vp (j13 f a c0) (j23 f b0 c0)
              (j12 f a b0) (j123 f a b0 c0)^)^
     |}) b c = j23&#39; (unbundle_trijoinrecdata f) b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk29"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism&#39;
  (j123&#39;
     (unbundle_trijoinrecdata
        {|
          j1 := j1 f;
          j2 := j2 f;
          j3 := j3 f;
          j12 :=
            <span class="kr">fun</span> (<span class="nv">b0</span> : A) (<span class="nv">a0</span> : B) =&gt; ((j12 f b0 a0)^)^;
          j13 := j13 f;
          j23 := j23 f;
          j123 :=
            <span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
            moveR_Vp (j23 f b0 c0) (j13 f a0 c0)
              (j12 f a0 b0)^
              (moveR_Vp (j13 f a0 c0) (j23 f b0 c0)
                 (j12 f a0 b0) (j123 f a0 b0 c0)^)^
        |}) a b c)
  (j123&#39; (unbundle_trijoinrecdata f) a b c)
  (<span class="nl">?h12&#39;</span> a b) (<span class="nl">?h13&#39;</span> a c) (<span class="nl">?h23&#39;</span> b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk2a"><span class="kp">all</span>: <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((j12 f a b)^)^ = j12 f a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk2b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk2b"><hr></label><div class="goal-conclusion">j13 f a c = j13 f a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk2c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk2c"><hr></label><div class="goal-conclusion">j23 f b c = j23 f b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk2d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk2d"><hr></label><div class="goal-conclusion">prism&#39;
  (moveR_Vp (j23 f b c) (j13 f a c) (j12 f a b)^
     (moveR_Vp (j13 f a c) (j23 f b c) (j12 f a b)
        (j123 f a b c)^)^) (j123 f a b c) <span class="nl">?Goal</span> <span class="nl">?Goal0</span>
  <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk2e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((j12 f a b)^)^ = j12 f a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inv_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk2f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f a c = j13 f a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk30">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 f b c = j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk31">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (moveR_Vp (j23 f b c) (j13 f a c) (j12 f a b)^
     (moveR_Vp (j13 f a c) (j23 f b c) (j12 f a b)
        (j123 f a b c)^)^) (j123 f a b c)
  (inv_V (j12 f a b)) <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f a b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We get the twist natural equivalence on [TriJoinRecData]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk32"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_twist_natequiv</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : NatEquiv (trijoinrecdata_0gpd_fun A B C) (trijoinrecdata_0gpd_fun B A C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (trijoinrecdata_0gpd_fun A B C)
  (trijoinrecdata_0gpd_fun B A C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk33"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (trijoinrecdata_0gpd_fun A B C)
  (trijoinrecdata_0gpd_fun B A C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk34">snapply Build_NatEquiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
trijoinrecdata_0gpd_fun A B C a $&lt;~&gt;
trijoinrecdata_0gpd_fun B A C a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk35" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk35"><hr></label><div class="goal-conclusion">Is1Natural (trijoinrecdata_0gpd_fun A B C)
  (trijoinrecdata_0gpd_fun B A C)
  (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt; <span class="nl">?e</span> a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* An equivalence of 0-groupoids for each [P]: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk36">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
trijoinrecdata_0gpd_fun A B C a $&lt;~&gt;
trijoinrecdata_0gpd_fun B A C a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk37"><span class="nb">intro</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_0gpd_fun A B C P $&lt;~&gt;
trijoinrecdata_0gpd_fun B A C P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk38">snapply cate_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_0gpd_fun A B C P $-&gt;
trijoinrecdata_0gpd_fun B A C P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk39" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk39"><hr></label><div class="goal-conclusion">trijoinrecdata_0gpd_fun B A C P $-&gt;
trijoinrecdata_0gpd_fun A B C P</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk3a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk3a"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> $o <span class="nl">?g</span> $== Id (trijoinrecdata_0gpd_fun B A C P)</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk3b"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> $o <span class="nl">?f</span> $== Id (trijoinrecdata_0gpd_fun A B C P)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk3c"><span class="mi">1</span>, <span class="mi">2</span>: <span class="nb">apply</span> trijoinrecdata_twist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_twist A B C P $o
trijoinrecdata_twist B A C P $==
Id (trijoinrecdata_0gpd_fun B A C P)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk3d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk3d"><hr></label><div class="goal-conclusion">trijoinrecdata_twist B A C P $o
trijoinrecdata_twist A B C P $==
Id (trijoinrecdata_0gpd_fun A B C P)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="mi">1</span>, <span class="mi">2</span>: <span class="nb">apply</span> trijoinrecdata_twist_inv.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Naturality: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk3e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (trijoinrecdata_0gpd_fun A B C)
  (trijoinrecdata_0gpd_fun B A C)
  (<span class="kr">fun</span> <span class="nv">a</span> : <span class="kt">Type</span> =&gt;
   (<span class="kr">fun</span> <span class="nv">P</span> : <span class="kt">Type</span> =&gt;
    cate_adjointify (trijoinrecdata_twist A B C P)
      (trijoinrecdata_twist B A C P)
      (trijoinrecdata_twist_inv B A C P)
      (trijoinrecdata_twist_inv A B C P)) a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk3f">snapply Build_Is1Natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; a&#39;),
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt;
 cate_fun
   ((<span class="kr">fun</span> <span class="nv">P</span> : <span class="kt">Type</span> =&gt;
     cate_adjointify (trijoinrecdata_twist A B C P)
       (trijoinrecdata_twist B A C P)
       (trijoinrecdata_twist_inv B A C P)
       (trijoinrecdata_twist_inv A B C P)) a0)) a&#39; $o
fmap (trijoinrecdata_0gpd_fun A B C) f $==
fmap (trijoinrecdata_0gpd_fun B A C) f $o
(<span class="kr">fun</span> <span class="nv">a0</span> : <span class="kt">Type</span> =&gt;
 cate_fun
   ((<span class="kr">fun</span> <span class="nv">P</span> : <span class="kt">Type</span> =&gt;
     cate_adjointify (trijoinrecdata_twist A B C P)
       (trijoinrecdata_twist B A C P)
       (trijoinrecdata_twist_inv B A C P)
       (trijoinrecdata_twist_inv A B C P)) a0)) a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk40"><span class="nb">intros</span> P Q g f; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (j2 f x);
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (j1 f x);
    j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; g (j3 f x);
    j12 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (ap g (j12 f a b))^;
    j13 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap g (j23 f b c);
    j23 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt; ap g (j13 f a c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C) =&gt;
      moveR_Vp (ap g (j13 f b c)) (ap g (j23 f a c))
        (ap g (j12 f b a))
        (ap_triangle g (j123 f b a c))^
  |}
  (trijoinrecdata_fun g
     {|
       j1 := j2 f;
       j2 := j1 f;
       j3 := j3 f;
       j12 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a</span> : A) =&gt; (j12 f a b)^;
       j13 := j23 f;
       j23 := j13 f;
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C) =&gt;
         moveR_Vp (j13 f b c) (j23 f a c) (j12 f b a)
           (j123 f b a c)^
     |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk41">bundle_trijoinrecpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A),
j12&#39;
  (unbundle_trijoinrecdata
     {|
       j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (j2 f x);
       j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (j1 f x);
       j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; g (j3 f x);
       j12 :=
         <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt;
         (ap g (j12 f a0 b0))^;
       j13 :=
         <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt; ap g (j23 f b0 c);
       j23 :=
         <span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c</span> : C) =&gt; ap g (j13 f a0 c);
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c</span> : C) =&gt;
         moveR_Vp (ap g (j13 f b0 c))
           (ap g (j23 f a0 c)) (ap g (j12 f b0 a0))
           (ap_triangle g (j123 f b0 a0 c))^
     |}) a b =
j12&#39;
  (unbundle_trijoinrecdata
     (trijoinrecdata_fun g
        {|
          j1 := j2 f;
          j2 := j1 f;
          j3 := j3 f;
          j12 :=
            <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (j12 f a0 b0)^;
          j13 := j23 f;
          j23 := j13 f;
          j123 :=
            <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c</span> : C) =&gt;
            moveR_Vp (j13 f b0 c) (j23 f a0 c)
              (j12 f b0 a0) (j123 f b0 a0 c)^
        |})) a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk42" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk42"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : C),
j13&#39;
  (unbundle_trijoinrecdata
     {|
       j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (j2 f x);
       j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (j1 f x);
       j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; g (j3 f x);
       j12 :=
         <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a0</span> : A) =&gt; (ap g (j12 f a0 b))^;
       j13 :=
         <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c0</span> : C) =&gt; ap g (j23 f b c0);
       j23 :=
         <span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt; ap g (j13 f a0 c0);
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c0</span> : C) =&gt;
         moveR_Vp (ap g (j13 f b c0))
           (ap g (j23 f a0 c0)) (ap g (j12 f b a0))
           (ap_triangle g (j123 f b a0 c0))^
     |}) a c =
j13&#39;
  (unbundle_trijoinrecdata
     (trijoinrecdata_fun g
        {|
          j1 := j2 f;
          j2 := j1 f;
          j3 := j3 f;
          j12 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">a0</span> : A) =&gt; (j12 f a0 b)^;
          j13 := j23 f;
          j23 := j13 f;
          j123 :=
            <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c0</span> : C) =&gt;
            moveR_Vp (j13 f b c0) (j23 f a0 c0)
              (j12 f b a0) (j123 f b a0 c0)^
        |})) a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk43" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk43"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : C),
j23&#39;
  (unbundle_trijoinrecdata
     {|
       j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (j2 f x);
       j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (j1 f x);
       j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; g (j3 f x);
       j12 :=
         <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a</span> : A) =&gt; (ap g (j12 f a b0))^;
       j13 :=
         <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt; ap g (j23 f b0 c0);
       j23 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c0</span> : C) =&gt; ap g (j13 f a c0);
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c0</span> : C) =&gt;
         moveR_Vp (ap g (j13 f b0 c0))
           (ap g (j23 f a c0)) (ap g (j12 f b0 a))
           (ap_triangle g (j123 f b0 a c0))^
     |}) b c =
j23&#39;
  (unbundle_trijoinrecdata
     (trijoinrecdata_fun g
        {|
          j1 := j2 f;
          j2 := j1 f;
          j3 := j3 f;
          j12 := <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a</span> : A) =&gt; (j12 f a b0)^;
          j13 := j23 f;
          j23 := j13 f;
          j123 :=
            <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c0</span> : C) =&gt;
            moveR_Vp (j13 f b0 c0) (j23 f a c0)
              (j12 f b0 a) (j123 f b0 a c0)^
        |})) b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk44" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk44"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : C),
prism&#39;
  (j123&#39;
     (unbundle_trijoinrecdata
        {|
          j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g (j2 f x);
          j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (j1 f x);
          j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; g (j3 f x);
          j12 :=
            <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt;
            (ap g (j12 f a0 b0))^;
          j13 :=
            <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
            ap g (j23 f b0 c0);
          j23 :=
            <span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
            ap g (j13 f a0 c0);
          j123 :=
            <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c0</span> : C) =&gt;
            moveR_Vp (ap g (j13 f b0 c0))
              (ap g (j23 f a0 c0))
              (ap g (j12 f b0 a0))
              (ap_triangle g (j123 f b0 a0 c0))^
        |}) a b c)
  (j123&#39;
     (unbundle_trijoinrecdata
        (trijoinrecdata_fun g
           {|
             j1 := j2 f;
             j2 := j1 f;
             j3 := j3 f;
             j12 :=
               <span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">a0</span> : A) =&gt; (j12 f a0 b0)^;
             j13 := j23 f;
             j23 := j13 f;
             j123 :=
               <span class="kr">fun</span> (<span class="nv">a0</span> : B) (<span class="nv">b0</span> : A) (<span class="nv">c0</span> : C) =&gt;
               moveR_Vp (j13 f b0 c0) (j23 f a0 c0)
                 (j12 f b0 a0) (j123 f b0 a0 c0)^
           |})) a b c) (<span class="nl">?h12&#39;</span> a b) (<span class="nl">?h13&#39;</span> a c)
  (<span class="nl">?h23&#39;</span> b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk45"><span class="kp">all</span>: <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap g (j12 f b a))^ = ap g (j12 f b a)^</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk46"><hr></label><div class="goal-conclusion">ap g (j23 f a c) = ap g (j23 f a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk47" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk47"><hr></label><div class="goal-conclusion">ap g (j13 f b c) = ap g (j13 f b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk48" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk48"><hr></label><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap g (j13 f b c)) (ap g (j23 f a c))
     (ap g (j12 f b a))
     (ap_triangle g (j123 f b a c))^)
  (ap_triangle g
     (moveR_Vp (j13 f b c) (j23 f a c) (j12 f b a)
        (j123 f b a c)^)) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk49">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap g (j12 f b a))^ = ap g (j12 f b a)^</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> ap_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk4a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (j23 f a c) = ap g (j23 f a c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk4b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (j13 f b c) = ap g (j13 f b c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk4c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>Graph.graph_carrier
  (zerogpd_graph (trijoinrecdata_0gpd_fun A B C P))</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap g (j13 f b c)) (ap g (j23 f a c))
     (ap g (j12 f b a))
     (ap_triangle g (j123 f b a c))^)
  (ap_triangle g
     (moveR_Vp (j13 f b c) (j23 f a c) (j12 f b a)
        (j123 f b a c)^)) (ap_V g (j12 f b a))^ <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f b a c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Combining with the recursion equivalence [trijoin_rec_inv_natequiv] and its inverse gives the twist natural equivalence between the representable functors. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_fun_twist</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : NatEquiv (opyon_0gpd (TriJoin A B C)) (opyon_0gpd (TriJoin B A C))
  := natequiv_compose (trijoin_rec_natequiv B A C)
      (natequiv_compose (trijoinrecdata_twist_natequiv A B C) (trijoin_rec_inv_natequiv A B C)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The Yoneda lemma for 0-groupoid valued functors therefore gives us an equivalence between the representing objects.  We mark this with a prime, since we&#39;ll use a homotopic map with a slightly simpler definition. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk4d"><span class="kn">Definition</span> <span class="nf">equiv_trijoin_twist&#39;</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : TriJoin A B C &lt;~&gt; TriJoin B A C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A B C &lt;~&gt; TriJoin B A C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk4e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A B C &lt;~&gt; TriJoin B A C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk4f">tapply (opyon_equiv_0gpd (A:=<span class="kt">Type</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">opyon1_0gpd (TriJoin B A C) $&lt;~&gt;
opyon1_0gpd (TriJoin A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoinrecdata_fun_twist.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It has the nice property that the underlying function of the inverse is again [equiv_trijoin_twist&#39;], with arguments permuted. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">trijoin_twist_check1</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : (equiv_trijoin_twist&#39; A B C)^-<span class="mi">1</span> = equiv_fun (equiv_trijoin_twist&#39; B A C)
  := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The definition we end up with is almost the same as the obvious one, but has some extra [ap idmap]s in it. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">twijoin_twist_check2</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : equiv_fun (equiv_trijoin_twist&#39; A B C)
    = trijoin_rec {| j1 := join2; j2 := join1; j3 := join3;
      j12 := <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">a</span> : B) =&gt; (ap idmap (join12 a b))^;
      j13 := <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : C) =&gt; ap idmap (join23 b c);
      j23 := <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : C) =&gt; ap idmap (join13 a c);
      j123 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
               moveR_Vp _ _ _ (ap_triangle idmap (join123 b a c))^ |}
  := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The next two give the obvious definition. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_twist_recdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : TriJoinRecData A B C (TriJoin B A C)
  := Build_TriJoinRecData join2 join1 join3
      (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; (join12 b a)^) join23 join13
      (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; moveR_Vp _ _ _ (join123 b a c)^).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_twist</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : TriJoin A B C -&gt; TriJoin B A C
  := trijoin_rec (trijoin_twist_recdata A B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** As an aside, note that [trijoin_twist] computes nicely on [joinr]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">trijoin_twist_joinr</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : trijoin_twist A B C o joinr = functor_join idmap joinr
  := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The obvious definition is homotopic to the definition via the Yoneda lemma. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk50"><span class="kn">Definition</span> <span class="nf">trijoin_twist_homotopic</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : trijoin_twist A B C == equiv_trijoin_twist&#39; A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A B C == equiv_trijoin_twist&#39; A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk51"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A B C == equiv_trijoin_twist&#39; A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk52"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_trijoin_twist&#39; A B C == trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Both sides are [trijoin_rec] applied to [TriJoinRecData]: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk53">tapply (fmap trijoin_rec).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">natequiv_compose (trijoinrecdata_twist_natequiv B A C)
  (trijoin_rec_inv_natequiv B A C) (TriJoin B A C)
  (Id (TriJoin B A C)) $-&gt; trijoin_twist_recdata A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk54">bundle_trijoinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap idmap (join12 b a))^ = (join12 b a)^</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk55"><hr></label><div class="goal-conclusion">ap idmap (join23 a c) = join23 a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk56" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk56"><hr></label><div class="goal-conclusion">ap idmap (join13 b c) = join13 b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk57" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk57"><hr></label><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap idmap (join13 b c))
     (ap idmap (join23 a c)) (ap idmap (join12 b a))
     (ap_triangle idmap (join123 b a c))^)
  (moveR_Vp (join13 b c) (join23 a c) (join12 b a)
     (join123 b a c)^) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk58"><span class="mi">1</span>: <span class="nb">refine</span> (ap inverse _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap idmap (join12 b a) = join12 b a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk59" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk59"><hr></label><div class="goal-conclusion">ap idmap (join23 a c) = join23 a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk5a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk5a"><hr></label><div class="goal-conclusion">ap idmap (join13 b c) = join13 b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk5b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk5b"><hr></label><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap idmap (join13 b c))
     (ap idmap (join23 a c)) (ap idmap (join12 b a))
     (ap_triangle idmap (join123 b a c))^)
  (moveR_Vp (join13 b c) (join23 a c) (join12 b a)
     (join123 b a c)^) (ap inverse <span class="nl">?Goal2</span>) <span class="nl">?Goal</span>
  <span class="nl">?Goal0</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk5c"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">apply</span> ap_idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap idmap (join13 b c))
     (ap idmap (join23 a c)) (ap idmap (join12 b a))
     (ap_triangle idmap (join123 b a c))^)
  (moveR_Vp (join13 b c) (join23 a c) (join12 b a)
     (join123 b a c)^)
  (ap inverse (ap_idmap (join12 b a)))
  (ap_idmap (join23 a c)) (ap_idmap (join13 b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk5d"><span class="nb">generalize</span> (join123 b a c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">p</span> : join12 b a @ join23 a c = join13 b c,
prism&#39;
  (moveR_Vp (ap idmap (join13 b c))
     (ap idmap (join23 a c)) (ap idmap (join12 b a))
     (ap_triangle idmap p)^)
  (moveR_Vp (join13 b c) (join23 a c) (join12 b a) p^)
  (ap inverse (ap_idmap (join12 b a)))
  (ap_idmap (join23 a c)) (ap_idmap (join13 b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk5e"><span class="nb">generalize</span> (join23 (A:=B) a c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">p</span> : join2 a = join3 c)
(<span class="nv">p0</span> : join12 b a @ p = join13 b c),
prism&#39;
  (moveR_Vp (ap idmap (join13 b c)) (ap idmap p)
     (ap idmap (join12 b a)) (ap_triangle idmap p0)^)
  (moveR_Vp (join13 b c) p (join12 b a) p0^)
  (ap inverse (ap_idmap (join12 b a))) (ap_idmap p)
  (ap_idmap (join13 b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk5f"><span class="nb">generalize</span> (join13 (B:=A) b c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">p</span> : join1 b = join3 c)
(<span class="nv">p0</span> : join2 a = join3 c) (<span class="nv">p1</span> : join12 b a @ p0 = p),
prism&#39;
  (moveR_Vp (ap idmap p) (ap idmap p0)
     (ap idmap (join12 b a)) (ap_triangle idmap p1)^)
  (moveR_Vp p p0 (join12 b a) p1^)
  (ap inverse (ap_idmap (join12 b a))) (ap_idmap p0)
  (ap_idmap p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk60"><span class="nb">generalize</span> (join12 (C:=C) b a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">p</span> : join1 b = join2 a)
(<span class="nv">p0</span> : join1 b = join3 c) (<span class="nv">p1</span> : join2 a = join3 c)
(<span class="nv">p2</span> : p @ p1 = p0),
prism&#39;
  (moveR_Vp (ap idmap p0) (ap idmap p1) (ap idmap p)
     (ap_triangle idmap p2)^) (moveR_Vp p0 p1 p p2^)
  (ap inverse (ap_idmap p)) (ap_idmap p1)
  (ap_idmap p0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk61"><span class="nb">generalize</span> (join3 (A:=B) (B:=A) c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : TriJoin B A C) (<span class="nv">p</span> : join1 b = join2 a)
(<span class="nv">p0</span> : join1 b = t) (<span class="nv">p1</span> : join2 a = t)
(<span class="nv">p2</span> : p @ p1 = p0),
prism&#39;
  (moveR_Vp (ap idmap p0) (ap idmap p1) (ap idmap p)
     (ap_triangle idmap p2)^) (moveR_Vp p0 p1 p p2^)
  (ap inverse (ap_idmap p)) (ap_idmap p1)
  (ap_idmap p0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk62"><span class="nb">generalize</span> (join2 (A:=B) (C:=C) a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> <span class="nv">t0</span> : TriJoin B A C) (<span class="nv">p</span> : join1 b = t)
(<span class="nv">p0</span> : join1 b = t0) (<span class="nv">p1</span> : t = t0) (<span class="nv">p2</span> : p @ p1 = p0),
prism&#39;
  (moveR_Vp (ap idmap p0) (ap idmap p1) (ap idmap p)
     (ap_triangle idmap p2)^) (moveR_Vp p0 p1 p p2^)
  (ap inverse (ap_idmap p)) (ap_idmap p1)
  (ap_idmap p0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk63"><span class="nb">generalize</span> (join1 (B:=A) (C:=C) b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> <span class="nv">t0</span> <span class="nv">t1</span> : TriJoin B A C) (<span class="nv">p</span> : t = t0)
(<span class="nv">p0</span> : t = t1) (<span class="nv">p1</span> : t0 = t1) (<span class="nv">p2</span> : p @ p1 = p0),
prism&#39;
  (moveR_Vp (ap idmap p0) (ap idmap p1) (ap idmap p)
     (ap_triangle idmap p2)^) (moveR_Vp p0 p1 p p2^)
  (ap inverse (ap_idmap p)) (ap_idmap p1)
  (ap_idmap p0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk64"><span class="nb">intros</span> k1 k2 k3 k12 k13 k23 k123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>k1, k2, k3</var><span class="hyp-type"><b>: </b><span>TriJoin B A C</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span>k1 = k2</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>k1 = k3</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>k2 = k3</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>k12 @ k23 = k13</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap idmap k13) (ap idmap k23)
     (ap idmap k12) (ap_triangle idmap k123)^)
  (moveR_Vp k13 k23 k12 k123^)
  (ap inverse (ap_idmap k12)) (ap_idmap k23)
  (ap_idmap k13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk65"><span class="nb">induction</span> k12, k23, k123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>TriJoin B A C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (moveR_Vp (ap idmap (<span class="mi">1</span> @ <span class="mi">1</span>)) 
     (ap idmap <span class="mi">1</span>) (ap idmap <span class="mi">1</span>) 
     (ap_triangle idmap <span class="mi">1</span>)^) 
  (moveR_Vp (<span class="mi">1</span> @ <span class="mi">1</span>) <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>^) 
  (ap inverse (ap_idmap <span class="mi">1</span>)) 
  (ap_idmap <span class="mi">1</span>) (ap_idmap (<span class="mi">1</span> @ <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Therefore the obvious definition is also an equivalence, and the inverse function can also be chosen to be [trijoin_twist]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_trijoin_twist</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : TriJoin A B C &lt;~&gt; TriJoin B A C
  := equiv_homotopic_inverse (equiv_trijoin_twist&#39; A B C)
                            (trijoin_twist_homotopic A B C)
                            (trijoin_twist_homotopic B A C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The associativity of [Join] *)</span>

<span class="sd">(** [trijoin_twist] corresponds to the permutation (1,2).  The equivalence corresponding to the permutation (2,3) also plays a key role, so we name it here. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_id_sym</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : TriJoin A B C &lt;~&gt; TriJoin A C B
  := equiv_functor_join equiv_idmap (equiv_join_sym B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> trijoin_id_sym : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk66"><span class="kn">Definition</span> <span class="nf">join_assoc</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : Join A (Join B C) &lt;~&gt; Join (Join A B) C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A (Join B C) &lt;~&gt; Join (Join A B) C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk67"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A (Join B C) &lt;~&gt; Join (Join A B) C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk68"><span class="nb">refine</span> (_ oE trijoin_id_sym _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A C B &lt;~&gt; Join (Join A B) C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk69"><span class="nb">refine</span> (_ oE equiv_trijoin_twist _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin C A B &lt;~&gt; Join (Join A B) C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> equiv_join_sym.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> join_assoc : <span class="nb">simpl</span> never.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** As a consequence, we get associativity of powers. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk6a"><span class="kn">Corollary</span> <span class="nf">join_join_power</span> <span class="nv">A</span> <span class="nv">n</span> <span class="nv">m</span>
  : Join (join_power A n) (join_power A m) &lt;~&gt; join_power A (n + m)%nat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join (join_power A n) (join_power A m) &lt;~&gt;
join_power A (n + m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk6b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join (join_power A n) (join_power A m) &lt;~&gt;
join_power A (n + m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk6c"><span class="nb">induction</span> n <span class="kr">as</span> [|n IHn].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join (join_power A <span class="mi">0</span>) (join_power A m) &lt;~&gt;
join_power A (<span class="mi">0</span> + m)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk6d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>Join (join_power A n) (join_power A m) &lt;~&gt; join_power A (n + m)</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk6d"><hr></label><div class="goal-conclusion">Join (join_power A n.+<span class="mi">1</span>) (join_power A m) &lt;~&gt;
join_power A (n.+<span class="mi">1</span> + m)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk6e"><span class="mi">1</span>: <span class="bp">exact</span> (equiv_join_empty_left _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>Join (join_power A n) (join_power A m) &lt;~&gt; join_power A (n + m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join (join_power A n.+<span class="mi">1</span>) (join_power A m) &lt;~&gt;
join_power A (n.+<span class="mi">1</span> + m)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk6f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>Join (join_power A n) (join_power A m) &lt;~&gt; join_power A (n + m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join (Join A (join_power A n)) (join_power A m) &lt;~&gt;
Join A (join_power A (n + m))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk70"><span class="nb">refine</span> (_ oE (join_assoc _ _ _)^-<span class="mi">1</span>%equiv).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>Join (join_power A n) (join_power A m) &lt;~&gt; join_power A (n + m)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join A (Join (join_power A n) (join_power A m)) &lt;~&gt;
Join A (join_power A (n + m))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (equiv_functor_join equiv_idmap IHn).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Naturality of [trijoin_twist] *)</span>

<span class="sd">(** Our goal is to prove that [trijoin_twist A&#39; B&#39; C&#39; o functor_join f (functor_join g h)] is homotopic to [functor_join g (functor_join f h) o trijoin_twist A B C]. *)</span>

<span class="sd">(** We first give a way to write anything of the form [trijoin_rec f o trijoin_twist A B C] as [trijoin_rec] applied to some [TriJoinRecData]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk71"><span class="kn">Definition</span> <span class="nf">trijoin_rec_trijoin_twist</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span>} (<span class="nv">f</span> : TriJoinRecData B A C P)
  : trijoin_rec f o trijoin_twist A B C == trijoin_rec (trijoinrecdata_twist _ _ _ _ f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_twist A B C ==
trijoin_rec (trijoinrecdata_twist B A C P f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk72"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_twist A B C ==
trijoin_rec (trijoinrecdata_twist B A C P f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* We first replace [trijoin_twist] with [equiv_trijoin_twist&#39;]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk73"><span class="nb">transitivity</span> (trijoin_rec f o equiv_trijoin_twist&#39; A B C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_twist A B C ==
trijoin_rec f o equiv_trijoin_twist&#39; A B C</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk74" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk74"><hr></label><div class="goal-conclusion">trijoin_rec f o equiv_trijoin_twist&#39; A B C ==
trijoin_rec (trijoinrecdata_twist B A C P f)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk75"><span class="mi">1</span>: <span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ap (trijoin_rec f) (trijoin_twist_homotopic A B C x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o equiv_trijoin_twist&#39; A B C ==
trijoin_rec (trijoinrecdata_twist B A C P f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The LHS is now the twist natural transformation applied to [Id], followed by postcomposition; naturality states that that is the same as the natural trans applied to [trijoin_rec f]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk76"><span class="nb">refine</span> ((isnat_natequiv (trijoinrecdata_fun_twist B A C) (trijoin_rec f) _)^$ $@ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(trijoinrecdata_fun_twist B A C P $o
 fmap (opyon_0gpd (TriJoin B A C)) (trijoin_rec f))
  (Id (TriJoin B A C)) $==
trijoin_rec (trijoinrecdata_twist B A C P f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The LHS simplifies to [trijoinrecdata_fun_twist] applied to [trijoin_rec f].  The former is a composite of [trijoin_rec], [trijoinrecdata_twist] and [trijoin_rec_inv], so we can write the LHS as: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk77"><span class="nb">change</span> (<span class="nl">?L</span> $== <span class="nl">?R</span>) <span class="kr">with</span> (trijoin_rec (trijoinrecdata_twist B A C P (trijoin_rec_inv (trijoin_rec f))) $== R).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_twist B A C P
     (trijoin_rec_inv (trijoin_rec f))) $==
trijoin_rec (trijoinrecdata_twist B A C P f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk78"><span class="nb">refine</span> (fmap trijoin_rec _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_twist B A C P
  (trijoin_rec_inv (trijoin_rec f)) $-&gt;
trijoinrecdata_twist B A C P f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk79"><span class="nb">refine</span> (fmap (trijoinrecdata_twist B A C P) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData B A C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec_inv (trijoin_rec f) $-&gt; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Naturality of [trijoin_twist].  This version uses [functor_trijoin] and simply combines previous results. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7a"><span class="kn">Definition</span> <span class="nf">trijoin_twist_nat&#39;</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : trijoin_twist A&#39; B&#39; C&#39; o functor_trijoin f g h
    == functor_trijoin g f h o trijoin_twist A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39; o functor_trijoin f g h ==
functor_trijoin g f h o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39; o functor_trijoin f g h ==
functor_trijoin g f h o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7c"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39; (functor_trijoin f g h x) =
functor_trijoin g f h (trijoin_twist A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7d">rhs napply trijoin_rec_trijoin_twist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39; (functor_trijoin f g h x) =
trijoin_rec
  (trijoinrecdata_twist B A C (TriJoin B&#39; A&#39; C&#39;)
     (trijoinrecdata_tricomp
        (trijoinrecdata_trijoin B&#39; A&#39; C&#39;) g f h)) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">napply trijoin_rec_functor_trijoin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And now a version using [functor_join]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7e"><span class="kn">Definition</span> <span class="nf">trijoin_twist_nat</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : trijoin_twist A&#39; B&#39; C&#39; o functor_join f (functor_join g h)
    == functor_join g (functor_join f h) o trijoin_twist A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39;
o functor_join f (functor_join g h) ==
functor_join g (functor_join f h)
o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk7f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39;
o functor_join f (functor_join g h) ==
functor_join g (functor_join f h)
o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk80"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39;
  (functor_join f (functor_join g h) x) =
functor_join g (functor_join f h)
  (trijoin_twist A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk81">lhs nrefine (ap _ (functor_trijoin_as_functor_join f g h x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39; (functor_trijoin f g h x) =
functor_join g (functor_join f h)
  (trijoin_twist A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk82">rhs napply functor_trijoin_as_functor_join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; B&#39; C&#39; (functor_trijoin f g h x) =
functor_trijoin g f h (trijoin_twist A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_twist_nat&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Naturality of [trijoin_id_sym] *)</span>

<span class="sd">(** Naturality of [trijoin_id_sym], using [functor_join].  In this case, it&#39;s easier to do this version first. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk83"><span class="kn">Definition</span> <span class="nf">trijoin_id_sym_nat</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : trijoin_id_sym A&#39; B&#39; C&#39; o functor_join f (functor_join g h)
    == functor_join f (functor_join h g) o trijoin_id_sym A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39;
o functor_join f (functor_join g h) ==
functor_join f (functor_join h g)
o trijoin_id_sym A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk84"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39;
o functor_join f (functor_join g h) ==
functor_join f (functor_join h g)
o trijoin_id_sym A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk85"><span class="nb">intro</span> x; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap (join_sym B&#39; C&#39;)
  (functor_join f (functor_join g h) x) =
functor_join f (functor_join h g)
  (functor_join idmap (join_sym B C) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk86">lhs_V napply functor_join_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x)
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   join_sym B&#39; C&#39; (functor_join g h x)) x =
functor_join f (functor_join h g)
  (functor_join idmap (join_sym B C) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk87">rhs_V napply functor_join_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x)
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   join_sym B&#39; C&#39; (functor_join g h x)) x =
functor_join (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x)
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   functor_join h g (join_sym B C x)) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk88"><span class="nb">apply</span> functor2_join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x) == (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk89" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk89"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
 join_sym B&#39; C&#39; (functor_join g h x)) ==
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; functor_join h g (join_sym B C x))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x) == (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
 join_sym B&#39; C&#39; (functor_join g h x)) ==
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; functor_join h g (join_sym B C x))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_sym_nat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Naturality of [trijoin_id_sym], using [functor_trijoin]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8c"><span class="kn">Definition</span> <span class="nf">trijoin_id_sym_nat&#39;</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : trijoin_id_sym A&#39; B&#39; C&#39; o functor_trijoin f g h
    == functor_trijoin f h g o trijoin_id_sym A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39; o functor_trijoin f g h ==
functor_trijoin f h g o trijoin_id_sym A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39; o functor_trijoin f g h ==
functor_trijoin f h g o trijoin_id_sym A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8e"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39; (functor_trijoin f g h x) =
functor_trijoin f h g (trijoin_id_sym A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk8f">lhs_V nrefine (ap _ (functor_trijoin_as_functor_join f g h x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39;
  (functor_join f (functor_join g h) x) =
functor_trijoin f h g (trijoin_id_sym A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk90">rhs_V napply functor_trijoin_as_functor_join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39;
  (functor_join f (functor_join g h) x) =
functor_join f (functor_join h g)
  (trijoin_id_sym A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_id_sym_nat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Naturality of [join_assoc] *)</span>

<span class="sd">(** Since [join_assoc] is a composite of [join_sym], [trijoin_twist] and [trijoin_id_sym], we just use their naturality. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk91"><span class="kn">Definition</span> <span class="nf">join_assoc_nat</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : join_assoc A&#39; B&#39; C&#39; o functor_join f (functor_join g h)
    == functor_join (functor_join f g) h o join_assoc A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_assoc A&#39; B&#39; C&#39;
o functor_join f (functor_join g h) ==
functor_join (functor_join f g) h o join_assoc A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk92"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_assoc A&#39; B&#39; C&#39;
o functor_join f (functor_join g h) ==
functor_join (functor_join f g) h o join_assoc A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* We&#39;ll work from right to left, as it is easier to work near the head of a term. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk93"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_assoc A&#39; B&#39; C&#39;
  (functor_join f (functor_join g h) x) =
functor_join (functor_join f g) h (join_assoc A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk94"><span class="nb">unfold</span> join_assoc; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym C&#39; (Join A&#39; B&#39;)
  (trijoin_twist A&#39; C&#39; B&#39;
     (trijoin_id_sym A&#39; B&#39; C&#39;
        (functor_join f (functor_join g h) x))) =
functor_join (functor_join f g) h
  (join_sym C (Join A B)
     (trijoin_twist A C B (trijoin_id_sym A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* First we pass the [functor_joins]s through the outer [join_sym]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk95">rhs_V napply join_sym_nat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym C&#39; (Join A&#39; B&#39;)
  (trijoin_twist A&#39; C&#39; B&#39;
     (trijoin_id_sym A&#39; B&#39; C&#39;
        (functor_join f (functor_join g h) x))) =
join_sym C&#39; (Join A&#39; B&#39;)
  (functor_join h (functor_join f g)
     (trijoin_twist A C B (trijoin_id_sym A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Strip off the outer [join_sym]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk96"><span class="nb">apply</span> (ap _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; C&#39; B&#39;
  (trijoin_id_sym A&#39; B&#39; C&#39;
     (functor_join f (functor_join g h) x)) =
functor_join h (functor_join f g)
  (trijoin_twist A C B (trijoin_id_sym A B C x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Next we pass the [functor_join]s through [trijoin_twist]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk97">rhs_V napply trijoin_twist_nat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A&#39; C&#39; B&#39;
  (trijoin_id_sym A&#39; B&#39; C&#39;
     (functor_join f (functor_join g h) x)) =
trijoin_twist A&#39; C&#39; B&#39;
  (functor_join f (functor_join h g)
     (trijoin_id_sym A B C x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Strip off the [trijoin_twist]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk98"><span class="nb">apply</span> (ap _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A&#39; B&#39; C&#39;
  (functor_join f (functor_join g h) x) =
functor_join f (functor_join h g)
  (trijoin_id_sym A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Finally, we pass the [functor_join]s through [trijoin_id_sym]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_id_sym_nat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk99"><span class="kn">Instance</span> <span class="nf">join_associator</span> : Associator Join.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Associator Join</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk9a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Associator Join</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk9b">snapply Build_Associator; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span>,
Join a (Join b c) $&lt;~&gt; Join (Join a b) c</div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural
  (<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
   Join (fst (fst pat))
     (Join (snd (fst pat)) (snd pat)))
  (<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
   Join (Join (fst (fst pat)) (snd (fst pat)))
     (snd pat))
  (<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
   <span class="nl">?Goal</span> (fst (fst pat)) (snd (fst pat)) (snd pat))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk9c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span>,
Join a (Join b c) $&lt;~&gt; Join (Join a b) c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> join_assoc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk9d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural
  (<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
   Join (fst (fst pat))
     (Join (snd (fst pat)) (snd pat)))
  (<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
   Join (Join (fst (fst pat)) (snd (fst pat)))
     (snd pat))
  (<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
   join_assoc (fst (fst pat)) (snd (fst pat))
     (snd pat))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk9e">snapply Build_Is1Natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">a&#39;</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; a&#39;),
(<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
 equiv_fun
   (join_assoc (fst (fst pat)) (snd (fst pat))
      (snd pat))) a&#39; $o
fmap
  (uncurry
     (uncurry (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : <span class="kt">Type</span> =&gt; Join x (Join y z))))
  f $==
fmap
  (uncurry
     (uncurry (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : <span class="kt">Type</span> =&gt; Join (Join x y) z)))
  f $o
(<span class="kr">fun</span> <span class="nv">pat</span> : <span class="kt">Type</span> * <span class="kt">Type</span> * <span class="kt">Type</span> =&gt;
 equiv_fun
   (join_assoc (fst (fst pat)) (snd (fst pat))
      (snd pat))) a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk9f"><span class="nb">intros</span> [[A B] C] [[A&#39; B&#39;] C&#39;] [[f g] h]; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>fst (fst (A, B, C)) $-&gt; fst (fst (A&#39;, B&#39;, C&#39;))</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>snd (fst (A, B, C)) $-&gt; snd (fst (A&#39;, B&#39;, C&#39;))</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>snd (A, B, C) $-&gt; snd (A&#39;, B&#39;, C&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : Join A (Join B C) =&gt;
 join_assoc A&#39; B&#39; C&#39;
   (functor_join f (functor_join g h) x)) ==
(<span class="kr">fun</span> <span class="nv">x</span> : Join A (Join B C) =&gt;
 functor_join (functor_join f g) h
   (join_assoc A B C x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_assoc_nat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The Triangle Law *)</span>

<span class="sd">(** The unitors were defined in Join/Core.v, since they do not require associativity. *)</span>

<span class="sd">(** Here&#39;s a version of the triangle law expressed using [trijoin_twist] instead of [join_assoc], and only using the right unitor. Since the left unitor is defined using [join_sym], the usual triangle law follows. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka0"><span class="kn">Definition</span> <span class="nf">join_trianglelaw&#39;</span> <span class="nv">A</span> <span class="nv">B</span>
  : join_sym B A o functor_join idmap (equiv_join_empty_right A) o trijoin_twist A B Empty
    == functor_join idmap (equiv_join_empty_right B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym B A
o functor_join idmap (equiv_join_empty_right A)
o trijoin_twist A B Empty ==
functor_join idmap (equiv_join_empty_right B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym B A
o functor_join idmap (equiv_join_empty_right A)
o trijoin_twist A B Empty ==
functor_join idmap (equiv_join_empty_right B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* A direct proof with [Join_ind] three times is not hard, but the path algebra is slightly simpler if we manipulate things ahead of time using [functor_join_join_rec] and [trijoin_rec_trijoin_twist]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka2"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B Empty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym B A
  (functor_join idmap (equiv_join_empty_right A)
     (trijoin_twist A B Empty x)) =
functor_join idmap (equiv_join_empty_right B) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka3">rapply moveR_equiv_M.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B Empty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap (equiv_join_empty_right A)
  (trijoin_twist A B Empty x) =
(join_sym B A)^-<span class="mi">1</span>
  (functor_join idmap (equiv_join_empty_right B) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka4"><span class="nb">unfold</span> equiv_join_empty_right <span class="nb">at</span> <span class="mi">1</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B Empty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap
  (join_rec
     {|
       jl := idmap;
       jr :=
         <span class="kr">fun</span> <span class="nv">H</span> : Empty =&gt;
         Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) H;
       jg :=
         <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Empty) =&gt;
         Empty_rect
           (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
            a = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) b
     |}) (trijoin_twist A B Empty x) =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka5">lhs napply functor_join_join_rec; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B Empty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinl x;
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinr x;
    j3 :=
      <span class="kr">fun</span> <span class="nv">x</span> : Empty =&gt;
      joinr (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) x);
    j12 := <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) =&gt; jglue a b;
    j13 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : Empty) =&gt;
      jglue a (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c);
    j23 :=
      <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
      ap joinr
        (Empty_rect
           (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
            b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
      triangle_v a
        (Empty_rect
           (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
            b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) c)
  |} (trijoin_twist A B Empty x) =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka6">lhs napply trijoin_rec_trijoin_twist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B Empty</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_twist B A Empty (Join B A)
     {|
       j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinl x;
       j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinr x;
       j3 :=
         <span class="kr">fun</span> <span class="nv">x</span> : Empty =&gt;
         joinr (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) x);
       j12 := <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) =&gt; jglue a b;
       j13 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : Empty) =&gt;
         jglue a (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c);
       j23 :=
         <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
         ap joinr
           (Empty_rect
              (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
               b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0)
              c);
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
         triangle_v a
           (Empty_rect
              (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
               b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0)
              c)
     |}) x =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka7"><span class="nb">revert</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : TriJoin A B Empty,
trijoin_rec
  (trijoinrecdata_twist B A Empty (Join B A)
     {|
       j1 := <span class="kr">fun</span> <span class="nv">x0</span> : B =&gt; joinl x0;
       j2 := <span class="kr">fun</span> <span class="nv">x0</span> : A =&gt; joinr x0;
       j3 :=
         <span class="kr">fun</span> <span class="nv">x0</span> : Empty =&gt;
         joinr (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) x0);
       j12 := <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) =&gt; jglue a b;
       j13 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : Empty) =&gt;
         jglue a (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c);
       j23 :=
         <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
         ap joinr
           (Empty_rect
              (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
               b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0)
              c);
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
         triangle_v a
           (Empty_rect
              (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
               b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0)
              c)
     |}) x =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka8"><span class="nb">apply</span> moveR_trijoin_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_twist B A Empty (Join B A)
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinl x;
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinr x;
    j3 :=
      <span class="kr">fun</span> <span class="nv">x</span> : Empty =&gt;
      joinr (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) x);
    j12 := <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) =&gt; jglue a b;
    j13 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">c</span> : Empty) =&gt;
      jglue a (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c);
    j23 :=
      <span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
      ap joinr
        (Empty_rect
           (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
            b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : A) (<span class="nv">c</span> : Empty) =&gt;
      triangle_v a
        (Empty_rect
           (<span class="kr">fun</span> <span class="nv">b0</span> : Empty =&gt;
            b = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b0) c)
  |} $==
trijoin_rec_inv
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chka9">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinr a =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join1 a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkaa" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkaa"><hr></label><div class="goal-conclusion">joinl b =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join2 b))</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkab" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Empty</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkab"><hr></label><div class="goal-conclusion">joinr (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c) =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join3 c))</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkac" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkac"><hr></label><div class="goal-conclusion">(jglue b a)^ @ <span class="nl">?Goal0</span> =
<span class="nl">?Goal</span> @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join12 a b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Empty</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkad"><hr></label><div class="goal-conclusion">ap joinr
  (Empty_rect
     (<span class="kr">fun</span> <span class="nv">b</span> : Empty =&gt;
      a = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b) c) @
<span class="nl">?Goal1</span> =
<span class="nl">?Goal</span> @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join13 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Empty</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkae"><hr></label><div class="goal-conclusion">jglue b (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c) @ <span class="nl">?Goal1</span> =
<span class="nl">?Goal0</span> @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join23 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkaf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Empty</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkaf"><hr></label><div class="goal-conclusion">prism
  (moveR_Vp
     (jglue b (Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) c))
     (ap joinr
        (Empty_rect
           (<span class="kr">fun</span> <span class="nv">b</span> : Empty =&gt;
            a = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b) c))
     (jglue b a)
     (triangle_v b
        (Empty_rect
           (<span class="kr">fun</span> <span class="nv">b</span> : Empty =&gt;
            a = Empty_rect (<span class="kr">fun</span> <span class="nv">_</span> : Empty =&gt; A) b) c))^)
  (ap_triangle
     (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
      join_sym A B
        (functor_join idmap (equiv_join_empty_right B)
           x)) (join123 a b c)) <span class="nl">?Goal2</span> <span class="nl">?Goal3</span> <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb0"><span class="mi">3</span>, <span class="mi">5</span>, <span class="mi">6</span>, <span class="mi">7</span>: <span class="bp">by</span> <span class="nb">destruct</span> c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinr a =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join1 a))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkb1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkb1"><hr></label><div class="goal-conclusion">joinl b =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join2 b))</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkb2"><hr></label><div class="goal-conclusion">(jglue b a)^ @ <span class="nl">?Goal0</span> =
<span class="nl">?Goal</span> @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join12 a b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinr a =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join1 a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">joinl b =
join_sym A B
  (functor_join idmap (equiv_join_empty_right B)
     (join2 b))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(jglue b a)^ @ <span class="mi">1</span> =
<span class="mi">1</span> @
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join12 a b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb6"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(jglue b a)^ =
ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join12 a b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb7"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B Empty =&gt;
   join_sym A B
     (functor_join idmap (equiv_join_empty_right B) x))
  (join12 a b) = (jglue b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb8">lhs napply (ap_compose (functor_join idmap _) _ (join12 a b)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A B)
  (ap (functor_join idmap (equiv_join_empty_right B))
     (join12 a b)) = (jglue b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkb9">lhs napply ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join idmap (equiv_join_empty_right B))
  (join12 a b) = <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkba" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkba"><hr></label><div class="goal-conclusion">ap (join_sym A B) <span class="nl">?Goal</span> = (jglue b a)^</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkbb"><span class="mi">1</span>: <span class="nb">apply</span> functor_join_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_sym A B)
  (jglue (idmap a)
     (equiv_join_empty_right B (joinl b))) =
(jglue b a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_sym_beta_jglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkbc"><span class="kn">Definition</span> <span class="nf">join_trianglelaw</span> : TriangleIdentity Join Empty.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">TriangleIdentity Join Empty</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkbd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">TriangleIdentity Join Empty</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkbe"><span class="nb">intros</span> A B x; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join Empty B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join Empty B =&gt;
   equiv_join_empty_right B (join_sym Empty B x)) x =
functor_join (equiv_join_empty_right A) idmap
  (join_assoc A Empty B x)</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkbf">lhs napply (functor_join_compose idmap _ idmap _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join Empty B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap (equiv_join_empty_right B)
  (functor_join idmap (join_sym Empty B) x) =
functor_join (equiv_join_empty_right A) idmap
  (join_assoc A Empty B x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc0">lhs_V napply join_trianglelaw&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join Empty B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym B A
  (functor_join idmap (equiv_join_empty_right A)
     (trijoin_twist A B Empty
        (functor_join idmap (join_sym Empty B) x))) =
functor_join (equiv_join_empty_right A) idmap
  (join_assoc A Empty B x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc1"><span class="nb">unfold</span> join_assoc; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join Empty B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym B A
  (functor_join idmap (equiv_join_empty_right A)
     (trijoin_twist A B Empty
        (functor_join idmap (join_sym Empty B) x))) =
functor_join (equiv_join_empty_right A) idmap
  (join_sym B (Join A Empty)
     (trijoin_twist A B Empty
        (trijoin_id_sym A Empty B x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_sym_nat.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The hexagon axiom *)</span>

<span class="sd">(** For the hexagon, we&#39;ll need to know how to compose [trijoin_id_sym] with something of the form [trijoin_rec f]. For some reason, the proof is harder than it was for [trijoin_twist]. *)</span>

<span class="sd">(** This describes the transformation on [TriJoinRecData] corresponding to precomposition with [trijoin_id_sym], as in the next result. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc2"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_id_sym</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span>} (<span class="nv">f</span> : TriJoinRecData A B C P)
  : TriJoinRecData A C B P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecData A C B P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecData A C B P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc4">snapply (Build_TriJoinRecData (j1 f) (j3 f) (j2 f)); <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 f a = j3 f b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkc5"><hr></label><div class="goal-conclusion">j1 f a = j2 f c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkc6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkc6"><hr></label><div class="goal-conclusion">j3 f b = j2 f c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkc7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkc7"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) =&gt; <span class="nl">?Goal</span>) a b @
(<span class="kr">fun</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B) =&gt; <span class="nl">?Goal1</span>) b c =
(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B) =&gt; <span class="nl">?Goal0</span>) a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 f a = j3 f b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (j13 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkc9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 f a = j2 f c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (j12 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkca">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j3 f b = j2 f c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">symmetry</span>; <span class="nb">apply</span> (j23 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkcb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) =&gt; j13 f a b) a b @
(<span class="kr">fun</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B) =&gt; (j23 f c b)^) b c =
(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B) =&gt; j12 f a c) a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkcc"><span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f a b @ (j23 f c b)^ = j12 f a c</div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkcd"><span class="nb">apply</span> moveR_pV; <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f a c @ j23 f c b = j13 f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (j123 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This is analogous to [trijoin_rec_trijoin_twist] above, with [trijoin_twist] replaced by [trijoin_id_sym]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkce"><span class="kn">Definition</span> <span class="nf">trijoin_rec_id_sym</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span>} (<span class="nv">f</span> : TriJoinRecData A C B P)
  : trijoin_rec f o trijoin_id_sym A B C == trijoin_rec (trijoinrecdata_id_sym f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_id_sym A B C ==
trijoin_rec (trijoinrecdata_id_sym f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkcf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_id_sym A B C ==
trijoin_rec (trijoinrecdata_id_sym f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* First we use [functor_join_join_rec] on the LHS. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd0"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_id_sym A B C == <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkd1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkd1"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == trijoin_rec (trijoinrecdata_id_sym f)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd2">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f o trijoin_id_sym A B C == <span class="nl">?Goal</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd3"><span class="nb">refine</span> (cat_postwhisker (A:=<span class="kt">Type</span>) (trijoin_rec f) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym A B C $== <span class="nl">?Goal0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> functor_join_join_rec.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd4">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f $o
trijoin_rec
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (<span class="mi">1</span>%equiv x);
    j2 :=
      <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (jl (join_sym_recdata B C) x);
    j3 :=
      <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (jr (join_sym_recdata B C) x);
    j12 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt;
      jglue (<span class="mi">1</span>%equiv a) (jl (join_sym_recdata B C) b);
    j13 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt;
      jglue (<span class="mi">1</span>%equiv a) (jr (join_sym_recdata B C) c);
    j23 :=
      <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      ap joinr (jg (join_sym_recdata B C) b c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (<span class="mi">1</span>%equiv a)
        (jg (join_sym_recdata B C) b c)
  |} == trijoin_rec (trijoinrecdata_id_sym f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd5"><span class="nb">unfold</span> join_sym_recdata, jl, jr, jg.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f $o
trijoin_rec
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (<span class="mi">1</span>%equiv x);
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (joinr x);
    j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (joinl x);
    j12 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt;
      jglue (<span class="mi">1</span>%equiv a) (joinr b);
    j13 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt;
      jglue (<span class="mi">1</span>%equiv a) (joinl c);
    j23 :=
      <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jglue c b)^;
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (<span class="mi">1</span>%equiv a) (jglue c b)^
  |} == trijoin_rec (trijoinrecdata_id_sym f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* And now we use naturality of the second [trijoin_rec] on the LHS. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd6"><span class="nb">refine</span> ((trijoin_rec_nat A B C (trijoin_rec f) _)^$ $@ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_fun (trijoin_rec f)
     {|
       j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (<span class="mi">1</span>%equiv x);
       j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (joinr x);
       j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (joinl x);
       j12 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt;
         jglue (<span class="mi">1</span>%equiv a) (joinr b);
       j13 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt;
         jglue (<span class="mi">1</span>%equiv a) (joinl c);
       j23 :=
         <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jglue c b)^;
       j123 :=
         <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
         triangle_v (<span class="mi">1</span>%equiv a) (jglue c b)^
     |}) $== trijoin_rec (trijoinrecdata_id_sym f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd7"><span class="nb">refine</span> (fmap trijoin_rec _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_fun (trijoin_rec f)
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (<span class="mi">1</span>%equiv x);
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (joinr x);
    j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (joinl x);
    j12 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt;
      jglue (<span class="mi">1</span>%equiv a) (joinr b);
    j13 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt;
      jglue (<span class="mi">1</span>%equiv a) (joinl c);
    j23 :=
      <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jglue c b)^;
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (<span class="mi">1</span>%equiv a) (jglue c b)^
  |} $-&gt; trijoinrecdata_id_sym f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Finally, we provide the needed [TriJoinRecPath]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkd8">bundle_trijoinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (jglue a (joinr b)) = j13 f a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkd9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkd9"><hr></label><div class="goal-conclusion">ap (trijoin_rec f) (jglue a (joinl c)) = j12 f a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkda" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkda"><hr></label><div class="goal-conclusion">ap (trijoin_rec f) (ap joinr (jglue c b)^) =
(j23 f c b)^</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chkdb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chkdb"><hr></label><div class="goal-conclusion">prism&#39;
  (ap_triangle (trijoin_rec f)
     (triangle_v a (jglue c b)^))
  (moveR_pV (j23 f c b) (j12 f a c) (j13 f a b)
     (j123 f a c b)^) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkdc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (jglue a (joinr b)) = j13 f a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta_join13.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkdd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (jglue a (joinl c)) = j12 f a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta_join12.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkde">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (ap joinr (jglue c b)^) =
(j23 f c b)^</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkdf">lhs <span class="nb">refine</span> (ap _ (ap_V _ _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (ap joinr (jglue c b))^ =
(j23 f c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke0">lhs <span class="nb">refine</span> (ap_V (trijoin_rec f) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap (trijoin_rec f) (ap joinr (jglue c b)))^ =
(j23 f c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke1"><span class="nb">apply</span> (ap inverse).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (ap joinr (jglue c b)) = j23 f c b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta_join23.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (ap_triangle (trijoin_rec f)
     (triangle_v a (jglue c b)^))
  (moveR_pV (j23 f c b) (j12 f a c) (j13 f a b)
     (j123 f a c b)^) (trijoin_rec_beta_join13 f a b)
  (trijoin_rec_beta_join12 f a c)
  (ap (ap (trijoin_rec f)) (ap_V joinr (jglue c b)) @
   (ap_V (trijoin_rec f) (ap joinr (jglue c b)) @
    ap inverse (trijoin_rec_beta_join23 f c b)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke3"><span class="nb">unfold</span> prism&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (trijoin_rec f)
  (triangle_v a (jglue c b)^) @
trijoin_rec_beta_join12 f a c =
(trijoin_rec_beta_join13 f a b @@
 (ap (ap (trijoin_rec f)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f) (ap joinr (jglue c b)) @
   ap inverse (trijoin_rec_beta_join23 f c b)))) @
moveR_pV (j23 f c b) (j12 f a c) (j13 f a b)
  (j123 f a c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke4"><span class="nb">rewrite</span> ap_trijoin_V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f) (join23 c b))
   (ap (trijoin_rec f) (join12 a c))
   (ap (trijoin_rec f) (join13 a b))
   (ap_trijoin (trijoin_rec f) a c b)^) @
trijoin_rec_beta_join12 f a c =
(trijoin_rec_beta_join13 f a b @@
 (ap (ap (trijoin_rec f)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f) (ap joinr (jglue c b)) @
   ap inverse (trijoin_rec_beta_join23 f c b)))) @
moveR_pV (j23 f c b) (j12 f a c) (j13 f a b)
  (j123 f a c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke5"><span class="nb">rewrite</span> trijoin_rec_beta_join123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f) (join23 c b))
   (ap (trijoin_rec f) (join12 a c))
   (ap (trijoin_rec f) (join13 a b))
   (((trijoin_rec_beta_join12 f a c @@
      trijoin_rec_beta_join23 f c b) @ j123 f a c b) @
    (trijoin_rec_beta_join13 f a b)^)^) @
trijoin_rec_beta_join12 f a c =
(trijoin_rec_beta_join13 f a b @@
 (ap (ap (trijoin_rec f)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f) (ap joinr (jglue c b)) @
   ap inverse (trijoin_rec_beta_join23 f c b)))) @
moveR_pV (j23 f c b) (j12 f a c) (j13 f a b)
  (j123 f a c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke6"><span class="nb">set</span> (f&#39; := f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>f</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@
      trijoin_rec_beta_join23 f&#39; c b) @ j123 f&#39; a c b) @
    (trijoin_rec_beta_join13 f&#39; a b)^)^) @
trijoin_rec_beta_join12 f&#39; a c =
(trijoin_rec_beta_join13 f&#39; a b @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse (trijoin_rec_beta_join23 f&#39; c b)))) @
moveR_pV (j23 f&#39; c b) (j12 f&#39; a c) (j13 f&#39; a b)
  (j123 f&#39; a c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke7"><span class="nb">destruct</span> f <span class="kr">as</span> [f1 f2 f3 f12 f13 f23 f123]; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@
      trijoin_rec_beta_join23 f&#39; c b) @ f123 a c b) @
    (trijoin_rec_beta_join13 f&#39; a b)^)^) @
trijoin_rec_beta_join12 f&#39; a c =
(trijoin_rec_beta_join13 f&#39; a b @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse (trijoin_rec_beta_join23 f&#39; c b)))) @
moveR_pV (f23 c b) (f12 a c) (f13 a b) (f123 a c b)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke8"><span class="nb">generalize</span> (f123 a c b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">p</span> : f12 a c @ f23 c b = f13 a b,
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@
      trijoin_rec_beta_join23 f&#39; c b) @ p) @
    (trijoin_rec_beta_join13 f&#39; a b)^)^) @
trijoin_rec_beta_join12 f&#39; a c =
(trijoin_rec_beta_join13 f&#39; a b @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse (trijoin_rec_beta_join23 f&#39; c b)))) @
moveR_pV (f23 c b) (f12 a c) (f13 a b) p^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chke9"><span class="nb">generalize</span> (trijoin_rec_beta_join23 f&#39; c b); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
(<span class="nv">p</span> : ap (trijoin_rec f&#39;) (join23 c b) = f23 c b)
(<span class="nv">p0</span> : f12 a c @ f23 c b = f13 a b),
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@ p) @ p0) @
    (trijoin_rec_beta_join13 f&#39; a b)^)^) @
trijoin_rec_beta_join12 f&#39; a c =
(trijoin_rec_beta_join13 f&#39; a b @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse p))) @
moveR_pV (f23 c b) (f12 a c) (f13 a b) p0^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkea"><span class="nb">generalize</span> (f23 c b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">p</span> : f2 c = f3 b)
(<span class="nv">p0</span> : ap (trijoin_rec f&#39;) (join23 c b) = p)
(<span class="nv">p1</span> : f12 a c @ p = f13 a b),
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@ p0) @ p1) @
    (trijoin_rec_beta_join13 f&#39; a b)^)^) @
trijoin_rec_beta_join12 f&#39; a c =
(trijoin_rec_beta_join13 f&#39; a b @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse p0))) @
moveR_pV p (f12 a c) (f13 a b) p1^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkeb"><span class="nb">generalize</span> (trijoin_rec_beta_join13 f&#39; a b); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
(<span class="nv">p</span> : ap (trijoin_rec f&#39;) (join13 a b) = f13 a b)
(<span class="nv">p0</span> : f2 c = f3 b)
(<span class="nv">p1</span> : ap (trijoin_rec f&#39;) (join23 c b) = p0)
(<span class="nv">p2</span> : f12 a c @ p0 = f13 a b),
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@ p1) @ p2) @ p^)^) @
trijoin_rec_beta_join12 f&#39; a c =
(p @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse p1))) @
moveR_pV p0 (f12 a c) (f13 a b) p2^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkec"><span class="nb">generalize</span> (f13 a b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">p</span> : f1 a = f3 b)
(<span class="nv">p0</span> : ap (trijoin_rec f&#39;) (join13 a b) = p)
(<span class="nv">p1</span> : f2 c = f3 b)
(<span class="nv">p2</span> : ap (trijoin_rec f&#39;) (join23 c b) = p1)
(<span class="nv">p3</span> : f12 a c @ p1 = p),
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((trijoin_rec_beta_join12 f&#39; a c @@ p2) @ p3) @
    p0^)^) @ trijoin_rec_beta_join12 f&#39; a c =
(p0 @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse p2))) @ moveR_pV p1 (f12 a c) p p3^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chked"><span class="nb">generalize</span> (trijoin_rec_beta_join12 f&#39; a c); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
(<span class="nv">p</span> : ap (trijoin_rec f&#39;) (join12 a c) = f12 a c)
(<span class="nv">p0</span> : f1 a = f3 b)
(<span class="nv">p1</span> : ap (trijoin_rec f&#39;) (join13 a b) = p0)
(<span class="nv">p2</span> : f2 c = f3 b)
(<span class="nv">p3</span> : ap (trijoin_rec f&#39;) (join23 c b) = p2)
(<span class="nv">p4</span> : f12 a c @ p2 = p0),
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((p @@ p3) @ p4) @ p1^)^) @ p =
(p1 @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse p3))) @ moveR_pV p2 (f12 a c) p0 p4^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkee"><span class="nb">generalize</span> (f12 a c); <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">p</span> : f1 a = f2 c)
(<span class="nv">p0</span> : ap (trijoin_rec f&#39;) (join12 a c) = p)
(<span class="nv">p1</span> : f1 a = f3 b)
(<span class="nv">p2</span> : ap (trijoin_rec f&#39;) (join13 a b) = p1)
(<span class="nv">p3</span> : f2 c = f3 b)
(<span class="nv">p4</span> : ap (trijoin_rec f&#39;) (join23 c b) = p3)
(<span class="nv">p5</span> : p @ p3 = p1),
((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((p0 @@ p4) @ p5) @ p2^)^) @ p0 =
(p2 @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse p4))) @ moveR_pV p3 p p1 p5^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkef"><span class="nb">intros</span> p12 beta12 p13 beta13 p23 beta23 p123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br><span><var>p12</var><span class="hyp-type"><b>: </b><span>f1 a = f2 c</span></span></span><br><span><var>beta12</var><span class="hyp-type"><b>: </b><span>ap (trijoin_rec f&#39;) (join12 a c) = p12</span></span></span><br><span><var>p13</var><span class="hyp-type"><b>: </b><span>f1 a = f3 b</span></span></span><br><span><var>beta13</var><span class="hyp-type"><b>: </b><span>ap (trijoin_rec f&#39;) (join13 a b) = p13</span></span></span><br><span><var>p23</var><span class="hyp-type"><b>: </b><span>f2 c = f3 b</span></span></span><br><span><var>beta23</var><span class="hyp-type"><b>: </b><span>ap (trijoin_rec f&#39;) (join23 c b) = p23</span></span></span><br><span><var>p123</var><span class="hyp-type"><b>: </b><span>p12 @ p23 = p13</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   (((beta12 @@ beta23) @ p123) @ beta13^)^) @ beta12 =
(beta13 @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @
   ap inverse beta23))) @ 
moveR_pV p23 p12 p13 p123^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf0"><span class="nb">induction</span> beta12, beta13, beta23; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br><span><var>p123</var><span class="hyp-type"><b>: </b><span>ap (trijoin_rec f&#39;) (join12 a c) @
ap (trijoin_rec f&#39;) (join23 c b) =
ap (trijoin_rec f&#39;) (join13 a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@
  (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
   ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
 moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
   (ap (trijoin_rec f&#39;) (join12 a c))
   (ap (trijoin_rec f&#39;) (join13 a b))
   ((<span class="mi">1</span> @ p123) @ <span class="mi">1</span>)^) @ <span class="mi">1</span> =
(<span class="mi">1</span> @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  (ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)) @ <span class="mi">1</span>))) @
moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
  (ap (trijoin_rec f&#39;) (join12 a c))
  (ap (trijoin_rec f&#39;) (join13 a b)) p123^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf1"><span class="nb">rewrite</span> <span class="mi">3</span> concat_p1, concat_1p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>f2</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f3</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>f12</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C), f1 a = f2 b</span></span></span><br><span><var>f13</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : B), f1 a = f3 c</span></span></span><br><span><var>f23</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : C) (<span class="nv">c</span> : B), f2 b = f3 c</span></span></span><br><span><var>f123</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : C) (<span class="nv">c</span> : B),
f12 a b @ f23 b c = f13 a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>{|
  j1 := f1;
  j2 := f2;
  j3 := f3;
  j12 := f12;
  j13 := f13;
  j23 := f23;
  j123 := f123
|}</span></span><span class="hyp-type"><b>: </b><span>TriJoinRecData A C B P</span></span></span></span><br><span><var>p123</var><span class="hyp-type"><b>: </b><span>ap (trijoin_rec f&#39;) (join12 a c) @
ap (trijoin_rec f&#39;) (join23 c b) =
ap (trijoin_rec f&#39;) (join13 a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
  (ap (trijoin_rec f&#39;) (join12 a c))
  (ap (trijoin_rec f&#39;) (join13 a b)) p123^ =
(<span class="mi">1</span> @@
 (ap (ap (trijoin_rec f&#39;)) (ap_V joinr (jglue c b)) @
  ap_V (trijoin_rec f&#39;) (ap joinr (jglue c b)))) @
moveR_pV (ap (trijoin_rec f&#39;) (join23 c b))
  (ap (trijoin_rec f&#39;) (join12 a c))
  (ap (trijoin_rec f&#39;) (join13 a b)) p123^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Here is our first hexagon law.  This is not the usual hexagon axiom, but we will see that it is equivalent, and is itself useful.  This law states that the following diagram commutes, where we write [*] for [Join]:</span>
<span class="sd">&lt;&lt;</span>
<span class="sd">    A * (B * C) -&gt; A * (C * B) -&gt; C * (A * B)</span>
<span class="sd">        |                            |</span>
<span class="sd">        v                            v</span>
<span class="sd">    B * (A * C) -&gt; B * (C * A) -&gt; C * (B * A)</span>
<span class="sd">&gt;&gt;</span>
<span class="sd">Here every arrow is either [trijoin_twist _ _ _] or [trijoin_id_sym _ _ _], and they alternate as you go around.  These correspond to the permutations (1,2) and (2,3) in the symmetric group on three letters.  We already know that they are their own inverses, i.e., they have order two.  The above says that the composite (1,2)(2,3) has order three.  These are the only relations in this presentation of [S_3].  Note also that every object in this diagram is parenthesized in the same way.  That will be important in our proof. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf2"><span class="kn">Definition</span> <span class="nf">hexagon_join_twist_sym</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>
  : trijoin_id_sym C A B o trijoin_twist A C B o trijoin_id_sym A B C
    == trijoin_twist B C A o trijoin_id_sym B A C o trijoin_twist A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym C A B o trijoin_twist A C B
o trijoin_id_sym A B C ==
trijoin_twist B C A o trijoin_id_sym B A C
o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_id_sym C A B o trijoin_twist A C B
o trijoin_id_sym A B C ==
trijoin_twist B C A o trijoin_id_sym B A C
o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* It&#39;s enough to show that both sides induces the same natural transformation under the covariant Yoneda embedding, i.e., after postcomposing with a general function [f]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf4">tapply (opyon_faithful_0gpd (A:=<span class="kt">Type</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">c</span> : <span class="kt">Type</span>) (<span class="nv">h</span> : TriJoin C B A $-&gt; c),
h $o
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 trijoin_id_sym C A B
   (trijoin_twist A C B (trijoin_id_sym A B C x))) $==
h $o
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 trijoin_twist B C A
   (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf5"><span class="nb">intros</span> P f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin C B A $-&gt; P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f $o
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 trijoin_id_sym C A B
   (trijoin_twist A C B (trijoin_id_sym A B C x))) $==
f $o
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 trijoin_twist B C A
   (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* We replace [f] by [trijoin_rec t] for generic [t].  This will allow induction later. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf6"><span class="nb">pose proof</span> (p := issect_trijoin_rec_inv f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin C B A $-&gt; P</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>trijoin_rec (trijoin_rec_inv f) $== f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f $o
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 trijoin_id_sym C A B
   (trijoin_twist A C B (trijoin_id_sym A B C x))) $==
f $o
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 trijoin_twist B C A
   (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf7"><span class="nb">intro</span> x; <span class="nb">refine</span> ((p _)^ @ _ @ p _); <span class="nb">clear</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin C B A $-&gt; P</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec (trijoin_rec_inv f)
  (trijoin_id_sym C A B
     (trijoin_twist A C B (trijoin_id_sym A B C x))) =
trijoin_rec (trijoin_rec_inv f)
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf8"><span class="nb">generalize</span> (trijoin_rec_inv f) <span class="kr">as</span> t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin C B A $-&gt; P</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : TriJoinRecData C B A P,
trijoin_rec t
  (trijoin_id_sym C A B
     (trijoin_twist A C B (trijoin_id_sym A B C x))) =
trijoin_rec t
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkf9"><span class="nb">intro</span> t; <span class="nb">clear</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec t
  (trijoin_id_sym C A B
     (trijoin_twist A C B (trijoin_id_sym A B C x))) =
trijoin_rec t
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Now we use how these various maps postcompose with [trijoin_rec foo]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkfa">lhs rapply trijoin_rec_id_sym.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec (trijoinrecdata_id_sym t)
  (trijoin_twist A C B (trijoin_id_sym A B C x)) =
trijoin_rec t
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkfb">lhs rapply trijoin_rec_trijoin_twist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_twist C A B P
     (trijoinrecdata_id_sym t))
  (trijoin_id_sym A B C x) =
trijoin_rec t
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkfc">lhs rapply trijoin_rec_id_sym.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_id_sym
     (trijoinrecdata_twist C A B P
        (trijoinrecdata_id_sym t))) x =
trijoin_rec t
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkfd">rhs rapply trijoin_rec_trijoin_twist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_id_sym
     (trijoinrecdata_twist C A B P
        (trijoinrecdata_id_sym t))) x =
trijoin_rec (trijoinrecdata_twist C B A P t)
  (trijoin_id_sym B A C (trijoin_twist A B C x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkfe">rhs rapply trijoin_rec_id_sym.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_id_sym
     (trijoinrecdata_twist C A B P
        (trijoinrecdata_id_sym t))) x =
trijoin_rec
  (trijoinrecdata_id_sym
     (trijoinrecdata_twist C B A P t))
  (trijoin_twist A B C x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chkff">rhs rapply trijoin_rec_trijoin_twist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A B C</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_id_sym
     (trijoinrecdata_twist C A B P
        (trijoinrecdata_id_sym t))) x =
trijoin_rec
  (trijoinrecdata_twist B A C P
     (trijoinrecdata_id_sym
        (trijoinrecdata_twist C B A P t))) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk100"><span class="nb">revert</span> x; <span class="nb">refine</span> (fmap trijoin_rec _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_id_sym
  (trijoinrecdata_twist C A B P
     (trijoinrecdata_id_sym t)) $-&gt;
trijoinrecdata_twist B A C P
  (trijoinrecdata_id_sym
     (trijoinrecdata_twist C B A P t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk101">bundle_trijoinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(j23 t b a)^ = (j23 t b a)^</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk102" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk102"><hr></label><div class="goal-conclusion">(j13 t c a)^ = (j13 t c a)^</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk103" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk103"><hr></label><div class="goal-conclusion">(j12 t c b)^ = (j12 t c b)^</div></blockquote><input class="alectryon-extra-goal-toggle" id="joinassoc-v-chk104" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="joinassoc-v-chk104"><hr></label><div class="goal-conclusion">prism&#39;
  (moveR_pV (j12 t c b) (j13 t c a)^ (j23 t b a)^
     (moveR_Vp (j12 t c b) (j23 t b a)^ (j13 t c a)
        (moveR_pV (j23 t b a) (j12 t c b) (j13 t c a)
           (j123 t c b a)^)^)^)
  (moveR_Vp (j12 t c b)^ (j13 t c a)^ (j23 t b a)
     (moveR_pV (j13 t c a) (j12 t c b)^ (j23 t b a)
        (moveR_Vp (j13 t c a) (j23 t b a) (j12 t c b)
           (j123 t c b a)^)^)^) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk105"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>TriJoinRecData C B A P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (moveR_pV (j12 t c b) (j13 t c a)^ (j23 t b a)^
     (moveR_Vp (j12 t c b) (j23 t b a)^ (j13 t c a)
        (moveR_pV (j23 t b a) (j12 t c b) (j13 t c a)
           (j123 t c b a)^)^)^)
  (moveR_Vp (j12 t c b)^ (j13 t c a)^ (j23 t b a)
     (moveR_pV (j13 t c a) (j12 t c b)^ (j23 t b a)
        (moveR_Vp (j13 t c a) (j23 t b a) (j12 t c b)
           (j123 t c b a)^)^)^) <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind t c b a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Next we paste on a naturality square for [join_sym] on the right of the diagram:</span>
<span class="sd">&lt;&lt;</span>
<span class="sd">    A * (B * C) -&gt; A * (C * B) -&gt; C * (A * B) -&gt; (A * B) * C</span>
<span class="sd">        |                            |                |</span>
<span class="sd">        v                            v                v</span>
<span class="sd">    B * (A * C) -&gt; B * (C * A) -&gt; C * (B * A) -&gt; (B * A) * C</span>
<span class="sd">&gt;&gt;</span>
<span class="sd">The new horizontal maps are [join_sym _ _] and the new vertical map is [functor_join (join_sym A B) idmap]. This makes both horizontal composites definitionally equal to [join_assoc _ _ _], so the statement is about a square. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk106"><span class="kn">Definition</span> <span class="nf">square_join_sym_assoc_twist</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>
  : functor_join (join_sym A B) idmap o join_assoc A B C
    == join_assoc B A C o trijoin_twist A B C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (join_sym A B) idmap o join_assoc A B C ==
join_assoc B A C o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk107"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (join_sym A B) idmap o join_assoc A B C ==
join_assoc B A C o trijoin_twist A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk108"><span class="nb">unfold</span> join_assoc; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : Join A (Join B C) =&gt;
 functor_join (join_sym A B) idmap
   (join_sym C (Join A B)
      (trijoin_twist A C B (trijoin_id_sym A B C x)))) ==
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt;
 join_sym C (Join B A)
   (trijoin_twist B C A
      (trijoin_id_sym B A C (trijoin_twist A B C x))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk109"><span class="nb">intro</span> x; lhs_V rapply join_sym_nat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym C (Join B A)
  (functor_join idmap (join_sym A B)
     (trijoin_twist A C B (trijoin_id_sym A B C x))) =
join_sym C (Join B A)
  (trijoin_twist B C A
     (trijoin_id_sym B A C (trijoin_twist A B C x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10a"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>Join A (Join B C)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join idmap (join_sym A B)
  (trijoin_twist A C B (trijoin_id_sym A B C x)) =
trijoin_twist B C A
  (trijoin_id_sym B A C (trijoin_twist A B C x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> hexagon_join_twist_sym.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Finally, we paste on the defining square for [join_assoc] on the left to get the hexagon axiom for the symmetric monoidal structure:</span>
<span class="sd">&lt;&lt;</span>
<span class="sd">    A * (C * B) -&gt; A * (B * C) -&gt; (A * B) * C</span>
<span class="sd">         |              |              |</span>
<span class="sd">         v              v              v</span>
<span class="sd">    (A * C) * B -&gt; B * (A * C) -&gt; (B * A) * C</span>
<span class="sd">&gt;&gt;</span>
<span class="sd">The right-hand square is a horizontally-compressed version of the rectangle from the previous result, whose horizontal arrows are associativity. In the left-hand square, the new vertical map is [join_assoc A C B] and the horizontal maps are [trijoin_id_sym A C B] and [join_sym (Join A C) B]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10b"><span class="kn">Definition</span> <span class="nf">hexagon_join_assoc_sym</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>
  : functor_join (join_sym A B) idmap o join_assoc A B C o trijoin_id_sym A C B
    == join_assoc B A C o join_sym (Join A C) B o join_assoc A C B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (join_sym A B) idmap o join_assoc A B C
o trijoin_id_sym A C B ==
join_assoc B A C o join_sym (Join A C) B
o join_assoc A C B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (join_sym A B) idmap o join_assoc A B C
o trijoin_id_sym A C B ==
join_assoc B A C o join_sym (Join A C) B
o join_assoc A C B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10d"><span class="nb">intro</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A C B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join (join_sym A B) idmap
  (join_assoc A B C (trijoin_id_sym A C B x)) =
join_assoc B A C
  (join_sym (Join A C) B (join_assoc A C B x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10e"><span class="nb">refine</span> (square_join_sym_assoc_twist A B C _ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A C B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_assoc B A C
  (trijoin_twist A B C (trijoin_id_sym A C B x)) =
join_assoc B A C
  (join_sym (Join A C) B (join_assoc A C B x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk10f"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A C B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A B C (trijoin_id_sym A C B x) =
join_sym (Join A C) B (join_assoc A C B x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk110"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A C B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_twist A B C
  (functor_join idmap (join_sym C B) x) =
join_sym (Join A C) B
  (join_sym B (Join A C)
     (trijoin_twist A B C
        (functor_join idmap (join_sym C B) x)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="joinassoc-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="joinassoc-v-chk111"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>TriJoin A C B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">join_sym (Join A C) B
  (join_sym B (Join A C)
     (trijoin_twist A B C
        (functor_join idmap (join_sym C B) x))) =
trijoin_twist A B C
  (functor_join idmap (join_sym C B) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (eissect (equiv_join_sym B (Join A C)) _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span></span></pre>
</div>
</div></body>
</html>
