<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>Modality.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk0"><span class="kn">Require Import</span> HoTT.Basics HoTT.Types.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> HFiber Extensions Factorization Limits.Pullback.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Export</span> ReflectiveSubuniverse. <span class="c">(* [Export] because many of the lemmas and facts about reflective subuniverses are equally important for modalities. *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> path_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Modalities *)</span>

<span class="sd">(** ** Dependent eliminators *)</span>

<span class="sd">(** A dependent version of the reflection universal property.  For later use we generalize it to refer to different subuniverses in the reflection and the elimination target. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">ReflectsD</span>@{i} (O&#39; O : Subuniverse@{i}) (T : <span class="kt">Type</span>@{i})
      `{PreReflects@{i} O&#39; T} :=
{
  extendable_to_OO :
    <span class="kr">forall</span> (<span class="nv">Q</span> : O_reflector O&#39; T -&gt; <span class="kt">Type</span>@{i}) {<span class="nv">Q_inO</span> : <span class="kr">forall</span> <span class="nv">x</span>, In O (Q x)},
      ooExtendableAlong (to O&#39; T) Q
}.</span><span class="alectryon-wsp">  
</span></span><span class="alectryon-wsp">
<span class="sd">(** In particular, from this we get a dependent eliminator. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">OO_ind</span> {<span class="nv">O&#39;</span> : Subuniverse} (<span class="nv">O</span> : Subuniverse)
           {<span class="nv">A</span> : <span class="kt">Type</span>} `{ReflectsD O&#39; O A}
           (B : O_reflector O&#39; A -&gt; <span class="kt">Type</span>) {B_inO : <span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa)}
           (f : <span class="kr">forall</span> <span class="nv">a</span>, B (to O&#39; A a)) (oa : O_reflector O&#39; A)
  : B oa
  := (fst (extendable_to_OO B <span class="mi">1</span>%nat) f).<span class="mi">1</span> oa.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">OO_ind_beta</span> {<span class="nv">O&#39;</span> <span class="nv">O</span> : Subuniverse} {<span class="nv">A</span> : <span class="kt">Type</span>} `{ReflectsD O&#39; O A}
           (B : O_reflector O&#39; A -&gt; <span class="kt">Type</span>) {B_inO : <span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa)}
           (f : <span class="kr">forall</span> <span class="nv">a</span>, B (to O&#39; A a)) (a : A)
  : OO_ind O B f (to O&#39; A a) = f a
  := (fst (extendable_to_OO B <span class="mi">1</span>%nat) f).<span class="mi">2</span> a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Conversely, if [O] is closed under path-types, a dependent eliminator suffices to prove the whole dependent universal property. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1"><span class="kn">Definition</span> <span class="nf">reflectsD_from_OO_ind</span>@{i} {O&#39; O : Subuniverse@{i}}
           {A : <span class="kt">Type</span>@{i}} `{PreReflects O&#39; A}
           (OO_ind&#39; : <span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>@{i})
                             (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa))
                             (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, B (to O&#39; A a))
                             <span class="nv">oa</span>, B oa)
           (OO_ind_beta&#39; : <span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>@{i})
                             (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa))
                             (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, B (to O&#39; A a))
                             <span class="nv">a</span>, OO_ind&#39; B B_inO f (to O&#39; A a) = f a)
           (inO_paths&#39; : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>@{i}) (<span class="nv">B_inO</span> : In O B)
                      (<span class="nv">z</span> <span class="nv">z&#39;</span> : B), In O (z = z&#39;))
  : ReflectsD O&#39; O A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O&#39; O A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O&#39; O A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ooExtendableAlong (to O&#39; A) Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk4"><span class="nb">intros</span> Q Q_inO n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong n (to O&#39; A) Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5"><span class="nb">revert</span> Q Q_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk6">simple_induction n n IHn; <span class="nb">intros</span> Q Q_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong <span class="mi">0</span> (to O&#39; A) Q</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><label class="goal-separator" for="modality-v-chk7"><hr></label><div class="goal-conclusion">ExtendableAlong n.+<span class="mi">1</span> (to O&#39; A) Q</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8"><span class="mi">1</span>:<span class="bp">exact</span> tt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong n.+<span class="mi">1</span> (to O&#39; A) Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, Q (to O&#39; A a),
ExtensionAlong (to O&#39; A) Q g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><label class="goal-separator" for="modality-v-chka"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, Q b,
ExtendableAlong n (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, Q (to O&#39; A a),
ExtensionAlong (to O&#39; A) Q g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc"><span class="nb">intros</span> g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, Q (to O&#39; A a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) Q g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd"><span class="kr">exists</span> (<span class="nv">OO_ind&#39;</span> <span class="nv">Q</span> <span class="nv">_</span> <span class="nv">g</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, Q (to O&#39; A a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A, OO_ind&#39; Q Q_inO g (to O&#39; A x) = g x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">rapply OO_ind_beta&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, Q b,
ExtendableAlong n (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf"><span class="nb">intros</span> h k.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>OO_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa</span></span></span><br><span><var>OO_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
         In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a))
(<span class="nv">a</span> : A),
OO_ind&#39; B B_inO f (to O&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">Q</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)) -&gt;
ExtendableAlong n (to O&#39; A) Q</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (Q x)</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, Q b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtendableAlong n (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">rapply IHn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** In particular, this is the case if [O] is a reflective subuniverse. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">reflectsD_from_RSU</span> {<span class="nv">O&#39;</span> : Subuniverse} {<span class="nv">O</span> : ReflectiveSubuniverse}
           {<span class="nv">A</span> : <span class="kt">Type</span>} `{PreReflects O&#39; A}
           (OO_ind&#39; : <span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
                             (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa))
                             (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, B (to O&#39; A a))
                             <span class="nv">oa</span>, B oa)
           (OO_ind_beta&#39; : <span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
                             (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa))
                             (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, B (to O&#39; A a))
                             <span class="nv">a</span>, OO_ind&#39; B B_inO f (to O&#39; A a) = f a)
  : ReflectsD O&#39; O A
  := reflectsD_from_OO_ind OO_ind&#39; OO_ind_beta&#39; _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Of course, with funext this becomes an actual equivalence. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk10"><span class="kn">Definition</span> <span class="nf">isequiv_oD_to_O</span>
           {<span class="nv">fs</span> : Funext} (<span class="nv">O&#39;</span> <span class="nv">O</span> : Subuniverse) {<span class="nv">A</span> : <span class="kt">Type</span>} `{ReflectsD O&#39; O A}
           (B : O_reflector O&#39; A -&gt; <span class="kt">Type</span>) `{<span class="kr">forall</span> <span class="nv">a</span>, In O (B a)}
  : IsEquiv (<span class="kr">fun</span> (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">oa</span>, B oa) =&gt; h oD to O&#39; A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : O_reflector O&#39; A, In O (B a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv
  (<span class="kr">fun</span> <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa =&gt;
   h oD to O&#39; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk11"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : O_reflector O&#39; A, In O (B a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv
  (<span class="kr">fun</span> <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, B oa =&gt;
   h oD to O&#39; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> isequiv_ooextendable, extendable_to_OO; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** ** The strong order *)</span>

<span class="sd">(** Note the reversal of the order: [O1 &lt;&lt; O2] means that [O2] has dependent eliminators into [O1]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">O_strong_leq</span> (<span class="nv">O1</span> <span class="nv">O2</span> : ReflectiveSubuniverse)
  := reflectsD_strong_leq :: <span class="kr">forall</span> <span class="nv">A</span>, ReflectsD O2 O1 A.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Infix</span> <span class="s2">&quot;&lt;&lt;&quot;</span> := O_strong_leq : subuniverse_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Open Scope</span> subuniverse_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The strong order implies the weak order. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk12"><span class="kn">Instance</span> <span class="nf">O_leq_strong_leq</span> {<span class="nv">O1</span> <span class="nv">O2</span> : ReflectiveSubuniverse} `{O1 &lt;&lt; O2}
  : O1 &lt;= O2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;= O2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;= O2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk14"><span class="nb">intros</span> A A_inO1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO1</var><span class="hyp-type"><b>: </b><span>In O1 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O2 A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk15">srapply inO_to_O_retract.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO1</var><span class="hyp-type"><b>: </b><span>In O1 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O2 A -&gt; A</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO1</var><span class="hyp-type"><b>: </b><span>In O1 A</span></span></span><br></div><label class="goal-separator" for="modality-v-chk16"><hr></label><div class="goal-conclusion"><span class="nl">?mu</span> o to O2 A == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk17">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO1</var><span class="hyp-type"><b>: </b><span>In O1 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O2 A -&gt; A</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (OO_ind O1 (<span class="kr">fun</span> <span class="nv">_</span>:O2 A =&gt; A) idmap).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk18">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO1</var><span class="hyp-type"><b>: </b><span>In O1 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_ind O1 (<span class="kr">fun</span> <span class="nv">_</span> : O2 A =&gt; A) idmap o to O2 A == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk19"><span class="nb">intros</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO1</var><span class="hyp-type"><b>: </b><span>In O1 A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">OO_ind O1 (<span class="kr">fun</span> <span class="nv">_</span> : O2 A =&gt; A) idmap (to O2 A a) = a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">srapply OO_ind_beta.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The strong order is not obviously transitive, but it composes with the weak order on one side at least. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1a"><span class="kn">Definition</span> <span class="nf">O_strong_leq_trans_l</span> (<span class="nv">O1</span> <span class="nv">O2</span> <span class="nv">O3</span> : ReflectiveSubuniverse)
           `{O1 &lt;= O2} `{O2 &lt;&lt; O3}
  : O1 &lt;&lt; O3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;&lt; O3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O1 &lt;&lt; O3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1c"><span class="nb">intros</span> A; <span class="nb">constructor</span>; <span class="nb">intros</span> B B_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O3 A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A, In O1 (B x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (to O3 A) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1d"><span class="nb">apply</span> (extendable_to_OO (O := O2)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O3 A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A, In O1 (B x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A, In O2 (B x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1e"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2, O3</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>O1 &lt;= O2</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>O2 &lt;&lt; O3</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O3 A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O3 A, In O1 (B x)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector O3 A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O2 (B x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">srapply inO_leq; <span class="bp">exact</span> B_inO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** ** Modalities  *)</span>

<span class="sd">(** A modality is a reflective subuniverse with a dependent universal property with respect to itself. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="nf">IsModality</span> O := (O &lt;&lt; O).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** However, it&#39;s not clear what the best bundled definition of modality is.  The obvious one [{ O : ReflectiveSubuniverse &amp; IsModality O}] has the advantage that bundling a reflective subuniverse into a modality and then unbundling it is definitionally the identity; but it is redundant, since the dependent universal property implies the non-dependent one, and in practice most modalities are constructed directly with a dependent eliminator.  Thus, for now at least, we take the following definition, which in RSS is called a &quot;uniquely eliminating modality&quot;.  *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">Modality</span>@{i} := Build_Modality&#39;
{
  modality_subuniv : Subuniverse@{i} ;
  modality_prereflects : <span class="kr">forall</span> (<span class="nv">T</span> : <span class="kt">Type</span>@{i}),
      PreReflects modality_subuniv T ;
  modality_reflectsD :: <span class="kr">forall</span> (<span class="nv">T</span> : <span class="kt">Type</span>@{i}),
      ReflectsD modality_subuniv modality_subuniv T ;
}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We don&#39;t declare [modality_subuniv] as a coercion or [modality_prereflects] as a global instance, because we want them only to be found by way of the following &quot;unbundling&quot; coercion to reflective subuniverses. *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk1f"><span class="kn">Definition</span> <span class="nf">modality_to_reflective_subuniverse</span> (<span class="nv">O</span> : Modality@{i})
  : ReflectiveSubuniverse@{i}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectiveSubuniverse</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk20"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectiveSubuniverse</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk21"><span class="nb">refine</span> (Build_ReflectiveSubuniverse
            (modality_subuniv O) (modality_prereflects O) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, Reflects (modality_subuniv O) T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk22"><span class="nb">intros</span> T; <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
In (modality_subuniv O) Q -&gt;
ooExtendableAlong (to (modality_subuniv O) T)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (modality_subuniv O) T =&gt; Q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk23"><span class="nb">intros</span> Q Q_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>T, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Q_inO</var><span class="hyp-type"><b>: </b><span>In (modality_subuniv O) Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (to (modality_subuniv O) T)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (modality_subuniv O) T =&gt; Q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">srapply extendable_to_OO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Coercion</span> <span class="nf">modality_to_reflective_subuniverse</span> : Modality &gt;-&gt; ReflectiveSubuniverse.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Unfortunately, sometimes [modality_subuniv] pops up anyway.  The following hint helps typeclass inference look through it. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input">#[export]
<span class="kn">Hint Extern</span> <span class="mi">0</span> (In (modality_subuniv _) _) =&gt; <span class="kp">progress</span> <span class="nb">change</span> modality_subuniv <span class="kr">with</span> (rsu_subuniv o modality_to_reflective_subuniverse) <span class="kr">in</span> * : typeclass_instances.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Modalities are precisely the reflective subuniverses that are [&lt;&lt;] themselves.  *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk24"><span class="kn">Instance</span> <span class="nf">ismodality_modality</span> (<span class="nv">O</span> : Modality) : IsModality O.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsModality O</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk25"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsModality O</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> A; <span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk26"><span class="kn">Definition</span> <span class="nf">modality_ismodality</span> (<span class="nv">O</span> : ReflectiveSubuniverse) `{IsModality O} : Modality.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>IsModality0</var><span class="hyp-type"><b>: </b><span>IsModality O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk27"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>IsModality0</var><span class="hyp-type"><b>: </b><span>IsModality O</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">rapply Build_Modality&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** When combined with [isequiv_oD_to_O], this yields Theorem 7.7.7 in the book. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk28"><span class="kn">Definition</span> <span class="nf">isequiv_oD_to_O_modality</span>
           `{Funext} (O : Modality) {A : <span class="kt">Type</span>}
           (B : O A -&gt; <span class="kt">Type</span>) `{<span class="kr">forall</span> <span class="nv">a</span>, In O (B a)}
  : IsEquiv (<span class="kr">fun</span> (<span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">oa</span>, B oa) =&gt; h oD to O A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : O A, In O (B a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (<span class="kr">fun</span> <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O A, B oa =&gt; h oD to O A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk29"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : O A, In O (B a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (<span class="kr">fun</span> <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O A, B oa =&gt; h oD to O A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">srapply (isequiv_oD_to_O O O).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Of course, modalities have dependent eliminators. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">O_ind</span> {<span class="nv">O</span> : Subuniverse} {<span class="nv">A</span> : <span class="kt">Type</span>} `{ReflectsD O O A}
  := @OO_ind O O A _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> O_ind {O A _ _} B {B_inO} f oa.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">O_ind_beta</span> {<span class="nv">O</span> : Subuniverse} {<span class="nv">A</span> : <span class="kt">Type</span>} `{ReflectsD O O A}
  := @OO_ind_beta O O A _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> O_ind_beta {O A _ _} B {B_inO} f a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Conversely, as remarked above, we can build a modality from a dependent eliminator as long as we assume the modal types are closed under paths.  This is probably the most common way to define a modality, and one might argue that this would be a better definition of the bundled type [Modality].  For now we simply respect that by dignifying it with the unprimed constructor name [Build_Modality]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk2a"><span class="kn">Definition</span> <span class="nf">Build_Modality</span>
           (<span class="nv">In&#39;</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
           (<span class="nv">hprop_inO&#39;</span> : Funext -&gt; <span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T))
           (<span class="nv">inO_equiv_inO&#39;</span> : <span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
               In&#39; T -&gt; <span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U)
           (<span class="nv">O_reflector&#39;</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
           (<span class="nv">O_inO&#39;</span> : <span class="kr">forall</span> <span class="nv">T</span>, In&#39; (O_reflector&#39; T))
           (<span class="nv">to&#39;</span> : <span class="kr">forall</span> <span class="nv">T</span>, T -&gt; O_reflector&#39; T)
           (<span class="nv">O_ind&#39;</span> : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
                            (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In&#39; (B oa))
                            (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, B (to&#39; A a))
                            (<span class="nv">z</span> : O_reflector&#39; A),
               B z)
           (<span class="nv">O_ind_beta&#39;</span> : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
                                 (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In&#39; (B oa))
                                 (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, B (to&#39; A a)) (<span class="nv">a</span> : A),
               O_ind&#39; A B B_inO f (to&#39; A a) = f a)
           (<span class="nv">inO_paths&#39;</span> : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">A_inO</span> : In&#39; A) (<span class="nv">z</span> <span class="nv">z&#39;</span> : A),
               In&#39; (z = z&#39;))
  : Modality.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk2b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk2c"><span class="nb">pose</span> (O := Build_Subuniverse In&#39; hprop_inO&#39; inO_equiv_inO&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk2d"><span class="nb">simple refine</span> (Build_Modality&#39; O _ _); <span class="nb">intros</span> T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PreReflects O T</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk2e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk2e"><hr></label><div class="goal-conclusion">ReflectsD O O T</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk2f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PreReflects O T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (Build_PreReflects O T (O_reflector&#39; T) (O_inO&#39; T) (to&#39; T)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk30">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O O T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk31">srapply reflectsD_from_OO_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O T -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O T, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : T, B (to O T a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O T, B oa</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk32" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk32"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O T -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O T, In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : T, B (to O T a)) 
(<span class="nv">a</span> : T), <span class="nl">?OO_ind&#39;</span> B B_inO f (to O T a) = f a</div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chk33" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk33"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk34">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O T -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O T, In O (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : T, B (to O T a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O T, B oa</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply O_ind&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk35">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">B</span> : O_reflector O T -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O T, In O (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : T, B (to O T a)) (<span class="nv">a</span> : T),
O_ind&#39; T B B_inO f (to O T a) = f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply O_ind_beta&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk36">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>In'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>hprop_inO'</var><span class="hyp-type"><b>: </b><span>Funext -&gt;
<span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, IsHProp (In&#39; T)</span></span></span><br><span><var>inO_equiv_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> <span class="nv">U</span> : <span class="kt">Type</span>,
In&#39; T -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : T -&gt; U, IsEquiv f -&gt; In&#39; U</span></span></span><br><span><var>O_reflector'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>O_inO'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, In&#39; (O_reflector&#39; T)</span></span></span><br><span><var>to'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector&#39; T</span></span></span><br><span><var>O_ind'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A, In&#39; (B oa)) -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector&#39; A, B z</span></span></span><br><span><var>O_ind_beta'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector&#39; A -&gt; <span class="kt">Type</span>)
(<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span> : O_reflector&#39; A,
         In&#39; (B oa))
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to&#39; A a)) 
(<span class="nv">a</span> : A),
O_ind&#39; A B B_inO f (to&#39; A a) = f a</span></span></span><br><span><var>inO_paths'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
In&#39; A -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : A, In&#39; (z = z&#39;)</span></span></span><br><span><var>O</var><span><span class="hyp-body"><b>:= </b><span>{|
  In_internal := In&#39;;
  hprop_inO_internal := hprop_inO&#39;;
  inO_equiv_inO_internal := inO_equiv_inO&#39;
|}</span></span><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>,
In O B -&gt; <span class="kr">forall</span> <span class="nv">z</span> <span class="nv">z&#39;</span> : B, In O (z = z&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> inO_paths&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** A tactic that extends [strip_reflections] to modalities. It handles non-dependent elimination for reflective subuniverses and dependent elimination for modalities. [strip_truncations] does the same for truncations, but introduces fewer universe variables, so tends to work better when removing truncations. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">strip_modalities</span> :=
  <span class="sd">(** Search for hypotheses of type [O X] for some [O] such that the goal is [O]-local. *)</span>
  <span class="kp">progress</span> <span class="kp">repeat</span>
    <span class="kr">match goal with</span>
    | [ T : _ |- _ ]
      =&gt; revert_opaque T;
        <span class="sd">(** Handle the non-dependent and dependent cases.  The last case requires that [O] be a modality. *)</span>
        <span class="nb">refine</span> (@O_rec _ _ _ _ _ _ _) || <span class="nb">refine</span> (@O_indpaths _ _ _ _ _ _ _ _ _) || <span class="nb">refine</span> (@O_ind _ _ _ _ _ _ _);
        <span class="sd">(** Ensure that we didn&#39;t generate more than one subgoal, i.e. that the goal was appropriately local. *)</span>
        [];
        <span class="nb">intro</span> T
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Dependent sums *)</span>

<span class="sd">(** A dependent elimination of a reflective subuniverse [O&#39;] into [O] implies that the sum of a family of [O]-modal types over an [O&#39;]-modal type is [O&#39;]-modal.  More specifically, for a particular such sum it suffices for the [O&#39;]-reflection of that sum to dependently eliminate into [O]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk37"><span class="kn">Instance</span> <span class="nf">inO_sigma_reflectsD</span>
       {<span class="nv">O&#39;</span> : ReflectiveSubuniverse} {<span class="nv">O</span> : Subuniverse}
       {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) `{!ReflectsD O&#39; O (sig B)}
       `{In O&#39; A} `{<span class="kr">forall</span> <span class="nv">a</span>, In O (B a)}
  : In O&#39; {x:A &amp; B x}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk38"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk39"><span class="nb">pose</span> (h := <span class="kr">fun</span> <span class="nv">x</span> =&gt; @O_rec O&#39; ({x:A &amp; B x}) A _ _ _ pr1 x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3a"><span class="nb">assert</span> (p := (<span class="kr">fun</span> <span class="nv">z</span> =&gt; O_rec_beta pr1 z) : h o (to O&#39; _) == pr1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>h o to O&#39; {x : A &amp; B x} == pr1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3b"><span class="nb">pose</span> (g := <span class="kr">fun</span> <span class="nv">z</span> =&gt; (transport B ((p z)^) z.<span class="mi">2</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>h o to O&#39; {x : A &amp; B x} == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3c"><span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3d"><span class="nb">pose</span> (f := OO_ind O (<span class="kr">fun</span> <span class="nv">x</span>:O&#39; (sig B) =&gt; B (h x)) g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3e"><span class="nb">pose</span> (q := OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span>:O&#39; (sig B) =&gt; B (h x)) g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {x : A &amp; B x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk3f"><span class="nb">apply</span> inO_to_O_retract <span class="kr">with</span> (mu := <span class="kr">fun</span> <span class="nv">w</span> =&gt; (h w; f w)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 (h (to O&#39; {x0 : A &amp; B x0} x);
 f (to O&#39; {x0 : A &amp; B x0} x))) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk40"><span class="nb">intros</span> [x1 x2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(h (to O&#39; {x : A &amp; B x} (x1; x2));
f (to O&#39; {x : A &amp; B x} (x1; x2))) = (x1; x2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk41"><span class="nb">simple refine</span> (path_sigma B _ _ _ _); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h (to O&#39; {x : A &amp; B x} (x1; x2)) = x1</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk42" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><label class="goal-separator" for="modality-v-chk42"><hr></label><div class="goal-conclusion">transport B <span class="nl">?Goal</span> (f (to O&#39; {x : A &amp; B x} (x1; x2))) =
x2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk43">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">h (to O&#39; {x : A &amp; B x} (x1; x2)) = x1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk44">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport B (p (x1; x2))
  (f (to O&#39; {x : A &amp; B x} (x1; x2))) = x2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk45"><span class="nb">refine</span> (ap _ (q (x1;x2)) @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport B (p (x1; x2)) (g (x1; x2)) = x2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk46"><span class="nb">unfold</span> g; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>ReflectsD0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O {x : _ &amp; B x}</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)</span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; {x : A &amp; B x} =&gt; O_rec pr1 x</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; {x : A &amp; B x} -&gt; A</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">x</span> : {x : A &amp; B x} =&gt;
 h (to O&#39; {x0 : A &amp; B x0} x)) == pr1</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">z</span> : {x : A &amp; B x} =&gt; transport B (p z)^ z.<span class="mi">2</span></span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">z</span> : {x : A &amp; B x},
B (h (to O&#39; {x : A &amp; B x} z))</span></span></span></span><br><span><var>f</var><span><span class="hyp-body"><b>:= </b><span>OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; {x : _ &amp; B x},
(<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) oa</span></span></span></span><br><span><var>q</var><span><span class="hyp-body"><b>:= </b><span>OO_ind_beta (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; B x},
OO_ind O (<span class="kr">fun</span> <span class="nv">x</span> : O&#39; {x : _ &amp; B x} =&gt; B (h x)) g
  (to O&#39; {x : _ &amp; B x} a) = 
g a</span></span></span></span><br><span><var>x1</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x2</var><span class="hyp-type"><b>: </b><span>B x1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport B (p (x1; x2))
  (transport B (p (x1; x2))^ x2) = x2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (transport_pV B _ _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Specialized to a modality, this yields the implication (ii) =&gt; (i) from Theorem 7.7.4 of the book, and also Corollary 7.7.8, part 2. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">inO_sigma</span> (<span class="nv">O</span> : Modality)
           {<span class="nv">A</span>:<span class="kt">Type</span>} (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>) `{In O A} `{<span class="kr">forall</span> <span class="nv">a</span>, In O (B a)}
  : In O {x:A &amp; B x}
  := _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This implies that the composite of modal maps is modal. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk47"><span class="kn">Instance</span> <span class="nf">mapinO_compose</span> {<span class="nv">O</span> : Modality} {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) (<span class="nv">g</span> : B -&gt; C)
       `{MapIn O _ _ f} `{MapIn O _ _ g}
  : MapIn O (g o f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MapIn O (g o f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk48"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">MapIn O (g o f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk49"><span class="nb">intros</span> c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>MapIn O f</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>MapIn O g</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x)) c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (inO_equiv_inO&#39; _ (hfiber_compose f g c)^-<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It also implies Corollary 7.3.10 from the book, generalized to modalities.  (Theorem 7.3.9 is true for any reflective subuniverse; we called it [equiv_O_sigma_O].) *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk4a"><span class="kn">Corollary</span> <span class="nf">equiv_sigma_inO_O</span> {<span class="nv">O</span> : Modality} {<span class="nv">A</span> : <span class="kt">Type</span>} `{In O A} (P : A -&gt; <span class="kt">Type</span>)
  : {x:A &amp; O (P x)} &lt;~&gt; O {x:A &amp; P x}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : A &amp; O (P x)} &lt;~&gt; O {x : A &amp; P x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk4b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : A &amp; O (P x)} &lt;~&gt; O {x : A &amp; P x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk4c"><span class="nb">transitivity</span> (O {x:A &amp; O (P x)}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : A &amp; O (P x)} &lt;~&gt; O {x : A &amp; O (P x)}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk4d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk4d"><hr></label><div class="goal-conclusion">O {x : A &amp; O (P x)} &lt;~&gt; O {x : A &amp; P x}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk4e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : A &amp; O (P x)} &lt;~&gt; O {x : A &amp; O (P x)}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply equiv_to_O.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk4f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>In O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O {x : A &amp; O (P x)} &lt;~&gt; O {x : A &amp; P x}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> equiv_O_sigma_O.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Conversely, if the sum of a particular family of [O]-modal types over an [O&#39;]-reflection is in [O&#39;], then that family admits a dependent eliminator. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk50"><span class="kn">Definition</span> <span class="nf">extension_from_inO_sigma</span>
           {<span class="nv">O&#39;</span> : Subuniverse} (<span class="nv">O</span> : Subuniverse)
           {<span class="nv">A</span>:<span class="kt">Type</span>} `{Reflects O&#39; A} (B: O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
           {inO_sigma : In O&#39; {z:O_reflector O&#39; A &amp; B z}}
           (g : <span class="kr">forall</span> <span class="nv">x</span>, B (to O&#39; A x))
  : ExtensionAlong (to O&#39; A) B g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk51"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk52"><span class="nb">set</span> (Z := sig B) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk53"><span class="nb">pose</span> (g&#39; := (<span class="kr">fun</span> <span class="nv">a</span>:A =&gt; (to O&#39; A a ; g a)) : A -&gt; Z).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk54"><span class="nb">pose</span> (f&#39; := O_rec (O := O&#39;) g&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk55"><span class="nb">pose</span> (eqf := (O_rec_beta g&#39;)  : f&#39; o to O&#39; A == g&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk56"><span class="nb">pose</span> (eqid := O_indpaths (pr1 o f&#39;) idmap (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ap@{k i} pr1 (eqf x))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br><span><var>eqid</var><span><span class="hyp-body"><b>:= </b><span>O_indpaths (pr1 o f&#39;) idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x))</span></span><span class="hyp-type"><b>: </b><span>pr1 o f&#39; == idmap</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) B g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk57"><span class="kr">exists</span> (<span class="nv">fun</span> <span class="nv">z</span> =&gt; transport B (eqid z) ((f&#39; z).<span class="mi">2</span>)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br><span><var>eqid</var><span><span class="hyp-body"><b>:= </b><span>O_indpaths (pr1 o f&#39;) idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x))</span></span><span class="hyp-type"><b>: </b><span>pr1 o f&#39; == idmap</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : A,
transport B (eqid (to O&#39; A x)) (f&#39; (to O&#39; A x)).<span class="mi">2</span> =
g x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk58"><span class="nb">intros</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br><span><var>eqid</var><span><span class="hyp-body"><b>:= </b><span>O_indpaths (pr1 o f&#39;) idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x))</span></span><span class="hyp-type"><b>: </b><span>pr1 o f&#39; == idmap</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport B (eqid (to O&#39; A a)) (f&#39; (to O&#39; A a)).<span class="mi">2</span> =
g a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk59"><span class="nb">unfold</span> eqid.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br><span><var>eqid</var><span><span class="hyp-body"><b>:= </b><span>O_indpaths (pr1 o f&#39;) idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x))</span></span><span class="hyp-type"><b>: </b><span>pr1 o f&#39; == idmap</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport B
  (O_indpaths (<span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; A =&gt; (f&#39; x).<span class="mi">1</span>)
     idmap (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x)) (to O&#39; A a))
  (f&#39; (to O&#39; A a)).<span class="mi">2</span> = g a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5a"><span class="nb">refine</span> (_ @ pr2_path (O_rec_beta g&#39; a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br><span><var>eqid</var><span><span class="hyp-body"><b>:= </b><span>O_indpaths (pr1 o f&#39;) idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x))</span></span><span class="hyp-type"><b>: </b><span>pr1 o f&#39; == idmap</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport B
  (O_indpaths (<span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; A =&gt; (f&#39; x).<span class="mi">1</span>)
     idmap (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x)) (to O&#39; A a))
  (f&#39; (to O&#39; A a)).<span class="mi">2</span> =
transport B (O_rec_beta g&#39; a) ..<span class="mi">1</span>
  (O_rec g&#39; (to O&#39; A a)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5b"><span class="nb">refine</span> (ap (<span class="kr">fun</span> <span class="nv">p</span> =&gt; transport B p (O_rec g&#39; (to O&#39; A a)).<span class="mi">2</span>) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O', O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A, B (to O&#39; A x)</span></span></span><br><span><var>g'</var><span><span class="hyp-body"><b>:= </b><span>(<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (to O&#39; A a; g a)) : A -&gt; Z</span></span><span class="hyp-type"><b>: </b><span>A -&gt; Z</span></span></span></span><br><span><var>f'</var><span><span class="hyp-body"><b>:= </b><span>O_rec g&#39;</span></span><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; Z</span></span></span></span><br><span><var>eqf</var><span><span class="hyp-body"><b>:= </b><span>O_rec_beta g&#39; : f&#39; o to O&#39; A == g&#39;</span></span><span class="hyp-type"><b>: </b><span>f&#39; o to O&#39; A == g&#39;</span></span></span></span><br><span><var>eqid</var><span><span class="hyp-body"><b>:= </b><span>O_indpaths (pr1 o f&#39;) idmap
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x))</span></span><span class="hyp-type"><b>: </b><span>pr1 o f&#39; == idmap</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_indpaths (<span class="kr">fun</span> <span class="nv">x</span> : O_reflector O&#39; A =&gt; (f&#39; x).<span class="mi">1</span>)
  idmap (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; ap pr1 (eqf x)) (to O&#39; A a) =
(O_rec_beta g&#39; a) ..<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">srapply O_indpaths_beta.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And even a full equivalence of spaces of sections.  This is stated in CORS Proposition 2.8 (but our version avoids funext by using [ooExtendableAlong], as usual).  *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5c"><span class="kn">Definition</span> <span class="nf">ooextendable_from_inO_sigma</span>
           {<span class="nv">O&#39;</span> : ReflectiveSubuniverse} (<span class="nv">O</span> : Subuniverse)
           {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">B</span>: O_reflector O&#39; A -&gt; <span class="kt">Type</span>)
           {<span class="nv">inO_sigma</span> : In O&#39; {z:O_reflector O&#39; A &amp; B z}}
  : ooExtendableAlong (to O&#39; A) B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (to O&#39; A) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (to O&#39; A) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5e"><span class="nb">intros</span> n; <span class="nb">generalize dependent</span> A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt;
ExtendableAlong n (to O&#39; A) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk5f"><span class="nb">induction</span> n <span class="kr">as</span> [|n IHn]; <span class="nb">intros</span>; [ <span class="bp">exact</span> tt | <span class="nb">cbn</span> ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a),
 ExtensionAlong (to O&#39; A) B g) *
(<span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b,
 ExtendableAlong n (to O&#39; A)
   (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk60"><span class="nb">refine</span> (extension_from_inO_sigma O B , _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b,
ExtendableAlong n (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk61"><span class="nb">intros</span> h k; napply IHn.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {z : O_reflector O&#39; A &amp; h z = k z}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk62"><span class="nb">set</span> (Z := sig B) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {z : O_reflector O&#39; A &amp; h z = k z}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk63"><span class="nb">pose</span> (W := sig (<span class="kr">fun</span> <span class="nv">a</span> =&gt; B a * B a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; {z : O_reflector O&#39; A &amp; h z = k z}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk64">nrefine (inO_equiv_inO&#39; (Pullback (A := W) (<span class="kr">fun</span> <span class="nv">a</span>:O_reflector O&#39; A =&gt; (a;(h a,k a)))
                                   (<span class="kr">fun</span> <span class="nv">z</span>:Z =&gt; (z.<span class="mi">1</span>;(z.<span class="mi">2</span>,z.<span class="mi">2</span>)))) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39;
  (Pullback
     (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; (a; (h a, k a)))
     (<span class="kr">fun</span> <span class="nv">z</span> : Z =&gt; (z.<span class="mi">1</span>; (z.<span class="mi">2</span>, z.<span class="mi">2</span>))))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk65" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt;
ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk65"><hr></label><div class="goal-conclusion">Pullback (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; (a; (h a, k a)))
  (<span class="kr">fun</span> <span class="nv">z</span> : Z =&gt; (z.<span class="mi">1</span>; (z.<span class="mi">2</span>, z.<span class="mi">2</span>))) &lt;~&gt;
{z : O_reflector O&#39; A &amp; h z = k z}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk66">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39;
  (Pullback
     (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; (a; (h a, k a)))
     (<span class="kr">fun</span> <span class="nv">z</span> : Z =&gt; (z.<span class="mi">1</span>; (z.<span class="mi">2</span>, z.<span class="mi">2</span>))))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk67"><span class="nb">refine</span> (inO_pullback O&#39; _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O&#39; W</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (inO_equiv_inO&#39; _ (equiv_sigprod_pullback B B)^-<span class="mi">1</span>).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk68">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Pullback (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; (a; (h a, k a)))
  (<span class="kr">fun</span> <span class="nv">z</span> : Z =&gt; (z.<span class="mi">1</span>; (z.<span class="mi">2</span>, z.<span class="mi">2</span>))) &lt;~&gt;
{z : O_reflector O&#39; A &amp; h z = k z}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk69"><span class="nb">unfold</span> Pullback.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{b : O_reflector O&#39; A &amp;
{c : Z &amp; (b; (h b, k b)) = (c.<span class="mi">1</span>; (c.<span class="mi">2</span>, c.<span class="mi">2</span>))}} &lt;~&gt;
{z : O_reflector O&#39; A &amp; h z = k z}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** The rest is just extracting paths from sigma- and product types and contracting a couple of based path spaces. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk6a"><span class="nb">apply</span> equiv_functor_sigma_id; <span class="nb">intros</span> z; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{c : Z &amp; (z; (h z, k z)) = (c.<span class="mi">1</span>; (c.<span class="mi">2</span>, c.<span class="mi">2</span>))} &lt;~&gt;
h z = k z</div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk6b"><span class="nb">refine</span> (_ oE equiv_functor_sigma_id _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; <span class="nl">?Goal0</span> x} &lt;~&gt; h z = k z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk6c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt;
ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><label class="goal-separator" for="modality-v-chk6c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : Z,
(z; (h z, k z)) = (a.<span class="mi">1</span>; (a.<span class="mi">2</span>, a.<span class="mi">2</span>)) &lt;~&gt; <span class="nl">?Goal0</span> a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk6d"><span class="mi">2</span>:<span class="nb">intros</span>; <span class="nb">symmetry</span>; <span class="nb">apply</span> equiv_path_sigma.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{a : Z &amp;
{p : (z; (h z, k z)).<span class="mi">1</span> = (a.<span class="mi">1</span>; (a.<span class="mi">2</span>, a.<span class="mi">2</span>)).<span class="mi">1</span> &amp;
transport (<span class="kr">fun</span> <span class="nv">a0</span> : O_reflector O&#39; A =&gt; B a0 * B a0) p
  (z; (h z, k z)).<span class="mi">2</span> = (a.<span class="mi">1</span>; (a.<span class="mi">2</span>, a.<span class="mi">2</span>)).<span class="mi">2</span>}} &lt;~&gt;
h z = k z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk6e"><span class="nb">refine</span> (_ oE equiv_functor_sigma_id (<span class="kr">fun</span> <span class="nv">z</span> =&gt; equiv_functor_sigma_id (<span class="kr">fun</span> <span class="nv">p</span> =&gt; _))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{z0 : Z &amp; {x : _ &amp; <span class="nl">?Goal0</span>@{z0:=z; z:=z0} x}} &lt;~&gt;
h z = k z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk6f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt;
ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z0</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>Z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>(z0; (h z0, k z0)).<span class="mi">1</span> = (z.<span class="mi">1</span>; (z.<span class="mi">2</span>, z.<span class="mi">2</span>)).<span class="mi">1</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk6f"><hr></label><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; B a * B a) p
  (z0; (h z0, k z0)).<span class="mi">2</span> = 
(z.<span class="mi">1</span>; (z.<span class="mi">2</span>, z.<span class="mi">2</span>)).<span class="mi">2</span> &lt;~&gt; 
<span class="nl">?Goal0</span> p</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk70"><span class="mi">2</span>:<span class="nb">symmetry</span>; <span class="nb">apply</span> equiv_path_prod.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{z0 : Z &amp;
{p : (z; (h z, k z)).<span class="mi">1</span> = (z0.<span class="mi">1</span>; (z0.<span class="mi">2</span>, z0.<span class="mi">2</span>)).<span class="mi">1</span> &amp;
(fst
   (transport (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; B a * B a)
      p (z; (h z, k z)).<span class="mi">2</span>) =
 fst (z0.<span class="mi">1</span>; (z0.<span class="mi">2</span>, z0.<span class="mi">2</span>)).<span class="mi">2</span>) *
(snd
   (transport (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; B a * B a)
      p (z; (h z, k z)).<span class="mi">2</span>) =
 snd (z0.<span class="mi">1</span>; (z0.<span class="mi">2</span>, z0.<span class="mi">2</span>)).<span class="mi">2</span>)}} &lt;~&gt; h z = k z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk71"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
In O&#39; {z : O_reflector O&#39; A &amp; B z} -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Z</var><span><span class="hyp-body"><b>:= </b><span>{x : _ &amp; B x}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span>In O&#39; Z</span></span></span><br><span><var>h, k</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b</span></span></span><br><span><var>W</var><span><span class="hyp-body"><b>:= </b><span>{a : O_reflector O&#39; A &amp; B a * B a}</span></span><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span></span><br><span><var>z</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{z0 : Z &amp;
{p : z = z0.<span class="mi">1</span> &amp;
(fst
   (transport (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; B a * B a)
      p (h z, k z)) = z0.<span class="mi">2</span>) *
(snd
   (transport (<span class="kr">fun</span> <span class="nv">a</span> : O_reflector O&#39; A =&gt; B a * B a)
      p (h z, k z)) = z0.<span class="mi">2</span>)}} &lt;~&gt; h z = k z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">make_equiv_contr_basedpaths.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Thus, if this holds for all sigma-types, we get the dependent universal property.  Making this an [Instance] causes typeclass search to spin.  Note the slightly different hypotheses, which mean that we can&#39;t just use the previous result: here we need only assume that the [O&#39;]-reflection of [A] exists rather than that [O&#39;] is fully reflective, at the cost of assuming that [O] is fully reflective (although actually, closed under path-spaces would suffice). *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk72"><span class="kn">Definition</span> <span class="nf">reflectsD_from_inO_sigma</span>
           {<span class="nv">O&#39;</span> : Subuniverse} (<span class="nv">O</span> : ReflectiveSubuniverse)
           {<span class="nv">A</span> : <span class="kt">Type</span>} `{Reflects O&#39; A}
           (inO_sigma : <span class="kr">forall</span> (<span class="nv">B</span>: O_reflector O&#39; A -&gt; <span class="kt">Type</span>),
               (<span class="kr">forall</span> <span class="nv">oa</span>, In O (B oa)) -&gt; In O&#39; {z:O_reflector O&#39; A &amp; B z})
  : ReflectsD O&#39; O A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O&#39; O A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk73"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O&#39; O A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk74"><span class="nb">constructor</span>; <span class="nb">intros</span> B B_inO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>inO_sigma</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (B x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ooExtendableAlong (to O&#39; A) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk75"><span class="nb">intros</span> n; <span class="nb">generalize dependent</span> A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">H</span> : PreReflects O&#39; A),
Reflects O&#39; A -&gt;
(<span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
 (<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
 In O&#39; {z : O_reflector O&#39; A &amp; B z}) -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (B x)) -&gt;
ExtendableAlong n (to O&#39; A) B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk76"><span class="nb">induction</span> n <span class="kr">as</span> [|n IHn]; <span class="nb">intros</span>; [ <span class="bp">exact</span> tt | <span class="nb">cbn</span> ].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">H</span> : PreReflects O&#39; A),
Reflects O&#39; A -&gt;
(<span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}) -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (B x)) -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
 In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (B x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to O&#39; A a),
 ExtensionAlong (to O&#39; A) B g) *
(<span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b,
 ExtendableAlong n (to O&#39; A)
   (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk77"><span class="nb">refine</span> (extension_from_inO_sigma O B , _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">H</span> : PreReflects O&#39; A),
Reflects O&#39; A -&gt;
(<span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A, In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}) -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (B x)) -&gt; ExtendableAlong n (to O&#39; A) B</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Reflects O&#39; A</span></span></span><br><span><var>inO_sigma0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector O&#39; A,
 In O (B oa)) -&gt;
In O&#39; {z : O_reflector O&#39; A &amp; B z}</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : O_reflector O&#39; A, In O (B x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">h</span> <span class="nv">k</span> : <span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, B b,
ExtendableAlong n (to O&#39; A)
  (<span class="kr">fun</span> <span class="nv">b</span> : O_reflector O&#39; A =&gt; h b = k b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> h k; rapply IHn.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** In particular, we get the converse implication (i) =&gt; (ii) from Theorem 7.7.4 of the book: a reflective subuniverse closed under sigmas is a modality. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk78"><span class="kn">Definition</span> <span class="nf">modality_from_inO_sigma</span> (<span class="nv">O</span> : ReflectiveSubuniverse)
           (<span class="nv">H</span> : <span class="kr">forall</span> (<span class="nv">A</span>:<span class="kt">Type</span>) (<span class="nv">B</span>:A -&gt; <span class="kt">Type</span>)
                       {<span class="nv">A_inO</span> : In O A} `{<span class="kr">forall</span> <span class="nv">a</span>, In O (B a)},
               (In O {x:A &amp; B x}))
  : Modality.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>),
In O A -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)) -&gt; In O {x : A &amp; B x}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk79"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>),
In O A -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)) -&gt; In O {x : A &amp; B x}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Modality</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk7a"><span class="nb">refine</span> (Build_Modality&#39; O _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>),
In O A -&gt;
(<span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)) -&gt; In O {x : A &amp; B x}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, ReflectsD O O T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; srapply reflectsD_from_inO_sigma.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** ** Connectedness of the units *)</span>

<span class="sd">(** Dependent reflection can also be characterized by connectedness of the unit maps. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk7b"><span class="kn">Instance</span> <span class="nf">conn_map_to_O_reflectsD</span> {<span class="nv">O&#39;</span> : Subuniverse} (<span class="nv">O</span> : ReflectiveSubuniverse)
       {<span class="nv">A</span> : <span class="kt">Type</span>} `{ReflectsD O&#39; O A}
  : IsConnMap O (to O&#39; A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O (to O&#39; A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk7c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O (to O&#39; A)</div></blockquote></div></div></small><span class="alectryon-wsp">       
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk7d"><span class="nb">apply</span> conn_map_from_extension_elim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">P</span> : O_reflector O&#39; A -&gt; <span class="kt">Type</span>,
(<span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, In O (P b)) -&gt;
<span class="kr">forall</span> <span class="nv">d</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, P (to O&#39; A a),
ExtensionAlong (to O&#39; A) P d</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk7e"><span class="nb">intros</span> P P_inO f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ReflectsD O&#39; O A</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>O_reflector O&#39; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : O_reflector O&#39; A, In O (P b)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (to O&#39; A a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ExtensionAlong (to O&#39; A) P f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (fst (extendable_to_OO (O := O) P <span class="mi">1</span>%nat) f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk7f"><span class="kn">Definition</span> <span class="nf">reflectsD_from_conn_map_to_O</span> {<span class="nv">O&#39;</span> : Subuniverse} (<span class="nv">O</span> : ReflectiveSubuniverse)
           {<span class="nv">A</span> : <span class="kt">Type</span>} `{PreReflects O&#39; A} `{IsConnMap O _ _ (to O&#39; A)}
  : ReflectsD O&#39; O A.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnMap O (to O&#39; A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O&#39; O A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk80"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O'</var><span class="hyp-type"><b>: </b><span>Subuniverse</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>PreReflects O&#39; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>IsConnMap O (to O&#39; A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ReflectsD O&#39; O A</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; rapply ooextendable_conn_map_inO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** In particular, if [O1 &lt;&lt; O2] then every [O2]-unit is [O1]-connected. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">conn_map_to_O_strong_leq</span>
       {<span class="nv">O1</span> <span class="nv">O2</span> : ReflectiveSubuniverse} `{O1 &lt;&lt; O2} (A : <span class="kt">Type</span>)
  : IsConnMap O1 (to O2 A)
  := _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Thus, if [O] is a modality, then every [O]-unit is [O]-connected.  This is Corollary 7.5.8 in the book. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">conn_map_to_O</span> {<span class="nv">O</span> : Modality} (<span class="nv">A</span> : <span class="kt">Type</span>)
  : IsConnMap O (to O A)
  := _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** When [O1 &lt;&lt; O2], [O_functor O2] preserves [O1]-connected maps. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk81"><span class="kn">Proposition</span> <span class="nf">conn_map_O_functor_strong_leq</span> {<span class="nv">O1</span> <span class="nv">O2</span> : ReflectiveSubuniverse} (<span class="nv">leq</span> : O1 &lt;&lt; O2)
  {<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : X -&gt; Y) `{IsConnMap O1 _ _ f}
  : IsConnMap O1 (O_functor O2 f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>leq</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsConnMap O1 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O1 (O_functor O2 f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk82"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>leq</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsConnMap O1 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O1 (O_functor O2 f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk83">rapply (cancelR_conn_map _ (to O2 _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>leq</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsConnMap O1 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O1 (<span class="kr">fun</span> <span class="nv">x</span> : X =&gt; O_functor O2 f (to O2 X x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk84">napply conn_map_homotopic.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>leq</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsConnMap O1 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nl">?Goal</span> == (<span class="kr">fun</span> <span class="nv">x</span> : X =&gt; O_functor O2 f (to O2 X x))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk85" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>leq</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsConnMap O1 f</span></span></span><br></div><label class="goal-separator" for="modality-v-chk85"><hr></label><div class="goal-conclusion">IsConnMap O1 <span class="nl">?Goal</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk86"><span class="mi">1</span>: <span class="nb">symmetry</span>; <span class="nb">apply</span> to_O_natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O1, O2</var><span class="hyp-type"><b>: </b><span>ReflectiveSubuniverse</span></span></span><br><span><var>leq</var><span class="hyp-type"><b>: </b><span>O1 &lt;&lt; O2</span></span></span><br><span><var>X, Y</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>X -&gt; Y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsConnMap O1 f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O1 (<span class="kr">fun</span> <span class="nv">x</span> : X =&gt; to O2 Y (f x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">rapply conn_map_compose.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** ** Easy modalities *)</span>

<span class="sd">(** The book uses yet a different definition of modality, which requires an induction principle only into families of the form [fun oa =&gt; O (B oa)], and similarly only that path-spaces of types [O A] are &quot;modal&quot; in the sense that the unit is an equivalence.  As shown in section 1 of RSS, this is equivalent, roughly since every modal type [A] (in this sense) is equivalent to [O A].</span>

<span class="sd">Our definitions are more convenient in formalized applications because in some examples (such as [Trunc] and closed modalities), there is a naturally occurring [O_ind] into all modal types that is not judgmentally equal to the one that can be constructed by passing through [O] and back again.  Thus, when we apply general theorems about modalities to a particular modality such as [Trunc], the proofs will reduce definitionally to &quot;the way we would have proved them directly&quot; if we didn&#39;t know about general modalities.</span>

<span class="sd">On the other hand, in other examples (such as [~~] and open modalities) it is easier to construct the latter weaker induction principle.  Thus, we now show how to get from that to our definition of modality. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">EasyModalities</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Universe</span> <span class="nf">i</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> (<span class="nv">O_reflector</span> : <span class="kt">Type</span>@{i} -&gt; <span class="kt">Type</span>@{i})
          (<span class="nv">to</span> : <span class="kr">forall</span> (<span class="nv">T</span> : <span class="kt">Type</span>@{i}), T -&gt; O_reflector T)
          (<span class="nv">O_indO</span>
           : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>@{i})
                    (<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>@{i})
                    (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, O_reflector (B (to A a)))
                    (<span class="nv">z</span> : O_reflector A),
              O_reflector (B z))
          (<span class="nv">O_indO_beta</span>
           : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>@{i})
                    (<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>@{i})
                    (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span>, O_reflector (B (to A a))) (<span class="nv">a</span> : A),
              O_indO A B f (to A a) = f a)
          (<span class="nv">inO_pathsO</span>
           : <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>@{i}) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
              IsEquiv (to (z = z&#39;))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">In_easy</span> : <span class="kt">Type</span>@{i} -&gt; <span class="kt">Type</span>@{i}
    := <span class="kr">fun</span> <span class="nv">A</span> =&gt; IsEquiv (to A).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk87"><span class="kn">Local Definition</span> <span class="nf">O_ind_easy</span>
             (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
             (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In_easy (B oa))
    : (<span class="kr">forall</span> <span class="nv">a</span>, B (to A a)) -&gt; <span class="kr">forall</span> <span class="nv">oa</span>, B oa.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, B oa</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk88"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)) -&gt;
<span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, B oa</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk89"><span class="nb">simpl</span>; <span class="nb">intros</span> f oa.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>oa</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B oa</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8a"><span class="nb">pose</span> (H := B_inO oa); <span class="nb">unfold</span> In_easy <span class="kr">in</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>oa</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span>B_inO oa</span></span><span class="hyp-type"><b>: </b><span>IsEquiv (to (B oa))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B oa</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8b"><span class="nb">apply</span> ((to (B oa))^-<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>oa</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span>B_inO oa</span></span><span class="hyp-type"><b>: </b><span>IsEquiv (to (B oa))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_reflector (B oa)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8c"><span class="nb">apply</span> O_indO.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>oa</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span>B_inO oa</span></span><span class="hyp-type"><b>: </b><span>IsEquiv (to (B oa))</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> a; <span class="nb">apply</span> to, f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8d"><span class="kn">Local Definition</span> <span class="nf">O_ind_easy_beta</span>
             (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
             (<span class="nv">B_inO</span> : <span class="kr">forall</span> <span class="nv">oa</span>, In_easy (B oa))
             (<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)) (<span class="nv">a</span>:A)
  : O_ind_easy A B B_inO f (to A a) = f a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy A B B_inO f (to A a) = f a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy A B B_inO f (to A a) = f a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk8f"><span class="nb">unfold</span> O_ind_easy.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(to (B (to A a)))^-<span class="mi">1</span>
  (O_indO A B (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to (B (to A a)) (f a))
     (to A a)) = f a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk90"><span class="nb">apply</span> moveR_equiv_V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>O_reflector A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>B_inO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A, In_easy (B oa)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, B (to A a)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_indO A B (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to (B (to A a)) (f a))
  (to A a) = to (B (to A a)) (f a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> @O_indO_beta <span class="kr">with</span> (f := <span class="kr">fun</span> <span class="nv">x</span> =&gt; to _ (f x)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk91"><span class="kn">Local Definition</span> <span class="nf">O_inO_easy</span> (<span class="nv">A</span> : <span class="kt">Type</span>) : In_easy (O_reflector A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy (O_reflector A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk92"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy (O_reflector A)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk93"><span class="nb">refine</span> (isequiv_adjointify (to (O_reflector A))
             (O_indO (O_reflector A) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; A) idmap) _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : O_reflector (O_reflector A) =&gt;
 to (O_reflector A)
   (O_indO (O_reflector A)
      (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
      x)) == idmap</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk94" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chk94"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : O_reflector A =&gt;
 O_indO (O_reflector A)
   (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
   (to (O_reflector A) x)) == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk95">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : O_reflector (O_reflector A) =&gt;
 to (O_reflector A)
   (O_indO (O_reflector A)
      (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
      x)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk96"><span class="nb">intros</span> x; <span class="nb">pattern</span> x; <span class="nb">apply</span> O_ind_easy.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector (O_reflector A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector (O_reflector A),
In_easy
  (to (O_reflector A)
     (O_indO (O_reflector A)
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A)
        idmap oa) = oa)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chk97" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector (O_reflector A)</span></span></span><br></div><label class="goal-separator" for="modality-v-chk97"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : O_reflector A,
to (O_reflector A)
  (O_indO (O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
     (to (O_reflector A) a)) = 
to (O_reflector A) a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk98">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector (O_reflector A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector (O_reflector A),
In_easy
  (to (O_reflector A)
     (O_indO (O_reflector A)
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A)
        idmap oa) = oa)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> oa; <span class="nb">apply</span> inO_pathsO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk99">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector (O_reflector A)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : O_reflector A,
to (O_reflector A)
  (O_indO (O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
     (to (O_reflector A) a)) = to (O_reflector A) a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9a"><span class="nb">intros</span> a; <span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector (O_reflector A)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_indO (O_reflector A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
  (to (O_reflector A) a) = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (O_indO_beta (O_reflector A) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; A) idmap a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : O_reflector A =&gt;
 O_indO (O_reflector A)
   (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
   (to (O_reflector A) x)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9c"><span class="nb">intros</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_indO (O_reflector A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector (O_reflector A) =&gt; A) idmap
  (to (O_reflector A) a) = a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (O_indO_beta (O_reflector A) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; A) idmap a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** It seems to be surprisingly hard to show repleteness (without univalence).  We basically have to manually develop enough functoriality of [O] and naturality of [to O]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9d"><span class="kn">Local Definition</span> <span class="nf">inO_equiv_inO_easy</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
        (<span class="nv">A_inO</span> : In_easy A) (<span class="nv">f</span> : A -&gt; B) (<span class="nv">feq</span> : IsEquiv f)
    : In_easy B.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy B</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk9f"><span class="nb">simple refine</span> (isequiv_commsq (to A) (to B) f
             (O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> =&gt; O_reflector B) _ (<span class="kr">fun</span> <span class="nv">a</span> =&gt; to B (f a))) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A,
In_easy ((<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B) oa)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chka0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><label class="goal-separator" for="modality-v-chka0"><hr></label><div class="goal-conclusion">O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
  <span class="nl">?B_inO</span> (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) o 
to A == to B o f</div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chka1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><label class="goal-separator" for="modality-v-chka1"><hr></label><div class="goal-conclusion">IsEquiv (to A)</div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chka2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><label class="goal-separator" for="modality-v-chka2"><hr></label><div class="goal-conclusion">IsEquiv
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B) 
     <span class="nl">?B_inO</span> (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chka3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">oa</span> : O_reflector A,
In_easy ((<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B) oa)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span>; <span class="nb">apply</span> O_inO_easy.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chka4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) o to A == to B o f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> a; <span class="bp">exact</span> (O_ind_easy_beta A (<span class="kr">fun</span> <span class="nv">_</span> =&gt; O_reflector B) _ _ a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chka5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (to A)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> A_inO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chka6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chka7"><span class="nb">simple refine</span> (isequiv_adjointify _
               (O_ind_easy B (<span class="kr">fun</span> <span class="nv">_</span> =&gt; O_reflector A) _ (<span class="kr">fun</span> <span class="nv">b</span> =&gt; to A (f^-<span class="mi">1</span> b))) _ _);
        <span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy ((<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A) x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chka8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br></div><label class="goal-separator" for="modality-v-chka8"><hr></label><div class="goal-conclusion">O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a))
  (O_ind_easy B
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
     (<span class="kr">fun</span> <span class="nv">x</span> : O_reflector B =&gt; <span class="nl">?Goal</span>)
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b)) x) = x</div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chka9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><label class="goal-separator" for="modality-v-chka9"><hr></label><div class="goal-conclusion">O_ind_easy B (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
  (<span class="kr">fun</span> <span class="nv">x</span> : O_reflector B =&gt; <span class="nl">?Goal</span>)
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b))
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) x) = x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkaa">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy ((<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A) x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> O_inO_easy.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkab">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a))
  (O_ind_easy B
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b)) x) = x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkac"><span class="nb">pattern</span> x; <span class="nb">refine</span> (O_ind_easy B _ _ _ x); <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x, oa</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a))
     (O_ind_easy B
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
        (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b)) oa) = oa)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkad" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="modality-v-chkad"><hr></label><div class="goal-conclusion">O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a))
  (O_ind_easy B
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b)) 
     (to B a)) = to B a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkae">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x, oa</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a))
     (O_ind_easy B
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
        (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b)) oa) = oa)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inO_pathsO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkaf">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy A (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a))
  (O_ind_easy B
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b)) (to B a)) = to B a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span>; <span class="kp">abstract</span> (<span class="kp">repeat</span> <span class="nb">rewrite</span> O_ind_easy_beta; <span class="nb">apply</span> ap, eisretr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb0">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy B (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b))
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) x) = x</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb1"><span class="nb">pattern</span> x; <span class="nb">refine</span> (O_ind_easy A _ _ _ x); <span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x, oa</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy
  (O_ind_easy B
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b))
     (O_ind_easy A
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
        (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) oa) = oa)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkb2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="modality-v-chkb2"><hr></label><div class="goal-conclusion">O_ind_easy B (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b))
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) 
     (to A a)) = to A a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb3">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x, oa</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy
  (O_ind_easy B
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b))
     (O_ind_easy A
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
        (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
        (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) oa) = oa)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inO_pathsO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb4">*</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>feq</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>O_reflector A</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_ind_easy B (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_reflector A)
  (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector B =&gt; O_inO_easy A)
  (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt; to A (f^-<span class="mi">1</span> b))
  (O_ind_easy A
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_reflector B)
     (<span class="kr">fun</span> <span class="nv">_</span> : O_reflector A =&gt; O_inO_easy B)
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; to B (f a)) (to A a)) = to A a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">simpl</span>; <span class="kp">abstract</span> (<span class="kp">repeat</span> <span class="nb">rewrite</span> O_ind_easy_beta; <span class="nb">apply</span> ap, eissect).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb5"><span class="kn">Local Definition</span> <span class="nf">inO_paths_easy</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">A_inO</span> : In_easy A) (<span class="nv">a</span> <span class="nv">a&#39;</span> : A)
    : In_easy (a = a&#39;).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy (a = a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy (a = a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkb7"><span class="nb">simple refine</span> (inO_equiv_inO_easy (to A a = to A a&#39;) _ _
                                      (@ap _ _ (to A) a a&#39;)^-<span class="mi">1</span> _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy (to A a = to A a&#39;)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkb8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="modality-v-chkb8"><hr></label><div class="goal-conclusion">IsEquiv (ap (to A))</div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chkb9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="modality-v-chkb9"><hr></label><div class="goal-conclusion">IsEquiv (ap (to A))^-<span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkba">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In_easy (to A a = to A a&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inO_pathsO.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkbb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (ap (to A))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (@isequiv_ap _ _ _ A_inO _ _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkbc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>O_reflector</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>to</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">T</span> : <span class="kt">Type</span>, T -&gt; O_reflector T</span></span></span><br><span><var>O_indO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, O_reflector (B (to A a))) -&gt;
<span class="kr">forall</span> <span class="nv">z</span> : O_reflector A, O_reflector (B z)</span></span></span><br><span><var>O_indO_beta</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : O_reflector A -&gt; <span class="kt">Type</span>)
(<span class="nv">f</span> : <span class="kr">forall</span> <span class="nv">a</span> : A,
     O_reflector (B (to A a))) 
(<span class="nv">a</span> : A), O_indO A B f (to A a) = f a</span></span></span><br><span><var>inO_pathsO</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">z</span> <span class="nv">z&#39;</span> : O_reflector A),
IsEquiv (to (z = z&#39;))</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>A_inO</var><span class="hyp-type"><b>: </b><span>In_easy A</span></span></span><br><span><var>a, a'</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (ap (to A))^-<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> isequiv_inverse.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">easy_modality</span> : Modality
    := Build_Modality In_easy _ inO_equiv_inO_easy O_reflector O_inO_easy to O_ind_easy O_ind_easy_beta inO_paths_easy.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">EasyModalities</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** ** The modal factorization system *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">ModalFact</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> `{fs : Funext} (O : Modality).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Lemma 7.6.4 *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkbd"><span class="kn">Definition</span> <span class="nf">image</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B)
  : Factorization (@IsConnMap O) (@MapIn O) f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Factorization (@IsConnMap O) (@MapIn O) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkbe"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Factorization (@IsConnMap O) (@MapIn O) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkbf"><span class="nb">pose</span> mapinO_pr1. <span class="sd">(** Slightly speeds up next line. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>m</var><span><span class="hyp-body"><b>:= </b><span>mapinO_pr1</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">O</span> : Subuniverse) (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)) -&gt; MapIn O pr1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Factorization (@IsConnMap O) (@MapIn O) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc0"><span class="nb">refine</span> (Build_Factorization {b : B &amp; O (hfiber f b)}
                                (<span class="kr">fun</span> <span class="nv">a</span> =&gt; (f a ; to O _ (a;<span class="mi">1</span>)))
                                pr1
                                (<span class="kr">fun</span> <span class="nv">a</span> =&gt; <span class="mi">1</span>)
                                _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>m</var><span><span class="hyp-body"><b>:= </b><span>mapinO_pr1</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">O</span> : Subuniverse) (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)) -&gt; MapIn O pr1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (f a; to O (hfiber f (f a)) (a; <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc1"><span class="nb">pose</span> conn_map_functor_sigma. <span class="sd">(** Slightly speeds up next line. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>m</var><span><span class="hyp-body"><b>:= </b><span>mapinO_pr1</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">O</span> : Subuniverse) (<span class="nv">A</span> : <span class="kt">Type</span>)
(<span class="nv">B</span> : A -&gt; <span class="kt">Type</span>),
(<span class="kr">forall</span> <span class="nv">a</span> : A, In O (B a)) -&gt; MapIn O pr1</span></span></span></span><br><span><var>i</var><span><span class="hyp-body"><b>:= </b><span>conn_map_functor_sigma</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">O</span> : ReflectiveSubuniverse) (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
(<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">Q</span> : B -&gt; <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
(<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, P a -&gt; Q (f a)),
(<span class="kr">forall</span> <span class="nv">a</span> : A, IsConnMap O (g a)) -&gt;
IsConnMap O f -&gt; IsConnMap O (functor_sigma f g)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsConnMap O
  (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; (f a; to O (hfiber f (f a)) (a; <span class="mi">1</span>)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (conn_map_compose O
              (equiv_fibration_replacement f)
              (functor_sigma idmap (<span class="kr">fun</span> <span class="nv">b</span> =&gt; to O (hfiber f b)))).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">conn_map_factor1_image</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B)
  : IsConnMap O (factor1 (image f))
    := inclass1 (image f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span> <span class="nf">inO_map_factor2_image</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B)
  : MapIn O (factor2 (image f))
    := inclass2 (image f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** This is the composite of the three displayed equivalences at the beginning of the proof of Lemma 7.6.5.  Note that it involves only a single factorization of [f]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc2"><span class="kn">Lemma</span> <span class="nf">O_hfiber_O_fact</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">f</span> : A -&gt; B}
        (<span class="nv">fact</span> : Factorization (@IsConnMap O) (@MapIn O) f) (<span class="nv">b</span> : B)
  : O (hfiber (factor2 fact o factor1 fact) b)
      &lt;~&gt; hfiber (factor2 fact) b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (hfiber (factor2 fact o factor1 fact) b) &lt;~&gt;
hfiber (factor2 fact) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O (hfiber (factor2 fact o factor1 fact) b) &lt;~&gt;
hfiber (factor2 fact) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc4"><span class="nb">refine</span> (_ oE
             (equiv_O_functor O
               (hfiber_compose (factor1 fact) (factor2 fact) b))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O
  {w : hfiber (factor2 fact) b &amp;
  hfiber (factor1 fact) w.<span class="mi">1</span>} &lt;~&gt;
hfiber (factor2 fact) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc5">nrefine (equiv_sigma_contr (<span class="kr">fun</span> <span class="nv">w</span> =&gt; O (hfiber (factor1 fact) w.<span class="mi">1</span>)) oE _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : {x : fact &amp; factor2 fact x = b},
Contr (O (hfiber (factor1 fact) a.<span class="mi">1</span>))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkc6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="modality-v-chkc6"><hr></label><div class="goal-conclusion">O
  {w : hfiber (factor2 fact) b &amp;
  hfiber (factor1 fact) w.<span class="mi">1</span>} &lt;~&gt;
{w : {x : fact &amp; factor2 fact x = b} &amp;
O (hfiber (factor1 fact) w.<span class="mi">1</span>)}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : {x : fact &amp; factor2 fact x = b},
Contr (O (hfiber (factor1 fact) a.<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> w; <span class="bp">exact</span> (inclass1 fact w.<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O
  {w : hfiber (factor2 fact) b &amp;
  hfiber (factor1 fact) w.<span class="mi">1</span>} &lt;~&gt;
{w : {x : fact &amp; factor2 fact x = b} &amp;
O (hfiber (factor1 fact) w.<span class="mi">1</span>)}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkc9">nrefine ((equiv_sigma_inO_O (<span class="kr">fun</span> <span class="nv">w</span> =&gt; hfiber (factor1 fact) w.<span class="mi">1</span>))^-<span class="mi">1</span>)%equiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">In O {x : fact &amp; factor2 fact x = b}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (inclass2 fact b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** This is the corresponding first three of the displayed &quot;mapsto&quot;s in proof of Lemma 7.6.5, and also the last three in reverse order, generalized to an arbitrary path [p].  Note that it is much harder to prove than in the book, because we are working in the extra generality of a modality where [O_ind_beta] is only propositional. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkca"><span class="kn">Lemma</span> <span class="nf">O_hfiber_O_fact_inverse_beta</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">f</span> : A -&gt; B}
        (<span class="nv">fact</span> : Factorization (@IsConnMap O) (@MapIn O) f)
        (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">p</span> : factor2 fact (factor1 fact a) = b)
  : (O_hfiber_O_fact fact b)^-<span class="mi">1</span>
      (factor1 fact a ; p) = to O _ (a ; p).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(O_hfiber_O_fact fact b)^-<span class="mi">1</span> (factor1 fact a; p) =
to O (hfiber (factor2 fact o factor1 fact) b) (a; p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkcb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(O_hfiber_O_fact fact b)^-<span class="mi">1</span> (factor1 fact a; p) =
to O (hfiber (factor2 fact o factor1 fact) b) (a; p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkcc"><span class="nb">set</span> (g := factor1 fact); <span class="nb">set</span> (h := factor2 fact).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(O_hfiber_O_fact fact b)^-<span class="mi">1</span> (g a; p) =
to O (hfiber (h o g) b) (a; p)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkcd"><span class="nb">apply</span> moveR_equiv_V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(g a; p) =
O_hfiber_O_fact fact b
  (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkce"><span class="nb">unfold</span> O_hfiber_O_fact.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(g a; p) =
(equiv_sigma_contr
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    O (hfiber (factor1 fact) w.<span class="mi">1</span>))
 oE (equiv_sigma_inO_O
       (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
        hfiber (factor1 fact) w.<span class="mi">1</span>))^-<span class="mi">1</span>
 oE equiv_O_functor O
      (hfiber_compose (factor1 fact) (factor2 fact) b))
  (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkcf">ev_equiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(g a; p) =
equiv_sigma_contr
  (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
   O (hfiber (factor1 fact) w.<span class="mi">1</span>))
  ((equiv_sigma_inO_O
      (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
       hfiber (factor1 fact) w.<span class="mi">1</span>))^-<span class="mi">1</span>
     (equiv_O_functor O
        (hfiber_compose (factor1 fact) (factor2 fact)
           b)
        (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd0"><span class="nb">apply</span> moveL_equiv_M.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equiv_sigma_contr
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    O (hfiber (factor1 fact) w.<span class="mi">1</span>)))^-<span class="mi">1</span> (g a; p) =
(equiv_sigma_inO_O
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    hfiber (factor1 fact) w.<span class="mi">1</span>))^-<span class="mi">1</span>
  (equiv_O_functor O
     (hfiber_compose (factor1 fact) (factor2 fact) b)
     (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd1"><span class="nb">transitivity</span> (exist (<span class="kr">fun</span> (<span class="nv">w</span> : hfiber h b) =&gt; O (hfiber g w.<span class="mi">1</span>))
                         (g a; p) (to O (hfiber g (g a)) (a ; <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equiv_sigma_contr
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    O (hfiber (factor1 fact) w.<span class="mi">1</span>)))^-<span class="mi">1</span> (g a; p) =
((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkd2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chkd2"><hr></label><div class="goal-conclusion">((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>)) =
(equiv_sigma_inO_O
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    hfiber (factor1 fact) w.<span class="mi">1</span>))^-<span class="mi">1</span>
  (equiv_O_functor O
     (hfiber_compose (factor1 fact) (factor2 fact) b)
     (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equiv_sigma_contr
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    O (hfiber (factor1 fact) w.<span class="mi">1</span>)))^-<span class="mi">1</span> (g a; p) =
((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> moveR_equiv_V; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>)) =
(equiv_sigma_inO_O
   (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
    hfiber (factor1 fact) w.<span class="mi">1</span>))^-<span class="mi">1</span>
  (equiv_O_functor O
     (hfiber_compose (factor1 fact) (factor2 fact) b)
     (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd5"><span class="nb">apply</span> moveL_equiv_V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_sigma_inO_O
  (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
   hfiber (factor1 fact) w.<span class="mi">1</span>)
  ((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>)) =
equiv_O_functor O
  (hfiber_compose (factor1 fact) (factor2 fact) b)
  (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd6"><span class="nb">transitivity</span> (to O _ (exist (<span class="kr">fun</span> (<span class="nv">w</span> : hfiber h b) =&gt; (hfiber g w.<span class="mi">1</span>))
                         (g a; p) (a ; <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_sigma_inO_O
  (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
   hfiber (factor1 fact) w.<span class="mi">1</span>)
  ((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>)) =
to O {w : hfiber h b &amp; hfiber g w.<span class="mi">1</span>} ((g a; p); a; <span class="mi">1</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkd7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><label class="goal-separator" for="modality-v-chkd7"><hr></label><div class="goal-conclusion">to O {w : hfiber h b &amp; hfiber g w.<span class="mi">1</span>} ((g a; p); a; <span class="mi">1</span>) =
equiv_O_functor O
  (hfiber_compose (factor1 fact) (factor2 fact) b)
  (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd8">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_sigma_inO_O
  (<span class="kr">fun</span> <span class="nv">w</span> : {x : fact &amp; factor2 fact x = b} =&gt;
   hfiber (factor1 fact) w.<span class="mi">1</span>)
  ((g a; p); to O (hfiber g (g a; p).<span class="mi">1</span>) (a; <span class="mi">1</span>)) =
to O {w : hfiber h b &amp; hfiber g w.<span class="mi">1</span>} ((g a; p); a; <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">cbn</span>; <span class="kp">repeat</span> <span class="nb">rewrite</span> O_rec_beta; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkd9">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>factor2 fact (factor1 fact a) = b</span></span></span><br><span><var>g</var><span><span class="hyp-body"><b>:= </b><span>factor1 fact</span></span><span class="hyp-type"><b>: </b><span>A -&gt; fact</span></span></span></span><br><span><var>h</var><span><span class="hyp-body"><b>:= </b><span>factor2 fact</span></span><span class="hyp-type"><b>: </b><span>fact -&gt; B</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to O {w : hfiber h b &amp; hfiber g w.<span class="mi">1</span>} ((g a; p); a; <span class="mi">1</span>) =
equiv_O_functor O
  (hfiber_compose (factor1 fact) (factor2 fact) b)
  (to O (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; h (g x)) b) (a; p))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> p; <span class="nb">symmetry</span>; <span class="nb">apply</span> to_O_natural.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">TwoFactorizations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B)
            (<span class="nv">fact</span> <span class="nv">fact&#39;</span> : Factorization (@IsConnMap O) (@MapIn O) f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Let</span> <span class="nf">H</span> := <span class="kr">fun</span> <span class="nv">x</span> =&gt; fact_factors fact x @ (fact_factors fact&#39; x)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** Lemma 7.6.5, part 1. *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkda"><span class="kn">Definition</span> <span class="nf">equiv_O_factor_hfibers</span> (<span class="nv">b</span>:B)
    : hfiber (factor2 fact) b &lt;~&gt; hfiber (factor2 fact&#39;) b.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber (factor2 fact) b &lt;~&gt; hfiber (factor2 fact&#39;) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkdb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber (factor2 fact) b &lt;~&gt; hfiber (factor2 fact&#39;) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkdc"><span class="nb">refine</span> (O_hfiber_O_fact fact&#39; b oE _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber (factor2 fact) b &lt;~&gt;
O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkdd"><span class="nb">refine</span> (_ oE (O_hfiber_O_fact fact b)^-<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O
  (hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
     b) &lt;~&gt;
O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkde"><span class="nb">apply</span> equiv_O_functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x)) b &lt;~&gt;
hfiber (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
  b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkdf"><span class="nb">apply</span> equiv_hfiber_homotopic.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x)) ==
(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** Lemma 7.6.5, part 2. *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke0"><span class="kn">Definition</span> <span class="nf">equiv_O_factor_hfibers_beta</span> (<span class="nv">a</span> : A)
    : equiv_O_factor_hfibers (factor2 fact (factor1 fact a))
                             (factor1 fact a ; <span class="mi">1</span>)
      = (factor1 fact&#39; a ; (H a)^).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_O_factor_hfibers (factor2 fact (factor1 fact a))
  (factor1 fact a; <span class="mi">1</span>) = (factor1 fact&#39; a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_O_factor_hfibers (factor2 fact (factor1 fact a))
  (factor1 fact a; <span class="mi">1</span>) = (factor1 fact&#39; a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke2"><span class="nb">unfold</span> equiv_O_factor_hfibers.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(O_hfiber_O_fact fact&#39; (factor2 fact (factor1 fact a))
 oE (equiv_O_functor O
       (equiv_hfiber_homotopic
          (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
          (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
           factor2 fact&#39; (factor1 fact&#39; x)) H
          (factor2 fact (factor1 fact a)))
     oE (O_hfiber_O_fact fact
           (factor2 fact (factor1 fact a)))^-<span class="mi">1</span>))
  (factor1 fact a; <span class="mi">1</span>) = (factor1 fact&#39; a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke3">ev_equiv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_hfiber_O_fact fact&#39; (factor2 fact (factor1 fact a))
  (equiv_O_functor O
     (equiv_hfiber_homotopic
        (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
        (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
        H (factor2 fact (factor1 fact a)))
     ((O_hfiber_O_fact fact
         (factor2 fact (factor1 fact a)))^-<span class="mi">1</span>
        (factor1 fact a; <span class="mi">1</span>))) =
(factor1 fact&#39; a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke4"><span class="nb">apply</span> moveR_equiv_M.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_O_functor O
  (equiv_hfiber_homotopic
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) H
     (factor2 fact (factor1 fact a)))
  ((O_hfiber_O_fact fact
      (factor2 fact (factor1 fact a)))^-<span class="mi">1</span>
     (factor1 fact a; <span class="mi">1</span>)) =
(O_hfiber_O_fact fact&#39; (factor2 fact (factor1 fact a)))^-<span class="mi">1</span>
  (factor1 fact&#39; a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke5"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> O_hfiber_O_fact_inverse_beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_O_functor O
  (equiv_hfiber_homotopic
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) H
     (factor2 fact (factor1 fact a)))
  (to O
     (hfiber
        (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
        (factor2 fact (factor1 fact a))) (a; <span class="mi">1</span>)) =
to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a))) (a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke6"><span class="nb">unfold</span> equiv_fun, equiv_O_functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O
  (equiv_hfiber_homotopic
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) H
     (factor2 fact (factor1 fact a)))
  (to O
     (hfiber
        (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
        (factor2 fact (factor1 fact a))) (a; <span class="mi">1</span>)) =
to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a))) (a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke7"><span class="nb">transitivity</span> (to O _
                       (equiv_hfiber_homotopic
                          (factor2 fact o factor1 fact)
                          (factor2 fact&#39; o factor1 fact&#39;) H
                          (factor2 fact (factor1 fact a)) (a;<span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O
  (equiv_hfiber_homotopic
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) H
     (factor2 fact (factor1 fact a)))
  (to O
     (hfiber
        (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
        (factor2 fact (factor1 fact a))) (a; <span class="mi">1</span>)) =
to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a)))
  (equiv_hfiber_homotopic
     (factor2 fact o factor1 fact)
     (factor2 fact&#39; o factor1 fact&#39;) H
     (factor2 fact (factor1 fact a)) (a; <span class="mi">1</span>))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chke8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="modality-v-chke8"><hr></label><div class="goal-conclusion">to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a)))
  (equiv_hfiber_homotopic
     (factor2 fact o factor1 fact)
     (factor2 fact&#39; o factor1 fact&#39;) H
     (factor2 fact (factor1 fact a)) 
     (a; <span class="mi">1</span>)) =
to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a))) 
  (a; (H a)^)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chke9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">O_functor O
  (equiv_hfiber_homotopic
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) H
     (factor2 fact (factor1 fact a)))
  (to O
     (hfiber
        (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
        (factor2 fact (factor1 fact a))) (a; <span class="mi">1</span>)) =
to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a)))
  (equiv_hfiber_homotopic
     (factor2 fact o factor1 fact)
     (factor2 fact&#39; o factor1 fact&#39;) H
     (factor2 fact (factor1 fact a)) (a; <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (to_O_natural O _ _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkea">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a)))
  (equiv_hfiber_homotopic
     (factor2 fact o factor1 fact)
     (factor2 fact&#39; o factor1 fact&#39;) H
     (factor2 fact (factor1 fact a)) (a; <span class="mi">1</span>)) =
to O
  (hfiber
     (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x))
     (factor2 fact (factor1 fact a))) (a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkeb"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_hfiber_homotopic
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact (factor1 fact x))
  (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; factor2 fact&#39; (factor1 fact&#39; x)) H
  (factor2 fact (factor1 fact a)) (a; <span class="mi">1</span>) = (a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkec"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>H</var><span><span class="hyp-body"><b>:= </b><span><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
fact_factors fact x @ (fact_factors fact&#39; x)^</span></span><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : A,
factor2 fact (factor1 fact x) =
factor2 fact&#39; (factor1 fact&#39; x)</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(a; (H a)^ @ <span class="mi">1</span>) = (a; (H a)^)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap; <span class="nb">auto with</span> path_hints.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">TwoFactorizations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Theorem 7.6.6.  Recall that a lot of hard work was done in [Factorization.path_factorization]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chked"><span class="kn">Definition</span> <span class="nf">O_factsys</span> : FactorizationSystem.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FactorizationSystem</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkee"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">FactorizationSystem</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkef"><span class="nb">refine</span> (Build_FactorizationSystem
              (@IsConnMap O) _ _ _
              (@MapIn O) _ _ _
              (@image) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : X -&gt; Y)
(<span class="nv">fact</span>
 <span class="nv">fact&#39;</span> : Factorization (@IsConnMap O) (@MapIn O) f),
PathFactorization fact fact&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf0"><span class="nb">intros</span> A B f fact fact&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">PathFactorization fact fact&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf1"><span class="nb">simple refine</span> (Build_PathFactorization fact fact&#39; _ _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fact &lt;~&gt; fact&#39;</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="modality-v-chkf2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><label class="goal-separator" for="modality-v-chkf2"><hr></label><div class="goal-conclusion"><span class="nl">?path_intermediate</span> o factor1 fact == factor1 fact&#39;</div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chkf3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><label class="goal-separator" for="modality-v-chkf3"><hr></label><div class="goal-conclusion">factor2 fact == factor2 fact&#39; o <span class="nl">?path_intermediate</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="modality-v-chkf4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><label class="goal-separator" for="modality-v-chkf4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="nl">?path_factor2</span> (factor1 fact a) @
 ap (factor2 fact&#39;) (<span class="nl">?path_factor1</span> a)) @
fact_factors fact&#39; a = fact_factors fact a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf5">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">fact &lt;~&gt; fact&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf6"><span class="nb">refine</span> (_ oE equiv_fibration_replacement (factor2 fact)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : B &amp; hfiber (factor2 fact) y} &lt;~&gt; fact&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf7"><span class="nb">refine</span> ((equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span> oE _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : B &amp; hfiber (factor2 fact) y} &lt;~&gt;
{y : B &amp; hfiber (factor2 fact&#39;) y}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf8"><span class="nb">apply</span> equiv_functor_sigma_id; <span class="nb">intros</span> b; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">hfiber (factor2 fact) b &lt;~&gt; hfiber (factor2 fact&#39;) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> equiv_O_factor_hfibers.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkf9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
oE equiv_functor_sigma_id
     (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
      equiv_O_factor_hfibers f fact fact&#39; b
      :
      hfiber (factor2 fact) b &lt;~&gt;
      hfiber (factor2 fact&#39;) b)
oE equiv_fibration_replacement (factor2 fact)
o factor1 fact == factor1 fact&#39;</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intros</span> a; <span class="bp">exact</span> (pr1_path (equiv_O_factor_hfibers_beta f fact fact&#39; a)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkfa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">factor2 fact ==
factor2 fact&#39;
o ((equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
   oE equiv_functor_sigma_id
        (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
         equiv_O_factor_hfibers f fact fact&#39; b
         :
         hfiber (factor2 fact) b &lt;~&gt;
         hfiber (factor2 fact&#39;) b)
   oE equiv_fibration_replacement (factor2 fact))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkfb"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>fact</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">factor2 fact x =
factor2 fact&#39;
  (((equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
    oE equiv_functor_sigma_id
         (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
          equiv_O_factor_hfibers f fact fact&#39; b)
    oE equiv_fibration_replacement (factor2 fact)) x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> ((equiv_O_factor_hfibers f fact fact&#39; (factor2 fact x) (x ; <span class="mi">1</span>)).<span class="mi">2</span> ^).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkfc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(((<span class="kr">fun</span> <span class="nv">x</span> : fact =&gt;
   ((equiv_O_factor_hfibers f fact fact&#39;
       (factor2 fact x) (x; <span class="mi">1</span>)).<span class="mi">2</span>)^)
  :
  factor2 fact ==
  factor2 fact&#39;
  o ((equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
     oE equiv_functor_sigma_id
          (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
           equiv_O_factor_hfibers f fact fact&#39; b
           :
           hfiber (factor2 fact) b &lt;~&gt;
           hfiber (factor2 fact&#39;) b)
     oE equiv_fibration_replacement (factor2 fact)))
   (factor1 fact a) @
 ap (factor2 fact&#39;)
   (((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt;
      (equiv_O_factor_hfibers_beta f fact fact&#39; a0)
      ..<span class="mi">1</span>)
     :
     (equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
     oE equiv_functor_sigma_id
          (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
           equiv_O_factor_hfibers f fact fact&#39; b
           :
           hfiber (factor2 fact) b &lt;~&gt;
           hfiber (factor2 fact&#39;) b)
     oE equiv_fibration_replacement (factor2 fact)
     o factor1 fact == factor1 fact&#39;) a)) @
fact_factors fact&#39; a = fact_factors fact a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkfd"><span class="nb">intros</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((<span class="kr">fun</span> <span class="nv">x</span> : fact =&gt;
   ((equiv_O_factor_hfibers f fact fact&#39;
       (factor2 fact x) (x; <span class="mi">1</span>)).<span class="mi">2</span>)^)
  :
  factor2 fact ==
  factor2 fact&#39;
  o ((equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
     oE equiv_functor_sigma_id
          (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
           equiv_O_factor_hfibers f fact fact&#39; b
           :
           hfiber (factor2 fact) b &lt;~&gt;
           hfiber (factor2 fact&#39;) b)
     oE equiv_fibration_replacement (factor2 fact)))
   (factor1 fact a) @
 ap (factor2 fact&#39;)
   (((<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
      (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span>)
     :
     (equiv_fibration_replacement (factor2 fact&#39;))^-<span class="mi">1</span>
     oE equiv_functor_sigma_id
          (<span class="kr">fun</span> <span class="nv">b</span> : B =&gt;
           equiv_O_factor_hfibers f fact fact&#39; b
           :
           hfiber (factor2 fact) b &lt;~&gt;
           hfiber (factor2 fact&#39;) b)
     oE equiv_fibration_replacement (factor2 fact)
     o factor1 fact == factor1 fact&#39;) a)) @
fact_factors fact&#39; a = fact_factors fact a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkfe"><span class="nb">apply</span> moveR_pM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((equiv_O_factor_hfibers f fact fact&#39;
    (factor2 fact (factor1 fact a))
    (factor1 fact a; <span class="mi">1</span>)).<span class="mi">2</span>)^ @
ap (factor2 fact&#39;)
  (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span> =
fact_factors fact a @ (fact_factors fact&#39; a)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chkff"><span class="nb">refine</span> ((inv_V _)^ @ _ @ inv_V _); <span class="nb">apply</span> inverse2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((equiv_O_factor_hfibers f fact fact&#39;
     (factor2 fact (factor1 fact a))
     (factor1 fact a; <span class="mi">1</span>)).<span class="mi">2</span>)^ @
 ap (factor2 fact&#39;)
   (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span>)^ =
(fact_factors fact a @ (fact_factors fact&#39; a)^)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk100"><span class="nb">refine</span> (_ @ pr2_path (equiv_O_factor_hfibers_beta f fact fact&#39; a)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((equiv_O_factor_hfibers f fact fact&#39;
     (factor2 fact (factor1 fact a))
     (factor1 fact a; <span class="mi">1</span>)).<span class="mi">2</span>)^ @
 ap (factor2 fact&#39;)
   (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span>)^ =
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : fact&#39; =&gt;
   factor2 fact&#39; x = factor2 fact (factor1 fact a))
  (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span>
  (equiv_O_factor_hfibers f fact fact&#39;
     (factor2 fact (factor1 fact a))
     (factor1 fact a; <span class="mi">1</span>)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="modality-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="modality-v-chk101"><span class="nb">refine</span> (_ @ (transport_paths_Fl _ _)^).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>fs</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>O</var><span class="hyp-type"><b>: </b><span>Modality</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>fact, fact'</var><span class="hyp-type"><b>: </b><span>Factorization (@IsConnMap O) (@MapIn O) f</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((equiv_O_factor_hfibers f fact fact&#39;
     (factor2 fact (factor1 fact a))
     (factor1 fact a; <span class="mi">1</span>)).<span class="mi">2</span>)^ @
 ap (factor2 fact&#39;)
   (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span>)^ =
(ap (factor2 fact&#39;)
   (equiv_O_factor_hfibers_beta f fact fact&#39; a) ..<span class="mi">1</span>)^ @
(equiv_O_factor_hfibers f fact fact&#39;
   (factor2 fact (factor1 fact a)) (factor1 fact a; <span class="mi">1</span>)).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (inv_pp _ _ @ (<span class="mi">1</span> @@ inv_V _)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ModalFact</span>.</span></span></pre>
</div>
</div></body>
</html>
