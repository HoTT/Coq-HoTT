<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>TriJoin.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk0"><span class="kn">From</span> HoTT <span class="kn">Require Import</span> Basics Types.Paths WildCat Join.Core Tactics.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Induction and recursion principles for the triple join</span>

<span class="sd">  We show that the triple join satisfies symmetrical induction and recursion principles and prove that the recursion principle gives an equivalence of 0-groupoids.  We use this in JoinAssoc.v to prove that the join is associative.  Our approach parallels what is done in the two-variable case in Join/Core.v, especially starting with [TriJoinRecData] here and [JoinRecData] there.  That case is much simpler, so should be read first. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">TriJoinStructure</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">TriJoin</span> := Join A (Join B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join1</span> : A -&gt; TriJoin := joinl.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join2</span> : B -&gt; TriJoin := <span class="kr">fun</span> <span class="nv">b</span> =&gt; (joinr (joinl b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join3</span> : C -&gt; TriJoin := <span class="kr">fun</span> <span class="nv">c</span> =&gt; (joinr (joinr c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join12</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, join1 a = join2 b := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; jglue a (joinl b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join13</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span>, join1 a = join3 c := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">c</span> =&gt; jglue a (joinr c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join23</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, join2 b = join3 c := <span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; ap joinr (jglue b c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">join123</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span>, join12 a b @ join23 b c = join13 a c := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; triangle_v a (jglue b c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">TriJoinStructure</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> TriJoin A B C : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** [ap_trijoin] and [ap_trijoin_transport] *)</span>

<span class="sd">(** Functions send triangles to triangles. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">ap_triangle</span> {<span class="nv">X</span> <span class="nv">Y</span>} (<span class="nv">f</span> : X -&gt; Y)
  {<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : X} {<span class="nv">ab</span> : a = b} {<span class="nv">bc</span> : b = c} {<span class="nv">ac</span> : a = c} (<span class="nv">abc</span> : ab @ bc = ac)
  : ap f ab @ ap f bc = ap f ac
  := (ap_pp f ab bc)^ @ ap (ap f) abc.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This general result abstracts away the situation where [J] is [TriJoin A B C], [a] is [joinl a&#39;] for some [a&#39;], [jr] is [joinr : Join B C -&gt; J], [jg] is [fun w =&gt; jglue a&#39; w], and [p] is [jglue b c].  By working in this generality, we can do induction on [p].  This also allows us to inline the proof of [triangle_v]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1"><span class="kn">Definition</span> <span class="nf">ap_trijoin_general</span> {<span class="nv">J</span> <span class="nv">W</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : J -&gt; P)
  (<span class="nv">a</span> : J) (<span class="nv">jr</span> : W -&gt; J) (<span class="nv">jg</span> : <span class="kr">forall</span> <span class="nv">w</span>, a = jr w)
  {<span class="nv">b</span> <span class="nv">c</span> : W} (<span class="nv">p</span> : b = c)
  : ap f (jg b) @ ap f (ap jr p) = ap f (jg c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (jg b) @ ap f (ap jr p) = ap f (jg c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (jg b) @ ap f (ap jr p) = ap f (jg c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk3"><span class="nb">apply</span> ap_triangle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg b @ ap jr p = jg c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk4"><span class="nb">induction</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">jg b @ ap jr <span class="mi">1</span> = jg b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_p1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Functions send the canonical triangles in triple joins to triangles. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5"><span class="kn">Definition</span> <span class="nf">ap_trijoin</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoin A B C -&gt; P)
  (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C)
  : ap f (join12 a b) @ ap f (join23 b c) = ap f (join13 a c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (join12 a b) @ ap f (join23 b c) =
ap f (join13 a c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (join12 a b) @ ap f (join23 b c) =
ap f (join13 a c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">napply ap_trijoin_general.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7"><span class="kn">Definition</span> <span class="nf">ap_trijoin_general_transport</span> {<span class="nv">J</span> <span class="nv">W</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : J -&gt; P)
  (<span class="nv">a</span> : J) (<span class="nv">jr</span> : W -&gt; J) (<span class="nv">jg</span> : <span class="kr">forall</span> <span class="nv">w</span>, a = jr w)
  {<span class="nv">b</span> <span class="nv">c</span> : W} (<span class="nv">p</span> : b = c)
  : ap_trijoin_general f a jr jg p
    = (<span class="mi">1</span> @@ ap_compose _ f _)^ @ (transport_paths_Fr _ _)^ @ apD (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ap f (jg x)) p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin_general f a jr jg p =
((<span class="mi">1</span> @@ ap_compose jr f p)^ @
 (transport_paths_Fr p (ap f (jg b)))^) @
apD (<span class="kr">fun</span> <span class="nv">x</span> : W =&gt; ap f (jg x)) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin_general f a jr jg p =
((<span class="mi">1</span> @@ ap_compose jr f p)^ @
 (transport_paths_Fr p (ap f (jg b)))^) @
apD (<span class="kr">fun</span> <span class="nv">x</span> : W =&gt; ap f (jg x)) p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk9"><span class="nb">induction</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin_general f a jr jg <span class="mi">1</span> =
((<span class="mi">1</span> @@ ap_compose jr f <span class="mi">1</span>)^ @
 (transport_paths_Fr <span class="mi">1</span> (ap f (jg b)))^) @
apD (<span class="kr">fun</span> <span class="nv">x</span> : W =&gt; ap f (jg x)) <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka"><span class="nb">unfold</span> ap_trijoin_general; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle f (concat_p1 (jg b)) =
(<span class="mi">1</span> @ ((concat_p1 (ap f (jg b)))^)^) @ <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb"><span class="nb">induction</span> (jg b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle f (concat_p1 <span class="mi">1</span>) =
(<span class="mi">1</span> @ ((concat_p1 (ap f <span class="mi">1</span>))^)^) @ <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkc"><span class="kn">Definition</span> <span class="nf">ap_trijoin_transport</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoin A B C -&gt; P)
  (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C)
  : ap_trijoin f a b c
    = (<span class="mi">1</span> @@ ap_compose _ f _)^ @ (transport_paths_Fr _ _)^ @ apD (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ap f (jglue a x)) (jglue b c).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin f a b c =
((<span class="mi">1</span> @@ ap_compose joinr f (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap f (jglue a (joinl b))))^) @
apD (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; ap f (jglue a x)) (jglue b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin f a b c =
((<span class="mi">1</span> @@ ap_compose joinr f (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap f (jglue a (joinl b))))^) @
apD (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; ap f (jglue a x)) (jglue b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">napply ap_trijoin_general_transport.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke"><span class="kn">Definition</span> <span class="nf">ap_trijoin_general_V</span> {<span class="nv">J</span> <span class="nv">W</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : J -&gt; P)
  (<span class="nv">a</span> : J) (<span class="nv">jr</span> : W -&gt; J) (<span class="nv">jg</span> : <span class="kr">forall</span> <span class="nv">w</span>, a = jr w)
  {<span class="nv">b</span> <span class="nv">c</span> : W} (<span class="nv">p</span> : b = c)
  : ap_trijoin_general f a jr jg p^
     = (<span class="mi">1</span> @@ (ap (ap f) (ap_V jr p) @ ap_V f _)) @ moveR_pV _ _ _ (ap_trijoin_general f a jr jg p)^.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin_general f a jr jg p^ =
(<span class="mi">1</span> @@ (ap (ap f) (ap_V jr p) @ ap_V f (ap jr p))) @
moveR_pV (ap f (ap jr p)) (ap f (jg b)) (ap f (jg c))
  (ap_trijoin_general f a jr jg p)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin_general f a jr jg p^ =
(<span class="mi">1</span> @@ (ap (ap f) (ap_V jr p) @ ap_V f (ap jr p))) @
moveR_pV (ap f (ap jr p)) (ap f (jg b)) (ap f (jg c))
  (ap_trijoin_general f a jr jg p)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10"><span class="nb">induction</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin_general f a jr jg <span class="mi">1</span>^ =
(<span class="mi">1</span> @@ (ap (ap f) (ap_V jr <span class="mi">1</span>) @ ap_V f (ap jr <span class="mi">1</span>))) @
moveR_pV (ap f (ap jr <span class="mi">1</span>)) (ap f (jg b)) (ap f (jg b))
  (ap_trijoin_general f a jr jg <span class="mi">1</span>)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk11"><span class="nb">unfold</span> ap_trijoin_general; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, W, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>jr</var><span class="hyp-type"><b>: </b><span>W -&gt; J</span></span></span><br><span><var>jg</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">w</span> : W, a = jr w</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>W</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle f (concat_p1 (jg b)) =
<span class="mi">1</span> @
((concat_p1 (ap f (jg b)) @
  (ap_triangle f (concat_p1 (jg b)))^) @
 concat_p1 (ap f (jg b)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> (jg b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12"><span class="kn">Definition</span> <span class="nf">ap_trijoin_V</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoin A B C -&gt; P)
  (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C)
  : ap_triangle f (triangle_v a (jglue b c)^)
     = (<span class="mi">1</span> @@ (ap (ap f) (ap_V joinr _) @ ap_V f _)) @ moveR_pV _ _ _ (ap_trijoin f a b c)^.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle f (triangle_v a (jglue b c)^) =
(<span class="mi">1</span> @@
 (ap (ap f) (ap_V joinr (jglue b c)) @
  ap_V f (ap joinr (jglue b c)))) @
moveR_pV (ap f (join23 b c)) (ap f (join12 a b))
  (ap f (join13 a c)) (ap_trijoin f a b c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk13"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle f (triangle_v a (jglue b c)^) =
(<span class="mi">1</span> @@
 (ap (ap f) (ap_V joinr (jglue b c)) @
  ap_V f (ap joinr (jglue b c)))) @
moveR_pV (ap f (join23 b c)) (ap f (join12 a b))
  (ap f (join13 a c)) (ap_trijoin f a b c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">napply ap_trijoin_general_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The induction principle for the triple join *)</span>

<span class="sd">(** A lemma that handles the path algebra in the final step. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk14"><span class="kn">Local Definition</span> <span class="nf">trijoin_ind_helper</span> {<span class="nv">A</span> <span class="nv">BC</span> : <span class="kt">Type</span>} (<span class="nv">P</span> : Join A BC -&gt; <span class="kt">Type</span>)
  (<span class="nv">a</span> : A) (<span class="nv">b</span> <span class="nv">c</span> : BC) (<span class="nv">bc</span> : b = c)
  (<span class="nv">j1&#39;</span> : P (joinl a)) (<span class="nv">j2&#39;</span> : P (joinr b)) (<span class="nv">j3&#39;</span> : P (joinr c))
  (<span class="nv">j12&#39;</span> : jglue a b # j1&#39; = j2&#39;) (<span class="nv">j13&#39;</span> : jglue a c # j1&#39; = j3&#39;) (<span class="nv">j23&#39;</span> : (ap joinr bc) # j2&#39; = j3&#39;)
  (<span class="nv">j123&#39;</span> : transport_pp _ (jglue a b) (ap joinr bc) j1&#39; @ ap (transport _ (ap joinr bc)) j12&#39; @ j23&#39;
           = transport2 _ (triangle_v a bc) _ @ j13&#39;)
  : ((apD (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; transport P (jglue a x) j1&#39;) bc)^
       @ ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; P (joinr x)) bc) j12&#39;)
      @ ((transport_compose P joinr bc j2&#39;) @ j23&#39;) = j13&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>P (joinr c)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a c) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>transport P (ap joinr bc) j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport_pp P (jglue a b) (ap joinr bc) j1&#39; @
 ap (transport P (ap joinr bc)) j12&#39;) @ j23&#39; =
transport2 P (triangle_v a bc) j1&#39; @ j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((apD (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; transport P (jglue a x) j1&#39;) bc)^ @
 ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; P (joinr x)) bc) j12&#39;) @
(transport_compose P joinr bc j2&#39; @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk15"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>P (joinr c)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a c) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>transport P (ap joinr bc) j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport_pp P (jglue a b) (ap joinr bc) j1&#39; @
 ap (transport P (ap joinr bc)) j12&#39;) @ j23&#39; =
transport2 P (triangle_v a bc) j1&#39; @ j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((apD (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; transport P (jglue a x) j1&#39;) bc)^ @
 ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; P (joinr x)) bc) j12&#39;) @
(transport_compose P joinr bc j2&#39; @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk16"><span class="nb">induction</span> bc; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>transport P (ap joinr <span class="mi">1</span>) j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport_pp P (jglue a b) (ap joinr <span class="mi">1</span>) j1&#39; @
 ap (transport P (ap joinr <span class="mi">1</span>)) j12&#39;) @ j23&#39; =
transport2 P (triangle_v a <span class="mi">1</span>) j1&#39; @ j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; P (joinr x)) <span class="mi">1</span>) j12&#39;) @
(<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk17"><span class="nb">rewrite</span> transport_pp_1 <span class="kr">in</span> j123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>transport P (ap joinr <span class="mi">1</span>) j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport2 P (concat_p1 (jglue a b)) j1&#39; @
 ap (transport P (ap joinr <span class="mi">1</span>)) j12&#39;) @ j23&#39; =
transport2 P (triangle_v a <span class="mi">1</span>) j1&#39; @ j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; P (joinr x)) <span class="mi">1</span>) j12&#39;) @
(<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk18"><span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport2 P (concat_p1 (jglue a b)) j1&#39; @
 ap (transport P <span class="mi">1</span>) j12&#39;) @ j23&#39; =
transport2 P (concat_p1 (jglue a b)) j1&#39; @
j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : BC =&gt; P (joinr x)) <span class="mi">1</span>) j12&#39;) @
(<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19"><span class="nb">unfold</span> transport; <span class="nb">unfold</span> transport <span class="kr">in</span> j123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport2 P (concat_p1 (jglue a b)) j1&#39; @
 ap idmap j12&#39;) @ j23&#39; =
transport2 P (concat_p1 (jglue a b)) j1&#39; @
j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ ap idmap j12&#39;) @ (<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1a"><span class="nb">rewrite</span> ap_idmap; <span class="nb">rewrite</span> ap_idmap <span class="kr">in</span> j123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>(transport2 P (concat_p1 (jglue a b)) j1&#39; @
 j12&#39;) @ j23&#39; =
transport2 P (concat_p1 (jglue a b)) j1&#39; @
j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ j12&#39;) @ (<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b"><span class="nb">rewrite</span> concat_pp_p <span class="kr">in</span> j123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>transport2 P (concat_p1 (jglue a b)) j1&#39; @
(j12&#39; @ j23&#39;) =
transport2 P (concat_p1 (jglue a b)) j1&#39; @
j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ j12&#39;) @ (<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c"><span class="nb">apply</span> cancelL <span class="kr">in</span> j123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>j12&#39; @ j23&#39; = j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @ j12&#39;) @ (<span class="mi">1</span> @ j23&#39;) = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d"><span class="nb">rewrite</span> <span class="mi">2</span> concat_1p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Join A BC -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>P (joinl a)</span></span></span><br><span><var>j2', j3'</var><span class="hyp-type"><b>: </b><span>P (joinr b)</span></span></span><br><span><var>j12'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j2&#39;</span></span></span><br><span><var>j13'</var><span class="hyp-type"><b>: </b><span>transport P (jglue a b) j1&#39; = j3&#39;</span></span></span><br><span><var>j23'</var><span class="hyp-type"><b>: </b><span>j2&#39; = j3&#39;</span></span></span><br><span><var>j123'</var><span class="hyp-type"><b>: </b><span>j12&#39; @ j23&#39; = j13&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12&#39; @ j23&#39; = j13&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> j123&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** An induction principle for the triple join. Note that the hypotheses are phrased completely in terms of the &quot;constructors&quot; of [TriJoin A B C]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e"><span class="kn">Definition</span> <span class="nf">trijoin_ind</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) (<span class="nv">P</span> : TriJoin A B C -&gt; <span class="kt">Type</span>)
  (<span class="nv">join1&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span>, P (join1 a))
  (<span class="nv">join2&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span>, P (join2 b))
  (<span class="nv">join3&#39;</span> : <span class="kr">forall</span> <span class="nv">c</span>, P (join3 c))
  (<span class="nv">join12&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, join12 a b # join1&#39; a = join2&#39; b)
  (<span class="nv">join13&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span>, join13 a c # join1&#39; a = join3&#39; c)
  (<span class="nv">join23&#39;</span> : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, join23 b c # join2&#39; b = join3&#39; c)
  (<span class="nv">join123&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span>, transport_pp _ (join12 a b) (join23 b c) (join1&#39; a)
                         @ ap (transport _ (join23 b c)) (join12&#39; a b) @ join23&#39; b c
                       = transport2 _ (join123 a b c) _ @ join13&#39; a c)
  : <span class="kr">forall</span> <span class="nv">x</span>, P x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : TriJoin A B C, P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : TriJoin A B C, P x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk20">snapply Join_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, P (joinl a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk21" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk21"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : Join B C, P (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk22" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk22"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Join B C),
transport P (jglue a b) (<span class="nl">?P_A</span> a) = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk23">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, P (joinl a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> join1&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk24">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : Join B C, P (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk25">snapply Join_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) (joinl a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk26" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk26"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk27"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x))
  (jglue a b) (<span class="nl">?P_A</span> a) = 
<span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk28">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) (joinl a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> join2&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk29">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> join3&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x))
  (jglue a b) (join2&#39; a) = 
join3&#39; b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2b"><span class="nb">intros</span> b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x))
  (jglue b c) (join2&#39; b) = 
join3&#39; c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2c">lhs rapply (transport_compose P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport P (ap joinr (jglue b c)) (join2&#39; b) =
join3&#39; c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join23&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Join B C),
transport P (jglue a b) (join1&#39; a) =
Join_ind (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) join2&#39;
  join3&#39;
  (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
   transport_compose P joinr (jglue b0 c) (join2&#39; b0) @
   join23&#39; b0 c) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2e"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : Join B C,
transport P (jglue a b) (join1&#39; a) =
Join_ind (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) join2&#39;
  join3&#39;
  (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
   transport_compose P joinr (jglue b0 c) (join2&#39; b0) @
   join23&#39; b0 c) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk2f">snapply Join_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a0</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
 transport P (jglue a x) (join1&#39; a) =
 Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
   join3&#39;
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
    transport_compose P joinr (jglue b c) (join2&#39; b) @
    join23&#39; b c) x) (joinl a0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk30" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk30"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
 transport P (jglue a x) (join1&#39; a) =
 Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
   join3&#39;
   (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
    transport_compose P joinr (jglue b0 c) (join2&#39; b0) @
    join23&#39; b0 c) x) (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk31" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk31"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : B) (<span class="nv">b</span> : C),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   transport P (jglue a x) (join1&#39; a) =
   Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
     join3&#39;
     (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
      transport_compose P joinr 
        (jglue b0 c) (join2&#39; b0) @ 
      join23&#39; b0 c) x) (jglue a0 b) 
  (<span class="nl">?P_A</span> a0) = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk32">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a0</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
 transport P (jglue a x) (join1&#39; a) =
 Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
   join3&#39;
   (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
    transport_compose P joinr (jglue b c) (join2&#39; b) @
    join23&#39; b c) x) (joinl a0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk33"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a0</span> : B,
transport P (jglue a (joinl a0)) (join1&#39; a) =
join2&#39; a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (join12&#39; a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk34">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
 transport P (jglue a x) (join1&#39; a) =
 Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
   join3&#39;
   (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
    transport_compose P joinr (jglue b0 c) (join2&#39; b0) @
    join23&#39; b0 c) x) (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk35"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
transport P (jglue a (joinr b)) (join1&#39; a) = join3&#39; b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (join13&#39; a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk36">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : B) (<span class="nv">b</span> : C),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   transport P (jglue a x) (join1&#39; a) =
   Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
     join3&#39;
     (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
      transport_compose P joinr 
        (jglue b0 c) (join2&#39; b0) @ 
      join23&#39; b0 c) x) (jglue a0 b)
  ((join12&#39; a
    :
    <span class="kr">forall</span> <span class="nv">a1</span> : B,
    (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
     transport P (jglue a x) (join1&#39; a) =
     Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0))
       join2&#39; join3&#39;
       (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
        transport_compose P joinr 
          (jglue b0 c) (join2&#39; b0) @ 
        join23&#39; b0 c) x) 
      (joinl a1)) a0) =
(join13&#39; a
 :
 <span class="kr">forall</span> <span class="nv">b0</span> : C,
 (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
  transport P (jglue a x) (join1&#39; a) =
  Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
    join3&#39;
    (<span class="kr">fun</span> (<span class="nv">b1</span> : B) (<span class="nv">c</span> : C) =&gt;
     transport_compose P joinr 
       (jglue b1 c) (join2&#39; b1) @ 
     join23&#39; b1 c) x) (joinr b0)) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk37"><span class="nb">intros</span> b c; <span class="nb">cbn</span> beta zeta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   transport P (jglue a x) (join1&#39; a) =
   Join_ind (<span class="kr">fun</span> <span class="nv">x0</span> : Join B C =&gt; P (joinr x0)) join2&#39;
     join3&#39;
     (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      transport_compose P joinr (jglue b c) (join2&#39; b) @
      join23&#39; b c) x) (jglue b c) 
  (join12&#39; a b) = join13&#39; a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk38">lhs napply (transport_paths_FlFr_D (jglue b c)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((apD
    (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
     transport P (jglue a x) (join1&#39; a)) 
    (jglue b c))^ @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x))
      (jglue b c)) (join12&#39; a b)) @
apD
  (Join_ind (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) join2&#39;
     join3&#39;
     (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      transport_compose P joinr (jglue b c) (join2&#39; b) @
      join23&#39; b c)) (jglue b c) = 
join13&#39; a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk39">lhs napply (<span class="mi">1</span> @@ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">apD
  (Join_ind (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x)) join2&#39;
     join3&#39;
     (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      transport_compose P joinr (jglue b c) (join2&#39; b) @
      join23&#39; b c)) (jglue b c) = 
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk3a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk3a"><hr></label><div class="goal-conclusion">((apD
    (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
     transport P (jglue a x) (join1&#39; a)) 
    (jglue b c))^ @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x))
      (jglue b c)) (join12&#39; a b)) @ 
<span class="nl">?Goal</span> = join13&#39; a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk3b"><span class="mi">1</span>: napply Join_ind_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>join1'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, P (join1 a)</span></span></span><br><span><var>join2'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, P (join2 b)</span></span></span><br><span><var>join3'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, P (join3 c)</span></span></span><br><span><var>join12'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport P (join12 a b) (join1&#39; a) =
join2&#39; b</span></span></span><br><span><var>join13'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport P (join13 a c) (join1&#39; a) =
join3&#39; c</span></span></span><br><span><var>join23'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport P (join23 b c) (join2&#39; b) =
join3&#39; c</span></span></span><br><span><var>join123'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp P (join12 a b) 
   (join23 b c) (join1&#39; a) @
 ap (transport P (join23 b c))
   (join12&#39; a b)) @ join23&#39; b c =
transport2 P (join123 a b c) (join1&#39; a) @
join13&#39; a c</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((apD
    (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
     transport P (jglue a x) (join1&#39; a)) 
    (jglue b c))^ @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; P (joinr x))
      (jglue b c)) (join12&#39; a b)) @
(transport_compose P joinr (jglue b c) (join2&#39; b) @
 join23&#39; b c) = join13&#39; a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_ind_helper, join123&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The recursion principle for the triple join, and many results about it *)</span>

<span class="sd">(** We&#39;ll bundle up the arguments into a record. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">TriJoinRecData</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} := {
    j1 : A -&gt; P;
    j2 : B -&gt; P;
    j3 : C -&gt; P;
    j12 : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, j1 a = j2 b;
    j13 : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span>, j1 a = j3 c;
    j23 : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, j2 b = j3 c;
    j123 : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span>, j12 a b @ j23 b c = j13 a c;
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> TriJoinRecData : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> Build_TriJoinRecData {A B C P}%_type_scope (j1 j2 j3 j12 j13 j23 j123)%_function_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk3c"><span class="kn">Definition</span> <span class="nf">trijoin_rec</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P)
  : TriJoin A B C $-&gt; P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A B C $-&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk3d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A B C $-&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk3e">snapply Join_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk3f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk3f"><hr></label><div class="goal-conclusion">Join B C -&gt; P</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk40" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk40"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Join B C), <span class="nl">?P_A</span> a = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk41">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (j1 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk42">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Join B C -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk43">snapply Join_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; P</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk44" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk44"><hr></label><div class="goal-conclusion">C -&gt; P</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk45" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk45"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : C), <span class="nl">?P_A</span> a = <span class="nl">?P_B</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk46">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (j2 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk47">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">C -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (j3 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk48">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : B) (<span class="nv">b</span> : C), j2 f a = j3 f b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (j23 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk49">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : Join B C),
j1 f a = Join_rec (j2 f) (j3 f) (j23 f) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk4a"><span class="nb">intro</span> a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : Join B C,
j1 f a = Join_rec (j2 f) (j3 f) (j23 f) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk4b">snapply Join_ind; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a0</span> : B,
j1 f a = Join_rec (j2 f) (j3 f) (j23 f) (joinl a0)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk4c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk4c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
j1 f a = Join_rec (j2 f) (j3 f) (j23 f) (joinr b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk4d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk4d"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : B) (<span class="nv">b</span> : C),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
  (jglue a0 b) (<span class="nl">?Goal</span> a0) = <span class="nl">?Goal0</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk4e">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a0</span> : B,
j1 f a = Join_rec (j2 f) (j3 f) (j23 f) (joinl a0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (j12 f a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk4f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : C,
j1 f a = Join_rec (j2 f) (j3 f) (j23 f) (joinr b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (j13 f a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk50">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a0</span> : B) (<span class="nv">b</span> : C),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
  (jglue a0 b) (j12 f a a0) = j13 f a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk51"><span class="nb">intros</span> b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
  (jglue b c) (j12 f a b) = j13 f a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk52">lhs napply transport_paths_Fr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f a b @
ap (Join_rec (j2 f) (j3 f) (j23 f)) (jglue b c) =
j13 f a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="mi">1</span> @@ Join_rec_beta_jglue _ _ _ _ _ @ j123 f a b c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Beta rules for the recursion principle. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_rec_beta_join12</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P) (<span class="nv">a</span> : A) (<span class="nv">b</span> : B)
  : ap (trijoin_rec f) (join12 a b) = j12 f a b
  := Join_rec_beta_jglue _ _ _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_rec_beta_join13</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P) (<span class="nv">a</span> : A) (<span class="nv">c</span> : C)
  : ap (trijoin_rec f) (join13 a c) = j13 f a c
  := Join_rec_beta_jglue _ _ _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk53"><span class="kn">Definition</span> <span class="nf">trijoin_rec_beta_join23</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C)
  : ap (trijoin_rec f) (join23 b c) = j23 f b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (join23 b c) = j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk54"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (trijoin_rec f) (join23 b c) = j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk55"><span class="nb">unfold</span> trijoin_rec, join23.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (Join_rec (j1 f) (Join_rec (j2 f) (j3 f) (j23 f))
     (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
      Join_ind
        (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
         j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
        (j12 f a) (j13 f a)
        (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
         transport_paths_Fr (jglue b c) (j12 f a b) @
         ((<span class="mi">1</span> @@
           Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b
             c) @ j123 f a b c))))
  (ap joinr (jglue b c)) = j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk56">lhs_V napply (ap_compose joinr); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   Join_rec (j2 f) (j3 f) (j23 f) x) (jglue b c) =
j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Join_rec_beta_jglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk57"><span class="kn">Local Lemma</span> <span class="nf">trijoin_rec_beta_join123_helper</span> {<span class="nv">A</span> : <span class="kt">Type</span>} {<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : A}
  {<span class="nv">u0</span> <span class="nv">u1</span> : x = y} {<span class="nv">p0</span> <span class="nv">p1</span> <span class="nv">r1</span> : y = z} {<span class="nv">q0</span> <span class="nv">s1</span> <span class="nv">t1</span> : x = z}
  (<span class="nv">p</span> : p0 = p1) (<span class="nv">q</span> : q0 = u0 @ p0) (<span class="nv">r</span> : p0 = r1)
  (<span class="nv">s</span> : u1 @ r1 = s1) (<span class="nv">t</span> : s1 = t1) (<span class="nv">u</span> : u0 = u1)
  : ((<span class="mi">1</span> @@ p)^ @ q^) @ (((q @ (u @@ <span class="mi">1</span>)) @ ((<span class="mi">1</span> @@ r) @ s)) @ t)
    = ((u @@ (p^ @ r)) @ s) @ t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y, z</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>u0, u1</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>p0, p1, r1</var><span class="hyp-type"><b>: </b><span>y = z</span></span></span><br><span><var>q0, s1, t1</var><span class="hyp-type"><b>: </b><span>x = z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>p0 = p1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>q0 = u0 @ p0</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>p0 = r1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>u1 @ r1 = s1</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>s1 = t1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>u0 = u1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ p)^ @ q^) @
(((q @ (u @@ <span class="mi">1</span>)) @ ((<span class="mi">1</span> @@ r) @ s)) @ t) =
((u @@ (p^ @ r)) @ s) @ t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk58"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y, z</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>u0, u1</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>p0, p1, r1</var><span class="hyp-type"><b>: </b><span>y = z</span></span></span><br><span><var>q0, s1, t1</var><span class="hyp-type"><b>: </b><span>x = z</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>p0 = p1</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>q0 = u0 @ p0</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>p0 = r1</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>u1 @ r1 = s1</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>s1 = t1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>u0 = u1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ p)^ @ q^) @
(((q @ (u @@ <span class="mi">1</span>)) @ ((<span class="mi">1</span> @@ r) @ s)) @ t) =
((u @@ (p^ @ r)) @ s) @ t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk59"><span class="nb">induction</span> u, t, s, r, p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>x, y, z</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>u0</var><span class="hyp-type"><b>: </b><span>x = y</span></span></span><br><span><var>p0</var><span class="hyp-type"><b>: </b><span>y = z</span></span></span><br><span><var>q0</var><span class="hyp-type"><b>: </b><span>x = z</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>q0 = u0 @ p0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ <span class="mi">1</span>)^ @ q^) @
(((q @ (<span class="mi">1</span> @@ <span class="mi">1</span>)) @ ((<span class="mi">1</span> @@ <span class="mi">1</span>) @ <span class="mi">1</span>)) @ <span class="mi">1</span>) =
((<span class="mi">1</span> @@ (<span class="mi">1</span>^ @ <span class="mi">1</span>)) @ <span class="mi">1</span>) @ <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">revert</span> q0 q; <span class="bp">by</span> <span class="nb">apply</span> paths_ind_r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5a"><span class="kn">Definition</span> <span class="nf">trijoin_rec_beta_join123</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P)
  (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C)
  : ap_trijoin (trijoin_rec f) a b c
    = (trijoin_rec_beta_join12 f a b @@ trijoin_rec_beta_join23 f b c)
        @ j123 f a b c @ (trijoin_rec_beta_join13 f a c)^.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin (trijoin_rec f) a b c =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_trijoin (trijoin_rec f) a b c =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Expand the LHS: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5c">lhs napply ap_trijoin_transport.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ ap_compose joinr (trijoin_rec f) (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap (trijoin_rec f) (jglue a (joinl b))))^) @
apD
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; ap (trijoin_rec f) (jglue a x))
  (jglue b c) =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5d"><span class="nb">rewrite</span> (apD_homotopic (Join_rec_beta_jglue _ _ _ _) (jglue b c)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ ap_compose joinr (trijoin_rec f) (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap (trijoin_rec f) (jglue a (joinl b))))^) @
((ap
    (transport
       (<span class="kr">fun</span> <span class="nv">b</span> : Join B C =&gt;
        Join_rec (j1 f)
          (Join_rec (j2 f) (j3 f) (j23 f))
          (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
           Join_ind
             (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
              j1 f a =
              Join_rec (j2 f) (j3 f) (j23 f) x)
             (j12 f a) (j13 f a)
             (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
              transport_paths_Fr (jglue b0 c)
                (j12 f a b0) @
              ((<span class="mi">1</span> @@
                Join_rec_beta_jglue (j2 f) (j3 f)
                  (j23 f) b0 c) @ j123 f a b0 c)))
          (joinl a) =
        Join_rec (j1 f)
          (Join_rec (j2 f) (j3 f) (j23 f))
          (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
           Join_ind
             (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
              j1 f a =
              Join_rec (j2 f) (j3 f) (j23 f) x)
             (j12 f a) (j13 f a)
             (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
              transport_paths_Fr (jglue b0 c)
                (j12 f a b0) @
              ((<span class="mi">1</span> @@
                Join_rec_beta_jglue (j2 f) (j3 f)
                  (j23 f) b0 c) @ j123 f a b0 c)))
          (joinr b)) (jglue b c))
    (Join_rec_beta_jglue (j1 f)
       (Join_rec (j2 f) (j3 f) (j23 f))
       (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
        Join_ind
          (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
           j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
          (j12 f a) (j13 f a)
          (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
           transport_paths_Fr (jglue b c) (j12 f a b) @
           ((<span class="mi">1</span> @@
             Join_rec_beta_jglue (j2 f) (j3 f) (j23 f)
               b c) @ j123 f a b c))) a (joinl b)) @
  apD
    (Join_ind
       (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
        j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
       (j12 f a) (j13 f a)
       (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
        transport_paths_Fr (jglue b c) (j12 f a b) @
        ((<span class="mi">1</span> @@
          Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b
            c) @ j123 f a b c))) (jglue b c)) @
 (Join_rec_beta_jglue (j1 f)
    (Join_rec (j2 f) (j3 f) (j23 f))
    (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
     Join_ind
       (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
        j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
       (j12 f a) (j13 f a)
       (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
        transport_paths_Fr (jglue b c) (j12 f a b) @
        ((<span class="mi">1</span> @@
          Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b
            c) @ j123 f a b c))) a (joinr c))^) =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5e"><span class="nb">rewrite</span> Join_ind_beta_jglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ ap_compose joinr (trijoin_rec f) (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap (trijoin_rec f) (jglue a (joinl b))))^) @
((ap
    (transport
       (<span class="kr">fun</span> <span class="nv">b</span> : Join B C =&gt;
        Join_rec (j1 f)
          (Join_rec (j2 f) (j3 f) (j23 f))
          (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
           Join_ind
             (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
              j1 f a =
              Join_rec (j2 f) (j3 f) (j23 f) x)
             (j12 f a) (j13 f a)
             (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
              transport_paths_Fr (jglue b0 c)
                (j12 f a b0) @
              ((<span class="mi">1</span> @@
                Join_rec_beta_jglue (j2 f) (j3 f)
                  (j23 f) b0 c) @ j123 f a b0 c)))
          (joinl a) =
        Join_rec (j1 f)
          (Join_rec (j2 f) (j3 f) (j23 f))
          (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
           Join_ind
             (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
              j1 f a =
              Join_rec (j2 f) (j3 f) (j23 f) x)
             (j12 f a) (j13 f a)
             (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
              transport_paths_Fr (jglue b0 c)
                (j12 f a b0) @
              ((<span class="mi">1</span> @@
                Join_rec_beta_jglue (j2 f) (j3 f)
                  (j23 f) b0 c) @ j123 f a b0 c)))
          (joinr b)) (jglue b c))
    (Join_rec_beta_jglue (j1 f)
       (Join_rec (j2 f) (j3 f) (j23 f))
       (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
        Join_ind
          (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
           j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
          (j12 f a) (j13 f a)
          (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
           transport_paths_Fr (jglue b c) (j12 f a b) @
           ((<span class="mi">1</span> @@
             Join_rec_beta_jglue (j2 f) (j3 f) (j23 f)
               b c) @ j123 f a b c))) a (joinl b)) @
  (transport_paths_Fr (jglue b c) (j12 f a b) @
   ((<span class="mi">1</span> @@
     Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b c) @
    j123 f a b c))) @
 (Join_rec_beta_jglue (j1 f)
    (Join_rec (j2 f) (j3 f) (j23 f))
    (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
     Join_ind
       (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
        j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
       (j12 f a) (j13 f a)
       (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
        transport_paths_Fr (jglue b c) (j12 f a b) @
        ((<span class="mi">1</span> @@
          Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b
            c) @ j123 f a b c))) a (joinr c))^) =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Change [ap (transport __) _] on LHS. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk5f"><span class="nb">rewrite</span> (concat_p_pp _ (transport_paths_Fr (jglue b c) (j12 f a b)) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ ap_compose joinr (trijoin_rec f) (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap (trijoin_rec f) (jglue a (joinl b))))^) @
(((ap
     (transport
        (<span class="kr">fun</span> <span class="nv">b</span> : Join B C =&gt;
         Join_rec (j1 f)
           (Join_rec (j2 f) (j3 f) (j23 f))
           (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
            Join_ind
              (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
               j1 f a =
               Join_rec (j2 f) (j3 f) (j23 f) x)
              (j12 f a) (j13 f a)
              (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
               transport_paths_Fr (jglue b0 c)
                 (j12 f a b0) @
               ((<span class="mi">1</span> @@
                 Join_rec_beta_jglue (...) (...) (...)
                   b0 c) @ j123 f a b0 c))) (joinl a) =
         Join_rec (j1 f)
           (Join_rec (j2 f) (j3 f) (j23 f))
           (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
            Join_ind
              (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
               j1 f a =
               Join_rec (j2 f) (j3 f) (j23 f) x)
              (j12 f a) (j13 f a)
              (<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c</span> : C) =&gt;
               transport_paths_Fr (jglue b0 c)
                 (j12 f a b0) @
               ((<span class="mi">1</span> @@
                 Join_rec_beta_jglue (...) (...) (...)
                   b0 c) @ j123 f a b0 c))) (joinr b))
        (jglue b c))
     (Join_rec_beta_jglue (j1 f)
        (Join_rec (j2 f) (j3 f) (j23 f))
        (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
         Join_ind
           (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
            j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
           (j12 f a) (j13 f a)
           (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
            transport_paths_Fr (jglue b c) (j12 f a b) @
            ((<span class="mi">1</span> @@
              Join_rec_beta_jglue (j2 f) (j3 f)
                (j23 f) b c) @ j123 f a b c))) a
        (joinl b)) @
   transport_paths_Fr (jglue b c) (j12 f a b)) @
  ((<span class="mi">1</span> @@ Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b c) @
   j123 f a b c)) @
 (Join_rec_beta_jglue (j1 f)
    (Join_rec (j2 f) (j3 f) (j23 f))
    (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
     Join_ind
       (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
        j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
       (j12 f a) (j13 f a)
       (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
        transport_paths_Fr (jglue b c) (j12 f a b) @
        ((<span class="mi">1</span> @@
          Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b
            c) @ j123 f a b c))) a (joinr c))^) =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk60"><span class="nb">rewrite</span> (concat_Ap (transport_paths_Fr (jglue b c))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((<span class="mi">1</span> @@ ap_compose joinr (trijoin_rec f) (jglue b c))^ @
 (transport_paths_Fr (jglue b c)
    (ap (trijoin_rec f) (jglue a (joinl b))))^) @
(((transport_paths_Fr (jglue b c)
     (ap
        (Join_rec (j1 f)
           (Join_rec (j2 f) (j3 f) (j23 f))
           (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
            Join_ind
              (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
               j1 f a =
               Join_rec (j2 f) (j3 f) (j23 f) x)
              (j12 f a) (j13 f a)
              (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
               transport_paths_Fr (jglue b c)
                 (j12 f a b) @
               ((<span class="mi">1</span> @@
                 Join_rec_beta_jglue (j2 f) (j3 f)
                   (j23 f) b c) @ j123 f a b c))))
        (jglue a (joinl b))) @
   ap
     (<span class="kr">fun</span>
        <span class="nv">q</span> : j1 f a =
            Join_rec (j2 f) (j3 f) (j23 f) (joinl b)
      =&gt;
      q @
      ap (Join_rec (j2 f) (j3 f) (j23 f)) (jglue b c))
     (Join_rec_beta_jglue (j1 f)
        (Join_rec (j2 f) (j3 f) (j23 f))
        (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
         Join_ind
           (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
            j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
           (j12 f a) (j13 f a)
           (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
            transport_paths_Fr (jglue b c) (j12 f a b) @
            ((<span class="mi">1</span> @@
              Join_rec_beta_jglue (j2 f) (j3 f)
                (j23 f) b c) @ j123 f a b c))) a
        (joinl b))) @
  ((<span class="mi">1</span> @@ Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b c) @
   j123 f a b c)) @
 (Join_rec_beta_jglue (j1 f)
    (Join_rec (j2 f) (j3 f) (j23 f))
    (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt;
     Join_ind
       (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
        j1 f a = Join_rec (j2 f) (j3 f) (j23 f) x)
       (j12 f a) (j13 f a)
       (<span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
        transport_paths_Fr (jglue b c) (j12 f a b) @
        ((<span class="mi">1</span> @@
          Join_rec_beta_jglue (j2 f) (j3 f) (j23 f) b
            c) @ j123 f a b c))) a (joinr c))^) =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Everything that remains is pure path algebra. *)</span>
  <span class="c">(* [trijoin_rec_beta_join23] expands to something of the form [p^ @ r], so that&#39;s what is in the lemma.  One can unfold it to see this, but the [Qed] is a bit faster without this: *)</span>
  <span class="c">(* unfold trijoin_rec_beta_join23. *)</span>
  <span class="c">(* Note that one of the [ap]s on the LHS computes to [u @@ 1], so that&#39;s what is in the lemma: *)</span>
  <span class="c">(* change (ap (fun q =&gt; q @ ?x) ?u) with (u @@ @idpath _ x). *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">napply trijoin_rec_beta_join123_helper.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We&#39;re next going to define a map in the other direction.  We do it via showing that [TriJoinRecData] is a 0-coherent 1-functor to [Type]. We&#39;ll later show that it is a 1-functor to 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk61"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_fun</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q) (<span class="nv">f</span> : TriJoinRecData A B C P)
  : TriJoinRecData A B C Q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecData A B C Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk62"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecData A B C Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk63">snapply Build_TriJoinRecData.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Q</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk64" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk64"><hr></label><div class="goal-conclusion">B -&gt; Q</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk65" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk65"><hr></label><div class="goal-conclusion">C -&gt; Q</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk66" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk66"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), <span class="nl">?j1</span> a = <span class="nl">?j2</span> b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk67" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk67"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), <span class="nl">?j1</span> a = <span class="nl">?j3</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk68" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk68"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), <span class="nl">?j2</span> b = <span class="nl">?j3</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk69" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk69"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
<span class="nl">?j12</span> a b @ <span class="nl">?j23</span> b c = <span class="nl">?j13</span> a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (g o j1 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">B -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (g o j2 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">C -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (g o j3 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), (g o j1 f) a = (g o j2 f) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; ap g (j12 f a b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), (g o j1 f) a = (g o j3 f) c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">c</span> =&gt; ap g (j13 f a c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk6f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), (g o j2 f) b = (g o j3 f) c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; ap g (j23 f b c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk70">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt; ap g (j12 f a0 b0)) a b @
(<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt; ap g (j23 f b0 c0)) b c =
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt; ap g (j13 f a0 c0)) a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk71"><span class="nb">intros</span> a b c; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (j12 f a b) @ ap g (j23 f b c) = ap g (j13 f a c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap_triangle g (j123 f a b c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The last four goals above can also be handled by the induction tactics below, but it&#39;s useful to be concrete. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The triple join itself has canonical [TriJoinRecData]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_trijoin</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : TriJoinRecData A B C (Join A (Join B C))
  := Build_TriJoinRecData join1 join2 join3 join12 join13 join23 join123.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Combining these gives a function going in the opposite direction to [trijoin_rec]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_rec_inv</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoin A B C -&gt; P)
  : TriJoinRecData A B C P
  := trijoinrecdata_fun f (trijoinrecdata_trijoin A B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Under [Funext], [trijoin_rec] and [trijoin_rec_inv] should be inverse equivalences.  We&#39;ll avoid [Funext] and show that they are equivalences of 0-groupoids, where we choose the path structures carefully. *)</span>

<span class="sd">(** ** The graph structure on [TriJoinRecData A B C P] *)</span>

<span class="sd">(** The type of fillers for a triangular prism with five 2d faces [abc], [abc&#39;], [k12], [k13], [k23]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">prism</span> {<span class="nv">P</span> : <span class="kt">Type</span>}
  {<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : P} {<span class="nv">ab</span> : a = b} {<span class="nv">ac</span> : a = c} {<span class="nv">bc</span> : b = c} (<span class="nv">abc</span> : ab @ bc = ac)
  {<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P} {<span class="nv">ab&#39;</span> : a&#39; = b&#39;} {<span class="nv">ac&#39;</span> : a&#39; = c&#39;} {<span class="nv">bc&#39;</span> : b&#39; = c&#39;} (<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;)
  {<span class="nv">k1</span> : a = a&#39;} {<span class="nv">k2</span> : b = b&#39;} {<span class="nv">k3</span> : c = c&#39;}
  (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;) (<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;) (<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;)
  := concat_p_pp _ _ _ @ whiskerR abc k3 @ k13
    = whiskerL ab k23
    @ concat_p_pp _ _ _ @ whiskerR k12 bc&#39;
    @ concat_pp_p _ _ _ @ whiskerL k1 abc&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The &quot;identity&quot; filler is slightly non-trivial, because the fillers for the squares, e.g. [ab @ 1 = 1 @ ab], must be non-trivial. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk72"><span class="kn">Definition</span> <span class="nf">prism_id</span> {<span class="nv">P</span> : <span class="kt">Type</span>}
  {<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : P} {<span class="nv">ab</span> : a = b} {<span class="nv">ac</span> : a = c} {<span class="nv">bc</span> : b = c} (<span class="nv">abc</span> : ab @ bc = ac)
  : prism abc abc (equiv_p1_1q idpath) (equiv_p1_1q idpath) (equiv_p1_1q idpath).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism abc abc (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>)
  (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk73"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism abc abc (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>)
  (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk74"><span class="nb">induction</span> ab, bc, abc; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The paths between elements of [TriJoinRecData A B C P].  Under [Funext], this type will be equivalent to the identity type.  But without [Funext], this definition will be more useful. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">TriJoinRecPath</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">f</span> <span class="nv">g</span> : TriJoinRecData A B C P} := {
    h1 : <span class="kr">forall</span> <span class="nv">a</span>, j1 f a = j1 g a;
    h2 : <span class="kr">forall</span> <span class="nv">b</span>, j2 f b = j2 g b;
    h3 : <span class="kr">forall</span> <span class="nv">c</span>, j3 f c = j3 g c;
    h12 : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, j12 f a b @ h2 b = h1 a @ j12 g a b;
    h13 : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span>, j13 f a c @ h3 c = h1 a @ j13 g a c;
    h23 : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, j23 f b c @ h3 c = h2 b @ j23 g b c;
    h123 : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span>, prism (j123 f a b c) (j123 g a b c) (h12 a b) (h13 a c) (h23 b c);
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> TriJoinRecPath {A B C P} f g.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We also define data for [trijoin_rec] that unbundles the first three components.  This lets us talk about paths between two such when the first three components are definitionally equal. This is a common special case, and this set-up greatly simplifies a lot of path algebra in later proofs. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">TriJoinRecData&#39;</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">j1&#39;</span> : A -&gt; P} {<span class="nv">j2&#39;</span> : B -&gt; P} {<span class="nv">j3&#39;</span> : C -&gt; P} := {
    j12&#39; : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, j1&#39; a = j2&#39; b;
    j13&#39; : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span>, j1&#39; a = j3&#39; c;
    j23&#39; : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, j2&#39; b = j3&#39; c;
    j123&#39; : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span>, j12&#39; a b @ j23&#39; b c = j13&#39; a c;
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> TriJoinRecData&#39; {A B C P} j1&#39; j2&#39; j3&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> Build_TriJoinRecData&#39; {A B C P}%_type_scope
  (j1&#39; j2&#39; j3&#39; j12&#39; j13&#39; j23&#39; j123&#39;)%_function_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">prism&#39;</span> {<span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : P}
  {<span class="nv">ab</span> : a = b} {<span class="nv">ac</span> : a = c} {<span class="nv">bc</span> : b = c} (<span class="nv">abc</span> : ab @ bc = ac)
  {<span class="nv">ab&#39;</span> : a = b} {<span class="nv">ac&#39;</span> : a = c} {<span class="nv">bc&#39;</span> : b = c} (<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;)
  (<span class="nv">k12</span> : ab = ab&#39;) (<span class="nv">k13</span> : ac = ac&#39;) (<span class="nv">k23</span> : bc = bc&#39;)
  := abc @ k13 = (k12 @@ k23) @ abc&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Record</span> <span class="nf">TriJoinRecPath&#39;</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">j1&#39;</span> : A -&gt; P} {<span class="nv">j2&#39;</span> : B -&gt; P} {<span class="nv">j3&#39;</span> : C -&gt; P}
  {<span class="nv">f</span> <span class="nv">g</span> : TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;} := {
    h12&#39; : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, j12&#39; f a b = j12&#39; g a b;
    h13&#39; : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">c</span>, j13&#39; f a c = j13&#39; g a c;
    h23&#39; : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span>, j23&#39; f b c = j23&#39; g b c;
    h123&#39; : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span>, prism&#39; (j123&#39; f a b c) (j123&#39; g a b c) (h12&#39; a b) (h13&#39; a c) (h23&#39; b c);
  }.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> TriJoinRecPath&#39; {A B C P} {j1&#39; j2&#39; j3&#39;} f g.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We can bundle and unbundle these types of data.  For unbundling, we just handle [TriJoinRecData] for now. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">bundle_trijoinrecdata</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">j1&#39;</span> : A -&gt; P} {<span class="nv">j2&#39;</span> : B -&gt; P} {<span class="nv">j3&#39;</span> : C -&gt; P}
  (<span class="nv">f</span> : TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;)
  : TriJoinRecData A B C P
  := Build_TriJoinRecData j1&#39; j2&#39; j3&#39; (j12&#39; f) (j13&#39; f) (j23&#39; f) (j123&#39; f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">unbundle_trijoinrecdata</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P)
  : TriJoinRecData&#39; (j1 f) (j2 f) (j3 f)
  := Build_TriJoinRecData&#39; (j1 f) (j2 f) (j3 f) (j12 f) (j13 f) (j23 f) (j123 f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The proof by induction that is easily available to us here is what saves work in more complicated contexts. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk75"><span class="kn">Definition</span> <span class="nf">bundle_prism</span> {<span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : P}
  {<span class="nv">ab</span> : a = b} {<span class="nv">ac</span> : a = c} {<span class="nv">bc</span> : b = c} (<span class="nv">abc</span> : ab @ bc = ac)
  {<span class="nv">ab&#39;</span> : a = b} {<span class="nv">ac&#39;</span> : a = c} {<span class="nv">bc&#39;</span> : b = c} (<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;)
  (<span class="nv">k12</span> : ab = ab&#39;) (<span class="nv">k13</span> : ac = ac&#39;) (<span class="nv">k23</span> : bc = bc&#39;)
  (<span class="nv">k123</span> : prism&#39; abc abc&#39; k12 k13 k23)
  : prism abc abc&#39; (equiv_p1_1q k12) (equiv_p1_1q k13) (equiv_p1_1q k23).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span>ab = ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac = ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc = bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; abc abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism abc abc&#39; (equiv_p1_1q k12) (equiv_p1_1q k13)
  (equiv_p1_1q k23)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk76"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span>ab = ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac = ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc = bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; abc abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism abc abc&#39; (equiv_p1_1q k12) 
  (equiv_p1_1q k13) (equiv_p1_1q k23)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk77"><span class="nb">induction</span> ab.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ac, bc</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ bc = ac</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>ac', bc'</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac = ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc = bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; abc abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism abc abc&#39; (equiv_p1_1q k12) 
  (equiv_p1_1q k13) (equiv_p1_1q k23)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk78"><span class="nb">induction</span> bc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = ac</span></span></span><br><span><var>ab', ac', bc'</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac = ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; abc abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism abc abc&#39; (equiv_p1_1q k12) 
  (equiv_p1_1q k13) (equiv_p1_1q k23)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk79"><span class="nb">induction</span> abc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab', ac', bc'</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; <span class="mi">1</span> abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> abc&#39; (equiv_p1_1q k12) 
  (equiv_p1_1q k13) (equiv_p1_1q k23)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7a"><span class="nb">induction</span> k12.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ac', bc'</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ bc&#39; = ac&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; <span class="mi">1</span> abc&#39; <span class="mi">1</span> k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> abc&#39; (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q k13) (equiv_p1_1q k23)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7b"><span class="nb">induction</span> k23.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>abc', k13</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = ac&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; <span class="mi">1</span> abc&#39; <span class="mi">1</span> k13 <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> abc&#39; (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q k13) (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7c"><span class="nb">induction</span> k13.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = <span class="mi">1</span> @ <span class="mi">1</span></span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism&#39; <span class="mi">1</span> abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> abc&#39; (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7d"><span class="nb">unfold</span> prism&#39; <span class="kr">in</span> k123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = <span class="mi">1</span> @ <span class="mi">1</span></span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = (<span class="mi">1</span> @@ <span class="mi">1</span>) @ abc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> abc&#39; (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7e"><span class="nb">induction</span> (moveR_Vp _ _ _ k123); <span class="nb">clear</span> k123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> ((<span class="mi">1</span> @@ <span class="mi">1</span>)^ @ (<span class="mi">1</span> @ <span class="mi">1</span>)) 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk7f"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk80"><span class="kn">Definition</span> <span class="nf">bundle_trijoinrecpath</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">j1&#39;</span> : A -&gt; P} {<span class="nv">j2&#39;</span> : B -&gt; P} {<span class="nv">j3&#39;</span> : C -&gt; P}
  {<span class="nv">f</span> <span class="nv">g</span> : TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;} (<span class="nv">h</span> : TriJoinRecPath&#39; f g)
  : TriJoinRecPath (bundle_trijoinrecdata f) (bundle_trijoinrecdata g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath (bundle_trijoinrecdata f)
  (bundle_trijoinrecdata g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk81"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath (bundle_trijoinrecdata f)
  (bundle_trijoinrecdata g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk82">snapply Build_TriJoinRecPath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
j1 (bundle_trijoinrecdata f) a =
j1 (bundle_trijoinrecdata g) a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk83" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk83"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
j2 (bundle_trijoinrecdata f) b =
j2 (bundle_trijoinrecdata g) b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk84" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk84"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c</span> : C,
j3 (bundle_trijoinrecdata f) c =
j3 (bundle_trijoinrecdata g) c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk85" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk85"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
j12 (bundle_trijoinrecdata f) a b @ <span class="nl">?h2</span> b =
<span class="nl">?h1</span> a @ j12 (bundle_trijoinrecdata g) a b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk86" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk86"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
j13 (bundle_trijoinrecdata f) a c @ <span class="nl">?h3</span> c =
<span class="nl">?h1</span> a @ j13 (bundle_trijoinrecdata g) a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk87" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk87"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
j23 (bundle_trijoinrecdata f) b c @ <span class="nl">?h3</span> c =
<span class="nl">?h2</span> b @ j23 (bundle_trijoinrecdata g) b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk88" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk88"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism (j123 (bundle_trijoinrecdata f) a b c)
  (j123 (bundle_trijoinrecdata g) a b c) (<span class="nl">?h12</span> a b)
  (<span class="nl">?h13</span> a c) (<span class="nl">?h23</span> b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk89"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
j12 (bundle_trijoinrecdata f) a b @
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; <span class="mi">1</span>) b =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @
j12 (bundle_trijoinrecdata g) a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk8a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk8a"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
j13 (bundle_trijoinrecdata f) a c @
(<span class="kr">fun</span> <span class="nv">c0</span> : C =&gt; <span class="mi">1</span>) c =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a @
j13 (bundle_trijoinrecdata g) a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk8b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk8b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
j23 (bundle_trijoinrecdata f) b c @
(<span class="kr">fun</span> <span class="nv">c0</span> : C =&gt; <span class="mi">1</span>) c =
(<span class="kr">fun</span> <span class="nv">b0</span> : B =&gt; <span class="mi">1</span>) b @
j23 (bundle_trijoinrecdata g) b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk8c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk8c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism (j123 (bundle_trijoinrecdata f) a b c)
  (j123 (bundle_trijoinrecdata g) a b c) (<span class="nl">?h12</span> a b)
  (<span class="nl">?h13</span> a c) (<span class="nl">?h23</span> b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk8d"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">intros</span>; <span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 (bundle_trijoinrecdata f) a b =
j12 (bundle_trijoinrecdata g) a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk8e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk8e"><hr></label><div class="goal-conclusion">j13 (bundle_trijoinrecdata f) a c =
j13 (bundle_trijoinrecdata g) a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk8f"><hr></label><div class="goal-conclusion">j23 (bundle_trijoinrecdata f) b c =
j23 (bundle_trijoinrecdata g) b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk90"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism (j123 (bundle_trijoinrecdata f) a b c)
  (j123 (bundle_trijoinrecdata g) a b c)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt;
    <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span>
    X <span class="nl">?Goal</span>@{a:=a0; b:=b0}) a b)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
    <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span>
    X <span class="nl">?Goal0</span>@{a:=a0; c:=c0}) a c)
  ((<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
    <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span>
    X <span class="nl">?Goal1</span>@{b:=b0; c:=c0}) b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk91">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 (bundle_trijoinrecdata f) a b =
j12 (bundle_trijoinrecdata g) a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (h12&#39; h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk92">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 (bundle_trijoinrecdata f) a c =
j13 (bundle_trijoinrecdata g) a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (h13&#39; h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk93">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 (bundle_trijoinrecdata f) b c =
j23 (bundle_trijoinrecdata g) b c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (h23&#39; h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk94">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism (j123 (bundle_trijoinrecdata f) a b c)
  (j123 (bundle_trijoinrecdata g) a b c)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt;
    <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span> X (h12&#39; h a0 b0))
     a b)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
    <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span> X (h13&#39; h a0 c0))
     a c)
  ((<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
    <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span> X (h23&#39; h b0 c0))
     b c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk95"><span class="nb">cbn</span> beta zeta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism (j123 (bundle_trijoinrecdata f) a b c)
  (j123 (bundle_trijoinrecdata g) a b c)
  (equiv_p1_1q (h12&#39; h a b))
  (equiv_p1_1q (h13&#39; h a c))
  (equiv_p1_1q (h23&#39; h b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk96"><span class="nb">intros</span> a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>j1'</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>j2'</var><span class="hyp-type"><b>: </b><span>B -&gt; P</span></span></span><br><span><var>j3'</var><span class="hyp-type"><b>: </b><span>C -&gt; P</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData&#39; j1&#39; j2&#39; j3&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath&#39; f g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 (bundle_trijoinrecdata f) a b c)
  (j123 (bundle_trijoinrecdata g) a b c)
  (equiv_p1_1q (h12&#39; h a b))
  (equiv_p1_1q (h13&#39; h a c))
  (equiv_p1_1q (h23&#39; h b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> bundle_prism, (h123&#39; h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** A tactic that helps us apply the previous result. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">bundle_trijoinrecpath</span> :=
  <span class="nb">hnf</span>;
  <span class="kr">match goal with</span> |- TriJoinRecPath <span class="nl">?F</span> <span class="nl">?G</span> =&gt;
    <span class="nb">refine</span> (bundle_trijoinrecpath (f:=unbundle_trijoinrecdata F)
                                  (g:=unbundle_trijoinrecdata G) _) <span class="kr">end</span>;
  snapply Build_TriJoinRecPath&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Using these paths, we can restate the beta rule for [trijoin_rec].  The statement using [TriJoinRecPath&#39;] typechecks only because [trijoin_rec] computes definitionally on the path constructors. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk97"><span class="kn">Definition</span> <span class="nf">trijoin_rec_beta&#39;</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P)
  : TriJoinRecPath&#39; (unbundle_trijoinrecdata (trijoin_rec_inv (trijoin_rec f)))
                    (unbundle_trijoinrecdata f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath&#39;
  (unbundle_trijoinrecdata
     (trijoin_rec_inv (trijoin_rec f)))
  (unbundle_trijoinrecdata f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk98"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath&#39;
  (unbundle_trijoinrecdata
     (trijoin_rec_inv (trijoin_rec f)))
  (unbundle_trijoinrecdata f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk99">snapply Build_TriJoinRecPath&#39;; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (trijoin_rec f) (join12 a b) = j12 f a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk9a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk9a"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
ap (trijoin_rec f) (join13 a c) = j13 f a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk9b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk9b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
ap (trijoin_rec f) (join23 b c) = j23 f b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk9c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk9c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism&#39; (ap_triangle (trijoin_rec f) (join123 a b c))
  (j123 f a b c) (<span class="nl">?Goal</span> a b) (<span class="nl">?Goal0</span> a c) (<span class="nl">?Goal1</span> b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk9d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
ap (trijoin_rec f) (join12 a b) = j12 f a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta_join12.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk9e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
ap (trijoin_rec f) (join13 a c) = j13 f a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta_join13.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk9f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
ap (trijoin_rec f) (join23 b c) = j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta_join23.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism&#39; (ap_triangle (trijoin_rec f) (join123 a b c))
  (j123 f a b c) (trijoin_rec_beta_join12 f a b)
  (trijoin_rec_beta_join13 f a c)
  (trijoin_rec_beta_join23 f b c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka1"><span class="nb">intros</span> a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39; (ap_triangle (trijoin_rec f) (join123 a b c))
  (j123 f a b c) (trijoin_rec_beta_join12 f a b)
  (trijoin_rec_beta_join13 f a c)
  (trijoin_rec_beta_join23 f b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka2"><span class="nb">unfold</span> prism&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (trijoin_rec f) (join123 a b c) @
trijoin_rec_beta_join13 f a c =
(trijoin_rec_beta_join12 f a b @@
 trijoin_rec_beta_join23 f b c) @ j123 f a b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka3"><span class="nb">apply</span> moveR_pM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (trijoin_rec f) (join123 a b c) =
((trijoin_rec_beta_join12 f a b @@
  trijoin_rec_beta_join23 f b c) @ j123 f a b c) @
(trijoin_rec_beta_join13 f a c)^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">napply trijoin_rec_beta_join123.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We can upgrade this to an unprimed path. This says that [trijoin_rec_inv] is split surjective. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_rec_beta</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C P)
  : TriJoinRecPath (trijoin_rec_inv (trijoin_rec f)) f
  := bundle_trijoinrecpath (trijoin_rec_beta&#39; f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** [trijoin_rec_inv] is an injective map between 0-groupoids *)</span>

<span class="sd">(** We begin with a general purpose lemma. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka4"><span class="kn">Definition</span> <span class="nf">triangle_ind</span> {<span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">a</span> : P)
  (<span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c) (<span class="nv">bc</span> : b = c) (<span class="nv">abc</span> : ab @ bc = ac), <span class="kt">Type</span>)
  (<span class="nv">s</span> : Q a a idpath idpath idpath idpath)
  : <span class="kr">forall</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">ab</span> <span class="nv">ac</span> <span class="nv">bc</span> <span class="nv">abc</span>, Q b c ab ac bc abc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c), ab @ bc = ac -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c) (<span class="nv">abc</span> : ab @ bc = ac), Q b c ab ac bc abc</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c), ab @ bc = ac -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c) (<span class="nv">abc</span> : ab @ bc = ac), Q b c ab ac bc abc</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka6"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c), ab @ bc = ac -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q b c ab ac bc abc</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka7"><span class="nb">induction</span> ab.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c), ab @ bc = ac -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ac, bc</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ bc = ac</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a c <span class="mi">1</span> ac bc abc</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka8"><span class="nb">induction</span> bc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c), ab @ bc = ac -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = a</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = ac</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a a <span class="mi">1</span> ac <span class="mi">1</span> abc</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chka9"><span class="nb">induction</span> abc.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c)
(<span class="nv">bc</span> : b = c), ab @ bc = ac -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a a <span class="mi">1</span> (<span class="mi">1</span> @ <span class="mi">1</span>) <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We need to explicitly reason about the proof given by [transport_paths FlFr] so we give it a name here. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkaa"><span class="kn">Local Definition</span> <span class="nf">transport_paths_FlFr&#39;</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} {<span class="nv">f</span> <span class="nv">g</span> : A -&gt; B} {<span class="nv">x1</span> <span class="nv">x2</span> : A}
  (<span class="nv">p</span> : x1 = x2) (<span class="nv">q</span> : f x1 = g x1) (<span class="nv">r</span> : (f x2) = (g x2))
  (<span class="nv">h</span> : (ap f p) @ r = q @ (ap g p))
  : transport (<span class="kr">fun</span> <span class="nv">x</span> =&gt; f x = g x) p q = r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>x1 = x2</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>f x1 = g x1</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>f x2 = g x2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>ap f p @ r = q @ ap g p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x = g x) p q = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkab"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>x1, x2</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>x1 = x2</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>f x1 = g x1</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>f x2 = g x2</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>ap f p @ r = q @ ap g p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f x = g x) p q = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> transport_paths FlFr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This lemma handles the path algebra in the last goal of the next result. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkac"><span class="kn">Local Definition</span> <span class="nf">isinj_trijoin_rec_inv_helper</span> {<span class="nv">J</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">f</span> <span class="nv">g</span> : J -&gt; P}
  {<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : J} {<span class="nv">ab</span> : a = b} {<span class="nv">ac</span> : a = c} {<span class="nv">bc</span> : b = c} {<span class="nv">abc</span> : ab @ bc = ac}
  {<span class="nv">H1</span> : f a = g a} {<span class="nv">H2</span> : f b = g b} {<span class="nv">H3</span> : f c = g c}
  {<span class="nv">H12</span> : ap f ab @ H2 = H1 @ ap g ab}
  {<span class="nv">H13</span> : ap f ac @ H3 = H1 @ ap g ac}
  {<span class="nv">H23</span> : ap f bc @ H3 = H2 @ ap g bc}
  (<span class="nv">H123</span> : prism (ap_triangle f abc) (ap_triangle g abc) H12 H13 H23)
  : (transport_pp (<span class="kr">fun</span> <span class="nv">x</span> =&gt; f x = g x) ab bc H1 @ ap (transport (<span class="kr">fun</span> <span class="nv">x</span> =&gt; f x = g x) bc)
       (transport_paths_FlFr&#39; ab H1 H2 H12)) @ transport_paths_FlFr&#39; bc H2 H3 H23
    = transport2 (<span class="kr">fun</span> <span class="nv">x</span> =&gt; f x = g x) abc H1 @ transport_paths_FlFr&#39; ac H1 H3 H13.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>f a = g a</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f b = g b</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>f c = g c</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>ap f ab @ H2 = H1 @ ap g ab</span></span></span><br><span><var>H13</var><span class="hyp-type"><b>: </b><span>ap f ac @ H3 = H1 @ ap g ac</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span>ap f bc @ H3 = H2 @ ap g bc</span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span>prism (ap_triangle f abc) 
  (ap_triangle g abc) H12 H13 H23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) ab bc H1 @
 ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) bc)
   (transport_paths_FlFr&#39; ab H1 H2 H12)) @
transport_paths_FlFr&#39; bc H2 H3 H23 =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) abc H1 @
transport_paths_FlFr&#39; ac H1 H3 H13</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkad"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>f a = g a</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>f b = g b</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>f c = g c</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span>ap f ab @ H2 = H1 @ ap g ab</span></span></span><br><span><var>H13</var><span class="hyp-type"><b>: </b><span>ap f ac @ H3 = H1 @ ap g ac</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span>ap f bc @ H3 = H2 @ ap g bc</span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span>prism (ap_triangle f abc) 
  (ap_triangle g abc) H12 H13 H23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) ab bc H1 @
 ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) bc)
   (transport_paths_FlFr&#39; ab H1 H2 H12)) @
transport_paths_FlFr&#39; bc H2 H3 H23 =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) abc H1 @
transport_paths_FlFr&#39; ac H1 H3 H13</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkae"><span class="nb">revert</span> b c ab ac bc abc H2 H3 H12 H13 H23 H123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>f a = g a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> <span class="nv">c</span> : J) (<span class="nv">ab</span> : a = b) 
(<span class="nv">ac</span> : a = c) (<span class="nv">bc</span> : b = c) 
(<span class="nv">abc</span> : ab @ bc = ac) (<span class="nv">H2</span> : f b = g b) 
(<span class="nv">H3</span> : f c = g c) (<span class="nv">H12</span> : ap f ab @ H2 = H1 @ ap g ab)
(<span class="nv">H13</span> : ap f ac @ H3 = H1 @ ap g ac)
(<span class="nv">H23</span> : ap f bc @ H3 = H2 @ ap g bc),
prism (ap_triangle f abc) 
  (ap_triangle g abc) H12 H13 H23 -&gt;
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) ab bc H1 @
 ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) bc)
   (transport_paths_FlFr&#39; ab H1 H2 H12)) @
transport_paths_FlFr&#39; bc H2 H3 H23 =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) abc H1 @
transport_paths_FlFr&#39; ac H1 H3 H13</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkaf">napply triangle_ind; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>f a = g a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">H2</span> <span class="nv">H3</span> : f a = g a) 
(<span class="nv">H12</span> : <span class="mi">1</span> @ H2 = H1 @ <span class="mi">1</span>) (<span class="nv">H13</span> : <span class="mi">1</span> @ H3 = H1 @ <span class="mi">1</span>)
(<span class="nv">H23</span> : <span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span>),
prism <span class="mi">1</span> <span class="mi">1</span> H12 H13 H23 -&gt;
(<span class="mi">1</span> @
 ap (transport (<span class="kr">fun</span> <span class="nv">x</span> : J =&gt; f x = g x) <span class="mi">1</span>)
   (transport_paths_FlFr&#39; <span class="mi">1</span> H1 H2 H12)) @
transport_paths_FlFr&#39; <span class="mi">1</span> H2 H3 H23 =
<span class="mi">1</span> @ transport_paths_FlFr&#39; <span class="mi">1</span> H1 H3 H13</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb0"><span class="nb">unfold</span> ap_triangle, transport_paths_FlFr&#39;, transport; <span class="nb">cbn</span> -[concat_pp_p].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>f a = g a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">H2</span> <span class="nv">H3</span> : f a = g a) 
(<span class="nv">H12</span> : <span class="mi">1</span> @ H2 = H1 @ <span class="mi">1</span>) (<span class="nv">H13</span> : <span class="mi">1</span> @ H3 = H1 @ <span class="mi">1</span>)
(<span class="nv">H23</span> : <span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span>),
prism <span class="mi">1</span> <span class="mi">1</span> H12 H13 H23 -&gt;
(<span class="mi">1</span> @
 ap idmap
   (((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
    moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H2 H12)) @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H3 H13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb1"><span class="nb">generalize dependent</span> (f a); <span class="nb">intro</span> fa; <span class="nb">clear</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>J -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>J</span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">H1</span> <span class="nv">H2</span> <span class="nv">H3</span> : fa = g a) 
(<span class="nv">H12</span> : <span class="mi">1</span> @ H2 = H1 @ <span class="mi">1</span>) (<span class="nv">H13</span> : <span class="mi">1</span> @ H3 = H1 @ <span class="mi">1</span>)
(<span class="nv">H23</span> : <span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span>),
prism <span class="mi">1</span> <span class="mi">1</span> H12 H13 H23 -&gt;
(<span class="mi">1</span> @
 ap idmap
   (((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
    moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H2 H12)) @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H3 H13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb2"><span class="nb">generalize dependent</span> (g a); <span class="nb">intro</span> ga; <span class="nb">clear</span> g a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa, ga</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">H1</span> <span class="nv">H2</span> <span class="nv">H3</span> : fa = ga) 
(<span class="nv">H12</span> : <span class="mi">1</span> @ H2 = H1 @ <span class="mi">1</span>) (<span class="nv">H13</span> : <span class="mi">1</span> @ H3 = H1 @ <span class="mi">1</span>)
(<span class="nv">H23</span> : <span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span>),
prism <span class="mi">1</span> <span class="mi">1</span> H12 H13 H23 -&gt;
(<span class="mi">1</span> @
 ap idmap
   (((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
    moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H2 H12)) @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H3 H13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb3"><span class="nb">intros</span> H1 H2 H3 H12 H13 H23.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa, ga</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H1, H2, H3</var><span class="hyp-type"><b>: </b><span>fa = ga</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H2 = H1 @ <span class="mi">1</span></span></span></span><br><span><var>H13</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H3 = H1 @ <span class="mi">1</span></span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> H12 H13 H23 -&gt;
(<span class="mi">1</span> @
 ap idmap
   (((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
    moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H2 H12)) @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H3 H13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb4"><span class="nb">rewrite</span> ap_idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa, ga</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H1, H2, H3</var><span class="hyp-type"><b>: </b><span>fa = ga</span></span></span><br><span><var>H12</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H2 = H1 @ <span class="mi">1</span></span></span></span><br><span><var>H13</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H3 = H1 @ <span class="mi">1</span></span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> H12 H13 H23 -&gt;
(<span class="mi">1</span> @
 (((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
  moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H2 H12)) @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H1)^ @ (concat_p1 (<span class="mi">1</span> @ H1))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H1 <span class="mi">1</span> H3 H13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb5"><span class="nb">revert</span> H12; equiv_intro (equiv_1p_q1 (p:=H2) (q:=H1)) H12&#39;; <span class="nb">induction</span> H12&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa, ga</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H2, H3</var><span class="hyp-type"><b>: </b><span>fa = ga</span></span></span><br><span><var>H13, H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H3 = H2 @ <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>) H13 H23 -&gt;
(<span class="mi">1</span> @
 (((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
  moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H2 (equiv_1p_q1 <span class="mi">1</span>))) @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H2)^ @ (concat_p1 (<span class="mi">1</span> @ H2))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H2 <span class="mi">1</span> H3 H13)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb6"><span class="nb">revert</span> H13; equiv_intro (equiv_1p_q1 (p:=H3) (q:=H2)) H13&#39;; <span class="nb">induction</span> H13&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa, ga</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>fa = ga</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ H3 = H3 @ <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>) (equiv_1p_q1 <span class="mi">1</span>) H23 -&gt;
(<span class="mi">1</span> @
 (((concat_1p H3)^ @ (concat_p1 (<span class="mi">1</span> @ H3))^) @
  moveR_Vp_p_inv <span class="mi">1</span> H3 <span class="mi">1</span> H3 (equiv_1p_q1 <span class="mi">1</span>))) @
(((concat_1p H3)^ @ (concat_p1 (<span class="mi">1</span> @ H3))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H3 <span class="mi">1</span> H3 H23) =
<span class="mi">1</span> @
(((concat_1p H3)^ @ (concat_p1 (<span class="mi">1</span> @ H3))^) @
 moveR_Vp_p_inv <span class="mi">1</span> H3 <span class="mi">1</span> H3 (equiv_1p_q1 <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb7"><span class="nb">induction</span> H3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = <span class="mi">1</span> @ <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>) (equiv_1p_q1 <span class="mi">1</span>) H23 -&gt;
(<span class="mi">1</span> @
 (((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
  moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))) @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> H23) =
<span class="mi">1</span> @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb8"><span class="nb">intro</span> H123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = <span class="mi">1</span> @ <span class="mi">1</span></span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span>prism <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>) (equiv_1p_q1 <span class="mi">1</span>) H23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @
 (((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
  moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))) @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> H23) =
<span class="mi">1</span> @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkb9"><span class="nb">unfold</span> prism <span class="kr">in</span> H123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = <span class="mi">1</span> @ <span class="mi">1</span></span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span>(concat_p_pp <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> @ whiskerR <span class="mi">1</span> <span class="mi">1</span>) @
equiv_1p_q1 <span class="mi">1</span> =
(((whiskerL <span class="mi">1</span> H23 @ concat_p_pp <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>) @
  whiskerR (equiv_1p_q1 <span class="mi">1</span>) <span class="mi">1</span>) @
 concat_pp_p <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>) @ whiskerL <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @
 (((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
  moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))) @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> H23) =
<span class="mi">1</span> @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkba"><span class="nb">rewrite</span> whiskerL_1p_1 <span class="kr">in</span> H123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> @ <span class="mi">1</span> = <span class="mi">1</span> @ <span class="mi">1</span></span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span>(concat_p_pp <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> @ whiskerR <span class="mi">1</span> <span class="mi">1</span>) @
equiv_1p_q1 <span class="mi">1</span> =
(((H23 @ concat_p_pp <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>) @
  whiskerR (equiv_1p_q1 <span class="mi">1</span>) <span class="mi">1</span>) @
 concat_pp_p <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>) @ whiskerL <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="mi">1</span> @
 (((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
  moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))) @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> H23) =
<span class="mi">1</span> @
(((concat_1p <span class="mi">1</span>)^ @ (concat_p1 (<span class="mi">1</span> @ <span class="mi">1</span>))^) @
 moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_1p_q1 <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkbb"><span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = (((H23 @ <span class="mi">1</span>) @ <span class="mi">1</span>) @ <span class="mi">1</span>) @ <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> @ (<span class="mi">1</span> @ moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> H23) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkbc"><span class="nb">rewrite</span> ! concat_p1 <span class="kr">in</span> H123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>H23</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>H123</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = H23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> @ (<span class="mi">1</span> @ moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> H23) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkbd"><span class="nb">induction</span> H123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>J, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>fa</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> @ (<span class="mi">1</span> @ moveR_Vp_p_inv <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [trijoin_rec_inv] is essentially injective, as a map between 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkbe"><span class="kn">Definition</span> <span class="nf">isinj_trijoin_rec_inv</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">f</span> <span class="nv">g</span> : TriJoin A B C -&gt; P}
  (<span class="nv">h</span> : TriJoinRecPath (trijoin_rec_inv f) (trijoin_rec_inv g))
  : f == g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f == g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkbf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f == g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkc0">snapply trijoin_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x) (join1 a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc1"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x) (join2 b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x) (join3 c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join12 a b) (<span class="nl">?join1&#39;</span> a) = <span class="nl">?join2&#39;</span> b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join13 a c) (<span class="nl">?join1&#39;</span> a) = <span class="nl">?join3&#39;</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc5"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join23 b c) (<span class="nl">?join2&#39;</span> b) = <span class="nl">?join3&#39;</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc6"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (<span class="nl">?join1&#39;</span> a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c)) (<span class="nl">?join12&#39;</span> a b)) @ <span class="nl">?join23&#39;</span> b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (<span class="nl">?join1&#39;</span> a) @ <span class="nl">?join13&#39;</span> a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkc7"><span class="mi">1</span>: <span class="nb">apply</span> (h1 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">b</span> : B,
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x) (join2 b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x) (join3 c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkc9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkc9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join12 a b) (h1 h a) = <span class="nl">?join2&#39;</span> b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkca" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkca"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join13 a c) (h1 h a) = <span class="nl">?join3&#39;</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkcb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkcb"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join23 b c) (<span class="nl">?join2&#39;</span> b) = <span class="nl">?join3&#39;</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkcc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkcc"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c)) (<span class="nl">?join12&#39;</span> a b)) @ <span class="nl">?join23&#39;</span> b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @ <span class="nl">?join13&#39;</span> a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkcd"><span class="mi">1</span>: <span class="nb">apply</span> (h2 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">c</span> : C,
(<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x) (join3 c)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkce" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkce"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join12 a b) (h1 h a) = h2 h b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkcf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkcf"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join13 a c) (h1 h a) = <span class="nl">?join3&#39;</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd0"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join23 b c) (h2 h b) = <span class="nl">?join3&#39;</span> c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd1"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c)) (<span class="nl">?join12&#39;</span> a b)) @ <span class="nl">?join23&#39;</span> b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @ <span class="nl">?join13&#39;</span> a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkd2"><span class="mi">1</span>: <span class="nb">apply</span> (h3 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join12 a b) (h1 h a) = h2 h b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd3"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join13 a c) (h1 h a) = h3 h c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd4"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join23 b c) (h2 h b) = h3 h c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd5"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c)) (<span class="nl">?join12&#39;</span> a b)) @ <span class="nl">?join23&#39;</span> b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @ <span class="nl">?join13&#39;</span> a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkd6"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">intros</span>; napply transport_paths_FlFr&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (join12 a b) @ h2 h b =
h1 h a @ ap g (join12 a b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd7"><hr></label><div class="goal-conclusion">ap f (join13 a c) @ h3 h c =
h1 h a @ ap g (join13 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd8"><hr></label><div class="goal-conclusion">ap f (join23 b c) @ h3 h c =
h2 h b @ ap g (join23 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkd9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkd9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c))
   ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt;
     transport_paths_FlFr&#39; (join12 a0 b0) (h1 h a0)
       (h2 h b0) <span class="nl">?Goal</span>@{a:=a0; b:=b0}) a b)) @
(<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join23 b0 c0) (h2 h b0)
   (h3 h c0) <span class="nl">?Goal1</span>@{b:=b0; c:=c0}) b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join13 a0 c0) (h1 h a0)
   (h3 h c0) <span class="nl">?Goal0</span>@{a:=a0; c:=c0}) a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkda"><span class="mi">1</span>: <span class="nb">apply</span> (h12 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (join13 a c) @ h3 h c =
h1 h a @ ap g (join13 a c)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkdb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkdb"><hr></label><div class="goal-conclusion">ap f (join23 b c) @ h3 h c =
h2 h b @ ap g (join23 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkdc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkdc"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c))
   ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt;
     transport_paths_FlFr&#39; (join12 a0 b0) (h1 h a0)
       (h2 h b0) (h12 h a0 b0)) a b)) @
(<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join23 b0 c0) (h2 h b0)
   (h3 h c0) <span class="nl">?Goal0</span>@{b:=b0; c:=c0}) b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join13 a0 c0) (h1 h a0)
   (h3 h c0) <span class="nl">?Goal</span>@{a:=a0; c:=c0}) a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkdd"><span class="mi">1</span>: <span class="nb">apply</span> (h13 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap f (join23 b c) @ h3 h c =
h2 h b @ ap g (join23 b c)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkde" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkde"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c))
   ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt;
     transport_paths_FlFr&#39; (join12 a0 b0) (h1 h a0)
       (h2 h b0) (h12 h a0 b0)) a b)) @
(<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join23 b0 c0) (h2 h b0)
   (h3 h c0) <span class="nl">?Goal</span>@{b:=b0; c:=c0}) b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join13 a0 c0) (h1 h a0)
   (h3 h c0) (h13 h a0 c0)) a c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkdf"><span class="mi">1</span>: <span class="nb">apply</span> (h23 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c))
   ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt;
     transport_paths_FlFr&#39; (join12 a0 b0) (h1 h a0)
       (h2 h b0) (h12 h a0 b0)) a b)) @
(<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join23 b0 c0) (h2 h b0)
   (h3 h c0) (h23 h b0 c0)) b c =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt;
 transport_paths_FlFr&#39; (join13 a0 c0) (h1 h a0)
   (h3 h c0) (h13 h a0 c0)) a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke0"><span class="nb">intros</span> a b c; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_pp (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
   (join12 a b) (join23 b c) (h1 h a) @
 ap
   (transport (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
      (join23 b c))
   (transport_paths_FlFr&#39; (join12 a b) (h1 h a)
      (h2 h b) (h12 h a b))) @
transport_paths_FlFr&#39; (join23 b c) (h2 h b) (h3 h c)
  (h23 h b c) =
transport2 (<span class="kr">fun</span> <span class="nv">x</span> : TriJoin A B C =&gt; f x = g x)
  (join123 a b c) (h1 h a) @
transport_paths_FlFr&#39; (join13 a c) (h1 h a) (h3 h c)
  (h13 h a c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke1"><span class="nb">apply</span> isinj_trijoin_rec_inv_helper.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>TriJoinRecPath (trijoin_rec_inv f)
  (trijoin_rec_inv g)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (ap_triangle f (join123 a b c))
  (ap_triangle g (join123 a b c)) (h12 h a b)
  (h13 h a c) (h23 h b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h123 h a b c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Lemmas and tactics about triangles and prisms </span>

<span class="sd">  We now introduce several lemmas and tactics that will dispense with some routine goals. The idea is that a generic triangle can be assumed to be trivial on the first vertex, and a generic prism can be assumed to be the identity on the domain. In order to apply the [triangle_ind] and [prism_ind] lemmas that make this precise, we need to generalize various terms in the goal. *)</span>

<span class="sd">(** This destructs a seven component term [f], tries to generalize each piece evaluated appropriately, and clears all pieces.  If called with [a], [b] and [c] all valid terms, we expect all seven components to be generalized.  But one can also call it with one of [a], [b] and [c] a dummy value (e.g. [_X_]) that causes four of the [generalize] tactics to fail.  In this case, four components will be simply cleared, and three will be generalized and cleared, so this applies when the goal only depends on three of the seven components. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">generalize_some</span> f a b c :=
  <span class="kr">let</span> <span class="nv">f1</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">f2</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">f3</span> := <span class="kp">fresh</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">f12</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">f13</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">f23</span> := <span class="kp">fresh</span> <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">f123</span> := <span class="kp">fresh</span> <span class="kr">in</span>
  <span class="nb">destruct</span> f <span class="kr">as</span> [f1 f2 f3 f12 f13 f23 f123]; <span class="nb">cbn</span>;
  <span class="kp">try</span> <span class="nb">generalize</span> (f123 a b c); <span class="nb">clear</span> f123;
  <span class="kp">try</span> <span class="nb">generalize</span> (f23 b c); <span class="nb">clear</span> f23;
  <span class="kp">try</span> <span class="nb">generalize</span> (f13 a c); <span class="nb">clear</span> f13;
  <span class="kp">try</span> <span class="nb">generalize</span> (f12 a b); <span class="nb">clear</span> f12;
  <span class="kp">try</span> <span class="nb">generalize</span> (f3 c); <span class="nb">clear</span> f3;
  <span class="kp">try</span> <span class="nb">generalize</span> (f2 b); <span class="nb">clear</span> f2;
  <span class="kp">try</span> <span class="nb">generalize</span> (f1 a); <span class="nb">clear</span> f1.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* No easy way to skip the &quot;last&quot; one, since we don&#39;t know which will be the last to be generalized. *)</span>

<span class="sd">(** Use this with [f : TriJoinRecData A B C P], [a : A], [b : B], [c : C]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">triangle_ind</span> f a b c :=
  generalize_some f a b c;
  <span class="nb">intro</span> f; <span class="c">(* [generalize_some] goes one step too far, so intro the last variable. *)</span>
  <span class="nb">apply</span> triangle_ind.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Use this with [f : TriJoinRecData A B C P]. Two of the arguments [a], [b] and [c] should be elements of [A], [B] and [C], respectively, and the third should be a dummy value (e.g. [_X_]) that causes the generalize tactic to fail.  It applies to goals that only depend on the components of [f] involving just two of [A], [B] and [C]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">triangle_ind_two</span> f a b c :=
  generalize_some f a b c;
  <span class="nb">intro</span> f; <span class="c">(* [generalize_some] goes one step too far, so intro the last variable. *)</span>
  <span class="nb">apply</span> paths_ind.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** The prism analog of the function [triangle_ind] from earlier in the file. To prove something about all prisms, it&#39;s enough to prove it for the &quot;identity&quot; prism.  Note that we don&#39;t specialize to a prism concentrated on a single vertex, since sometimes we have to deal with a composite of two prisms. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke2"><span class="kn">Definition</span> <span class="nf">prism_ind</span> {<span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : P) (<span class="nv">ab</span> : a = b) (<span class="nv">ac</span> : a = c) (<span class="nv">bc</span> : b = c) (<span class="nv">abc</span> : ab @ bc = ac)
  (<span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;) (<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;)
         (<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : b = b&#39;) (<span class="nv">k3</span> : c = c&#39;)
         (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;) (<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;) (<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;)
         (<span class="nv">k123</span> : prism abc abc&#39; k12 k13 k23), <span class="kt">Type</span>)
  (<span class="nv">s</span> : Q a b c ab ac bc abc idpath idpath idpath (equiv_p1_1q idpath) (equiv_p1_1q idpath) (equiv_p1_1q idpath) (prism_id abc))
  : <span class="kr">forall</span> <span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> <span class="nv">ab&#39;</span> <span class="nv">ac&#39;</span> <span class="nv">bc&#39;</span> <span class="nv">abc&#39;</span> <span class="nv">k1</span> <span class="nv">k2</span> <span class="nv">k3</span> <span class="nv">k12</span> <span class="nv">k13</span> <span class="nv">k23</span> <span class="nv">k123</span>, Q a&#39; b&#39; c&#39; ab&#39; ac&#39; bc&#39; abc&#39; k1 k2 k3 k12 k13 k23 k123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) (<span class="nv">k1</span> : a = a&#39;)
(<span class="nv">k2</span> : b = b&#39;) (<span class="nv">k3</span> : c = c&#39;)
(<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ac&#39;</span> : a&#39; = c&#39;)
(<span class="nv">bc&#39;</span> : b&#39; = c&#39;) (<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) (<span class="nv">k1</span> : a = a&#39;)
(<span class="nv">k2</span> : b = b&#39;) (<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;) (<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;)
(<span class="nv">k123</span> : prism abc abc&#39; k12 k13 k23),
Q a&#39; b&#39; c&#39; ab&#39; ac&#39; bc&#39; abc&#39; k1 k2 k3 k12 k13 k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) (<span class="nv">k1</span> : a = a&#39;)
(<span class="nv">k2</span> : b = b&#39;) (<span class="nv">k3</span> : c = c&#39;)
(<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;) (<span class="nv">ac&#39;</span> : a&#39; = c&#39;)
(<span class="nv">bc&#39;</span> : b&#39; = c&#39;) (<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) (<span class="nv">k1</span> : a = a&#39;)
(<span class="nv">k2</span> : b = b&#39;) (<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;) (<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;)
(<span class="nv">k123</span> : prism abc abc&#39; k12 k13 k23),
Q a&#39; b&#39; c&#39; ab&#39; ac&#39; bc&#39; abc&#39; k1 k2 k3 k12 k13 k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) (<span class="nv">k1</span> : a = a&#39;)
(<span class="nv">k2</span> : b = b&#39;) (<span class="nv">k3</span> : c = c&#39;)
(<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>)
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br><span><var>a', b', c'</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a&#39; = b&#39;</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a&#39; = c&#39;</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b&#39; = c&#39;</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>a = a&#39;</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>b = b&#39;</span></span></span><br><span><var>k3</var><span class="hyp-type"><b>: </b><span>c = c&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span>ab @ k2 = k1 @ ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac @ k3 = k1 @ ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc @ k3 = k2 @ bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism abc abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a&#39; b&#39; c&#39; ab&#39; ac&#39; bc&#39; abc&#39; k1 k2 k3 k12 k13 k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke5"><span class="nb">induction</span> k1, k2, k3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : b = b&#39;) 
(<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span>ab @ <span class="mi">1</span> = <span class="mi">1</span> @ ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac @ <span class="mi">1</span> = <span class="mi">1</span> @ ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc @ <span class="mi">1</span> = <span class="mi">1</span> @ bc&#39;</span></span></span><br><span><var>k123</var><span class="hyp-type"><b>: </b><span>prism abc abc&#39; k12 k13 k23</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a b c ab&#39; ac&#39; bc&#39; abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> k12 k13 k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke6"><span class="nb">revert</span> k123.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : b = b&#39;) 
(<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br><span><var>ab'</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab&#39; @ bc&#39; = ac&#39;</span></span></span><br><span><var>k12</var><span class="hyp-type"><b>: </b><span>ab @ <span class="mi">1</span> = <span class="mi">1</span> @ ab&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac @ <span class="mi">1</span> = <span class="mi">1</span> @ ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc @ <span class="mi">1</span> = <span class="mi">1</span> @ bc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k123</span> : prism abc abc&#39; k12 k13 k23,
Q a b c ab&#39; ac&#39; bc&#39; abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> k12 k13 k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke7"><span class="nb">revert</span> k12; equiv_intro (equiv_p1_1q (p:=ab) (q:=ab&#39;)) k12&#39;; <span class="nb">induction</span> k12&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : b = b&#39;) 
(<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br><span><var>ac'</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab @ bc&#39; = ac&#39;</span></span></span><br><span><var>k13</var><span class="hyp-type"><b>: </b><span>ac @ <span class="mi">1</span> = <span class="mi">1</span> @ ac&#39;</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc @ <span class="mi">1</span> = <span class="mi">1</span> @ bc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k123</span> : prism abc abc&#39; (equiv_p1_1q <span class="mi">1</span>) k13 k23,
Q a b c ab ac&#39; bc&#39; abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) k13 k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke8"><span class="nb">revert</span> k13; equiv_intro (equiv_p1_1q (p:=ac) (q:=ac&#39;)) k13&#39;; <span class="nb">induction</span> k13&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : b = b&#39;) 
(<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab @ bc&#39; = ac</span></span></span><br><span><var>k23</var><span class="hyp-type"><b>: </b><span>bc @ <span class="mi">1</span> = <span class="mi">1</span> @ bc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">k123</span> : prism abc abc&#39; (equiv_p1_1q <span class="mi">1</span>) 
         (equiv_p1_1q <span class="mi">1</span>) k23,
Q a b c ab ac bc&#39; abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) k23 k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chke9"><span class="nb">revert</span> k23; equiv_intro (equiv_p1_1q (p:=bc) (q:=bc&#39;)) k23&#39;; <span class="nb">induction</span> k23&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a, b, c</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>ab</var><span class="hyp-type"><b>: </b><span>a = b</span></span></span><br><span><var>ac</var><span class="hyp-type"><b>: </b><span>a = c</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>abc</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : b = b&#39;) 
(<span class="nv">k3</span> : c = c&#39;) (<span class="nv">k12</span> : ab @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : ac @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : bc @ k3 = k2 @ bc&#39;),
prism abc abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a b c ab ac bc abc <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) (prism_id abc)</span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span>ab @ bc = ac</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">k123</span> : prism abc abc&#39; (equiv_p1_1q <span class="mi">1</span>) 
         (equiv_p1_1q <span class="mi">1</span>) 
         (equiv_p1_1q <span class="mi">1</span>),
Q a b c ab ac bc abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> 
  (equiv_p1_1q <span class="mi">1</span>) (equiv_p1_1q <span class="mi">1</span>) 
  (equiv_p1_1q <span class="mi">1</span>) k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkea"><span class="nb">induction</span> ab, bc, abc; <span class="nb">simpl</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : a = b&#39;) 
(<span class="nv">k3</span> : a = c&#39;) (<span class="nv">k12</span> : <span class="mi">1</span> @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : <span class="mi">1</span> @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : <span class="mi">1</span> @ k3 = k2 @ bc&#39;),
prism <span class="mi">1</span> abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k123</span> : prism <span class="mi">1</span> abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>,
Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkeb"><span class="nb">unfold</span> prism; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : a = b&#39;) 
(<span class="nv">k3</span> : a = c&#39;) (<span class="nv">k12</span> : <span class="mi">1</span> @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : <span class="mi">1</span> @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : <span class="mi">1</span> @ k3 = k2 @ bc&#39;),
prism <span class="mi">1</span> abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">k123</span> : <span class="mi">1</span> = <span class="mi">1</span> @ whiskerL <span class="mi">1</span> abc&#39;,
Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> k123</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkec">equiv_intro (equiv_concat_r (concat_1p (whiskerL <span class="mi">1</span> abc&#39;) @ whiskerL_1p_1 abc&#39;)^ idpath) k123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : a = b&#39;) 
(<span class="nv">k3</span> : a = c&#39;) (<span class="nv">k12</span> : <span class="mi">1</span> @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : <span class="mi">1</span> @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : <span class="mi">1</span> @ k3 = k2 @ bc&#39;),
prism <span class="mi">1</span> abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br><span><var>abc'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = <span class="mi">1</span></span></span></span><br><span><var>k123'</var><span class="hyp-type"><b>: </b><span><span class="mi">1</span> = abc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> abc&#39; <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
  (equiv_concat_r
     (concat_1p (whiskerL <span class="mi">1</span> abc&#39;) @ whiskerL_1p_1 abc&#39;)^
     <span class="mi">1</span> k123&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chked"><span class="nb">induction</span> k123&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : a = b&#39;) 
(<span class="nv">k3</span> : a = c&#39;) (<span class="nv">k12</span> : <span class="mi">1</span> @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : <span class="mi">1</span> @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : <span class="mi">1</span> @ k3 = k2 @ bc&#39;),
prism <span class="mi">1</span> abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
  (equiv_concat_r
     (concat_1p (whiskerL <span class="mi">1</span> <span class="mi">1</span>) @ whiskerL_1p_1 <span class="mi">1</span>)^ <span class="mi">1</span> <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkee"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> <span class="nv">c&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
(<span class="nv">ac&#39;</span> : a&#39; = c&#39;) (<span class="nv">bc&#39;</span> : b&#39; = c&#39;)
(<span class="nv">abc&#39;</span> : ab&#39; @ bc&#39; = ac&#39;) 
(<span class="nv">k1</span> : a = a&#39;) (<span class="nv">k2</span> : a = b&#39;) 
(<span class="nv">k3</span> : a = c&#39;) (<span class="nv">k12</span> : <span class="mi">1</span> @ k2 = k1 @ ab&#39;)
(<span class="nv">k13</span> : <span class="mi">1</span> @ k3 = k1 @ ac&#39;)
(<span class="nv">k23</span> : <span class="mi">1</span> @ k3 = k2 @ bc&#39;),
prism <span class="mi">1</span> abc&#39; k12 k13 k23 -&gt; <span class="kt">Type</span></span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q a a a <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Use this with [f g : TriJoinRecData A B C P], [h : TriJoinRecPath f g] (so [g] is the *co*domain of [h]), [a : A], [b : B], [c : C]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">prism_ind</span> g h a b c :=
  generalize_some h a b c;
  generalize_some g a b c;
  <span class="nb">apply</span> prism_ind.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Use this with [f g : TriJoinRecData A B C P], [h : TriJoinRecPath f g] (so [g] is the *co*domain of [h]).  Two of the arguments [a], [b] and [c] should be elements of [A], [B] and [C], respectively, and the third should be a dummy value (e.g. [_X_]) that causes the generalize tactic to fail.  It applies to goals that only depend on the components of [g] and [h] involving just two of [A], [B] and [C]. So it is dealing with one square face of the prism. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">prism_ind_two</span> g h a b c :=
  generalize_some h a b c;
  generalize_some g a b c;
  <span class="nb">apply</span> square_ind. <span class="c">(* From Join/Core.v *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Use the WildCat library to organize things *)</span>

<span class="sd">(** We begin by showing that [TriJoinRecData A B C P] is a 0-groupoid, one piece at a time. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span> <span class="nf">isgraph_trijoinrecdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>) : IsGraph (TriJoinRecData A B C P)
  := {| Hom := TriJoinRecPath |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkef"><span class="kn">Instance</span> <span class="nf">is01cat_trijoinrecdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>) : Is01Cat (TriJoinRecData A B C P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is01Cat (TriJoinRecData A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf0"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is01Cat (TriJoinRecData A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf1"><span class="nb">apply</span> Build_Is01Cat.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : TriJoinRecData A B C P, a $-&gt; a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkf2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkf2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : TriJoinRecData A B C P,
(b $-&gt; c) -&gt; (a $-&gt; b) -&gt; a $-&gt; c</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : TriJoinRecData A B C P, a $-&gt; a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf4"><span class="nb">intro</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f $-&gt; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf5">bundle_trijoinrecpath.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
j12&#39; (unbundle_trijoinrecdata f) a b =
j12&#39; (unbundle_trijoinrecdata f) a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkf6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkf6"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
j13&#39; (unbundle_trijoinrecdata f) a c =
j13&#39; (unbundle_trijoinrecdata f) a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkf7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkf7"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
j23&#39; (unbundle_trijoinrecdata f) b c =
j23&#39; (unbundle_trijoinrecdata f) b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chkf8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chkf8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism&#39; (j123&#39; (unbundle_trijoinrecdata f) a b c)
  (j123&#39; (unbundle_trijoinrecdata f) a b c)
  (<span class="nl">?h12&#39;</span> a b) (<span class="nl">?h13&#39;</span> a c) (<span class="nl">?h23&#39;</span> b c)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkf9"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism&#39; (j123&#39; (unbundle_trijoinrecdata f) a b c)
  (j123&#39; (unbundle_trijoinrecdata f) a b c)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">b0</span> : B) =&gt; <span class="mi">1</span>) a b)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">c0</span> : C) =&gt; <span class="mi">1</span>) a c)
  ((<span class="kr">fun</span> (<span class="nv">b0</span> : B) (<span class="nv">c0</span> : C) =&gt; <span class="mi">1</span>) b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkfa"><span class="nb">intros</span> a b c; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39; (j123&#39; (unbundle_trijoinrecdata f) a b c)
  (j123&#39; (unbundle_trijoinrecdata f) a b c) <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* Can finish with:  [by triangle_ind f a b c.] *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkfb"><span class="nb">unfold</span> prism&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j123&#39; (unbundle_trijoinrecdata f) a b c @ <span class="mi">1</span> =
(<span class="mi">1</span> @@ <span class="mi">1</span>) @ j123&#39; (unbundle_trijoinrecdata f) a b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkfc"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j123 f a b c @ <span class="mi">1</span> = <span class="mi">1</span> @ j123 f a b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> concat_p1_1p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkfd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : TriJoinRecData A B C P,
(b $-&gt; c) -&gt; (a $-&gt; b) -&gt; a $-&gt; c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkfe"><span class="nb">intros</span> f1 f2 f3 k2 k1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f1 $-&gt; f3</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chkff">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 f1 a = j1 f3 a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk100" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk100"><hr></label><div class="goal-conclusion">j2 f1 b = j2 f3 b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk101" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk101"><hr></label><div class="goal-conclusion">j3 f1 c = j3 f3 c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk102" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk102"><hr></label><div class="goal-conclusion">j12 f1 a b @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ j12 f3 a b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk103" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk103"><hr></label><div class="goal-conclusion">j13 f1 a c @ <span class="nl">?Goal1</span> = <span class="nl">?Goal</span> @ j13 f3 a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk104" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk104"><hr></label><div class="goal-conclusion">j23 f1 b c @ <span class="nl">?Goal1</span> = <span class="nl">?Goal0</span> @ j23 f3 b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk105" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk105"><hr></label><div class="goal-conclusion">prism (j123 f1 a b c) (j123 f3 a b c) <span class="nl">?Goal2</span> <span class="nl">?Goal3</span>
  <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk106">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 f1 a = j1 f3 a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h1 k1 a @ h1 k2 a).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk107">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j2 f1 b = j2 f3 b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h2 k1 b @ h2 k2 b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk108">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j3 f1 c = j3 f3 c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h3 k1 c @ h3 k2 c).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk109">+ <span class="c">(* Some simple path algebra works as well. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f1 a b @ (h2 k1 b @ h2 k2 b) =
(h1 k1 a @ h1 k2 a) @ j12 f3 a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10a">prism_ind_two f3 k2 a b _X_.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f1 a b @ (h2 k1 b @ <span class="mi">1</span>) =
(h1 k1 a @ <span class="mi">1</span>) @ j12 f2 a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10b">prism_ind_two f2 k1 a b _X_.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f1 a b @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ j12 f1 a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind_two f1 a b _X_.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f1 a c @ (h3 k1 c @ h3 k2 c) =
(h1 k1 a @ h1 k2 a) @ j13 f3 a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10d">prism_ind_two f3 k2 a _X_ c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f1 a c @ (h3 k1 c @ <span class="mi">1</span>) =
(h1 k1 a @ <span class="mi">1</span>) @ j13 f2 a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10e">prism_ind_two f2 k1 a _X_ c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f1 a c @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ j13 f1 a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind_two f1 a _X_ c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk10f">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 f1 b c @ (h3 k1 c @ h3 k2 c) =
(h2 k1 b @ h2 k2 b) @ j23 f3 b c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk110">prism_ind_two f3 k2 _X_ b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 f1 b c @ (h3 k1 c @ <span class="mi">1</span>) =
(h2 k1 b @ <span class="mi">1</span>) @ j23 f2 b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk111">prism_ind_two f2 k1 _X_ b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 f1 b c @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ j23 f1 b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind_two f1 _X_ b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk112">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 f1 a b c) (j123 f3 a b c)
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f2 a = j1 f3 a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f2 b = j2 f3 b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f2 c = j3 f3 c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
            j12 f2 a b @ H0 b = H a @ j12 f3 a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
            j13 f2 a c @ H1 c = H a @ j13 f3 a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            j23 f2 b c @ H1 c = H0 b @ j23 f3 b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f2 a b c) (j123 f3 a b c)
              (H2 a b) (H3 a c) (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j1 f2 a) (j2 f2 b) (j12 f2 a b)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j1 f2 a = a&#39;) (<span class="nv">hb</span> : j2 f2 b = b&#39;)
          (<span class="nv">_</span> : j12 f2 a b @ hb = ha @ ab&#39;) =&gt;
        j12 f1 a b @ (h2 k1 b @ hb) =
        (h1 k1 a @ ha) @ ab&#39;)
       ((<span class="kr">fun</span> (<span class="nv">H13</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f1 a = j1 f2 a)
           (<span class="nv">H14</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f1 b = j2 f2 b)
           (<span class="nv">H15</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f1 c = j3 f2 c)
           (<span class="nv">H16</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                  j12 f1 a b @ H14 b =
                  H13 a @ j12 f2 a b)
           (<span class="nv">H17</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                  j13 f1 a c @ H15 c =
                  H13 a @ j13 f2 a c)
           (<span class="nv">H18</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  j23 f1 b c @ H15 c =
                  H14 b @ j23 f2 b c)
           (<span class="nv">H19</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  prism (j123 f1 a b c)
                    (j123 f2 a b c) (H16 a b)
                    (H17 a c) (H18 b c)) =&gt;
         (<span class="kr">fun</span> (<span class="nv">H20</span> : A -&gt; P) (<span class="nv">H21</span> : B -&gt; P)
            (<span class="nv">H22</span> : C -&gt; P)
            (<span class="nv">H23</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                   H20 a = H21 b)
            (<span class="nv">H24</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                   H20 a = H22 c)
            (<span class="nv">H25</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                   H21 b = H22 c)
            (<span class="nv">H26</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                   H23 a b @ H25 b c = H24 a c) =&gt;
          square_ind (j1 f1 a) (j2 f1 b) (j12 f1 a b)
            (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
               (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j2 f1 b = b&#39;)
               (<span class="nv">_</span> : ... @ hb = ha @ ab&#39;) =&gt;
             j12 f1 a b @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
            ((<span class="kr">fun</span> (<span class="nv">H27</span> : ...) (<span class="nv">H28</span> : ...) (<span class="nv">H29</span> : ...)
                (<span class="nv">H30</span> : ...) (<span class="nv">H31</span> : ...) (<span class="nv">H32</span> : ...)
                (<span class="nv">H33</span> : ...) =&gt;
              ... ... ... ... : ... = ...) (j1 f1)
               (j2 f1) (j3 f1) (j12 f1) (j13 f1)
               (j23 f1) (j123 f1)) (H20 a) (H21 b)
            (H23 a b)
          :
          <span class="kr">forall</span>
          (<span class="nv">p</span> : j1 f1 a =
               j1
                 {|
                   j1 := H20;
                   j2 := H21;
                   j3 := H22;
                   j12 := H23;
                   j13 := H24;
                   j23 := H25;
                   j123 := H26
                 |} a)
          (<span class="nv">p0</span> : j2 f1 b =
                j2
                  {|
                    j1 := H20;
                    j2 := H21;
                    j3 := H22;
                    j12 := H23;
                    j13 := H24;
                    j23 := H25;
                    j123 := H26
                  |} b),
          j12 f1 a b @ p0 =
          p @
          j12 {| ...; ...; ...; ...; ...; ...; ... |}
            a b -&gt;
          j12 f1 a b @ (p0 @ <span class="mi">1</span>) =
          (p @ <span class="mi">1</span>) @
          j12 {| ...; ...; ...; ...; ...; ...; ... |}
            a b) (j1 f2) (j2 f2) (j3 f2) (j12 f2)
           (j13 f2) (j23 f2) (j123 f2) (H13 a) (H14 b)
           (H16 a b)
         :
         j12 f1 a b @
         (h2
            {|
              h1 := H13;
              h2 := H14;
              h3 := H15;
              h12 := H16;
              h13 := H17;
              h23 := H18;
              h123 := H19
            |} b @ <span class="mi">1</span>) =
         (h1
            {|
              h1 := H13;
              h2 := H14;
              h3 := H15;
              h12 := H16;
              h13 := H17;
              h23 := H18;
              h123 := H19
            |} a @ <span class="mi">1</span>) @ j12 f2 a b) (h1 k1) (h2 k1)
          (h3 k1) (h12 k1) (h13 k1) (h23 k1) (h123 k1))
       (H6 a) (H7 b) (H9 a b)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j1 f2 a =
          j1
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} a)
     (<span class="nv">p0</span> : j2 f2 b =
           j2
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} b),
     j12 f2 a b @ p0 =
     p @
     j12
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a b -&gt;
     j12 f1 a b @ (h2 k1 b @ p0) =
     (h1 k1 a @ p) @
     j12
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a b) (j1 f3) (j2 f3) (j3 f3) (j12 f3)
      (j13 f3) (j23 f3) (j123 f3) (H a) (H0 b)
      (H2 a b)
    :
    j12 f1 a b @
    (h2 k1 b @
     h2
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} b) =
    (h1 k1 a @
     h1
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} a) @ j12 f3 a b) (h1 k2) (h2 k2) (h3 k2)
     (h12 k2) (h13 k2) (h23 k2) (h123 k2))
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f2 a = j1 f3 a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f2 b = j2 f3 b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f2 c = j3 f3 c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
            j12 f2 a b @ H0 b = H a @ j12 f3 a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
            j13 f2 a c @ H1 c = H a @ j13 f3 a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            j23 f2 b c @ H1 c = H0 b @ j23 f3 b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f2 a b c) (j123 f3 a b c)
              (H2 a b) (H3 a c) (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j1 f2 a) (j3 f2 c) (j13 f2 a c)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j1 f2 a = a&#39;) (<span class="nv">hb</span> : j3 f2 c = b&#39;)
          (<span class="nv">_</span> : j13 f2 a c @ hb = ha @ ab&#39;) =&gt;
        j13 f1 a c @ (h3 k1 c @ hb) =
        (h1 k1 a @ ha) @ ab&#39;)
       ((<span class="kr">fun</span> (<span class="nv">H13</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f1 a = j1 f2 a)
           (<span class="nv">H14</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f1 b = j2 f2 b)
           (<span class="nv">H15</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f1 c = j3 f2 c)
           (<span class="nv">H16</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                  j12 f1 a b @ H14 b =
                  H13 a @ j12 f2 a b)
           (<span class="nv">H17</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                  j13 f1 a c @ H15 c =
                  H13 a @ j13 f2 a c)
           (<span class="nv">H18</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  j23 f1 b c @ H15 c =
                  H14 b @ j23 f2 b c)
           (<span class="nv">H19</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  prism (j123 f1 a b c)
                    (j123 f2 a b c) (H16 a b)
                    (H17 a c) (H18 b c)) =&gt;
         (<span class="kr">fun</span> (<span class="nv">H20</span> : A -&gt; P) (<span class="nv">H21</span> : B -&gt; P)
            (<span class="nv">H22</span> : C -&gt; P)
            (<span class="nv">H23</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                   H20 a = H21 b)
            (<span class="nv">H24</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                   H20 a = H22 c)
            (<span class="nv">H25</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                   H21 b = H22 c)
            (<span class="nv">H26</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                   H23 a b @ H25 b c = H24 a c) =&gt;
          square_ind (j1 f1 a) (j3 f1 c) (j13 f1 a c)
            (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
               (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
               (<span class="nv">_</span> : ... @ hb = ha @ ab&#39;) =&gt;
             j13 f1 a c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
            ((<span class="kr">fun</span> (<span class="nv">H27</span> : ...) (<span class="nv">H28</span> : ...) (<span class="nv">H29</span> : ...)
                (<span class="nv">H30</span> : ...) (<span class="nv">H31</span> : ...) (<span class="nv">H32</span> : ...)
                (<span class="nv">H33</span> : ...) =&gt;
              ... ... ... ... : ... = ...) (j1 f1)
               (j2 f1) (j3 f1) (j12 f1) (j13 f1)
               (j23 f1) (j123 f1)) (H20 a) (H22 c)
            (H24 a c)
          :
          <span class="kr">forall</span>
          (<span class="nv">p</span> : j1 f1 a =
               j1
                 {|
                   j1 := H20;
                   j2 := H21;
                   j3 := H22;
                   j12 := H23;
                   j13 := H24;
                   j23 := H25;
                   j123 := H26
                 |} a)
          (<span class="nv">p0</span> : j3 f1 c =
                j3
                  {|
                    j1 := H20;
                    j2 := H21;
                    j3 := H22;
                    j12 := H23;
                    j13 := H24;
                    j23 := H25;
                    j123 := H26
                  |} c),
          j13 f1 a c @ p0 =
          p @
          j13 {| ...; ...; ...; ...; ...; ...; ... |}
            a c -&gt;
          j13 f1 a c @ (p0 @ <span class="mi">1</span>) =
          (p @ <span class="mi">1</span>) @
          j13 {| ...; ...; ...; ...; ...; ...; ... |}
            a c) (j1 f2) (j2 f2) (j3 f2) (j12 f2)
           (j13 f2) (j23 f2) (j123 f2) (H13 a) (H15 c)
           (H17 a c)
         :
         j13 f1 a c @
         (h3
            {|
              h1 := H13;
              h2 := H14;
              h3 := H15;
              h12 := H16;
              h13 := H17;
              h23 := H18;
              h123 := H19
            |} c @ <span class="mi">1</span>) =
         (h1
            {|
              h1 := H13;
              h2 := H14;
              h3 := H15;
              h12 := H16;
              h13 := H17;
              h23 := H18;
              h123 := H19
            |} a @ <span class="mi">1</span>) @ j13 f2 a c) (h1 k1) (h2 k1)
          (h3 k1) (h12 k1) (h13 k1) (h23 k1) (h123 k1))
       (H6 a) (H8 c) (H10 a c)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j1 f2 a =
          j1
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} a)
     (<span class="nv">p0</span> : j3 f2 c =
           j3
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} c),
     j13 f2 a c @ p0 =
     p @
     j13
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a c -&gt;
     j13 f1 a c @ (h3 k1 c @ p0) =
     (h1 k1 a @ p) @
     j13
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a c) (j1 f3) (j2 f3) (j3 f3) (j12 f3)
      (j13 f3) (j23 f3) (j123 f3) (H a) (H1 c)
      (H3 a c)
    :
    j13 f1 a c @
    (h3 k1 c @
     h3
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} c) =
    (h1 k1 a @
     h1
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} a) @ j13 f3 a c) (h1 k2) (h2 k2) (h3 k2)
     (h12 k2) (h13 k2) (h23 k2) (h123 k2))
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f2 a = j1 f3 a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f2 b = j2 f3 b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f2 c = j3 f3 c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
            j12 f2 a b @ H0 b = H a @ j12 f3 a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
            j13 f2 a c @ H1 c = H a @ j13 f3 a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            j23 f2 b c @ H1 c = H0 b @ j23 f3 b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f2 a b c) (j123 f3 a b c)
              (H2 a b) (H3 a c) (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j2 f2 b) (j3 f2 c) (j23 f2 b c)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j2 f2 b = a&#39;) (<span class="nv">hb</span> : j3 f2 c = b&#39;)
          (<span class="nv">_</span> : j23 f2 b c @ hb = ha @ ab&#39;) =&gt;
        j23 f1 b c @ (h3 k1 c @ hb) =
        (h2 k1 b @ ha) @ ab&#39;)
       ((<span class="kr">fun</span> (<span class="nv">H13</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f1 a = j1 f2 a)
           (<span class="nv">H14</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f1 b = j2 f2 b)
           (<span class="nv">H15</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f1 c = j3 f2 c)
           (<span class="nv">H16</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                  j12 f1 a b @ H14 b =
                  H13 a @ j12 f2 a b)
           (<span class="nv">H17</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                  j13 f1 a c @ H15 c =
                  H13 a @ j13 f2 a c)
           (<span class="nv">H18</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  j23 f1 b c @ H15 c =
                  H14 b @ j23 f2 b c)
           (<span class="nv">H19</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  prism (j123 f1 a b c)
                    (j123 f2 a b c) (H16 a b)
                    (H17 a c) (H18 b c)) =&gt;
         (<span class="kr">fun</span> (<span class="nv">H20</span> : A -&gt; P) (<span class="nv">H21</span> : B -&gt; P)
            (<span class="nv">H22</span> : C -&gt; P)
            (<span class="nv">H23</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                   H20 a = H21 b)
            (<span class="nv">H24</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                   H20 a = H22 c)
            (<span class="nv">H25</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                   H21 b = H22 c)
            (<span class="nv">H26</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                   H23 a b @ H25 b c = H24 a c) =&gt;
          square_ind (j2 f1 b) (j3 f1 c) (j23 f1 b c)
            (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
               (<span class="nv">ha</span> : j2 f1 b = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
               (<span class="nv">_</span> : ... @ hb = ha @ ab&#39;) =&gt;
             j23 f1 b c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
            ((<span class="kr">fun</span> (<span class="nv">H27</span> : ...) (<span class="nv">H28</span> : ...) (<span class="nv">H29</span> : ...)
                (<span class="nv">H30</span> : ...) (<span class="nv">H31</span> : ...) (<span class="nv">H32</span> : ...)
                (<span class="nv">H33</span> : ...) =&gt;
              ... ... ... ... : ... = ...) (j1 f1)
               (j2 f1) (j3 f1) (j12 f1) (j13 f1)
               (j23 f1) (j123 f1)) (H21 b) (H22 c)
            (H25 b c)
          :
          <span class="kr">forall</span>
          (<span class="nv">p</span> : j2 f1 b =
               j2
                 {|
                   j1 := H20;
                   j2 := H21;
                   j3 := H22;
                   j12 := H23;
                   j13 := H24;
                   j23 := H25;
                   j123 := H26
                 |} b)
          (<span class="nv">p0</span> : j3 f1 c =
                j3
                  {|
                    j1 := H20;
                    j2 := H21;
                    j3 := H22;
                    j12 := H23;
                    j13 := H24;
                    j23 := H25;
                    j123 := H26
                  |} c),
          j23 f1 b c @ p0 =
          p @
          j23 {| ...; ...; ...; ...; ...; ...; ... |}
            b c -&gt;
          j23 f1 b c @ (p0 @ <span class="mi">1</span>) =
          (p @ <span class="mi">1</span>) @
          j23 {| ...; ...; ...; ...; ...; ...; ... |}
            b c) (j1 f2) (j2 f2) (j3 f2) (j12 f2)
           (j13 f2) (j23 f2) (j123 f2) (H14 b) (H15 c)
           (H18 b c)
         :
         j23 f1 b c @
         (h3
            {|
              h1 := H13;
              h2 := H14;
              h3 := H15;
              h12 := H16;
              h13 := H17;
              h23 := H18;
              h123 := H19
            |} c @ <span class="mi">1</span>) =
         (h2
            {|
              h1 := H13;
              h2 := H14;
              h3 := H15;
              h12 := H16;
              h13 := H17;
              h23 := H18;
              h123 := H19
            |} b @ <span class="mi">1</span>) @ j23 f2 b c) (h1 k1) (h2 k1)
          (h3 k1) (h12 k1) (h13 k1) (h23 k1) (h123 k1))
       (H7 b) (H8 c) (H11 b c)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j2 f2 b =
          j2
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} b)
     (<span class="nv">p0</span> : j3 f2 c =
           j3
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} c),
     j23 f2 b c @ p0 =
     p @
     j23
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} b c -&gt;
     j23 f1 b c @ (h3 k1 c @ p0) =
     (h2 k1 b @ p) @
     j23
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} b c) (j1 f3) (j2 f3) (j3 f3) (j12 f3)
      (j13 f3) (j23 f3) (j123 f3) (H0 b) (H1 c)
      (H4 b c)
    :
    j23 f1 b c @
    (h3 k1 c @
     h3
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} c) =
    (h2 k1 b @
     h2
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} b) @ j23 f3 b c) (h1 k2) (h2 k2) (h3 k2)
     (h12 k2) (h13 k2) (h23 k2) (h123 k2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk113"><span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2, f3</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k2</var><span class="hyp-type"><b>: </b><span>f2 $-&gt; f3</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 f1 a b c) (j123 f3 a b c)
  (square_ind (j1 f2 a) (j2 f2 b) (j12 f2 a b)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f2 a = a&#39;) (<span class="nv">hb</span> : j2 f2 b = b&#39;)
        (<span class="nv">_</span> : j12 f2 a b @ hb = ha @ ab&#39;) =&gt;
      j12 f1 a b @ (h2 k1 b @ hb) =
      (h1 k1 a @ ha) @ ab&#39;)
     (square_ind (j1 f1 a) (j2 f1 b) (j12 f1 a b)
        (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
           (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j2 f1 b = b&#39;)
           (<span class="nv">_</span> : j12 f1 a b @ hb = ha @ ab&#39;) =&gt;
         j12 f1 a b @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
        (paths_ind (j1 f1 a)
           (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f1 a = y) =&gt;
            p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j2 f1 b) (j12 f1 a b))
        (j1 f2 a) (j2 f2 b) (j12 f2 a b) (h1 k1 a)
        (h2 k1 b) (h12 k1 a b)) (j1 f3 a) (j2 f3 b)
     (j12 f3 a b) (h1 k2 a) (h2 k2 b) (h12 k2 a b))
  (square_ind (j1 f2 a) (j3 f2 c) (j13 f2 a c)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f2 a = a&#39;) (<span class="nv">hb</span> : j3 f2 c = b&#39;)
        (<span class="nv">_</span> : j13 f2 a c @ hb = ha @ ab&#39;) =&gt;
      j13 f1 a c @ (h3 k1 c @ hb) =
      (h1 k1 a @ ha) @ ab&#39;)
     (square_ind (j1 f1 a) (j3 f1 c) (j13 f1 a c)
        (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
           (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
           (<span class="nv">_</span> : j13 f1 a c @ hb = ha @ ab&#39;) =&gt;
         j13 f1 a c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
        (paths_ind (j1 f1 a)
           (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f1 a = y) =&gt;
            p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j3 f1 c) (j13 f1 a c))
        (j1 f2 a) (j3 f2 c) (j13 f2 a c) (h1 k1 a)
        (h3 k1 c) (h13 k1 a c)) (j1 f3 a) (j3 f3 c)
     (j13 f3 a c) (h1 k2 a) (h3 k2 c) (h13 k2 a c))
  (square_ind (j2 f2 b) (j3 f2 c) (j23 f2 b c)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j2 f2 b = a&#39;) (<span class="nv">hb</span> : j3 f2 c = b&#39;)
        (<span class="nv">_</span> : j23 f2 b c @ hb = ha @ ab&#39;) =&gt;
      j23 f1 b c @ (h3 k1 c @ hb) =
      (h2 k1 b @ ha) @ ab&#39;)
     (square_ind (j2 f1 b) (j3 f1 c) (j23 f1 b c)
        (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
           (<span class="nv">ha</span> : j2 f1 b = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
           (<span class="nv">_</span> : j23 f1 b c @ hb = ha @ ab&#39;) =&gt;
         j23 f1 b c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
        (paths_ind (j2 f1 b)
           (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j2 f1 b = y) =&gt;
            p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j3 f1 c) (j23 f1 b c))
        (j2 f2 b) (j3 f2 c) (j23 f2 b c) (h2 k1 b)
        (h3 k1 c) (h23 k1 b c)) (j2 f3 b) (j3 f3 c)
     (j23 f3 b c) (h2 k2 b) (h3 k2 c) (h23 k2 b c))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk114">prism_ind f3 k2 a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>k1</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 f1 a b c) (j123 f2 a b c)
  (square_ind (j1 f2 a) (j2 f2 b) (j12 f2 a b)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f2 a = a&#39;) (<span class="nv">hb</span> : j2 f2 b = b&#39;)
        (<span class="nv">_</span> : j12 f2 a b @ hb = ha @ ab&#39;) =&gt;
      j12 f1 a b @ (h2 k1 b @ hb) =
      (h1 k1 a @ ha) @ ab&#39;)
     (square_ind (j1 f1 a) (j2 f1 b) (j12 f1 a b)
        (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
           (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j2 f1 b = b&#39;)
           (<span class="nv">_</span> : j12 f1 a b @ hb = ha @ ab&#39;) =&gt;
         j12 f1 a b @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
        (paths_ind (j1 f1 a)
           (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f1 a = y) =&gt;
            p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j2 f1 b) (j12 f1 a b))
        (j1 f2 a) (j2 f2 b) (j12 f2 a b) (h1 k1 a)
        (h2 k1 b) (h12 k1 a b)) (j1 f2 a) (j2 f2 b)
     (j12 f2 a b) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
  (square_ind (j1 f2 a) (j3 f2 c) (j13 f2 a c)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f2 a = a&#39;) (<span class="nv">hb</span> : j3 f2 c = b&#39;)
        (<span class="nv">_</span> : j13 f2 a c @ hb = ha @ ab&#39;) =&gt;
      j13 f1 a c @ (h3 k1 c @ hb) =
      (h1 k1 a @ ha) @ ab&#39;)
     (square_ind (j1 f1 a) (j3 f1 c) (j13 f1 a c)
        (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
           (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
           (<span class="nv">_</span> : j13 f1 a c @ hb = ha @ ab&#39;) =&gt;
         j13 f1 a c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
        (paths_ind (j1 f1 a)
           (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f1 a = y) =&gt;
            p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j3 f1 c) (j13 f1 a c))
        (j1 f2 a) (j3 f2 c) (j13 f2 a c) (h1 k1 a)
        (h3 k1 c) (h13 k1 a c)) (j1 f2 a) (j3 f2 c)
     (j13 f2 a c) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
  (square_ind (j2 f2 b) (j3 f2 c) (j23 f2 b c)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j2 f2 b = a&#39;) (<span class="nv">hb</span> : j3 f2 c = b&#39;)
        (<span class="nv">_</span> : j23 f2 b c @ hb = ha @ ab&#39;) =&gt;
      j23 f1 b c @ (h3 k1 c @ hb) =
      (h2 k1 b @ ha) @ ab&#39;)
     (square_ind (j2 f1 b) (j3 f1 c) (j23 f1 b c)
        (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
           (<span class="nv">ha</span> : j2 f1 b = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
           (<span class="nv">_</span> : j23 f1 b c @ hb = ha @ ab&#39;) =&gt;
         j23 f1 b c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
        (paths_ind (j2 f1 b)
           (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j2 f1 b = y) =&gt;
            p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j3 f1 c) (j23 f1 b c))
        (j2 f2 b) (j3 f2 c) (j23 f2 b c) (h2 k1 b)
        (h3 k1 c) (h23 k1 b c)) (j2 f2 b) (j3 f2 c)
     (j23 f2 b c) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk115">prism_ind f2 k1 a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 f1 a b c) (j123 f1 a b c)
  (equiv_ind
     (concat_lr (concat_p1 (j12 f1 a b))
        (concat_1p (j12 f1 a b))^)
     (<span class="kr">fun</span> <span class="nv">_</span> : j12 f1 a b @ <span class="mi">1</span> = <span class="mi">1</span> @ j12 f1 a b =&gt;
      j12 f1 a b @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ j12 f1 a b)
     (<span class="kr">fun</span> <span class="nv">k&#39;</span> : j12 f1 a b = j12 f1 a b =&gt;
      <span class="kr">match</span>
        k&#39; <span class="kr">in</span> (_ = p)
        <span class="kr">return</span> (j12 f1 a b @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ p)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt;
          <span class="kr">match</span>
            j12 f1 a b <span class="kr">as</span> p0 <span class="kr">in</span> (_ = p)
            <span class="kr">return</span>
              (<span class="kr">forall</span>
               <span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                   (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : p = b&#39;),
                   p0 @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span>,
               Q (j1 f1 a) p p0 <span class="mi">1</span> <span class="mi">1</span>
                 ((concat_p1 p0 @ <span class="mi">1</span>) @ (concat_1p p0)^) -&gt;
               Q (j1 f1 a) p p0 <span class="mi">1</span> <span class="mi">1</span>
                 ((concat_p1 p0 @ <span class="mi">1</span>) @ (concat_1p p0)^))
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt;
              <span class="kr">fun</span>
                <span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                    (<span class="nv">ha</span> : j1 f1 a = a&#39;)
                    (<span class="nv">hb</span> : j1 f1 a = b&#39;),
                    <span class="mi">1</span> @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span> =&gt; idmap
          <span class="kr">end</span>
            (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
               (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j2 f1 b = b&#39;)
               (<span class="nv">_</span> : j12 f1 a b @ hb = ha @ ab&#39;) =&gt;
             j12 f1 a b @ (<span class="mi">1</span> @ hb) = (<span class="mi">1</span> @ ha) @ ab&#39;)
            (square_ind (j1 f1 a) (j2 f1 b)
               (j12 f1 a b)
               (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                  (<span class="nv">ha</span> : j1 f1 a = a&#39;)
                  (<span class="nv">hb</span> : j2 f1 b = b&#39;)
                  (<span class="nv">_</span> : j12 f1 a b @ hb = ha @ ab&#39;) =&gt;
                j12 f1 a b @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
               (paths_ind (j1 f1 a)
                  (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f1 a = y) =&gt;
                   p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j2 f1 b)
                  (j12 f1 a b)) (j1 f1 a) (j2 f1 b)
               (j12 f1 a b) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
      <span class="kr">end</span>)
     ((concat_p1 (j12 f1 a b) @ <span class="mi">1</span>) @
      (concat_1p (j12 f1 a b))^))
  (equiv_ind
     (concat_lr (concat_p1 (j13 f1 a c))
        (concat_1p (j13 f1 a c))^)
     (<span class="kr">fun</span> <span class="nv">_</span> : j13 f1 a c @ <span class="mi">1</span> = <span class="mi">1</span> @ j13 f1 a c =&gt;
      j13 f1 a c @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ j13 f1 a c)
     (<span class="kr">fun</span> <span class="nv">k&#39;</span> : j13 f1 a c = j13 f1 a c =&gt;
      <span class="kr">match</span>
        k&#39; <span class="kr">in</span> (_ = p)
        <span class="kr">return</span> (j13 f1 a c @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ p)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt;
          <span class="kr">match</span>
            j13 f1 a c <span class="kr">as</span> p0 <span class="kr">in</span> (_ = p)
            <span class="kr">return</span>
              (<span class="kr">forall</span>
               <span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                   (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : p = b&#39;),
                   p0 @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span>,
               Q (j1 f1 a) p p0 <span class="mi">1</span> <span class="mi">1</span>
                 ((concat_p1 p0 @ <span class="mi">1</span>) @ (concat_1p p0)^) -&gt;
               Q (j1 f1 a) p p0 <span class="mi">1</span> <span class="mi">1</span>
                 ((concat_p1 p0 @ <span class="mi">1</span>) @ (concat_1p p0)^))
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt;
              <span class="kr">fun</span>
                <span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                    (<span class="nv">ha</span> : j1 f1 a = a&#39;)
                    (<span class="nv">hb</span> : j1 f1 a = b&#39;),
                    <span class="mi">1</span> @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span> =&gt; idmap
          <span class="kr">end</span>
            (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
               (<span class="nv">ha</span> : j1 f1 a = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
               (<span class="nv">_</span> : j13 f1 a c @ hb = ha @ ab&#39;) =&gt;
             j13 f1 a c @ (<span class="mi">1</span> @ hb) = (<span class="mi">1</span> @ ha) @ ab&#39;)
            (square_ind (j1 f1 a) (j3 f1 c)
               (j13 f1 a c)
               (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                  (<span class="nv">ha</span> : j1 f1 a = a&#39;)
                  (<span class="nv">hb</span> : j3 f1 c = b&#39;)
                  (<span class="nv">_</span> : j13 f1 a c @ hb = ha @ ab&#39;) =&gt;
                j13 f1 a c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
               (paths_ind (j1 f1 a)
                  (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f1 a = y) =&gt;
                   p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j3 f1 c)
                  (j13 f1 a c)) (j1 f1 a) (j3 f1 c)
               (j13 f1 a c) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
      <span class="kr">end</span>)
     ((concat_p1 (j13 f1 a c) @ <span class="mi">1</span>) @
      (concat_1p (j13 f1 a c))^))
  (equiv_ind
     (concat_lr (concat_p1 (j23 f1 b c))
        (concat_1p (j23 f1 b c))^)
     (<span class="kr">fun</span> <span class="nv">_</span> : j23 f1 b c @ <span class="mi">1</span> = <span class="mi">1</span> @ j23 f1 b c =&gt;
      j23 f1 b c @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ j23 f1 b c)
     (<span class="kr">fun</span> <span class="nv">k&#39;</span> : j23 f1 b c = j23 f1 b c =&gt;
      <span class="kr">match</span>
        k&#39; <span class="kr">in</span> (_ = p)
        <span class="kr">return</span> (j23 f1 b c @ (<span class="mi">1</span> @ <span class="mi">1</span>) = (<span class="mi">1</span> @ <span class="mi">1</span>) @ p)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt;
          <span class="kr">match</span>
            j23 f1 b c <span class="kr">as</span> p0 <span class="kr">in</span> (_ = p)
            <span class="kr">return</span>
              (<span class="kr">forall</span>
               <span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                   (<span class="nv">ha</span> : j2 f1 b = a&#39;) (<span class="nv">hb</span> : p = b&#39;),
                   p0 @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span>,
               Q (j2 f1 b) p p0 <span class="mi">1</span> <span class="mi">1</span>
                 ((concat_p1 p0 @ <span class="mi">1</span>) @ (concat_1p p0)^) -&gt;
               Q (j2 f1 b) p p0 <span class="mi">1</span> <span class="mi">1</span>
                 ((concat_p1 p0 @ <span class="mi">1</span>) @ (concat_1p p0)^))
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt;
              <span class="kr">fun</span>
                <span class="nv">Q</span> : <span class="kr">forall</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                    (<span class="nv">ha</span> : j2 f1 b = a&#39;)
                    (<span class="nv">hb</span> : j2 f1 b = b&#39;),
                    <span class="mi">1</span> @ hb = ha @ ab&#39; -&gt; <span class="kt">Type</span> =&gt; idmap
          <span class="kr">end</span>
            (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
               (<span class="nv">ha</span> : j2 f1 b = a&#39;) (<span class="nv">hb</span> : j3 f1 c = b&#39;)
               (<span class="nv">_</span> : j23 f1 b c @ hb = ha @ ab&#39;) =&gt;
             j23 f1 b c @ (<span class="mi">1</span> @ hb) = (<span class="mi">1</span> @ ha) @ ab&#39;)
            (square_ind (j2 f1 b) (j3 f1 c)
               (j23 f1 b c)
               (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
                  (<span class="nv">ha</span> : j2 f1 b = a&#39;)
                  (<span class="nv">hb</span> : j3 f1 c = b&#39;)
                  (<span class="nv">_</span> : j23 f1 b c @ hb = ha @ ab&#39;) =&gt;
                j23 f1 b c @ (hb @ <span class="mi">1</span>) = (ha @ <span class="mi">1</span>) @ ab&#39;)
               (paths_ind (j2 f1 b)
                  (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j2 f1 b = y) =&gt;
                   p @ <span class="mi">1</span> = <span class="mi">1</span> @ p) <span class="mi">1</span> (j3 f1 c)
                  (j23 f1 b c)) (j2 f1 b) (j3 f1 c)
               (j23 f1 b c) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
      <span class="kr">end</span>)
     ((concat_p1 (j23 f1 b c) @ <span class="mi">1</span>) @
      (concat_1p (j23 f1 b c))^))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f1 a b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk116"><span class="kn">Instance</span> <span class="nf">is0gpd_trijoinrecdata</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>) : Is0Gpd (TriJoinRecData A B C P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Gpd (TriJoinRecData A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk117"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Gpd (TriJoinRecData A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk118"><span class="nb">apply</span> Build_Is0Gpd.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : TriJoinRecData A B C P,
(a $-&gt; b) -&gt; b $-&gt; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk119"><span class="nb">intros</span> f g h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g $-&gt; f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk11a">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 g a = j1 f a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk11b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk11b"><hr></label><div class="goal-conclusion">j2 g b = j2 f b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk11c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk11c"><hr></label><div class="goal-conclusion">j3 g c = j3 f c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk11d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk11d"><hr></label><div class="goal-conclusion">j12 g a b @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ j12 f a b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk11e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk11e"><hr></label><div class="goal-conclusion">j13 g a c @ <span class="nl">?Goal1</span> = <span class="nl">?Goal</span> @ j13 f a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk11f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk11f"><hr></label><div class="goal-conclusion">j23 g b c @ <span class="nl">?Goal1</span> = <span class="nl">?Goal0</span> @ j23 f b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk120" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk120"><hr></label><div class="goal-conclusion">prism (j123 g a b c) (j123 f a b c) <span class="nl">?Goal2</span> <span class="nl">?Goal3</span>
  <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk121">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 g a = j1 f a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h1 h a)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk122">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j2 g b = j2 f b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h2 h b)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk123">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j3 g c = j3 f c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (h3 h c)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk124">+ <span class="c">(* Some simple path algebra works as well. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 g a b @ (h2 h b)^ = (h1 h a)^ @ j12 f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk125">prism_ind_two g h a b _X_.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f a b @ <span class="mi">1</span>^ = <span class="mi">1</span>^ @ j12 f a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind_two f a b _X_.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk126">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 g a c @ (h3 h c)^ = (h1 h a)^ @ j13 f a c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk127">prism_ind_two g h a _X_ c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f a c @ <span class="mi">1</span>^ = <span class="mi">1</span>^ @ j13 f a c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind_two f a _X_ c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk128">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 g b c @ (h3 h c)^ = (h2 h b)^ @ j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk129">prism_ind_two g h _X_ b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 f b c @ <span class="mi">1</span>^ = <span class="mi">1</span>^ @ j23 f b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind_two f _X_ b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12a">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f $-&gt; g</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 g a b c) (j123 f a b c)
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f a = j1 g a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f b = j2 g b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f c = j3 g c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
            j12 f a b @ H0 b = H a @ j12 g a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
            j13 f a c @ H1 c = H a @ j13 g a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            j23 f b c @ H1 c = H0 b @ j23 g b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f a b c) (j123 g a b c)
              (H2 a b) (H3 a c) (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j1 f a) (j2 f b) (j12 f a b)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j1 f a = a&#39;) (<span class="nv">hb</span> : j2 f b = b&#39;)
          (<span class="nv">_</span> : j12 f a b @ hb = ha @ ab&#39;) =&gt;
        ab&#39; @ hb^ = ha^ @ j12 f a b)
       ((<span class="kr">fun</span> (<span class="nv">H13</span> : A -&gt; P) (<span class="nv">H14</span> : B -&gt; P)
           (<span class="nv">H15</span> : C -&gt; P)
           (<span class="nv">H16</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                  H13 a = H14 b)
           (<span class="nv">H17</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                  H13 a = H15 c)
           (<span class="nv">H18</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  H14 b = H15 c)
           (<span class="nv">H19</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  H16 a b @ H18 b c = H17 a c) =&gt;
         (<span class="kr">fun</span> <span class="nv">f</span> : P =&gt;
          paths_ind f
            (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : f = y) =&gt; p @ <span class="mi">1</span> = <span class="mi">1</span> @ p)
            <span class="mi">1</span>) (H13 a) (H14 b) (H16 a b)
         :
         j12
           {|
             j1 := H13;
             j2 := H14;
             j3 := H15;
             j12 := H16;
             j13 := H17;
             j23 := H18;
             j123 := H19
           |} a b @ <span class="mi">1</span>^ =
         <span class="mi">1</span>^ @
         j12
           {|
             j1 := H13;
             j2 := H14;
             j3 := H15;
             j12 := H16;
             j13 := H17;
             j23 := H18;
             j123 := H19
           |} a b) (j1 f) (j2 f) (j3 f) (j12 f)
          (j13 f) (j23 f) (j123 f)) (H6 a) (H7 b)
       (H9 a b)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j1 f a =
          j1
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} a)
     (<span class="nv">p0</span> : j2 f b =
           j2
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} b),
     j12 f a b @ p0 =
     p @
     j12
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a b -&gt;
     j12
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a b @ p0^ = p^ @ j12 f a b) (j1 g) (j2 g)
      (j3 g) (j12 g) (j13 g) (j23 g) (j123 g) (H a)
      (H0 b) (H2 a b)
    :
    j12 g a b @
    (h2
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} b)^ =
    (h1
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} a)^ @ j12 f a b) (h1 h) (h2 h) (h3 h)
     (h12 h) (h13 h) (h23 h) (h123 h))
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f a = j1 g a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f b = j2 g b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f c = j3 g c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
            j12 f a b @ H0 b = H a @ j12 g a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
            j13 f a c @ H1 c = H a @ j13 g a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            j23 f b c @ H1 c = H0 b @ j23 g b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f a b c) (j123 g a b c)
              (H2 a b) (H3 a c) (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j1 f a) (j3 f c) (j13 f a c)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j1 f a = a&#39;) (<span class="nv">hb</span> : j3 f c = b&#39;)
          (<span class="nv">_</span> : j13 f a c @ hb = ha @ ab&#39;) =&gt;
        ab&#39; @ hb^ = ha^ @ j13 f a c)
       ((<span class="kr">fun</span> (<span class="nv">H13</span> : A -&gt; P) (<span class="nv">H14</span> : B -&gt; P)
           (<span class="nv">H15</span> : C -&gt; P)
           (<span class="nv">H16</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                  H13 a = H14 b)
           (<span class="nv">H17</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                  H13 a = H15 c)
           (<span class="nv">H18</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  H14 b = H15 c)
           (<span class="nv">H19</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  H16 a b @ H18 b c = H17 a c) =&gt;
         (<span class="kr">fun</span> <span class="nv">f</span> : P =&gt;
          paths_ind f
            (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : f = y) =&gt; p @ <span class="mi">1</span> = <span class="mi">1</span> @ p)
            <span class="mi">1</span>) (H13 a) (H15 c) (H17 a c)
         :
         j13
           {|
             j1 := H13;
             j2 := H14;
             j3 := H15;
             j12 := H16;
             j13 := H17;
             j23 := H18;
             j123 := H19
           |} a c @ <span class="mi">1</span>^ =
         <span class="mi">1</span>^ @
         j13
           {|
             j1 := H13;
             j2 := H14;
             j3 := H15;
             j12 := H16;
             j13 := H17;
             j23 := H18;
             j123 := H19
           |} a c) (j1 f) (j2 f) (j3 f) (j12 f)
          (j13 f) (j23 f) (j123 f)) (H6 a) (H8 c)
       (H10 a c)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j1 f a =
          j1
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} a)
     (<span class="nv">p0</span> : j3 f c =
           j3
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} c),
     j13 f a c @ p0 =
     p @
     j13
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a c -&gt;
     j13
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} a c @ p0^ = p^ @ j13 f a c) (j1 g) (j2 g)
      (j3 g) (j12 g) (j13 g) (j23 g) (j123 g) (H a)
      (H1 c) (H3 a c)
    :
    j13 g a c @
    (h3
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} c)^ =
    (h1
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} a)^ @ j13 f a c) (h1 h) (h2 h) (h3 h)
     (h12 h) (h13 h) (h23 h) (h123 h))
  ((<span class="kr">fun</span> (<span class="nv">H</span> : <span class="kr">forall</span> <span class="nv">a</span> : A, j1 f a = j1 g a)
      (<span class="nv">H0</span> : <span class="kr">forall</span> <span class="nv">b</span> : B, j2 f b = j2 g b)
      (<span class="nv">H1</span> : <span class="kr">forall</span> <span class="nv">c</span> : C, j3 f c = j3 g c)
      (<span class="nv">H2</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
            j12 f a b @ H0 b = H a @ j12 g a b)
      (<span class="nv">H3</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
            j13 f a c @ H1 c = H a @ j13 g a c)
      (<span class="nv">H4</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            j23 f b c @ H1 c = H0 b @ j23 g b c)
      (<span class="nv">H5</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
            prism (j123 f a b c) (j123 g a b c)
              (H2 a b) (H3 a c) (H4 b c)) =&gt;
    (<span class="kr">fun</span> (<span class="nv">H6</span> : A -&gt; P) (<span class="nv">H7</span> : B -&gt; P) (<span class="nv">H8</span> : C -&gt; P)
       (<span class="nv">H9</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), H6 a = H7 b)
       (<span class="nv">H10</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), H6 a = H8 c)
       (<span class="nv">H11</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), H7 b = H8 c)
       (<span class="nv">H12</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
              H9 a b @ H11 b c = H10 a c) =&gt;
     square_ind (j2 f b) (j3 f c) (j23 f b c)
       (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
          (<span class="nv">ha</span> : j2 f b = a&#39;) (<span class="nv">hb</span> : j3 f c = b&#39;)
          (<span class="nv">_</span> : j23 f b c @ hb = ha @ ab&#39;) =&gt;
        ab&#39; @ hb^ = ha^ @ j23 f b c)
       ((<span class="kr">fun</span> (<span class="nv">H13</span> : A -&gt; P) (<span class="nv">H14</span> : B -&gt; P)
           (<span class="nv">H15</span> : C -&gt; P)
           (<span class="nv">H16</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B),
                  H13 a = H14 b)
           (<span class="nv">H17</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C),
                  H13 a = H15 c)
           (<span class="nv">H18</span> : <span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  H14 b = H15 c)
           (<span class="nv">H19</span> : <span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
                  H16 a b @ H18 b c = H17 a c) =&gt;
         (<span class="kr">fun</span> <span class="nv">f</span> : P =&gt;
          paths_ind f
            (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : f = y) =&gt; p @ <span class="mi">1</span> = <span class="mi">1</span> @ p)
            <span class="mi">1</span>) (H14 b) (H15 c) (H18 b c)
         :
         j23
           {|
             j1 := H13;
             j2 := H14;
             j3 := H15;
             j12 := H16;
             j13 := H17;
             j23 := H18;
             j123 := H19
           |} b c @ <span class="mi">1</span>^ =
         <span class="mi">1</span>^ @
         j23
           {|
             j1 := H13;
             j2 := H14;
             j3 := H15;
             j12 := H16;
             j13 := H17;
             j23 := H18;
             j123 := H19
           |} b c) (j1 f) (j2 f) (j3 f) (j12 f)
          (j13 f) (j23 f) (j123 f)) (H7 b) (H8 c)
       (H11 b c)
     :
     <span class="kr">forall</span>
     (<span class="nv">p</span> : j2 f b =
          j2
            {|
              j1 := H6;
              j2 := H7;
              j3 := H8;
              j12 := H9;
              j13 := H10;
              j23 := H11;
              j123 := H12
            |} b)
     (<span class="nv">p0</span> : j3 f c =
           j3
             {|
               j1 := H6;
               j2 := H7;
               j3 := H8;
               j12 := H9;
               j13 := H10;
               j23 := H11;
               j123 := H12
             |} c),
     j23 f b c @ p0 =
     p @
     j23
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} b c -&gt;
     j23
       {|
         j1 := H6;
         j2 := H7;
         j3 := H8;
         j12 := H9;
         j13 := H10;
         j23 := H11;
         j123 := H12
       |} b c @ p0^ = p^ @ j23 f b c) (j1 g) (j2 g)
      (j3 g) (j12 g) (j13 g) (j23 g) (j123 g) (H0 b)
      (H1 c) (H4 b c)
    :
    j23 g b c @
    (h3
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} c)^ =
    (h2
       {|
         h1 := H;
         h2 := H0;
         h3 := H1;
         h12 := H2;
         h13 := H3;
         h23 := H4;
         h123 := H5
       |} b)^ @ j23 f b c) (h1 h) (h2 h) (h3 h)
     (h12 h) (h13 h) (h23 h) (h123 h))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12b">prism_ind g h a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 f a b c) (j123 f a b c)
  (square_ind (j1 f a) (j2 f b) (j12 f a b)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f a = a&#39;) (<span class="nv">hb</span> : j2 f b = b&#39;)
        (<span class="nv">_</span> : j12 f a b @ hb = ha @ ab&#39;) =&gt;
      ab&#39; @ hb^ = ha^ @ j12 f a b)
     (paths_ind (j1 f a)
        (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f a = y) =&gt; p @ <span class="mi">1</span> = <span class="mi">1</span> @ p)
        <span class="mi">1</span> (j2 f b) (j12 f a b)) (j1 f a) (j2 f b)
     (j12 f a b) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
  (square_ind (j1 f a) (j3 f c) (j13 f a c)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j1 f a = a&#39;) (<span class="nv">hb</span> : j3 f c = b&#39;)
        (<span class="nv">_</span> : j13 f a c @ hb = ha @ ab&#39;) =&gt;
      ab&#39; @ hb^ = ha^ @ j13 f a c)
     (paths_ind (j1 f a)
        (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j1 f a = y) =&gt; p @ <span class="mi">1</span> = <span class="mi">1</span> @ p)
        <span class="mi">1</span> (j3 f c) (j13 f a c)) (j1 f a) (j3 f c)
     (j13 f a c) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))
  (square_ind (j2 f b) (j3 f c) (j23 f b c)
     (<span class="kr">fun</span> (<span class="nv">a&#39;</span> <span class="nv">b&#39;</span> : P) (<span class="nv">ab&#39;</span> : a&#39; = b&#39;)
        (<span class="nv">ha</span> : j2 f b = a&#39;) (<span class="nv">hb</span> : j3 f c = b&#39;)
        (<span class="nv">_</span> : j23 f b c @ hb = ha @ ab&#39;) =&gt;
      ab&#39; @ hb^ = ha^ @ j23 f b c)
     (paths_ind (j2 f b)
        (<span class="kr">fun</span> (<span class="nv">y</span> : P) (<span class="nv">p</span> : j2 f b = y) =&gt; p @ <span class="mi">1</span> = <span class="mi">1</span> @ p)
        <span class="mi">1</span> (j3 f c) (j23 f b c)) (j2 f b) (j3 f c)
     (j23 f b c) <span class="mi">1</span> <span class="mi">1</span> (equiv_p1_1q <span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f a b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_0gpd</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>) : ZeroGpd
  := Build_ZeroGpd (TriJoinRecData A B C P) _ _ _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** [trijoinrecdata_0gpd A B C] is a 1-functor from [Type] to [ZeroGpd]</span>

<span class="sd">  It&#39;s a 1-functor that lands in [ZeroGpd], and the morphisms of [ZeroGpd] are 0-functors, so it&#39;s easy to get confused about the levels. *)</span>

<span class="sd">(** First we need to show that the induced map is a morphism in [ZeroGpd], i.e. that it is a 0-functor. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12c"><span class="kn">Instance</span> <span class="nf">is0functor_trijoinrecdata_fun</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q)
  : Is0Functor (@trijoinrecdata_fun A B C P Q g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (trijoinrecdata_fun g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (trijoinrecdata_fun g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12e"><span class="nb">apply</span> Build_Is0Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : TriJoinRecData A B C P,
(a $-&gt; b) -&gt;
trijoinrecdata_fun g a $-&gt; trijoinrecdata_fun g b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk12f"><span class="nb">intros</span> f1 f2 h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_fun g f1 $-&gt; trijoinrecdata_fun g f2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk130">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g (j1 f1 a) = g (j1 f2 a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk131" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk131"><hr></label><div class="goal-conclusion">g (j2 f1 b) = g (j2 f2 b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk132" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk132"><hr></label><div class="goal-conclusion">g (j3 f1 c) = g (j3 f2 c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk133" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk133"><hr></label><div class="goal-conclusion">ap g (j12 f1 a b) @ <span class="nl">?Goal0</span> = <span class="nl">?Goal</span> @ ap g (j12 f2 a b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk134" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk134"><hr></label><div class="goal-conclusion">ap g (j13 f1 a c) @ <span class="nl">?Goal1</span> = <span class="nl">?Goal</span> @ ap g (j13 f2 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk135" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk135"><hr></label><div class="goal-conclusion">ap g (j23 f1 b c) @ <span class="nl">?Goal1</span> =
<span class="nl">?Goal0</span> @ ap g (j23 f2 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk136" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk136"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c)) <span class="nl">?Goal2</span> <span class="nl">?Goal3</span> <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk137"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">apply</span> (ap g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 f1 a = j1 f2 a</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk138" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk138"><hr></label><div class="goal-conclusion">j2 f1 b = j2 f2 b</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk139" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk139"><hr></label><div class="goal-conclusion">j3 f1 c = j3 f2 c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk13a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk13a"><hr></label><div class="goal-conclusion">ap g (j12 f1 a b) @ ap g <span class="nl">?Goal4</span> =
ap g <span class="nl">?Goal3</span> @ ap g (j12 f2 a b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk13b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk13b"><hr></label><div class="goal-conclusion">ap g (j13 f1 a c) @ ap g <span class="nl">?Goal5</span> =
ap g <span class="nl">?Goal3</span> @ ap g (j13 f2 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk13c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk13c"><hr></label><div class="goal-conclusion">ap g (j23 f1 b c) @ ap g <span class="nl">?Goal5</span> =
ap g <span class="nl">?Goal4</span> @ ap g (j23 f2 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk13d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk13d"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c)) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk13e"><span class="mi">1</span>: <span class="nb">apply</span> (h1 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j2 f1 b = j2 f2 b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk13f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk13f"><hr></label><div class="goal-conclusion">j3 f1 c = j3 f2 c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk140" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk140"><hr></label><div class="goal-conclusion">ap g (j12 f1 a b) @ ap g <span class="nl">?Goal3</span> =
ap g (h1 h a) @ ap g (j12 f2 a b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk141" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk141"><hr></label><div class="goal-conclusion">ap g (j13 f1 a c) @ ap g <span class="nl">?Goal4</span> =
ap g (h1 h a) @ ap g (j13 f2 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk142" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk142"><hr></label><div class="goal-conclusion">ap g (j23 f1 b c) @ ap g <span class="nl">?Goal4</span> =
ap g <span class="nl">?Goal3</span> @ ap g (j23 f2 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk143" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk143"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c)) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk144"><span class="mi">1</span>: <span class="nb">apply</span> (h2 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j3 f1 c = j3 f2 c</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk145" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk145"><hr></label><div class="goal-conclusion">ap g (j12 f1 a b) @ ap g (h2 h b) =
ap g (h1 h a) @ ap g (j12 f2 a b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk146" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk146"><hr></label><div class="goal-conclusion">ap g (j13 f1 a c) @ ap g <span class="nl">?Goal3</span> =
ap g (h1 h a) @ ap g (j13 f2 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk147" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk147"><hr></label><div class="goal-conclusion">ap g (j23 f1 b c) @ ap g <span class="nl">?Goal3</span> =
ap g (h2 h b) @ ap g (j23 f2 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk148" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk148"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c)) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk149"><span class="mi">1</span>: <span class="nb">apply</span> (h3 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g (j12 f1 a b) @ ap g (h2 h b) =
ap g (h1 h a) @ ap g (j12 f2 a b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk14a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk14a"><hr></label><div class="goal-conclusion">ap g (j13 f1 a c) @ ap g (h3 h c) =
ap g (h1 h a) @ ap g (j13 f2 a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk14b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk14b"><hr></label><div class="goal-conclusion">ap g (j23 f1 b c) @ ap g (h3 h c) =
ap g (h2 h b) @ ap g (j23 f2 b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk14c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk14c"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c)) <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk14d"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">refine</span> ((ap_pp g _ _)^ @ _ @ ap_pp g _ _); <span class="nb">apply</span> (ap (ap g)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 f1 a b @ h2 h b = h1 h a @ j12 f2 a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk14e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk14e"><hr></label><div class="goal-conclusion">j13 f1 a c @ h3 h c = h1 h a @ j13 f2 a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk14f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk14f"><hr></label><div class="goal-conclusion">j23 f1 b c @ h3 h c = h2 h b @ j23 f2 b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk150" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk150"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c))
  (((ap_pp g (j12 f1 a b) (h2 h b))^ @
    ap (ap g) <span class="nl">?Goal0</span>) @ ap_pp g (h1 h a) (j12 f2 a b))
  (((ap_pp g (j13 f1 a c) (h3 h c))^ @
    ap (ap g) <span class="nl">?Goal1</span>) @ ap_pp g (h1 h a) (j13 f2 a c))
  (((ap_pp g (j23 f1 b c) (h3 h c))^ @
    ap (ap g) <span class="nl">?Goal2</span>) @ ap_pp g (h2 h b) (j23 f2 b c))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk151"><span class="mi">1</span>: <span class="nb">apply</span> (h12 h). <span class="c">(* Or: prism_ind_12 f2 h a b. triangle_ind_12 f1 a b. reflexivity. *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 f1 a c @ h3 h c = h1 h a @ j13 f2 a c</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk152" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk152"><hr></label><div class="goal-conclusion">j23 f1 b c @ h3 h c = h2 h b @ j23 f2 b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk153" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk153"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c))
  (((ap_pp g (j12 f1 a b) (h2 h b))^ @
    ap (ap g) (h12 h a b)) @
   ap_pp g (h1 h a) (j12 f2 a b))
  (((ap_pp g (j13 f1 a c) (h3 h c))^ @
    ap (ap g) <span class="nl">?Goal0</span>) @ ap_pp g (h1 h a) (j13 f2 a c))
  (((ap_pp g (j23 f1 b c) (h3 h c))^ @
    ap (ap g) <span class="nl">?Goal1</span>) @ ap_pp g (h2 h b) (j23 f2 b c))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk154"><span class="mi">1</span>: <span class="nb">apply</span> (h13 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 f1 b c @ h3 h c = h2 h b @ j23 f2 b c</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk155" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk155"><hr></label><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c))
  (((ap_pp g (j12 f1 a b) (h2 h b))^ @
    ap (ap g) (h12 h a b)) @
   ap_pp g (h1 h a) (j12 f2 a b))
  (((ap_pp g (j13 f1 a c) (h3 h c))^ @
    ap (ap g) (h13 h a c)) @
   ap_pp g (h1 h a) (j13 f2 a c))
  (((ap_pp g (j23 f1 b c) (h3 h c))^ @
    ap (ap g) <span class="nl">?Goal0</span>) @ ap_pp g (h2 h b) (j23 f2 b c))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk156"><span class="mi">1</span>: <span class="nb">apply</span> (h23 h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>f1 $-&gt; f2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f2 a b c))
  (((ap_pp g (j12 f1 a b) (h2 h b))^ @
    ap (ap g) (h12 h a b)) @
   ap_pp g (h1 h a) (j12 f2 a b))
  (((ap_pp g (j13 f1 a c) (h3 h c))^ @
    ap (ap g) (h13 h a c)) @
   ap_pp g (h1 h a) (j13 f2 a c))
  (((ap_pp g (j23 f1 b c) (h3 h c))^ @
    ap (ap g) (h23 h b c)) @
   ap_pp g (h2 h b) (j23 f2 b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk157">prism_ind f2 h a b c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (ap_triangle g (j123 f1 a b c))
  (ap_triangle g (j123 f1 a b c))
  (((ap_pp g (j12 f1 a b) <span class="mi">1</span>)^ @
    ap (ap g) (equiv_p1_1q <span class="mi">1</span>)) @
   ap_pp g <span class="mi">1</span> (j12 f1 a b))
  (((ap_pp g (j13 f1 a c) <span class="mi">1</span>)^ @
    ap (ap g) (equiv_p1_1q <span class="mi">1</span>)) @
   ap_pp g <span class="mi">1</span> (j13 f1 a c))
  (((ap_pp g (j23 f1 b c) <span class="mi">1</span>)^ @
    ap (ap g) (equiv_p1_1q <span class="mi">1</span>)) @
   ap_pp g <span class="mi">1</span> (j23 f1 b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk158">triangle_ind f1 a b c; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [trijoinrecdata_0gpd A B C] is a 0-functor from [Type] to [ZeroGpd] (one level up). *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk159"><span class="kn">Instance</span> <span class="nf">is0functor_trijoinrecdata_0gpd</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) : Is0Functor (trijoinrecdata_0gpd A B C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (trijoinrecdata_0gpd A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk15a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (trijoinrecdata_0gpd A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk15b"><span class="nb">apply</span> Build_Is0Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span>,
(a $-&gt; b) -&gt;
trijoinrecdata_0gpd A B C a $-&gt;
trijoinrecdata_0gpd A B C b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk15c"><span class="nb">intros</span> P Q g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_0gpd A B C P $-&gt;
trijoinrecdata_0gpd A B C Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk15d">snapply Build_Fun01.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (trijoinrecdata_0gpd A B C P) -&gt;
zerogpd_graph (trijoinrecdata_0gpd A B C Q)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk15e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk15e"><hr></label><div class="goal-conclusion">Is0Functor <span class="nl">?F</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk15f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">zerogpd_graph (trijoinrecdata_0gpd A B C P) -&gt;
zerogpd_graph (trijoinrecdata_0gpd A B C Q)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (trijoinrecdata_fun g).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk160">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor (trijoinrecdata_fun g)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> is0functor_trijoinrecdata_fun.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [trijoinrecdata_0gpd A B C] is a 1-functor from [Type] to [ZeroGpd]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk161"><span class="kn">Instance</span> <span class="nf">is1functor_trijoinrecdata_0gpd</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) : Is1Functor (trijoinrecdata_0gpd A B C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Functor (trijoinrecdata_0gpd A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk162"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Functor (trijoinrecdata_0gpd A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk163"><span class="nb">apply</span> Build_Is1Functor.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : a $-&gt; b),
f $== g -&gt;
fmap (trijoinrecdata_0gpd A B C) f $==
fmap (trijoinrecdata_0gpd A B C) g</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk164" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk164"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
fmap (trijoinrecdata_0gpd A B C) (Id a) $==
Id (trijoinrecdata_0gpd A B C a)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk165" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk165"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; b) (<span class="nv">g</span> : b $-&gt; c),
fmap (trijoinrecdata_0gpd A B C) (g $o f) $==
fmap (trijoinrecdata_0gpd A B C) g $o
fmap (trijoinrecdata_0gpd A B C) f</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* If [g1 g2 : P -&gt; Q] are homotopic, then the induced maps are homotopic: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk166">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : <span class="kt">Type</span>) (<span class="nv">f</span> <span class="nv">g</span> : a $-&gt; b),
f $== g -&gt;
fmap (trijoinrecdata_0gpd A B C) f $==
fmap (trijoinrecdata_0gpd A B C) g</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk167"><span class="nb">intros</span> P Q g1 g2 h f; <span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath (trijoinrecdata_fun g1 f)
  (trijoinrecdata_fun g2 f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk168">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">g1 (j1 f a) = g2 (j1 f a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk169" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk169"><hr></label><div class="goal-conclusion">g1 (j2 f b) = g2 (j2 f b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk16a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk16a"><hr></label><div class="goal-conclusion">g1 (j3 f c) = g2 (j3 f c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk16b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk16b"><hr></label><div class="goal-conclusion">ap g1 (j12 f a b) @ <span class="nl">?Goal2</span> =
<span class="nl">?Goal1</span> @ ap g2 (j12 f a b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk16c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk16c"><hr></label><div class="goal-conclusion">ap g1 (j13 f a c) @ <span class="nl">?Goal3</span> =
<span class="nl">?Goal1</span> @ ap g2 (j13 f a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk16d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk16d"><hr></label><div class="goal-conclusion">ap g1 (j23 f b c) @ <span class="nl">?Goal3</span> =
<span class="nl">?Goal2</span> @ ap g2 (j23 f b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk16e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk16e"><hr></label><div class="goal-conclusion">prism (ap_triangle g1 (j123 f a b c))
  (ap_triangle g2 (j123 f a b c)) <span class="nl">?Goal4</span> <span class="nl">?Goal5</span> <span class="nl">?Goal6</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk16f"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">apply</span> h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap g1 (j12 f a b) @ h (j2 f b) =
h (j1 f a) @ ap g2 (j12 f a b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk170" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk170"><hr></label><div class="goal-conclusion">ap g1 (j13 f a c) @ h (j3 f c) =
h (j1 f a) @ ap g2 (j13 f a c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk171" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk171"><hr></label><div class="goal-conclusion">ap g1 (j23 f b c) @ h (j3 f c) =
h (j2 f b) @ ap g2 (j23 f b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk172" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk172"><hr></label><div class="goal-conclusion">prism (ap_triangle g1 (j123 f a b c))
  (ap_triangle g2 (j123 f a b c)) <span class="nl">?Goal1</span> <span class="nl">?Goal2</span> <span class="nl">?Goal3</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk173"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">apply</span> concat_Ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (ap_triangle g1 (j123 f a b c))
  (ap_triangle g2 (j123 f a b c))
  (concat_Ap h (j12 f a b)) (concat_Ap h (j13 f a c))
  (concat_Ap h (j23 f b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk174">triangle_ind f a b c; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1, g2</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>g1 == g2</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism <span class="mi">1</span> <span class="mi">1</span> (concat_1p_p1 (h f)) (concat_1p_p1 (h f))
  (concat_1p_p1 (h f))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">induction</span> (h f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The identity map [P -&gt; P] is sent to a map homotopic to the identity. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk175">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
fmap (trijoinrecdata_0gpd A B C) (Id a) $==
Id (trijoinrecdata_0gpd A B C a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk176"><span class="nb">intros</span> P f; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath (trijoinrecdata_fun idmap f) f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk177">bundle_trijoinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap idmap (j12 f a b) = j12 f a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk178" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk178"><hr></label><div class="goal-conclusion">ap idmap (j13 f a c) = j13 f a c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk179" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk179"><hr></label><div class="goal-conclusion">ap idmap (j23 f b c) = j23 f b c</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk17a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk17a"><hr></label><div class="goal-conclusion">prism&#39; (ap_triangle idmap (j123 f a b c))
  (j123 f a b c) <span class="nl">?Goal0</span> <span class="nl">?Goal1</span> <span class="nl">?Goal2</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk17b"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">apply</span> ap_idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39; (ap_triangle idmap (j123 f a b c))
  (j123 f a b c) (ap_idmap (j12 f a b))
  (ap_idmap (j13 f a c)) (ap_idmap (j23 f b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f a b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* It respects composition. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk17c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : a $-&gt; b) (<span class="nv">g</span> : b $-&gt; c),
fmap (trijoinrecdata_0gpd A B C) (g $o f) $==
fmap (trijoinrecdata_0gpd A B C) g $o
fmap (trijoinrecdata_0gpd A B C) f</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk17d"><span class="nb">intros</span> P Q R g1 g2 f; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath
  (trijoinrecdata_fun (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) f)
  (trijoinrecdata_fun g2 (trijoinrecdata_fun g1 f))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk17e">bundle_trijoinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) (j12 f a b) =
ap g2 (ap g1 (j12 f a b))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk17f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk17f"><hr></label><div class="goal-conclusion">ap (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) (j13 f a c) =
ap g2 (ap g1 (j13 f a c))</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk180" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk180"><hr></label><div class="goal-conclusion">ap (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) (j23 f b c) =
ap g2 (ap g1 (j23 f b c))</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk181" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk181"><hr></label><div class="goal-conclusion">prism&#39;
  (ap_triangle (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) (j123 f a b c))
  (ap_triangle g2 (ap_triangle g1 (j123 f a b c)))
  <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk182"><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>: <span class="nb">apply</span> ap_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q, R</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g1</var><span class="hyp-type"><b>: </b><span>P $-&gt; Q</span></span></span><br><span><var>g2</var><span class="hyp-type"><b>: </b><span>Q $-&gt; R</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>zerogpd_graph (trijoinrecdata_0gpd A B C P)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (ap_triangle (<span class="kr">fun</span> <span class="nv">x</span> : P =&gt; g2 (g1 x)) (j123 f a b c))
  (ap_triangle g2 (ap_triangle g1 (j123 f a b c)))
  (ap_compose g1 g2 (j12 f a b))
  (ap_compose g1 g2 (j13 f a c))
  (ap_compose g1 g2 (j23 f b c))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> triangle_ind f a b c.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_0gpd_fun</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) : Fun11 <span class="kt">Type</span> ZeroGpd
  := Build_Fun11 _ _ (trijoinrecdata_0gpd A B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** By the Yoneda lemma, it follows from [TriJoinRecData] being a 1-functor that given [TriJoinRecData] in [J], we get a map [(J -&gt; P) $-&gt; (TriJoinRecData A B C P)] of 0-groupoids which is natural in [P]. Below we will specialize to the case where [J] is [TriJoin A B C] with the canonical [TriJoinRecData]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk183"><span class="kn">Definition</span> <span class="nf">trijoin_nattrans_recdata</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">J</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoinRecData A B C J)
  : NatTrans (opyon_0gpd J) (trijoinrecdata_0gpd_fun A B C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatTrans (opyon_0gpd J)
  (trijoinrecdata_0gpd_fun A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk184"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatTrans (opyon_0gpd J)
  (trijoinrecdata_0gpd_fun A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk185">snapply Build_NatTrans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">opyon_0gpd J $=&gt; trijoinrecdata_0gpd_fun A B C</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk186" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C J</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk186"><hr></label><div class="goal-conclusion">Is1Natural (opyon_0gpd J)
  (trijoinrecdata_0gpd_fun A B C) <span class="nl">?alpha</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk187">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">opyon_0gpd J $=&gt; trijoinrecdata_0gpd_fun A B C</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">rapply opyoneda_0gpd; <span class="bp">exact</span> f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk188">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, J</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C J</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is1Natural (opyon_0gpd J)
  (trijoinrecdata_0gpd_fun A B C)
  (opyoneda_0gpd J (trijoinrecdata_0gpd_fun A B C) f)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">  
</span></span><span class="alectryon-wsp">
<span class="sd">(** Thus we get a map [(TriJoin A B C -&gt; P) $-&gt; (TriJoinRecData A B C P)] of 0-groupoids, natural in [P]. The underlying map is [trijoin_rec_inv A B C P]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_rec_inv_nattrans</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : NatTrans (opyon_0gpd (TriJoin A B C)) (trijoinrecdata_0gpd_fun A B C)
  := trijoin_nattrans_recdata (trijoinrecdata_trijoin A B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This natural transformation is in fact a natural equivalence of 0-groupoids. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk189"><span class="kn">Definition</span> <span class="nf">trijoin_rec_inv_natequiv</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  : NatEquiv (opyon_0gpd (TriJoin A B C)) (trijoinrecdata_0gpd_fun A B C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (opyon_0gpd (TriJoin A B C))
  (trijoinrecdata_0gpd_fun A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk18a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatEquiv (opyon_0gpd (TriJoin A B C))
  (trijoinrecdata_0gpd_fun A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk18b">snapply Build_NatEquiv&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">NatTrans (opyon_0gpd (TriJoin A B C))
  (trijoinrecdata_0gpd_fun A B C)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk18c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk18c"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>, CatIsEquiv (<span class="nl">?alpha</span> a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk18d"><span class="mi">1</span>: <span class="nb">apply</span> trijoin_rec_inv_nattrans.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : <span class="kt">Type</span>,
CatIsEquiv (trijoin_rec_inv_nattrans A B C a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk18e"><span class="nb">intro</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">CatIsEquiv (trijoin_rec_inv_nattrans A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk18f"><span class="nb">apply</span> isequiv_0gpd_issurjinj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsSurjInj (trijoin_rec_inv_nattrans A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk190"><span class="nb">apply</span> Build_IsSurjInj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">SplEssSurj (trijoin_rec_inv_nattrans A B C P)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk191" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk191"><hr></label><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">x</span> <span class="nv">y</span> : zerogpd_graph (opyon_0gpd (TriJoin A B C) P),
trijoin_rec_inv_nattrans A B C P x $==
trijoin_rec_inv_nattrans A B C P y -&gt; x $== y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk192">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">SplEssSurj (trijoin_rec_inv_nattrans A B C P)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk193"><span class="nb">intros</span> f; <span class="nb">cbn</span> <span class="kr">in</span> f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{a : zerogpd_graph (opyon_0gpd (TriJoin A B C) P) &amp;
trijoin_rec_inv_nattrans A B C P a $== f}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk194"><span class="kr">exists</span> (<span class="nv">trijoin_rec</span> <span class="nv">f</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec_inv_nattrans A B C P (trijoin_rec f) $== f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trijoin_rec_beta.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk195">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span>
<span class="nv">x</span> <span class="nv">y</span> : zerogpd_graph (opyon_0gpd (TriJoin A B C) P),
trijoin_rec_inv_nattrans A B C P x $==
trijoin_rec_inv_nattrans A B C P y -&gt; x $== y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (@isinj_trijoin_rec_inv A B C P).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It will be handy to name the inverse natural equivalence. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoin_rec_natequiv</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>)
  := natequiv_inverse (trijoin_rec_inv_natequiv A B C).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** [trijoin_rec_natequiv A B C P] is an equivalence of 0-groupoids whose underlying function is definitionally [trijoin_rec]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Definition</span> <span class="nf">trijoin_rec_natequiv_check</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>)
  : equiv_fun_0gpd (trijoin_rec_natequiv A B C P) = @trijoin_rec A B C P
  := idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It follows that [trijoin_rec A B C P] is a 0-functor. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk196"><span class="kn">Instance</span> <span class="nf">is0functor_trijoin_rec</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>) : Is0Functor (@trijoin_rec A B C P).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor trijoin_rec</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk197"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor trijoin_rec</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk198"><span class="nb">change</span> (Is0Functor (equiv_fun_0gpd (trijoin_rec_natequiv A B C P))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Is0Functor
  (equiv_fun_0gpd (trijoin_rec_natequiv A B C P))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** And that [trijoin_rec A B C] is natural.   The [$==] in the statement is just [==], but we use WildCat notation so that we can invert and compose these with WildCat notation. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk199"><span class="kn">Definition</span> <span class="nf">trijoin_rec_nat</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">g</span> : P -&gt; Q)
  (<span class="nv">f</span> : TriJoinRecData A B C P)
  : trijoin_rec (trijoinrecdata_fun g f) $== g o trijoin_rec f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec (trijoinrecdata_fun g f) $==
g o trijoin_rec f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P, Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>P -&gt; Q</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec (trijoinrecdata_fun g f) $==
g o trijoin_rec f</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (isnat (trijoin_rec_natequiv A B C) g f).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** It is also useful to record this. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">issect_trijoin_rec_inv</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : TriJoin A B C -&gt; P)
  : trijoin_rec (trijoin_rec_inv f) $== f
  := cate_issect (trijoin_rec_inv_natequiv A B C P) f.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** This comes up a lot as well, and if you inline the proof, you get an ugly goal. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19b"><span class="kn">Definition</span> <span class="nf">moveR_trijoin_rec</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">P</span> : <span class="kt">Type</span>} {<span class="nv">f</span> : TriJoinRecData A B C P} {<span class="nv">g</span> : TriJoin A B C -&gt; P}
  (<span class="nv">p</span> : f $== trijoin_rec_inv g)
  : trijoin_rec f == g.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f $== trijoin_rec_inv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f == g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>TriJoin A B C -&gt; P</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f $== trijoin_rec_inv g</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec f == g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (moveR_equiv_V_0gpd (trijoin_rec_inv_natequiv A B C P) _ _ p).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Functoriality of the triple join *)</span>

<span class="sd">(** ** Precomposition of [TriJoinRecData] *)</span>

<span class="sd">(** First observe that we can precompose [k : TriJoinRecData] with a triple of maps. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_tricomp</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span> <span class="nv">P</span>} (<span class="nv">k</span> : TriJoinRecData A B C P)
  (<span class="nv">f</span> : A&#39; -&gt; A) (<span class="nv">g</span> : B&#39; -&gt; B) (<span class="nv">h</span> : C&#39; -&gt; C)
  : TriJoinRecData A&#39; B&#39; C&#39; P
  := {| j1 := j1 k o f; j2 := j2 k o g; j3 := j3 k o h;
       j12 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; j12 k (f a) (g b);
       j13 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">c</span> =&gt; j13 k (f a) (h c);
       j23 := <span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; j23 k (g b) (h c);
       j123 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; j123 k (f a) (g b) (h c); |}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Precomposition with a triple respects paths. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19d"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_tricomp_0fun</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span> <span class="nv">P</span>}
  {<span class="nv">k</span> <span class="nv">l</span> : TriJoinRecData A B C P} (<span class="nv">p</span> : k $== l)
  (<span class="nv">f</span> : A&#39; -&gt; A) (<span class="nv">g</span> : B&#39; -&gt; B) (<span class="nv">h</span> : C&#39; -&gt; C)
  : trijoinrecdata_tricomp k f g h $== trijoinrecdata_tricomp l f g h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k, l</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k $== l</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp k f g h $==
trijoinrecdata_tricomp l f g h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k, l</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>k $== l</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp k f g h $==
trijoinrecdata_tricomp l f g h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* This line is not needed, but clarifies the proof. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk19f"><span class="nb">unfold</span> trijoinrecdata_tricomp; <span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k, l</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>h4</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, j1 k a = j1 l a</span></span></span><br><span><var>h5</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">b</span> : B, j2 k b = j2 l b</span></span></span><br><span><var>h6</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">c</span> : C, j3 k c = j3 l c</span></span></span><br><span><var>h14</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B), j12 k a b @ h5 b = h4 a @ j12 l a b</span></span></span><br><span><var>h15</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C), j13 k a c @ h6 c = h4 a @ j13 l a c</span></span></span><br><span><var>h24</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C), j23 k b c @ h6 c = h5 b @ j23 l b c</span></span></span><br><span><var>h124</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C),
prism (j123 k a b c) (j123 l a b c) 
  (h14 a b) (h15 a c) (h24 b c)</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{|
  j1 := <span class="kr">fun</span> <span class="nv">x</span> : A&#39; =&gt; j1 k (f x);
  j2 := <span class="kr">fun</span> <span class="nv">x</span> : B&#39; =&gt; j2 k (g x);
  j3 := <span class="kr">fun</span> <span class="nv">x</span> : C&#39; =&gt; j3 k (h x);
  j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A&#39;) (<span class="nv">b</span> : B&#39;) =&gt; j12 k (f a) (g b);
  j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A&#39;) (<span class="nv">c</span> : C&#39;) =&gt; j13 k (f a) (h c);
  j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B&#39;) (<span class="nv">c</span> : C&#39;) =&gt; j23 k (g b) (h c);
  j123 :=
    <span class="kr">fun</span> (<span class="nv">a</span> : A&#39;) (<span class="nv">b</span> : B&#39;) (<span class="nv">c</span> : C&#39;) =&gt;
    j123 k (f a) (g b) (h c)
|} $==
{|
  j1 := <span class="kr">fun</span> <span class="nv">x</span> : A&#39; =&gt; j1 l (f x);
  j2 := <span class="kr">fun</span> <span class="nv">x</span> : B&#39; =&gt; j2 l (g x);
  j3 := <span class="kr">fun</span> <span class="nv">x</span> : C&#39; =&gt; j3 l (h x);
  j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A&#39;) (<span class="nv">b</span> : B&#39;) =&gt; j12 l (f a) (g b);
  j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A&#39;) (<span class="nv">c</span> : C&#39;) =&gt; j13 l (f a) (h c);
  j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B&#39;) (<span class="nv">c</span> : C&#39;) =&gt; j23 l (g b) (h c);
  j123 :=
    <span class="kr">fun</span> (<span class="nv">a</span> : A&#39;) (<span class="nv">b</span> : B&#39;) (<span class="nv">c</span> : C&#39;) =&gt;
    j123 l (f a) (g b) (h c)
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>; apply_hyp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* E.g., the first goal is [j1 k (f a) = j1 l (f a)], and this is solved by [h1 p (f a)]. We just precompose all fields of [p] with [f], [g] and [h]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Homotopies between the triple are also respected. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1a0"><span class="kn">Definition</span> <span class="nf">trijoinrecdata_tricomp2</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span> <span class="nv">P</span>} (<span class="nv">k</span> : TriJoinRecData A B C P)
  {<span class="nv">f</span> <span class="nv">f&#39;</span> : A&#39; -&gt; A} {<span class="nv">g</span> <span class="nv">g&#39;</span> : B&#39; -&gt; B} {<span class="nv">h</span> <span class="nv">h&#39;</span> : C&#39; -&gt; C}
  (<span class="nv">p</span> : f == f&#39;) (<span class="nv">q</span> : g == g&#39;) (<span class="nv">r</span> : h == h&#39;)
  : trijoinrecdata_tricomp k f g h $== trijoinrecdata_tricomp k f&#39; g&#39; h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp k f g h $==
trijoinrecdata_tricomp k f&#39; g&#39; h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1a1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp k f g h $==
trijoinrecdata_tricomp k f&#39; g&#39; h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1a2">snapply Build_TriJoinRecPath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 k (f a) = j1 k (f&#39; a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1a3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1a3"><hr></label><div class="goal-conclusion">j2 k (g b) = j2 k (g&#39; b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1a4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1a4"><hr></label><div class="goal-conclusion">j3 k (h c) = j3 k (h&#39; c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1a5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1a5"><hr></label><div class="goal-conclusion">j12 k (f a) (g b) @ <span class="nl">?Goal0</span> =
<span class="nl">?Goal</span> @ j12 k (f&#39; a) (g&#39; b)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1a6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1a6"><hr></label><div class="goal-conclusion">j13 k (f a) (h c) @ <span class="nl">?Goal1</span> =
<span class="nl">?Goal</span> @ j13 k (f&#39; a) (h&#39; c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1a7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1a7"><hr></label><div class="goal-conclusion">j23 k (g b) (h c) @ <span class="nl">?Goal1</span> =
<span class="nl">?Goal0</span> @ j23 k (g&#39; b) (h&#39; c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1a8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1a8"><hr></label><div class="goal-conclusion">prism (j123 k (f a) (g b) (h c))
  (j123 k (f&#39; a) (g&#39; b) (h&#39; c)) <span class="nl">?Goal2</span> <span class="nl">?Goal3</span> <span class="nl">?Goal4</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1a9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j1 k (f a) = j1 k (f&#39; a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap, p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1aa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j2 k (g b) = j2 k (g&#39; b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap, q.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ab">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j3 k (h c) = j3 k (h&#39; c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> ap, r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ac">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j12 k (f a) (g b) @ ap (j2 k) (q b) =
ap (j1 k) (p a) @ j12 k (f&#39; a) (g&#39; b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> (p a), (q b); <span class="bp">by</span> <span class="nb">apply</span> equiv_p1_1q.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ad">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j13 k (f a) (h c) @ ap (j3 k) (r c) =
ap (j1 k) (p a) @ j13 k (f&#39; a) (h&#39; c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> (p a), (r c); <span class="bp">by</span> <span class="nb">apply</span> equiv_p1_1q.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ae">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">j23 k (g b) (h c) @ ap (j3 k) (r c) =
ap (j2 k) (q b) @ j23 k (g&#39; b) (h&#39; c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> (q b), (r c); <span class="bp">by</span> <span class="nb">apply</span> equiv_p1_1q.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1af" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1af">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A B C P</span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A&#39;</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B&#39;</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism (j123 k (f a) (g b) (h c))
  (j123 k (f&#39; a) (g&#39; b) (h&#39; c))
  (<span class="kr">let</span> <span class="nv">p0</span> := p a <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">a0</span> := f&#39; a <span class="kr">in</span>
   paths_rect A (f a)
     (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">p1</span> : f a = a1) =&gt;
      j12 k (f a) (g b) @ ap (j2 k) (q b) =
      ap (j1 k) p1 @ j12 k a1 (g&#39; b))
     (<span class="kr">let</span> <span class="nv">p1</span> := q b <span class="kr">in</span>
      <span class="kr">let</span> <span class="nv">b0</span> := g&#39; b <span class="kr">in</span>
      <span class="kr">match</span>
        p1 <span class="kr">as</span> p <span class="kr">in</span> (_ = b1)
        <span class="kr">return</span>
          (j12 k (f a) (g b) @ ap (j2 k) p =
           ap (j1 k) <span class="mi">1</span> @ j12 k (f a) b1)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span> X <span class="mi">1</span>
      <span class="kr">end</span>) a0 p0)
  (<span class="kr">let</span> <span class="nv">p0</span> := p a <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">a0</span> := f&#39; a <span class="kr">in</span>
   paths_rect A (f a)
     (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">p1</span> : f a = a1) =&gt;
      j13 k (f a) (h c) @ ap (j3 k) (r c) =
      ap (j1 k) p1 @ j13 k a1 (h&#39; c))
     (<span class="kr">let</span> <span class="nv">p1</span> := r c <span class="kr">in</span>
      <span class="kr">let</span> <span class="nv">c0</span> := h&#39; c <span class="kr">in</span>
      <span class="kr">match</span>
        p1 <span class="kr">as</span> p <span class="kr">in</span> (_ = c1)
        <span class="kr">return</span>
          (j13 k (f a) (h c) @ ap (j3 k) p =
           ap (j1 k) <span class="mi">1</span> @ j13 k (f a) c1)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span> X <span class="mi">1</span>
      <span class="kr">end</span>) a0 p0)
  (<span class="kr">let</span> <span class="nv">p0</span> := q b <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">b0</span> := g&#39; b <span class="kr">in</span>
   paths_rect B (g b)
     (<span class="kr">fun</span> (<span class="nv">b1</span> : B) (<span class="nv">p1</span> : g b = b1) =&gt;
      j23 k (g b) (h c) @ ap (j3 k) (r c) =
      ap (j2 k) p1 @ j23 k b1 (h&#39; c))
     (<span class="kr">let</span> <span class="nv">p1</span> := r c <span class="kr">in</span>
      <span class="kr">let</span> <span class="nv">c0</span> := h&#39; c <span class="kr">in</span>
      <span class="kr">match</span>
        p1 <span class="kr">as</span> p <span class="kr">in</span> (_ = c1)
        <span class="kr">return</span>
          (j23 k (g b) (h c) @ ap (j3 k) p =
           ap (j2 k) <span class="mi">1</span> @ j23 k (g b) c1)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; <span class="kr">let</span> <span class="nv">X</span> := equiv_fun equiv_p1_1q <span class="kr">in</span> X <span class="mi">1</span>
      <span class="kr">end</span>) b0 p0)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">induction</span> (p a), (q b), (r c); <span class="nb">apply</span> prism_id.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Functoriality of [TriJoin] via [functor_trijoin] *)</span>

<span class="sd">(** To define [functor_trijoin], we simply precompose the canonical [TriJoinRecData] with [f], [g] and [h]. For example, this has [j1 := join1 o f] and [j12 := fun a b =&gt; join12 (f a) (g b)]. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">functor_trijoin</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : TriJoin A B C -&gt; TriJoin A&#39; B&#39; C&#39;
  := trijoin_rec (trijoinrecdata_tricomp (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f g h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We use [functor_trijoin] to express a partial functoriality of [trijoin_rec] in [A], [B] and [C]. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b0"><span class="kn">Definition</span> <span class="nf">trijoin_rec_functor_trijoin</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span> <span class="nv">P</span>} (<span class="nv">k</span> : TriJoinRecData A&#39; B&#39; C&#39; P)
  (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : trijoin_rec k o functor_trijoin f g h == trijoin_rec (trijoinrecdata_tricomp k f g h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A&#39; B&#39; C&#39; P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec k o functor_trijoin f g h ==
trijoin_rec (trijoinrecdata_tricomp k f g h)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A&#39; B&#39; C&#39; P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec k o functor_trijoin f g h ==
trijoin_rec (trijoinrecdata_tricomp k f g h)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* On the LHS, we use naturality of the [trijoin_rec] inside [functor_trijoin]: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b2"><span class="nb">refine</span> ((trijoin_rec_nat _ _ _ _ _)^$ $@ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A&#39; B&#39; C&#39; P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_fun (trijoin_rec k)
     (trijoinrecdata_tricomp
        (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f g h)) $==
trijoin_rec (trijoinrecdata_tricomp k f g h)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b3"><span class="nb">refine</span> (fmap trijoin_rec _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A&#39; B&#39; C&#39; P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_fun (trijoin_rec k)
  (trijoinrecdata_tricomp
     (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f g h) $-&gt;
trijoinrecdata_tricomp k f g h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Just to clarify to the reader what is going on: *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b4"><span class="nb">change</span> (<span class="nl">?L</span> $-&gt; <span class="nl">?R</span>) <span class="kr">with</span> (trijoinrecdata_tricomp (trijoin_rec_inv (trijoin_rec k)) f g h $-&gt; R).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>k</var><span class="hyp-type"><b>: </b><span>TriJoinRecData A&#39; B&#39; C&#39; P</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp
  (trijoin_rec_inv (trijoin_rec k)) f g h $-&gt;
trijoinrecdata_tricomp k f g h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (trijoinrecdata_tricomp_0fun (trijoin_rec_beta k) f g h).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** Now we have all of the tools to efficiently prove functoriality. *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b5"><span class="kn">Definition</span> <span class="nf">functor_trijoin_compose</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span> <span class="nv">A&#39;&#39;</span> <span class="nv">B&#39;&#39;</span> <span class="nv">C&#39;&#39;</span>}
  (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  (<span class="nv">f&#39;</span> : A&#39; -&gt; A&#39;&#39;) (<span class="nv">g&#39;</span> : B&#39; -&gt; B&#39;&#39;) (<span class="nv">h&#39;</span> : C&#39; -&gt; C&#39;&#39;)
  : functor_trijoin (f&#39; o f) (g&#39; o g) (h&#39; o h) == functor_trijoin f&#39; g&#39; h&#39; o functor_trijoin f g h.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', A'', B'', C''</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A&#39;&#39;</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B&#39;&#39;</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin (f&#39; o f) (g&#39; o g) (h&#39; o h) ==
functor_trijoin f&#39; g&#39; h&#39; o functor_trijoin f g h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', A'', B'', C''</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A&#39;&#39;</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B&#39;&#39;</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin (f&#39; o f) (g&#39; o g) (h&#39; o h) ==
functor_trijoin f&#39; g&#39; h&#39; o functor_trijoin f g h</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b7"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C', A'', B'', C''</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>f'</var><span class="hyp-type"><b>: </b><span>A&#39; -&gt; A&#39;&#39;</span></span></span><br><span><var>g'</var><span class="hyp-type"><b>: </b><span>B&#39; -&gt; B&#39;&#39;</span></span></span><br><span><var>h'</var><span class="hyp-type"><b>: </b><span>C&#39; -&gt; C&#39;&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f&#39; g&#39; h&#39; o functor_trijoin f g h ==
functor_trijoin (f&#39; o f) (g&#39; o g) (h&#39; o h)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">napply trijoin_rec_functor_trijoin.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b8"><span class="kn">Definition</span> <span class="nf">functor_trijoin_idmap</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>}
  : functor_trijoin idmap idmap idmap == (idmap : TriJoin A B C -&gt; TriJoin A B C).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin idmap idmap idmap ==
(idmap : TriJoin A B C -&gt; TriJoin A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1b9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin idmap idmap idmap ==
(idmap : TriJoin A B C -&gt; TriJoin A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ba"><span class="nb">apply</span> moveR_trijoin_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp (trijoinrecdata_trijoin A B C)
  idmap idmap idmap $== trijoin_rec_inv idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1bb"><span class="nb">change</span> (trijoinrecdata_trijoin A B C $== trijoinrecdata_fun idmap (trijoinrecdata_trijoin A B C)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_trijoin A B C $==
trijoinrecdata_fun idmap
  (trijoinrecdata_trijoin A B C)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1bc"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_fun idmap
  (trijoinrecdata_trijoin A B C) $==
trijoinrecdata_trijoin A B C</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (fmap_id (trijoinrecdata_0gpd A B C) _ (trijoinrecdata_trijoin A B C)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1bd"><span class="kn">Definition</span> <span class="nf">functor2_trijoin</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>}
  {<span class="nv">f</span> <span class="nv">f&#39;</span> : A -&gt; A&#39;} {<span class="nv">g</span> <span class="nv">g&#39;</span> : B -&gt; B&#39;} {<span class="nv">h</span> <span class="nv">h&#39;</span> : C -&gt; C&#39;}
  (<span class="nv">p</span> : f == f&#39;) (<span class="nv">q</span> : g == g&#39;) (<span class="nv">r</span> : h == h&#39;)
  : functor_trijoin f g h == functor_trijoin f&#39; g&#39; h&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f g h == functor_trijoin f&#39; g&#39; h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1be"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f g h == functor_trijoin f&#39; g&#39; h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1bf"><span class="nb">unfold</span> functor_trijoin.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoin_rec
  (trijoinrecdata_tricomp
     (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f g h) ==
trijoin_rec
  (trijoinrecdata_tricomp
     (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f&#39; g&#39; h&#39;)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c0">tapply (fmap trijoin_rec).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g, g'</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>h, h'</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>g == g&#39;</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>h == h&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trijoinrecdata_tricomp
  (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f g h $-&gt;
trijoinrecdata_tricomp
  (trijoinrecdata_trijoin A&#39; B&#39; C&#39;) f&#39; g&#39; h&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (trijoinrecdata_tricomp2 _ p q r).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c1"><span class="kn">Instance</span> <span class="nf">isequiv_functor_trijoin</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>}
  (<span class="nv">f</span> : A -&gt; A&#39;) `{!IsEquiv f}
  (g : B -&gt; B&#39;) `{!IsEquiv g}
  (h : C -&gt; C&#39;) `{!IsEquiv h}
  : IsEquiv (functor_trijoin f g h).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_trijoin f g h)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_trijoin f g h)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* This proof is almost identical to the proof of [isequiv_functor_join]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c3">snapply isequiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A&#39; B&#39; C&#39; -&gt; TriJoin A B C</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1c4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1c4"><hr></label><div class="goal-conclusion">functor_trijoin f g h o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1c5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1c5"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o functor_trijoin f g h == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoin A&#39; B&#39; C&#39; -&gt; TriJoin A B C</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor_trijoin f^-<span class="mi">1</span> g^-<span class="mi">1</span> h^-<span class="mi">1</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f g h o functor_trijoin f^-<span class="mi">1</span> g^-<span class="mi">1</span> h^-<span class="mi">1</span> ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1c8"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f g h o functor_trijoin f^-<span class="mi">1</span> g^-<span class="mi">1</span> h^-<span class="mi">1</span> ==
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1c9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1c9"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ca"><span class="mi">1</span>: <span class="nb">symmetry</span>; <span class="nb">apply</span> functor_trijoin_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin (<span class="kr">fun</span> <span class="nv">x</span> : A&#39; =&gt; f (f^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> <span class="nv">x</span> : B&#39; =&gt; g (g^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> <span class="nv">x</span> : C&#39; =&gt; h (h^-<span class="mi">1</span> x)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1cb"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin (<span class="kr">fun</span> <span class="nv">x</span> : A&#39; =&gt; f (f^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> <span class="nv">x</span> : B&#39; =&gt; g (g^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> <span class="nv">x</span> : C&#39; =&gt; h (h^-<span class="mi">1</span> x)) == 
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1cc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1cc"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1cd"><span class="mi">1</span>: <span class="bp">exact</span> (functor2_trijoin (eisretr f) (eisretr g) (eisretr h)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin idmap idmap idmap == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> functor_trijoin_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ce">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f^-<span class="mi">1</span> g^-<span class="mi">1</span> h^-<span class="mi">1</span> o functor_trijoin f g h ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1cf"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin f^-<span class="mi">1</span> g^-<span class="mi">1</span> h^-<span class="mi">1</span> o functor_trijoin f g h ==
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1d0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1d0"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d1"><span class="mi">1</span>: <span class="nb">symmetry</span>; <span class="nb">apply</span> functor_trijoin_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x))
  (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g^-<span class="mi">1</span> (g x)) 
  (<span class="kr">fun</span> <span class="nv">x</span> : C =&gt; h^-<span class="mi">1</span> (h x)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d2"><span class="nb">etransitivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x))
  (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; g^-<span class="mi">1</span> (g x)) 
  (<span class="kr">fun</span> <span class="nv">x</span> : C =&gt; h^-<span class="mi">1</span> (h x)) == 
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1d3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1d3"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d4"><span class="mi">1</span>: <span class="bp">exact</span> (functor2_trijoin (eissect f) (eissect g) (eissect h)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', B', C'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>IsEquiv0</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; B&#39;</span></span></span><br><span><var>IsEquiv1</var><span class="hyp-type"><b>: </b><span>IsEquiv g</span></span></span><br><span><var>h</var><span class="hyp-type"><b>: </b><span>C -&gt; C&#39;</span></span></span><br><span><var>IsEquiv2</var><span class="hyp-type"><b>: </b><span>IsEquiv h</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_trijoin idmap idmap idmap == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> functor_trijoin_idmap.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_functor_trijoin</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>}
  (<span class="nv">f</span> : A &lt;~&gt; A&#39;) (<span class="nv">g</span> : B &lt;~&gt; B&#39;) (<span class="nv">h</span> : C &lt;~&gt; C&#39;)
  : TriJoin A B C &lt;~&gt; TriJoin A&#39; B&#39; C&#39;
  := Build_Equiv _ _ (functor_trijoin f g h) _.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The relationship between [functor_trijoin] and [functor_join]. *)</span>

<span class="sd">(** While [functor_trijoin] is convenient to work with, we want to know that [functor_trijoin f g h] is homotopic to [functor_join f (functor_join g h)].  This is worked out using the next three results. *)</span>

<span class="sd">(** A lemma that handles the path algebra in the next result. [BC] here is [Join B C] there, [bc] here is [jglue b c] there, [bc&#39;] here is [jg g b c] there, and [beta_jg] here is [Join_rec_beta_jglue _ _ _ b c] there. *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d5"><span class="kn">Local Lemma</span> <span class="nf">ap_triangle_functor_join</span> {<span class="nv">A</span> <span class="nv">BC</span> <span class="nv">A&#39;</span> <span class="nv">P</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : BC -&gt; P)
  (<span class="nv">a</span> : A) {<span class="nv">b</span> <span class="nv">c</span> : BC} (<span class="nv">bc</span> : b = c) (<span class="nv">bc&#39;</span> : g b = g c) (<span class="nv">beta_jg</span> : ap g bc = bc&#39;)
  : ap_triangle (functor_join f g) (triangle_v a bc) @ functor_join_beta_jglue f g a c
    = (functor_join_beta_jglue f g a b
        @@ ((ap_compose joinr (functor_join f g) bc)^
             @ (ap_compose g joinr bc @ ap (ap joinr) beta_jg)))
       @ triangle_v (f a) bc&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>g b = g c</span></span></span><br><span><var>beta_jg</var><span class="hyp-type"><b>: </b><span>ap g bc = bc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f g) (triangle_v a bc) @
functor_join_beta_jglue f g a c =
(functor_join_beta_jglue f g a b @@
 ((ap_compose joinr (functor_join f g) bc)^ @
  (ap_compose g joinr bc @ ap (ap joinr) beta_jg))) @
triangle_v (f a) bc&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b, c</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br><span><var>bc</var><span class="hyp-type"><b>: </b><span>b = c</span></span></span><br><span><var>bc'</var><span class="hyp-type"><b>: </b><span>g b = g c</span></span></span><br><span><var>beta_jg</var><span class="hyp-type"><b>: </b><span>ap g bc = bc&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f g) (triangle_v a bc) @
functor_join_beta_jglue f g a c =
(functor_join_beta_jglue f g a b @@
 ((ap_compose joinr (functor_join f g) bc)^ @
  (ap_compose g joinr bc @ ap (ap joinr) beta_jg))) @
triangle_v (f a) bc&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d7"><span class="nb">induction</span> bc, beta_jg; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f g) (concat_p1 (jglue a b)) @
functor_join_beta_jglue f g a b =
(functor_join_beta_jglue f g a b @@ <span class="mi">1</span>) @
concat_p1 (jglue (f a) (g b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1d8"><span class="nb">transitivity</span> (concat_p1 _ @ functor_join_beta_jglue f g a b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f g) (concat_p1 (jglue a b)) @
functor_join_beta_jglue f g a b =
concat_p1 (ap (functor_join f g) (jglue a b)) @
functor_join_beta_jglue f g a b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1d9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1d9"><hr></label><div class="goal-conclusion">concat_p1 (ap (functor_join f g) (jglue a b)) @
functor_join_beta_jglue f g a b =
(functor_join_beta_jglue f g a b @@ <span class="mi">1</span>) @
concat_p1 (jglue (f a) (g b))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1da">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f g) (concat_p1 (jglue a b)) @
functor_join_beta_jglue f g a b =
concat_p1 (ap (functor_join f g) (jglue a b)) @
functor_join_beta_jglue f g a b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1db"><span class="nb">refine</span> (_ @@ <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f g) (concat_p1 (jglue a b)) =
concat_p1 (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1dc"><span class="nb">unfold</span> ap_triangle.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap_pp (functor_join f g) (jglue a b) <span class="mi">1</span>)^ @
ap (ap (functor_join f g)) (concat_p1 (jglue a b)) =
concat_p1 (ap (functor_join f g) (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1dd"><span class="nb">apply</span> moveR_Vp; <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_pp (functor_join f g) (jglue a b) <span class="mi">1</span> @
concat_p1 (ap (functor_join f g) (jglue a b)) =
ap (ap (functor_join f g)) (concat_p1 (jglue a b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap_pp_concat_p1 (functor_join f g) (jglue a b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1de">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">concat_p1 (ap (functor_join f g) (jglue a b)) @
functor_join_beta_jglue f g a b =
(functor_join_beta_jglue f g a b @@ <span class="mi">1</span>) @
concat_p1 (jglue (f a) (g b))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1df"><span class="nb">apply</span> moveR_Mp; <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, BC, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>BC -&gt; P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>BC</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(concat_p1 (ap (functor_join f g) (jglue a b)))^ @
((functor_join_beta_jglue f g a b @@ <span class="mi">1</span>) @
 concat_p1 (jglue (f a) (g b))) =
functor_join_beta_jglue f g a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (concat_p_pp _ _ _ @ whiskerR_p1 _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We&#39;ll generalize the situation a bit to keep things less verbose.  [join_rec g] here will be [functor_join g h] in the next result.  Maybe this extra generality will also be useful sometime? *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e0"><span class="kn">Definition</span> <span class="nf">functor_join_join_rec</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">P</span>} (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : JoinRecData B C P)
  : functor_join f (join_rec g)
    == trijoin_rec {| j1 := joinl o f; j2 := joinr o jl g; j3 := joinr o jr g;
                      j12 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; jglue (f a) (jl g b);
                      j13 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">c</span> =&gt; jglue (f a) (jr g c);
                      j23 := <span class="kr">fun</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; ap joinr (jg g b c);
                      j123 := <span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> =&gt; triangle_v (f a) (jg g b c); |}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f (join_rec g) ==
trijoin_rec
  {|
    j1 := joinl o f;
    j2 := joinr o jl g;
    j3 := joinr o jr g;
    j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt; jglue (f a) (jl g b);
    j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt; jglue (f a) (jr g c);
    j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jg g b c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (f a) (jg g b c)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_join f (join_rec g) ==
trijoin_rec
  {|
    j1 := joinl o f;
    j2 := joinr o jl g;
    j3 := joinr o jr g;
    j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt; jglue (f a) (jl g b);
    j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt; jglue (f a) (jr g c);
    j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jg g b c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (f a) (jg g b c)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* Recall that [trijoin_rec] is defined to be the inverse of [trijoin_rec_inv_natequiv ...]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e2"><span class="nb">refine</span> (moveL_equiv_V_0gpd (trijoin_rec_inv_natequiv A B C _) _ _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">equiv_fun_0gpd
  (trijoin_rec_inv_natequiv A B C (Join A&#39; P))
  (functor_join f (join_rec g)) $==
{|
  j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (f x);
  j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (jl g x);
  j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (jr g x);
  j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt; jglue (f a) (jl g b);
  j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt; jglue (f a) (jr g c);
  j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jg g b c);
  j123 :=
    <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
    triangle_v (f a) (jg g b c)
|}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="c">(* The next two lines aren&#39;t needed, but clarify the goal. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e3"><span class="nb">unfold</span> trijoin_rec_inv_natequiv, equiv_fun_0gpd; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath
  (trijoinrecdata_fun (functor_join f (join_rec g))
     (trijoinrecdata_trijoin A B C))
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (f x);
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (jl g x);
    j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (jr g x);
    j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt; jglue (f a) (jl g b);
    j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt; jglue (f a) (jr g c);
    j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jg g b c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (f a) (jg g b c)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e4"><span class="nb">unfold</span> trijoinrecdata_fun, trijoinrecdata_trijoin; <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">TriJoinRecPath
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (f x);
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (jl g x);
    j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (jr g x);
    j12 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt;
      ap (functor_join f (join_rec g)) (join12 a b);
    j13 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt;
      ap (functor_join f (join_rec g)) (join13 a c);
    j23 :=
      <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      ap (functor_join f (join_rec g)) (join23 b c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      ap_triangle (functor_join f (join_rec g))
        (join123 a b c)
  |}
  {|
    j1 := <span class="kr">fun</span> <span class="nv">x</span> : A =&gt; joinl (f x);
    j2 := <span class="kr">fun</span> <span class="nv">x</span> : B =&gt; joinr (jl g x);
    j3 := <span class="kr">fun</span> <span class="nv">x</span> : C =&gt; joinr (jr g x);
    j12 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) =&gt; jglue (f a) (jl g b);
    j13 := <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">c</span> : C) =&gt; jglue (f a) (jr g c);
    j23 := <span class="kr">fun</span> (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt; ap joinr (jg g b c);
    j123 :=
      <span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">b</span> : B) (<span class="nv">c</span> : C) =&gt;
      triangle_v (f a) (jg g b c)
  |}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e5">bundle_trijoinrecpath; <span class="nb">intros</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join f (join_rec g)) (join12 a b) =
jglue (f a) (jl g b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1e6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1e6"><hr></label><div class="goal-conclusion">ap (functor_join f (join_rec g)) (join13 a c) =
jglue (f a) (jr g c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1e7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1e7"><hr></label><div class="goal-conclusion">ap (functor_join f (join_rec g)) (join23 b c) =
ap joinr (jg g b c)</div></blockquote><input class="alectryon-extra-goal-toggle" id="trijoin-v-chk1e8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><label class="goal-separator" for="trijoin-v-chk1e8"><hr></label><div class="goal-conclusion">prism&#39;
  (ap_triangle (functor_join f (join_rec g))
     (join123 a b c)) (triangle_v (f a) (jg g b c))
  <span class="nl">?Goal</span> <span class="nl">?Goal0</span> <span class="nl">?Goal1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1e9">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join f (join_rec g)) (join12 a b) =
jglue (f a) (jl g b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor_join_beta_jglue f _ a (joinl b)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ea">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join f (join_rec g)) (join13 a c) =
jglue (f a) (jr g c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (functor_join_beta_jglue f _ a (joinr c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1eb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join f (join_rec g)) (join23 b c) =
ap joinr (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ec"><span class="nb">unfold</span> join23.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_join f (join_rec g))
  (ap joinr (jglue b c)) = ap joinr (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ed"><span class="nb">refine</span> ((ap_compose joinr _ _)^ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
   functor_join f (join_rec g) (joinr x)) (jglue b c) =
ap joinr (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ee"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt; joinr (join_rec g x))
  (jglue b c) = ap joinr (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1ef"><span class="nb">refine</span> (ap_compose _ joinr (jglue b c) @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap joinr (ap (join_rec g) (jglue b c)) =
ap joinr (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1f0"><span class="nb">refine</span> (ap (ap joinr) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (join_rec g) (jglue b c) = jg g b c</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> join_rec_beta_jg.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1f1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">prism&#39;
  (ap_triangle (functor_join f (join_rec g))
     (join123 a b c)) (triangle_v (f a) (jg g b c))
  (functor_join_beta_jglue f (join_rec g) a (joinl b))
  (functor_join_beta_jglue f (join_rec g) a (joinr c))
  ((ap_compose joinr (functor_join f (join_rec g))
      (jglue b c))^ @
   (ap_compose (join_rec g) joinr (jglue b c) @
    ap (ap joinr) (join_rec_beta_jg g b c)
    :
    ap
      (<span class="kr">fun</span> <span class="nv">x</span> : Join B C =&gt;
       functor_join f (join_rec g) (joinr x))
      (jglue b c) = ap joinr (jg g b c))
   :
   ap (functor_join f (join_rec g)) (join23 b c) =
   ap joinr (jg g b c))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1f2"><span class="nb">unfold</span> prism&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f (join_rec g))
  (join123 a b c) @
functor_join_beta_jglue f (join_rec g) a (joinr c) =
(functor_join_beta_jglue f (join_rec g) a (joinl b) @@
 ((ap_compose joinr (functor_join f (join_rec g))
     (jglue b c))^ @
  (ap_compose (join_rec g) joinr (jglue b c) @
   ap (ap joinr) (join_rec_beta_jg g b c)))) @
triangle_v (f a) (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="trijoin-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="trijoin-v-chk1f3"><span class="nb">change</span> (join123 a b c) <span class="kr">with</span> (triangle_v a (jglue b c)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C, A', P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A&#39;</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>JoinRecData B C P</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap_triangle (functor_join f (join_rec g))
  (triangle_v a (jglue b c)) @
functor_join_beta_jglue f (join_rec g) a (joinr c) =
(functor_join_beta_jglue f (join_rec g) a (joinl b) @@
 ((ap_compose joinr (functor_join f (join_rec g))
     (jglue b c))^ @
  (ap_compose (join_rec g) joinr (jglue b c) @
   ap (ap joinr) (join_rec_beta_jg g b c)))) @
triangle_v (f a) (jg g b c)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (ap_triangle_functor_join f (join_rec g) a (jglue b c) (jg g b c) (Join_rec_beta_jglue _ _ _ b c)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">functor_trijoin_as_functor_join</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">A&#39;</span> <span class="nv">B&#39;</span> <span class="nv">C&#39;</span>}
  (<span class="nv">f</span> : A -&gt; A&#39;) (<span class="nv">g</span> : B -&gt; B&#39;) (<span class="nv">h</span> : C -&gt; C&#39;)
  : functor_join f (functor_join g h) == functor_trijoin f g h
  := functor_join_join_rec f (functor_join_recdata g h).</span></span></pre>
</div>
</div></body>
</html>
