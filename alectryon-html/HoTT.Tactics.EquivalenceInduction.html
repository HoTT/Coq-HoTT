<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>EquivalenceInduction.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="sd">(** * Equivalence induction *)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk0"><span class="kn">Require Import</span> Basics.Overture Basics.Equivalences Basics.Tactics.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Types.Equiv Types.Prod Types.Forall Types.Sigma Types.<span class="kn">Universe</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We define typeclasses and tactics for doing equivalence induction. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local</span> <span class="kn">Open Scope</span> equiv_scope.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">RespectsEquivalenceL</span>@{i j k s0 s1} (A : <span class="kt">Type</span>@{i}) (P : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>@{j}), (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>@{k})
  := respects_equivalenceL : sig@{s0 s1} (<span class="kr">fun</span> <span class="nv">e&#39;</span> : <span class="kr">forall</span> <span class="nv">B</span> (<span class="nv">e</span> : A &lt;~&gt; B), P A (equiv_idmap A) &lt;~&gt; P B e =&gt; Funext -&gt; equiv_idmap _ = e&#39; A (equiv_idmap _) ).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">RespectsEquivalenceR</span>@{i j k s0 s1} (A : <span class="kt">Type</span>@{i}) (P : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>@{j}), (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>@{k})
  := respects_equivalenceR : sig@{s0 s1} (<span class="kr">fun</span> <span class="nv">e&#39;</span> : <span class="kr">forall</span> <span class="nv">B</span> (<span class="nv">e</span> : B &lt;~&gt; A), P A (equiv_idmap A) &lt;~&gt; P B e =&gt; Funext -&gt; equiv_idmap _ = e&#39; A (equiv_idmap _) ).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="sd">(** We use a sigma type rather than a record for two reasons:</span>

<span class="sd">    1. In the dependent cases, where one equivalence-respectfulness proof will show up in the body of another goal, it might be the case that using sigma types allows us to reuse the respectfulness lemmas of sigma types, rather than writing new ones for this type.</span>

<span class="sd">    2. We expect it to be significantly useful to see the type of the fields than the type of the record, because we expect this type to show up as a goal infrequently.  Sigma types have more informative notations than record type names; the user can run [hnf] to see what is left to do in the side conditions. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Arguments</span> RespectsEquivalenceL : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Global</span> <span class="kn">Arguments</span> RespectsEquivalenceR : <span class="kn">clear implicits</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** When doing equivalence induction, typeclass inference will either fully solve the respectfulness side-conditions, or not make any progress.  We would like to progress as far as we can on the side-conditions, so that we leave the user with as little to prove as possible.  To do this, we create a &quot;database&quot;, implemented using typeclasses, to look up the refinement lemma, keyed on the head of the term we want to respect equivalence. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Class</span> <span class="nf">respects_equivalence_db</span> {<span class="nv">KT</span> <span class="nv">VT</span>} (<span class="nv">Key</span> : KT) {<span class="nv">lem</span> : VT} : Type0 := make_respects_equivalence_db : Unit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">get_lem&#39;</span> {<span class="nv">KT</span> <span class="nv">VT</span>} <span class="nv">Key</span> {<span class="nv">lem</span>} `{@respects_equivalence_db KT VT Key lem} : VT := lem.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="nf">get_lem</span> key := <span class="kp">ltac</span>:(<span class="kr">let</span> <span class="nv">res</span> := <span class="kp">constr</span>:(get_lem&#39; key) <span class="kr">in</span> <span class="kr">let</span> <span class="nv">res&#39;</span> := (<span class="kp">eval</span> <span class="nb">unfold</span> get_lem&#39; <span class="kr">in</span> res) <span class="kr">in</span> <span class="bp">exact</span> res&#39;) (<span class="kn">only parsing</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">const</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> : <span class="kt">Type</span>} {<span class="nv">T</span> : <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk1">#[export] <span class="kn">Instance</span> <span class="nf">const_respects_equivalenceL</span>
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; T).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : A &lt;~&gt; B) =&gt; T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : A &lt;~&gt; B) =&gt; T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk3"><span class="nb">refine</span> (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; equiv_idmap T; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk4">#[export] <span class="kn">Instance</span> <span class="nf">const_respects_equivalenceR</span>
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; T).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : B &lt;~&gt; A) =&gt; T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : B &lt;~&gt; A) =&gt; T)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk6"><span class="nb">refine</span> (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; equiv_idmap _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">const</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Instance</span>: <span class="kr">forall</span> {<span class="nv">T</span>}, @respects_equivalence_db _ _ T (<span class="kr">fun</span> <span class="nv">A</span> =&gt; @const_respects_equivalenceL A T) := <span class="kr">fun</span> <span class="nv">_</span> =&gt; tt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">id</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> : <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk7">#[export] <span class="kn">Instance</span> <span class="nf">idmap_respects_equivalenceL</span>
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">_</span> =&gt; B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : A &lt;~&gt; B) =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : A &lt;~&gt; B) =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk9"><span class="nb">refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; e; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> idpath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chka">#[export] <span class="kn">Instance</span> <span class="nf">idmap_respects_equivalenceR</span>
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">_</span> =&gt; B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : B &lt;~&gt; A) =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : B &lt;~&gt; A) =&gt; B)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chkc"><span class="nb">refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_inverse e; <span class="kr">fun</span> <span class="nv">_</span> =&gt; path_equiv _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> = <span class="mi">1</span>^-<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> path_forall; <span class="nb">intro</span>; <span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">id</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">unit</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> : <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">unit_respects_equivalenceL</span>
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; Unit)
    := @const_respects_equivalenceL A Unit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">unit_respects_equivalenceR</span>
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; Unit)
    := @const_respects_equivalenceR A Unit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">unit</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">prod</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chkd">#[export] <span class="kn">Instance</span> <span class="nf">prod_respects_equivalenceL</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>}
         `{RespectsEquivalenceL A P, RespectsEquivalenceL A Q}
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; P B e * Q B e).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e * Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e * Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chkf"><span class="nb">refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_functor_prod&#39; (respects_equivalenceL.<span class="mi">1</span> B e) (respects_equivalenceL.<span class="mi">1</span> B e)); _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Funext -&gt;
<span class="mi">1</span> =
respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span> *E
respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">fs</span> =&gt;
             transport
               (<span class="kr">fun</span> <span class="nv">e&#39;</span> =&gt; _ = equiv_functor_prod&#39; e&#39; _) (respects_equivalenceL.<span class="mi">2</span> _)
               (transport
                  (<span class="kr">fun</span> <span class="nv">e&#39;</span> =&gt; _ = equiv_functor_prod&#39; _ e&#39;) (respects_equivalenceL.<span class="mi">2</span> _)
                  idpath)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk10">#[export] <span class="kn">Instance</span> <span class="nf">prod_respects_equivalenceR</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>}
         `{RespectsEquivalenceR A P, RespectsEquivalenceR A Q}
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; P B e * Q B e).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e * Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk11"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e * Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk12"><span class="nb">refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_functor_prod&#39; (respects_equivalenceR.<span class="mi">1</span> B e) (respects_equivalenceR.<span class="mi">1</span> B e)); _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Funext -&gt;
<span class="mi">1</span> =
respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span> *E
respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">fs</span> =&gt;
             transport
               (<span class="kr">fun</span> <span class="nv">e&#39;</span> =&gt; _ = equiv_functor_prod&#39; e&#39; _) (respects_equivalenceR.<span class="mi">2</span> _)
               (transport
                  (<span class="kr">fun</span> <span class="nv">e&#39;</span> =&gt; _ = equiv_functor_prod&#39; _ e&#39;) (respects_equivalenceR.<span class="mi">2</span> _)
                  idpath)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span>: @respects_equivalence_db _ _ (@prod) (@prod_respects_equivalenceL) := tt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">prod</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** A tactic to solve the identity-preservation part of equivalence-respectfulness. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Ltac</span> <span class="nf">t_step</span> :=
  <span class="kp">idtac</span>;
  <span class="kr">match goal with</span>
    | [ |- _ = _ :&gt; (_ &lt;~&gt; _) ] =&gt; <span class="nb">apply</span> path_equiv
    | _ =&gt; <span class="bp">reflexivity</span>
    | _ =&gt; <span class="bp">assumption</span>
    | _ =&gt; <span class="nb">intro</span>
    | [ |- _ = _ :&gt; (<span class="kr">forall</span> <span class="nv">_</span>, _) ] =&gt; <span class="nb">apply</span> path_forall
    | _ =&gt; <span class="kp">progress</span> <span class="nb">unfold</span> functor_forall, functor_sigma
    | _ =&gt; <span class="kp">progress</span> <span class="nb">cbn</span> <span class="kr">in</span> *
    | [ |- <span class="kp">context</span>[<span class="nl">?x</span>.<span class="mi">1</span>] ] =&gt; <span class="kr">let</span> <span class="nv">H</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="nb">destruct</span> x <span class="kr">as</span> [? H]; <span class="kp">try</span> <span class="nb">destruct</span> H
    | [ H : _ = _ |- _ ] =&gt; <span class="nb">destruct</span> H
    | [ H : <span class="nl">?A</span> -&gt; <span class="nl">?B</span>, H&#39; : <span class="nl">?A</span> |- _ ] =&gt; <span class="nb">specialize</span> (H H&#39;)
    | [ H : <span class="nl">?A</span> -&gt; <span class="nl">?B</span>, H&#39; : <span class="nl">?A</span> |- _ ] =&gt; <span class="nb">generalize dependent</span> (H H&#39;); <span class="nb">clear</span> H
    | _ =&gt; <span class="kp">progress</span> <span class="nb">rewrite</span> <span class="nl">?eisretr</span>, <span class="nl">?eissect</span>
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Ltac</span> <span class="nf">t</span> :=
  <span class="kp">repeat</span> t_step.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">pi</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk13">#[export] <span class="kn">Instance</span> <span class="nf">forall_respects_equivalenceL</span> `{Funext} {A} {P : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>} {Q : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B e -&gt; <span class="kt">Type</span>}
         `{HP : RespectsEquivalenceL A P}
         `{HQ : <span class="kr">forall</span> <span class="nv">a</span> : P A (equiv_idmap A), RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))}
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk14"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk15"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk16" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk16"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk17">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk18"><span class="nb">refine</span> (equiv_functor_forall&#39;
                (equiv_inverse ((@respects_equivalenceL _ _ HP).<span class="mi">1</span> B e))
                (<span class="kr">fun</span> <span class="nv">b</span> =&gt; _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P B e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q A <span class="mi">1</span> ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b) &lt;~&gt; Q B e b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk19"><span class="nb">refine</span> (equiv_compose&#39;
                (equiv_path _ _ (ap (Q B e) (eisretr _ _)))
                (equiv_compose&#39;
                   ((HQ (equiv_inverse ((@respects_equivalenceL _ _ HP).<span class="mi">1</span> B e) b)).<span class="mi">1</span> B e)
                   (equiv_path _ _ (ap (Q A (equiv_idmap _)) _)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P B e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b =
respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span>
  ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (ap10 (ap equiv_fun (respects_equivalenceL.<span class="mi">2</span> _)) _).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk1a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   equiv_functor_forall&#39;
     (respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>
     (<span class="kr">fun</span> <span class="nv">b</span> : P B e =&gt;
      equiv_path
        (Q B e
           (respects_equivalenceL.<span class="mi">1</span> B e
              ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                 b))) (Q B e b)
        (ap (Q B e)
           (eisretr (respects_equivalenceL.<span class="mi">1</span> B e) b))
      oE ((HQ ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b)).<span class="mi">1</span>
            B e
          oE equiv_path
               (Q A <span class="mi">1</span>
                  ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b))
               (Q A <span class="mi">1</span>
                  (respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span>
                     ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>
                        b)))
               (ap (Q A <span class="mi">1</span>)
                  (ap10
                     (ap equiv_fun
                        (respects_equivalenceL.<span class="mi">2</span> H))
                     ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                        b))))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk1b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   equiv_functor_forall&#39;
     (respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>
     (<span class="kr">fun</span> <span class="nv">b</span> : P B e =&gt;
      equiv_path
        (Q B e
           (respects_equivalenceL.<span class="mi">1</span> B e
              ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                 b))) (Q B e b)
        (ap (Q B e)
           (eisretr (respects_equivalenceL.<span class="mi">1</span> B e) b))
      oE ((HQ ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b)).<span class="mi">1</span>
            B e
          oE equiv_path
               (Q A <span class="mi">1</span>
                  ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span> b))
               (Q A <span class="mi">1</span>
                  (respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span>
                     ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>
                        b)))
               (ap (Q A <span class="mi">1</span>)
                  (ap10
                     (ap equiv_fun
                        (respects_equivalenceL.<span class="mi">2</span> H))
                     ((respects_equivalenceL.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                        b))))))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk1c">#[export] <span class="kn">Instance</span> <span class="nf">forall_respects_equivalenceR</span> `{Funext} {A} {P : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>} {Q : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B e -&gt; <span class="kt">Type</span>}
         `{HP : RespectsEquivalenceR A P}
         `{HQ : <span class="kr">forall</span> <span class="nv">a</span> : P A (equiv_idmap A), RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))}
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk1d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk1e"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk1f"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk20">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 <span class="kr">forall</span> <span class="nv">x</span> : P B e, Q B e x) B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk21"><span class="nb">refine</span> (equiv_functor_forall&#39;
                (equiv_inverse ((@respects_equivalenceR _ _ HP).<span class="mi">1</span> B e))
                (<span class="kr">fun</span> <span class="nv">b</span> =&gt; _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P B e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q A <span class="mi">1</span> ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b) &lt;~&gt; Q B e b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk22"><span class="nb">refine</span> (equiv_compose&#39;
                (equiv_path _ _ (ap (Q B e) (eisretr _ _)))
                (equiv_compose&#39;
                   ((HQ (equiv_inverse ((@respects_equivalenceR _ _ HP).<span class="mi">1</span> B e) b)).<span class="mi">1</span> B e)
                   (equiv_path _ _ (ap (Q A (equiv_idmap _)) _)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P B e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b =
respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span>
  ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (ap10 (ap equiv_fun (respects_equivalenceR.<span class="mi">2</span> _)) _).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk23">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   equiv_functor_forall&#39;
     (respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>
     (<span class="kr">fun</span> <span class="nv">b</span> : P B e =&gt;
      equiv_path
        (Q B e
           (respects_equivalenceR.<span class="mi">1</span> B e
              ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                 b))) (Q B e b)
        (ap (Q B e)
           (eisretr (respects_equivalenceR.<span class="mi">1</span> B e) b))
      oE ((HQ ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b)).<span class="mi">1</span>
            B e
          oE equiv_path
               (Q A <span class="mi">1</span>
                  ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b))
               (Q A <span class="mi">1</span>
                  (respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span>
                     ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>
                        b)))
               (ap (Q A <span class="mi">1</span>)
                  (ap10
                     (ap equiv_fun
                        (respects_equivalenceR.<span class="mi">2</span> H))
                     ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                        b))))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk24">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         <span class="kr">forall</span> <span class="nv">x</span> : P B0 e0, Q B0 e0 x) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   equiv_functor_forall&#39;
     (respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>
     (<span class="kr">fun</span> <span class="nv">b</span> : P B e =&gt;
      equiv_path
        (Q B e
           (respects_equivalenceR.<span class="mi">1</span> B e
              ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                 b))) (Q B e b)
        (ap (Q B e)
           (eisretr (respects_equivalenceR.<span class="mi">1</span> B e) b))
      oE ((HQ ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b)).<span class="mi">1</span>
            B e
          oE equiv_path
               (Q A <span class="mi">1</span>
                  ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span> b))
               (Q A <span class="mi">1</span>
                  (respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span>
                     ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>
                        b)))
               (ap (Q A <span class="mi">1</span>)
                  (ap10
                     (ap equiv_fun
                        (respects_equivalenceR.<span class="mi">2</span> H))
                     ((respects_equivalenceR.<span class="mi">1</span> B e)^-<span class="mi">1</span>%function
                        b))))))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">pi</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">sigma</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk25">#[export] <span class="kn">Instance</span> <span class="nf">sigma_respects_equivalenceL</span> `{Funext} {A} {P : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>} {Q : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B e -&gt; <span class="kt">Type</span>}
         `{HP : RespectsEquivalenceL A P}
         `{HQ : <span class="kr">forall</span> <span class="nv">a</span> : P A (equiv_idmap A), RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))}
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; sig (Q B e)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; {x : _ &amp; Q B e x})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk26"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; {x : _ &amp; Q B e x})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk27"><span class="nb">simple refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_functor_sigma&#39; (respects_equivalenceL.<span class="mi">1</span> B e) (<span class="kr">fun</span> <span class="nv">b</span> =&gt; _));
            _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P A <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q A <span class="mi">1</span> b &lt;~&gt; Q B e (respects_equivalenceL.<span class="mi">1</span> B e b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk28" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk28"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         {x : _ &amp; Q B0 e0 x}) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         {x : _ &amp; Q B0 e0 x}) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   equiv_functor_sigma&#39; (respects_equivalenceL.<span class="mi">1</span> B e)
     (<span class="kr">fun</span> <span class="nv">b</span> : P A <span class="mi">1</span> =&gt; <span class="nl">?Goal</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk29">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P A <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q A <span class="mi">1</span> b &lt;~&gt; Q B e (respects_equivalenceL.<span class="mi">1</span> B e b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2a"><span class="nb">refine</span> (equiv_compose&#39;
                ((HQ b).<span class="mi">1</span> B e)
                (equiv_path _ _ (ap (Q A (equiv_idmap _)) _))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P A <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b = respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span> b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (ap10 (ap equiv_fun (respects_equivalenceL.<span class="mi">2</span> _)) _).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2b">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         {x : _ &amp; Q B0 e0 x}) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         {x : _ &amp; Q B0 e0 x}) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   equiv_functor_sigma&#39; (respects_equivalenceL.<span class="mi">1</span> B e)
     (<span class="kr">fun</span> <span class="nv">b</span> : P A <span class="mi">1</span> =&gt;
      (HQ b).<span class="mi">1</span> B e
      oE equiv_path (Q A <span class="mi">1</span> b)
           (Q A <span class="mi">1</span> (respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span> b))
           (ap (Q A <span class="mi">1</span>)
              (ap10
                 (ap equiv_fun
                    (respects_equivalenceL.<span class="mi">2</span> H)) b))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Q B e (respects_equivalenceL.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         {x : _ &amp; Q B0 e0 x}) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : A &lt;~&gt; B0) =&gt;
         {x : _ &amp; Q B0 e0 x}) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   equiv_functor_sigma&#39; (respects_equivalenceL.<span class="mi">1</span> B e)
     (<span class="kr">fun</span> <span class="nv">b</span> : P A <span class="mi">1</span> =&gt;
      (HQ b).<span class="mi">1</span> B e
      oE equiv_path (Q A <span class="mi">1</span> b)
           (Q A <span class="mi">1</span> (respects_equivalenceL.<span class="mi">1</span> A <span class="mi">1</span> b))
           (ap (Q A <span class="mi">1</span>)
              (ap10
                 (ap equiv_fun
                    (respects_equivalenceL.<span class="mi">2</span> H)) b))))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2d">#[export] <span class="kn">Instance</span> <span class="nf">sigma_respects_equivalenceR</span> `{Funext} {A} {P : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>} {Q : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B e -&gt; <span class="kt">Type</span>}
         `{HP : RespectsEquivalenceR A P}
         `{HQ : <span class="kr">forall</span> <span class="nv">a</span> : P A (equiv_idmap A), RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))}
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; sig (Q B e)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; {x : _ &amp; Q B e x})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; {x : _ &amp; Q B e x})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk2f"><span class="nb">simple refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_functor_sigma&#39; (respects_equivalenceR.<span class="mi">1</span> B e) (<span class="kr">fun</span> <span class="nv">b</span> =&gt; _));
            _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P A <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q A <span class="mi">1</span> b &lt;~&gt; Q B e (respects_equivalenceR.<span class="mi">1</span> B e b)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk30" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk30"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         {x : _ &amp; Q B0 e0 x}) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         {x : _ &amp; Q B0 e0 x}) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   equiv_functor_sigma&#39; (respects_equivalenceR.<span class="mi">1</span> B e)
     (<span class="kr">fun</span> <span class="nv">b</span> : P A <span class="mi">1</span> =&gt; <span class="nl">?Goal</span>))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk31">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P A <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Q A <span class="mi">1</span> b &lt;~&gt; Q B e (respects_equivalenceR.<span class="mi">1</span> B e b)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk32"><span class="nb">refine</span> (equiv_compose&#39;
                ((HQ b).<span class="mi">1</span> B e)
                (equiv_path _ _ (ap (Q A (equiv_idmap _)) _))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>P A <span class="mi">1</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b = respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span> b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (ap10 (ap equiv_fun (respects_equivalenceR.<span class="mi">2</span> _)) _).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk33">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         {x : _ &amp; Q B0 e0 x}) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         {x : _ &amp; Q B0 e0 x}) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   equiv_functor_sigma&#39; (respects_equivalenceR.<span class="mi">1</span> B e)
     (<span class="kr">fun</span> <span class="nv">b</span> : P A <span class="mi">1</span> =&gt;
      (HQ b).<span class="mi">1</span> B e
      oE equiv_path (Q A <span class="mi">1</span> b)
           (Q A <span class="mi">1</span> (respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span> b))
           (ap (Q A <span class="mi">1</span>)
              (ap10
                 (ap equiv_fun
                    (respects_equivalenceR.<span class="mi">2</span> H)) b))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk34">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : P A <span class="mi">1</span>,
RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   Q B e (respects_equivalenceR.<span class="mi">1</span> B e a))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         {x : _ &amp; Q B0 e0 x}) A <span class="mi">1</span> &lt;~&gt;
        (<span class="kr">fun</span> (<span class="nv">B0</span> : <span class="kt">Type</span>) (<span class="nv">e0</span> : B0 &lt;~&gt; A) =&gt;
         {x : _ &amp; Q B0 e0 x}) B e =&gt;
 Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   equiv_functor_sigma&#39; (respects_equivalenceR.<span class="mi">1</span> B e)
     (<span class="kr">fun</span> <span class="nv">b</span> : P A <span class="mi">1</span> =&gt;
      (HQ b).<span class="mi">1</span> B e
      oE equiv_path (Q A <span class="mi">1</span> b)
           (Q A <span class="mi">1</span> (respects_equivalenceR.<span class="mi">1</span> A <span class="mi">1</span> b))
           (ap (Q A <span class="mi">1</span>)
              (ap10
                 (ap equiv_fun
                    (respects_equivalenceR.<span class="mi">2</span> H)) b))))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span>: @respects_equivalence_db _ _ (@sig) (@sigma_respects_equivalenceL) := tt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">sigma</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">equiv_transfer</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk35"><span class="kn">Definition</span> <span class="nf">respects_equivalenceL_equiv</span> {<span class="nv">A</span> <span class="nv">A&#39;</span>} {<span class="nv">P</span> : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>} {<span class="nv">P&#39;</span> : <span class="kr">forall</span> <span class="nv">B</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span>}
             (<span class="nv">eA</span> : A &lt;~&gt; A&#39;)
             (<span class="nv">eP</span> : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B (equiv_compose&#39; e eA) &lt;~&gt; P&#39; B e)
             `{HP : RespectsEquivalenceL A P}
  : RespectsEquivalenceL A&#39; P&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A&#39; P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk36"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A&#39; P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk37"><span class="nb">simple refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _); _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk38" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk38"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
        P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A&#39; <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B) =&gt; <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk39">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (equiv_compose&#39;
                (eP _ _)
                (equiv_compose&#39;
                   (equiv_compose&#39;
                      (HP.<span class="mi">1</span> _ _)
                      (equiv_inverse (HP.<span class="mi">1</span> _ _)))
                   (equiv_inverse (eP _ _)))).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk3a">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
        P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A&#39; <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B (e oE eA) oE (HP.<span class="mi">1</span> A&#39; (<span class="mi">1</span> oE eA))^-<span class="mi">1</span>
       oE (eP A&#39; <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk3b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A&#39; &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; A&#39;</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
P B (e oE eA) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B),
        P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A&#39; <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A&#39; &lt;~&gt; B) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B (e oE eA) oE (HP.<span class="mi">1</span> A&#39; (<span class="mi">1</span> oE eA))^-<span class="mi">1</span>
       oE (eP A&#39; <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk3c"><span class="kn">Definition</span> <span class="nf">respects_equivalenceR_equiv</span> {<span class="nv">A</span> <span class="nv">A&#39;</span>} {<span class="nv">P</span> : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>} {<span class="nv">P&#39;</span> : <span class="kr">forall</span> <span class="nv">B</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span>}
             (<span class="nv">eA</span> : A&#39; &lt;~&gt; A)
             (<span class="nv">eP</span> : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B (equiv_compose&#39; eA e) &lt;~&gt; P&#39; B e)
             `{HP : RespectsEquivalenceR A P}
  : RespectsEquivalenceR A&#39; P&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A&#39; P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk3d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A&#39; P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk3e"><span class="nb">simple refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _); _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk3f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk3f"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
        P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A&#39; <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;) =&gt; <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk40">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (equiv_compose&#39;
                (eP _ _)
                (equiv_compose&#39;
                   (equiv_compose&#39;
                      (HP.<span class="mi">1</span> _ _)
                      (equiv_inverse (HP.<span class="mi">1</span> _ _)))
                   (equiv_inverse (eP _ _)))).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk41">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
        P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A&#39; <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B (eA oE e) oE (HP.<span class="mi">1</span> A&#39; (eA oE <span class="mi">1</span>))^-<span class="mi">1</span>
       oE (eP A&#39; <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk42">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A&#39; -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eA</var><span class="hyp-type"><b>: </b><span>A&#39; &lt;~&gt; A</span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
P B (eA oE e) &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;),
        P&#39; A&#39; <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A&#39; <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A&#39;) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B (eA oE e) oE (HP.<span class="mi">1</span> A&#39; (eA oE <span class="mi">1</span>))^-<span class="mi">1</span>
       oE (eP A&#39; <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk43"><span class="kn">Definition</span> <span class="nf">respects_equivalenceL_equiv&#39;</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">P&#39;</span> : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>}
             (<span class="nv">eP</span> : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B e &lt;~&gt; P&#39; B e)
             `{HP : RespectsEquivalenceL A P}
  : RespectsEquivalenceL A P&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk44"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk45"><span class="nb">simple refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _); _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk46"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk47">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (equiv_compose&#39;
                (eP _ _)
                (equiv_compose&#39;
                   (equiv_compose&#39;
                      (HP.<span class="mi">1</span> _ _)
                      (equiv_inverse (HP.<span class="mi">1</span> _ _)))
                   (equiv_inverse (eP _ _)))).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk48">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B e oE (HP.<span class="mi">1</span> A <span class="mi">1</span>)^-<span class="mi">1</span> oE (eP A <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk49">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
        P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B e oE (HP.<span class="mi">1</span> A <span class="mi">1</span>)^-<span class="mi">1</span> oE (eP A <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk4a"><span class="kn">Definition</span> <span class="nf">respects_equivalenceR_equiv&#39;</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">P&#39;</span> : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>}
             (<span class="nv">eP</span> : <span class="kr">forall</span> <span class="nv">B</span> <span class="nv">e</span>, P B e &lt;~&gt; P&#39; B e)
             `{HP : RespectsEquivalenceR A P}
  : RespectsEquivalenceR A P&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk4b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A P&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk4c"><span class="nb">simple refine</span> ((<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _); _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk4d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk4d"><hr></label><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; <span class="nl">?Goal</span>)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk4e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (equiv_compose&#39;
                (eP _ _)
                (equiv_compose&#39;
                   (equiv_compose&#39;
                      (HP.<span class="mi">1</span> _ _)
                      (equiv_inverse (HP.<span class="mi">1</span> _ _)))
                   (equiv_inverse (eP _ _)))).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk4f">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B e oE (HP.<span class="mi">1</span> A <span class="mi">1</span>)^-<span class="mi">1</span> oE (eP A <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk50">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>eP</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A), P B e &lt;~&gt; P&#39; B e</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span>
   <span class="nv">e&#39;</span> : <span class="kr">forall</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A),
        P&#39; A <span class="mi">1</span> &lt;~&gt; P&#39; B e =&gt; Funext -&gt; <span class="mi">1</span> = e&#39; A <span class="mi">1</span>)
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   eP B e
   oE (HP.<span class="mi">1</span> B e oE (HP.<span class="mi">1</span> A <span class="mi">1</span>)^-<span class="mi">1</span> oE (eP A <span class="mi">1</span>)^-<span class="mi">1</span>))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">equiv_transfer</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">equiv</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk51">#[export] <span class="kn">Instance</span> <span class="nf">equiv_respects_equivalenceL</span> `{Funext} {A} {P Q : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; <span class="kt">Type</span>}
         `{HP : RespectsEquivalenceL A P}
         `{HQ : RespectsEquivalenceL A Q}
  : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; P B e &lt;~&gt; Q B e).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e &lt;~&gt; Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk52"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e &lt;~&gt; Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk53"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e &lt;~&gt; Q B e) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e &lt;~&gt; Q B e) B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk54" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk54"><hr></label><div class="goal-conclusion"><span class="mi">1</span> = (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; <span class="nl">?Goal</span>) A <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk55">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e &lt;~&gt; Q B e) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e &lt;~&gt; Q B e) B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (equiv_functor_equiv _ _);
      <span class="nb">apply</span> respects_equivalenceL.<span class="mi">1</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk56">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 equiv_functor_equiv (respects_equivalenceL.<span class="mi">1</span> B e)
   (respects_equivalenceL.<span class="mi">1</span> B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk57">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A Q</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 equiv_functor_equiv (respects_equivalenceL.<span class="mi">1</span> B e)
   (respects_equivalenceL.<span class="mi">1</span> B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk58">#[export] <span class="kn">Instance</span> <span class="nf">equiv_respects_equivalenceR</span> `{Funext} {A} {P Q : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; <span class="kt">Type</span>}
         `{HP : RespectsEquivalenceR A P}
         `{HQ : RespectsEquivalenceR A Q}
  : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; P B e &lt;~&gt; Q B e).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e &lt;~&gt; Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk59"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e &lt;~&gt; Q B e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk5a"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e &lt;~&gt; Q B e) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e &lt;~&gt; Q B e) B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk5b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk5b"><hr></label><div class="goal-conclusion"><span class="mi">1</span> = (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; <span class="nl">?Goal</span>) A <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk5c">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e &lt;~&gt; Q B e) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e &lt;~&gt; Q B e) B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (equiv_functor_equiv _ _);
      <span class="nb">apply</span> respects_equivalenceR.<span class="mi">1</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk5d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 equiv_functor_equiv (respects_equivalenceR.<span class="mi">1</span> B e)
   (respects_equivalenceR.<span class="mi">1</span> B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk5e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A P</span></span></span><br><span><var>HQ</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A Q</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 equiv_functor_equiv (respects_equivalenceR.<span class="mi">1</span> B e)
   (respects_equivalenceR.<span class="mi">1</span> B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[export] <span class="kn">Instance</span>: @respects_equivalence_db _ _ (@Equiv) (@equiv_respects_equivalenceL) := tt.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">equiv</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">ap</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk5f">#[export] <span class="kn">Instance</span> <span class="nf">equiv_ap_respects_equivalenceL</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; A}
         `{HP : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)}
  : RespectsEquivalenceL A (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; e (P B e) = e (Q B e)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   e (P B e) = e (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk60"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   e (P B e) = e (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk61"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; e (P B e) = e (Q B e))
  A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; e (P B e) = e (Q B e))
  B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk62" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk62"><hr></label><div class="goal-conclusion"><span class="mi">1</span> = (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; <span class="nl">?Goal</span>) A <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk63">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; e (P B e) = e (Q B e))
  A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; e (P B e) = e (Q B e))
  B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk64"><span class="nb">refine</span> (equiv_ap&#39; _ _ _ oE _); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P A <span class="mi">1</span> = Q A <span class="mi">1</span> &lt;~&gt; P B e = Q B e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (respects_equivalenceL.<span class="mi">1</span> B e).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk65">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 equiv_ap&#39; e (P B e) (Q B e)
 oE (respects_equivalenceL.<span class="mi">1</span> B e
     :
     <span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk66">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 equiv_ap&#39; e (P B e) (Q B e)
 oE (respects_equivalenceL.<span class="mi">1</span> B e
     :
     <span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk67">#[export] <span class="kn">Instance</span> <span class="nf">equiv_ap_inv_respects_equivalenceL</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kr">forall</span> <span class="nv">B</span>, (A &lt;~&gt; B) -&gt; B}
         `{HP : RespectsEquivalenceL A (<span class="kr">fun</span> <span class="nv">B</span> (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)}
  : RespectsEquivalenceL A (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk68"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk69"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk6a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk6a"><hr></label><div class="goal-conclusion"><span class="mi">1</span> = (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; <span class="nl">?Goal</span>) A <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk6b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk6c"><span class="nb">refine</span> (equiv_ap&#39; _ _ _ oE _); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P A <span class="mi">1</span> = Q A <span class="mi">1</span> &lt;~&gt; P B e = Q B e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (respects_equivalenceL.<span class="mi">1</span> B e).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk6d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 equiv_ap&#39; e^-<span class="mi">1</span> (P B e) (Q B e)
 oE (respects_equivalenceL.<span class="mi">1</span> B e
     :
     <span class="mi">1</span>^-<span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span>^-<span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk6e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, A &lt;~&gt; B -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
 equiv_ap&#39; e^-<span class="mi">1</span> (P B e) (Q B e)
 oE (respects_equivalenceL.<span class="mi">1</span> B e
     :
     <span class="mi">1</span>^-<span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span>^-<span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk6f">#[export] <span class="kn">Instance</span> <span class="nf">equiv_ap_respects_equivalenceR</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; B}
         `{HP : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)}
  : RespectsEquivalenceR A (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; e (P B e) = e (Q B e)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   e (P B e) = e (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk70"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   e (P B e) = e (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk71"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; e (P B e) = e (Q B e))
  A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; e (P B e) = e (Q B e))
  B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk72" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk72"><hr></label><div class="goal-conclusion"><span class="mi">1</span> = (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; <span class="nl">?Goal</span>) A <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk73">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; e (P B e) = e (Q B e))
  A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; e (P B e) = e (Q B e))
  B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk74"><span class="nb">refine</span> (equiv_ap&#39; _ _ _ oE _); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P A <span class="mi">1</span> = Q A <span class="mi">1</span> &lt;~&gt; P B e = Q B e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (respects_equivalenceR.<span class="mi">1</span> B e).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk75">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 equiv_ap&#39; e (P B e) (Q B e)
 oE (respects_equivalenceR.<span class="mi">1</span> B e
     :
     <span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk76">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; B</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 equiv_ap&#39; e (P B e) (Q B e)
 oE (respects_equivalenceR.<span class="mi">1</span> B e
     :
     <span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk77">#[export] <span class="kn">Instance</span> <span class="nf">equiv_ap_inv_respects_equivalenceR</span> {<span class="nv">A</span>} {<span class="nv">P</span> <span class="nv">Q</span> : <span class="kr">forall</span> <span class="nv">B</span>, (B &lt;~&gt; A) -&gt; A}
         `{HP : RespectsEquivalenceR A (<span class="kr">fun</span> <span class="nv">B</span> (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)}
  : RespectsEquivalenceR A (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk78"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
   e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk79"><span class="nb">simple refine</span> (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; _; <span class="kr">fun</span> <span class="nv">_</span> =&gt; _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) B e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk7a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk7a"><hr></label><div class="goal-conclusion"><span class="mi">1</span> = (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; <span class="nl">?Goal</span>) A <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk7b">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) A <span class="mi">1</span> &lt;~&gt;
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 e^-<span class="mi">1</span> (P B e) = e^-<span class="mi">1</span> (Q B e)) B e</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk7c"><span class="nb">refine</span> (equiv_ap&#39; _ _ _ oE _); <span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>B &lt;~&gt; A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">P A <span class="mi">1</span> = Q A <span class="mi">1</span> &lt;~&gt; P B e = Q B e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (respects_equivalenceR.<span class="mi">1</span> B e).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk7d">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 equiv_ap&#39; e^-<span class="mi">1</span> (P B e) (Q B e)
 oE (respects_equivalenceR.<span class="mi">1</span> B e
     :
     <span class="mi">1</span>^-<span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span>^-<span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk7e">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, B &lt;~&gt; A -&gt; A</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>RespectsEquivalenceR A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt; P B e = Q B e)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="mi">1</span> =
(<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : B &lt;~&gt; A) =&gt;
 equiv_ap&#39; e^-<span class="mi">1</span> (P B e) (Q B e)
 oE (respects_equivalenceR.<span class="mi">1</span> B e
     :
     <span class="mi">1</span>^-<span class="mi">1</span> (P A <span class="mi">1</span>) = <span class="mi">1</span>^-<span class="mi">1</span> (Q A <span class="mi">1</span>) &lt;~&gt; P B e = Q B e)) A
  <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">t.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">ap</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** We now write the tactic that partially solves the respectfulness side-condition.  We include cases for generic typeclass resolution, keys (heads) with zero, one, two, and three arguments, and a few cases that cannot be easily keyed (where the head is one of the arguments, or [forall]), or the head is [paths], for which we have only ad-hoc solutions at the moment. *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">step_respects_equiv</span> :=
  <span class="kp">idtac</span>;
  <span class="kr">match goal with</span>
    | _ =&gt; <span class="kp">progress</span> <span class="nb">intros</span>
    | _ =&gt; <span class="bp">assumption</span>
    | _ =&gt; <span class="kp">progress</span> <span class="nb">unfold</span> respects_equivalenceL
    | _ =&gt; <span class="kp">progress</span> <span class="nb">cbn</span>
    | _ =&gt; <span class="bp">exact</span> _ <span class="c">(* case for fully solving the side-condition, when possible *)</span>
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; <span class="nl">?T</span>) ] =&gt; rapply (get_lem T)
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; <span class="nl">?T</span> _) ] =&gt; rapply (get_lem T)
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; <span class="nl">?T</span> _ _) ] =&gt; rapply (get_lem T)
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; <span class="nl">?T</span> _ _ _) ] =&gt; rapply (get_lem T)
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_fun e _ = equiv_fun e _) ] =&gt; <span class="nb">refine</span> equiv_ap_respects_equivalenceL
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; equiv_inv e _ = equiv_inv e _) ] =&gt; <span class="nb">refine</span> equiv_ap_inv_respects_equivalenceL
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">B</span> <span class="nv">_</span> =&gt; B) ] =&gt; <span class="nb">refine</span> idmap_respects_equivalenceL
    | [ |- RespectsEquivalenceL _ (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; <span class="kr">forall</span> <span class="nv">_</span>, _) ] =&gt; <span class="nb">refine</span> forall_respects_equivalenceL
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">equiv_induction</span> p :=
  <span class="nb">generalize dependent</span> p;
  <span class="kr">let</span> <span class="nv">p&#39;</span> := <span class="kp">fresh</span> <span class="kr">in</span>
  <span class="nb">intro</span> p&#39;;
    <span class="kr">let</span> <span class="nv">y</span> := <span class="kr">match</span> <span class="kp">type of</span> p&#39; <span class="kr">with</span> <span class="nl">?x</span> &lt;~&gt; <span class="nl">?y</span> =&gt; <span class="kp">constr</span>:(y) <span class="kr">end</span> <span class="kr">in</span>
    <span class="nb">move</span> p&#39; <span class="nb">at top</span>;
      <span class="nb">generalize dependent</span> y;
      <span class="kr">let</span> <span class="nv">P</span> := <span class="kr">match goal with</span> |- <span class="kr">forall</span> <span class="nv">y</span> <span class="nv">p</span>, @<span class="nl">?P</span> y p =&gt; <span class="kp">constr</span>:(P) <span class="kr">end</span> <span class="kr">in</span>
      <span class="c">(* We use [(fun x =&gt; x) _] to block automatic typeclass resolution in the hole for the equivalence respectful proof. *)</span>
      <span class="nb">refine</span> ((<span class="kr">fun</span> <span class="nv">g</span> <span class="nv">H</span> <span class="nv">B</span> <span class="nv">e</span> =&gt; (@respects_equivalenceL _ P H).<span class="mi">1</span> B e g) _ (_ : (<span class="kr">fun</span> <span class="nv">x</span> =&gt; x) _));
        [ <span class="nb">intros</span> | <span class="kp">repeat</span> step_respects_equiv ].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk7f"><span class="kn">Goal</span> <span class="kr">forall</span> `{Funext} A B (e : A &lt;~&gt; B), A -&gt; { y : B &amp; <span class="kr">forall</span> <span class="nv">Q</span>, Contr Q -&gt; ((e^-<span class="mi">1</span> y = e^-<span class="mi">1</span> y) &lt;~&gt; (y = y)) * Q }.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Funext -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B),
A -&gt;
{y : B &amp;
<span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
Contr Q -&gt; (e^-<span class="mi">1</span> y = e^-<span class="mi">1</span> y &lt;~&gt; y = y) * Q}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk80"><span class="nb">intros</span> ? ? ? ? a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>A &lt;~&gt; B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : B &amp;
<span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
Contr Q -&gt; (e^-<span class="mi">1</span> y = e^-<span class="mi">1</span> y &lt;~&gt; y = y) * Q}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk81">equiv_induction e.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : A &amp;
<span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
Contr Q -&gt; (<span class="mi">1</span>^-<span class="mi">1</span> y = <span class="mi">1</span>^-<span class="mi">1</span> y &lt;~&gt; y = y) * Q}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk82" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk82"><hr></label><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   Contr (<span class="nl">?Goal1</span>.<span class="mi">1</span> B e a1))</div></blockquote><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk83" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a2</var><span class="hyp-type"><b>: </b><span>Contr (<span class="nl">?Goal1</span>.<span class="mi">1</span> A <span class="mi">1</span> a1)</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk83"><hr></label><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   e^-<span class="mi">1</span>%function (<span class="nl">?Goal0</span>.<span class="mi">1</span> B e a0) =
   e^-<span class="mi">1</span>%function (<span class="nl">?Goal0</span>.<span class="mi">1</span> B e a0))</div></blockquote><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk84" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a2</var><span class="hyp-type"><b>: </b><span>Contr (<span class="nl">?Goal1</span>.<span class="mi">1</span> A <span class="mi">1</span> a1)</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk84"><hr></label><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt;
   <span class="nl">?Goal0</span>.<span class="mi">1</span> B e a0 = <span class="nl">?Goal0</span>.<span class="mi">1</span> B e a0)</div></blockquote><input class="alectryon-extra-goal-toggle" id="equivalenceinduction-v-chk85" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a, a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>a1</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a2</var><span class="hyp-type"><b>: </b><span>Contr (<span class="nl">?Goal1</span>.<span class="mi">1</span> A <span class="mi">1</span> a1)</span></span></span><br></div><label class="goal-separator" for="equivalenceinduction-v-chk85"><hr></label><div class="goal-conclusion">RespectsEquivalenceL A
  (<span class="kr">fun</span> (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">e</span> : A &lt;~&gt; B) =&gt; <span class="nl">?Goal1</span>.<span class="mi">1</span> B e a1)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk86">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : A &amp;
<span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>,
Contr Q -&gt; (<span class="mi">1</span>^-<span class="mi">1</span> y = <span class="mi">1</span>^-<span class="mi">1</span> y &lt;~&gt; y = y) * Q}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk87"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{y : A &amp;
<span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>, Contr Q -&gt; (y = y &lt;~&gt; y = y) * Q}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk88"><span class="kr">exists</span> <span class="nv">a</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">Q</span> : <span class="kt">Type</span>, Contr Q -&gt; (a = a &lt;~&gt; a = a) * Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="equivalenceinduction-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="equivalenceinduction-v-chk89"><span class="nb">intros</span> Q q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Funext</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>Contr Q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(a = a &lt;~&gt; a = a) * Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="mi">1</span>, center _).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span></span></pre>
</div>
</div></body>
</html>
