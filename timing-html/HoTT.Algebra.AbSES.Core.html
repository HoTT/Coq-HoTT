<html>
<head>
<title>Core.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Core.v</h1>

<div class="code" title="File: Core.v
Line: 1
Time: 0.065s">
<div class="time" style="width: 21.959459459459%"></div>
<pre>From HoTT Require Import Basics Types Truncations.Core.</pre>
</div>
<div class="code" title="File: Core.v
Line: 1
Time: 0.055s">
<div class="time" style="width: 18.581081081081%"></div>
<pre>
Require Import HSet WildCat Pointed.</pre>
</div>
<div class="code" title="File: Core.v
Line: 2
Time: 0.016s">
<div class="time" style="width: 5.4054054054054%"></div>
<pre>
Require Import Groups.QuotientGroup Groups.ShortExactSequence.</pre>
</div>
<div class="code" title="File: Core.v
Line: 3
Time: 0.013s">
<div class="time" style="width: 4.3918918918919%"></div>
<pre>
Require Import AbelianGroup AbGroups.Biproduct AbHom.</pre>
</div>
<div class="code" title="File: Core.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Homotopy.ExactSequence.</pre>
</div>
<div class="code" title="File: Core.v
Line: 5
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Require Import Modalities.ReflectiveSubuniverse.</pre>
</div>
<div class="code" title="File: Core.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope pointed_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope type_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope mc_add_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Short exact sequences of abelian groups *)

(** A short exact sequence of abelian groups consists of a monomorphism [i : A -&gt; E] and an epimorphism [p : E -&gt; B] such that the image of [i] equals the kernel of [p]. Later we will consider short exact sequences up to isomorphism by 0-truncating the type [AbSES] defined below. An isomorphism class of short exact sequences is called an extension. *)

</pre>
</div>
<div class="code" title="File: Core.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Declare Scope abses_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope abses_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The type of short exact sequences [A -&gt; E -&gt; B] of abelian groups. We decorate it with (') to reserve the undecorated name for the structured version. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 19
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>Record AbSES' {B A : AbGroup@{u}} := Build_AbSES {
    middle :  AbGroup@{u};
    inclusion : A $-&gt; middle;
    projection : middle $-&gt; B;
    isembedding_inclusion :: IsEmbedding inclusion;
    issurjection_projection :: IsSurjection projection;
    isexact_inclusion_projection :: IsExact (Tr (-1)) inclusion projection;
  }.</pre>
</div>
<div class="code" title="File: Core.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Given a short exact sequence [A -&gt; E -&gt; B : AbSES B A], we coerce it to [E]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Coercion middle : AbSES' &gt;-&gt; AbGroup.</pre>
</div>
<div class="code" title="File: Core.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments AbSES' B A : clear implicits.</pre>
</div>
<div class="code" title="File: Core.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Build_AbSES {B A}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** TODO Figure out why printing this term eats memory and seems to never finish. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 33
Time: 0.108s">
<div class="time" style="width: 36.486486486486%"></div>
<pre>Local Definition issig_abses_do_not_print {B A : AbGroup} : _ &lt;~&gt; AbSES' B A := ltac:(issig).</pre>
</div>
<div class="code" title="File: Core.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** [make_equiv] is slow if used in the context of the next result, so we give the abstract form of the goal here. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 35
Time: 0.022s">
<div class="time" style="width: 7.4324324324324%"></div>
<pre>Local Definition issig_abses_helper {AG : Type} {P : AG -&gt; Type} {Q : AG -&gt; Type}
      {R : forall E, P E -&gt; Type} {S : forall E, Q E -&gt; Type} {T : forall E, P E -&gt; Q E -&gt; Type}
  : {X : {E : AG &amp; P E * Q E} &amp; R _ (fst X.2) * S _ (snd X.2) * T _ (fst X.2) (snd X.2)}
      &lt;~&gt; {E : AG &amp; {H0 : P E &amp; {H1 : Q E &amp; {_ : R _ H0 &amp; {_ : S _ H1 &amp; T _ H0 H1}}}}}
  := ltac:(make_equiv).</pre>
</div>
<div class="code" title="File: Core.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A more useful organization of [AbSES'] as a sigma-type. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 41
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>Definition issig_abses {B A : AbGroup}
  : {X : {E : AbGroup &amp; (A $-&gt; E) * (E $-&gt; B)} &amp;
           (IsEmbedding (fst X.2)
            * IsSurjection (snd X.2)
            * IsExact (Tr (-1)) (fst X.2) (snd X.2))}
      &lt;~&gt; AbSES' B A
  := issig_abses_do_not_print oE issig_abses_helper.</pre>
</div>
<div class="code" title="File: Core.v
Line: 47
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>

Definition iscomplex_abses {A B : AbGroup} (E : AbSES' B A)
  : IsComplex (inclusion E) (projection E)
  := cx_isexact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** [AbSES' B A] is pointed by the split sequence [A -&gt; A+B -&gt; B]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance ispointed_abses {B A : AbGroup@{u}}
  : IsPointed (AbSES' B A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 55
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>
  rapply (Build_AbSES (ab_biprod A B) ab_biprod_inl ab_biprod_pr2).</pre>
</div>
<div class="code" title="File: Core.v
Line: 56
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  snapply Build_IsExact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 58
Time: 0.006s">
<div class="time" style="width: 2.027027027027%"></div>
<pre> srapply phomotopy_homotopy_hset; reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 59
Time: 0.01s">
<div class="time" style="width: 3.3783783783784%"></div>
<pre> intros [[a b] p]; cbn; cbn in p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 59
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    rapply contr_inhabited_hprop.</pre>
</div>
<div class="code" title="File: Core.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply tr.</pre>
</div>
<div class="code" title="File: Core.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists a.</pre>
</div>
<div class="code" title="File: Core.v
Line: 62
Time: 0.008s">
<div class="time" style="width: 2.7027027027027%"></div>
<pre>
    rapply path_sigma_hprop; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (path_prod' idpath p^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 64
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The pointed type of short exact sequences. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition AbSES (B A : AbGroup@{u}) : pType
  := [AbSES' B A, _].</pre>
</div>
<div class="code" title="File: Core.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Paths in [AbSES B A] *)

</pre>
</div>
<div class="code" title="File: Core.v
Line: 71
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>Definition abses_path_data_iso
  {B A : AbGroup@{u}} (E F : AbSES B A)
  := {phi : GroupIsomorphism E F
            &amp; (phi $o inclusion _ == inclusion _)
              * (projection _ == projection _ $o phi)}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Having the path data in a slightly different form is useful for [equiv_path_abses_iso]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 77
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>Local Lemma shuffle_abses_path_data_iso `{Funext}
  {B A : AbGroup@{u}} (E F : AbSES B A)
  : (abses_path_data_iso E F)
      &lt;~&gt; {phi : GroupIsomorphism E F
                 &amp; (phi $o inclusion _ == inclusion _)
                   * (projection _ $o grp_iso_inverse phi
                      == projection _)}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 83
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 84
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_functor_sigma_id; intro phi.</pre>
</div>
<div class="code" title="File: Core.v
Line: 85
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_functor_prod'.</pre>
</div>
<div class="code" title="File: Core.v
Line: 86
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact equiv_idmap.</pre>
</div>
<div class="code" title="File: Core.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply (equiv_functor_forall' phi^-1); intro e; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_concat_r.</pre>
</div>
<div class="code" title="File: Core.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (ap _ (eisretr _ _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 90
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Paths in [AbSES] correspond to isomorphisms between the [middle]s respecting [inclusion] and [projection]. Below we prove the stronger statement [equiv_path_abses], which uses this result. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Proposition equiv_path_abses_iso `{Univalence}
  {B A : AbGroup@{u}} {E F : AbSES' B A}
  : abses_path_data_iso E F &lt;~&gt; E = F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE shuffle_abses_path_data_iso E F).</pre>
</div>
<div class="code" title="File: Core.v
Line: 97
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  refine (equiv_ap_inv issig_abses _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 98
Time: 0.013s">
<div class="time" style="width: 4.3918918918919%"></div>
<pre>
  refine (equiv_path_sigma_hprop _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_path_sigma _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_functor_sigma'.</pre>
</div>
<div class="code" title="File: Core.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact equiv_path_abgroup.</pre>
</div>
<div class="code" title="File: Core.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro q; lazy beta.</pre>
</div>
<div class="code" title="File: Core.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snrefine (equiv_concat_l _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (q $o inclusion _, projection _ $o grp_iso_inverse q).</pre>
</div>
<div class="code" title="File: Core.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2: {</pre>
</div>
<div class="code" title="File: Core.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (equiv_path_prod _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
       exact (equiv_functor_prod'
                equiv_path_grouphomomorphism
                equiv_path_grouphomomorphism).</pre>
</div>
<div class="code" title="File: Core.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Core.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (transport_prod _ _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply path_prod'.</pre>
</div>
<div class="code" title="File: Core.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply transport_iso_abgrouphomomorphism_from_const.</pre>
</div>
<div class="code" title="File: Core.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply transport_iso_abgrouphomomorphism_to_const.</pre>
</div>
<div class="code" title="File: Core.v
Line: 113
Time: 0.008s">
<div class="time" style="width: 2.7027027027027%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It follows that [AbSES B A] is 1-truncated. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance istrunc_abses `{Univalence} {B A : AbGroup@{u}}
  : IsTrunc 1 (AbSES B A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply istrunc_S.</pre>
</div>
<div class="code" title="File: Core.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros E F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 120
Time: 0.04s">
<div class="time" style="width: 13.513513513514%"></div>
<pre>
  refine (istrunc_equiv_istrunc _ equiv_path_abses_iso (n:=0)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 121
Time: 0.064s">
<div class="time" style="width: 21.621621621622%"></div>
<pre>
  rapply istrunc_sigma.</pre>
</div>
<div class="code" title="File: Core.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact ishset_groupisomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 123
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 124
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>

Definition path_abses_iso `{Univalence} {B A : AbGroup@{u}}
  {E F : AbSES B A}
  (phi : GroupIsomorphism E F) (p : phi $o inclusion _ == inclusion _)
  (q : projection _ == projection _ $o phi)
  : E = F := equiv_path_abses_iso (phi; (p,q)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Given [p] and [q], the map [phi] just above is automatically an isomorphism. Showing this requires the "short five lemma." *)

(** A special case of the "short 5-lemma" where the two outer maps are (definitionally) identities. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 134
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>Lemma short_five_lemma {B A : AbGroup@{u}}
  {E F : AbSES B A} (phi : Hom (A:=AbGroup) E F)
  (p0 : phi $o inclusion E == inclusion F) (p1 : projection E == projection F $o phi)
  : IsEquiv phi.</pre>
</div>
<div class="code" title="File: Core.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isequiv_surj_emb.</pre>
</div>
<div class="code" title="File: Core.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro f.</pre>
</div>
<div class="code" title="File: Core.v
Line: 140
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    rapply contr_inhabited_hprop.</pre>
</div>
<div class="code" title="File: Core.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** Since [projection E] is epi, we can pull [projection F f] back to [e0 : E].*)
   </pre>
</div>
<div class="code" title="File: Core.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>assert (e0 : Tr (-1) (hfiber (projection E) (projection F f))).</pre>
</div>
<div class="code" title="File: Core.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply center, issurjection_projection.</pre>
</div>
<div class="code" title="File: Core.v
Line: 144
Time: 0.013s">
<div class="time" style="width: 4.3918918918919%"></div>
<pre>
    strip_truncations.</pre>
</div>
<div class="code" title="File: Core.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** The difference [f - (phi e0.1)] is sent to [0] by [projection F], hence lies in [A]. *)
   </pre>
</div>
<div class="code" title="File: Core.v
Line: 147
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>assert (a : Tr (-1) (hfiber (inclusion F) (f - phi e0.1))).</pre>
</div>
<div class="code" title="File: Core.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: {</pre>
</div>
<div class="code" title="File: Core.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (isexact_preimage (Tr (-1)) (inclusion F) (projection F) _ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
         refine (grp_homo_op _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
         refine (ap _ (grp_homo_inv _ _) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 150
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
         apply (grp_moveL_1M)^-1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
         exact (e0.2^ @ p1 e0.1).</pre>
</div>
<div class="code" title="File: Core.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Core.v
Line: 152
Time: 0.013s">
<div class="time" style="width: 4.3918918918919%"></div>
<pre>
    strip_truncations.</pre>
</div>
<div class="code" title="File: Core.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (tr (inclusion E a.1 + e0.1; _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (grp_homo_op _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (ap (fun x =&gt; x + phi e0.1) (p0 a.1 @ a.2) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine ((grp_assoc _ _ _)^ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (ap _ (left_inverse (phi e0.1)) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply grp_unit_r.</pre>
</div>
<div class="code" title="File: Core.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply isembedding_istrivial_kernel.</pre>
</div>
<div class="code" title="File: Core.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros e p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    assert (a : Tr (-1) (hfiber (inclusion E) e)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: {</pre>
</div>
<div class="code" title="File: Core.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (isexact_preimage _ (inclusion E) (projection E) _ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
         exact (p1 e @ ap (projection F) p @ grp_homo_unit _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Core.v
Line: 164
Time: 0.032s">
<div class="time" style="width: 10.810810810811%"></div>
<pre>
    strip_truncations.</pre>
</div>
<div class="code" title="File: Core.v
Line: 165
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    refine (a.2^ @ ap (inclusion E ) _ @ grp_homo_unit (inclusion E)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 166
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    rapply (isinj_embedding (inclusion F) _ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 167
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    exact ((p0 a.1)^ @ (ap phi a.2) @ p @ (grp_homo_unit _)^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 168
Time: 0.006s">
<div class="time" style="width: 2.027027027027%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Below we prove that homomorphisms respecting [projection] and [inclusion] correspond to paths in [AbSES B A]. We refer to such homomorphisms simply as path data in [AbSES B A]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 171
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>Definition abses_path_data {B A : AbGroup@{u}} (E F : AbSES B A)
  := {phi : Hom (A:=AbGroup) E F
            &amp; (phi $o inclusion _ == inclusion _)
              * (projection _ == projection _ $o phi)}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition abses_path_data_to_iso {B A : AbGroup@{u}} (E F: AbSES B A)
  : abses_path_data E F -&gt; abses_path_data_iso E F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [phi [p q]].</pre>
</div>
<div class="code" title="File: Core.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact ({| grp_iso_homo := phi; isequiv_group_iso := short_five_lemma phi p q |}; (p, q)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 180
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Proposition equiv_path_abses_data `{Funext} {B A : AbGroup@{u}} (E F: AbSES B A)
  : abses_path_data E F &lt;~&gt; abses_path_data_iso E F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_adjointify.</pre>
</div>
<div class="code" title="File: Core.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply abses_path_data_to_iso.</pre>
</div>
<div class="code" title="File: Core.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> srapply (functor_sigma (grp_iso_homo _ _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (fun _ =&gt; idmap).</pre>
</div>
<div class="code" title="File: Core.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [phi [p q]].</pre>
</div>
<div class="code" title="File: Core.v
Line: 190
Time: 0.025s">
<div class="time" style="width: 8.4459459459459%"></div>
<pre>
    apply path_sigma_hprop.</pre>
</div>
<div class="code" title="File: Core.v
Line: 191
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
    by apply equiv_path_groupisomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 193
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 194
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>

Definition equiv_path_abses `{Univalence} {B A : AbGroup@{u}} {E F : AbSES B A}
  : abses_path_data E F &lt;~&gt; E = F
  := equiv_path_abses_iso oE equiv_path_abses_data E F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 198
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>

Definition path_abses `{Univalence} {B A : AbGroup@{u}}
  {E F : AbSES B A} (phi : middle E $-&gt; F)
  (p : phi $o inclusion _ == inclusion _) (q : projection _ == projection _ $o phi)
  : E = F := equiv_path_abses (phi; (p,q)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** The wildcat of short exact sequences *)

</pre>
</div>
<div class="code" title="File: Core.v
Line: 206
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>Instance isgraph_abses_path_data {A B : AbGroup@{u}} (E F : AbSES B A)
  : IsGraph (abses_path_data_iso E F)
  := isgraph_induced (grp_iso_homo _ _ o pr1).</pre>
</div>
<div class="code" title="File: Core.v
Line: 208
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>

Instance is01cat_abses_path_data {A B : AbGroup@{u}} (E F : AbSES B A)
  : Is01Cat (abses_path_data_iso E F)
  := is01cat_induced (grp_iso_homo _ _ o pr1).</pre>
</div>
<div class="code" title="File: Core.v
Line: 212
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>

Instance is0gpd_abses_path_data {A B : AbGroup@{u}} (E F : AbSES B A)
  : Is0Gpd (abses_path_data_iso E F)
  := is0gpd_induced (grp_iso_homo _ _ o pr1).</pre>
</div>
<div class="code" title="File: Core.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance isgraph_abses {A B : AbGroup@{u}} : IsGraph (AbSES B A)
  := Build_IsGraph _ abses_path_data_iso.</pre>
</div>
<div class="code" title="File: Core.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The path data corresponding to [idpath]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 221
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Definition abses_path_data_1 {B A : AbGroup@{u}} (E : AbSES B A)
  : E $-&gt; E := (grp_iso_id; (fun _ =&gt; idpath, fun _ =&gt; idpath)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** We can compose path data in [AbSES B A]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 224
Time: 0.018s">
<div class="time" style="width: 6.0810810810811%"></div>
<pre>Definition abses_path_data_compose {B A : AbGroup@{u}} {E F G : AbSES B A}
           (p : E $-&gt; F) (q : F $-&gt; G) : E $-&gt; G
  := (q.1 $oE p.1; ((fun x =&gt; ap q.1 (fst p.2 x) @ fst q.2 x),
                     (fun x =&gt; snd p.2 x @ snd q.2 (p.1 x)))).</pre>
</div>
<div class="code" title="File: Core.v
Line: 227
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>

Instance is01cat_abses {A B : AbGroup@{u}}
  : Is01Cat (AbSES B A)
  := Build_Is01Cat _ _ abses_path_data_1
       (fun _ _ _ q p =&gt; abses_path_data_compose p q).</pre>
</div>
<div class="code" title="File: Core.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition abses_path_data_inverse
  {B A : AbGroup@{u}} {E F : AbSES B A}
  : (E $-&gt; F) -&gt; (F $-&gt; E).</pre>
</div>
<div class="code" title="File: Core.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros [phi [p q]].</pre>
</div>
<div class="code" title="File: Core.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srefine (_; (_,_)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (grp_iso_inverse phi).</pre>
</div>
<div class="code" title="File: Core.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro a.</pre>
</div>
<div class="code" title="File: Core.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (ap _ (p a)^ @ eissect _ (inclusion E a)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro a; simpl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (ap (projection F) (eisretr _ _)^ @ (q _)^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 244
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance is0gpd_abses
  {A B : AbGroup@{u}} : Is0Gpd (AbSES B A)
  := {| gpd_rev := fun _ _ =&gt; abses_path_data_inverse |}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance is2graph_abses
  {A B : AbGroup@{u}} : Is2Graph (AbSES B A)
  := fun E F =&gt; isgraph_abses_path_data E F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** [AbSES B A] forms a 1Cat *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance is1cat_abses {A B : AbGroup@{u}}
  : Is1Cat (AbSES B A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 257
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  snapply Build_Is1Cat'.</pre>
</div>
<div class="code" title="File: Core.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: intros ? ?; apply is01cat_abses_path_data.</pre>
</div>
<div class="code" title="File: Core.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: intros ? ?; apply is0gpd_abses_path_data.</pre>
</div>
<div class="code" title="File: Core.v
Line: 260
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>
  3-5: cbn; reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 261
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  1,2: intros E F G f;
  srapply Build_Is0Functor;
  intros p q h e; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (ap f.1 (h e)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (h (f.1 e)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 266
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance is1gpd_abses {A B : AbGroup@{u}}
  : Is1Gpd (AbSES B A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 271
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  rapply Build_Is1Gpd;
    intros E F p e; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply eissect.</pre>
</div>
<div class="code" title="File: Core.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 275
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply eisretr.</pre>
</div>
<div class="code" title="File: Core.v
Line: 275
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance hasmorext_abses `{Funext} {A B : AbGroup@{u}}
  : HasMorExt (AbSES B A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros E F f g.</pre>
</div>
<div class="code" title="File: Core.v
Line: 281
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  srapply isequiv_homotopic'; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 282
Time: 0.023s">
<div class="time" style="width: 7.7702702702703%"></div>
<pre>
  1: exact (((equiv_path_groupisomorphism _ _)^-1%equiv)
              oE (equiv_path_sigma_hprop _ _)^-1%equiv).</pre>
</div>
<div class="code" title="File: Core.v
Line: 284
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  intro p; by induction p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 285
Time: 0.008s">
<div class="time" style="width: 2.7027027027027%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 286
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Path data lemmas *)

(** We need to be able to work with path data as if they're paths. Our preference is to state things in terms of [abses_path_data_iso], since this lets us keep track of isomorphisms whose inverses compute. The "abstract" inverses produced by [short_five_lemma] do not compute well. *)

</pre>
</div>
<div class="code" title="File: Core.v
Line: 291
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_path_abses_1 `{Univalence} {B A : AbGroup@{u}} {E : AbSES B A}
  : equiv_path_abses_iso (abses_path_data_1 E) = idpath.</pre>
</div>
<div class="code" title="File: Core.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply (equiv_ap_inv' equiv_path_abses_iso).</pre>
</div>
<div class="code" title="File: Core.v
Line: 294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (eissect _ _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 295
Time: 0.044s">
<div class="time" style="width: 14.864864864865%"></div>
<pre>
  srapply path_sigma_hprop; simpl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_path_groupisomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 298
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 299
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>

Definition equiv_path_absesV_1 `{Univalence} {B A : AbGroup@{u}} {E : AbSES B A}
  : (@equiv_path_abses_iso _ B A E E)^-1 idpath = Id E.</pre>
</div>
<div class="code" title="File: Core.v
Line: 302
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 303
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  apply moveR_equiv_M; symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 304
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  apply equiv_path_abses_1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 305
Time: 0.014s">
<div class="time" style="width: 4.7297297297297%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 306
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>

Definition abses_path_data_V `{Univalence} {B A : AbGroup@{u}} {E F : AbSES B A}
           (p : abses_path_data_iso E F)
  : (equiv_path_abses_iso p)^ = equiv_path_abses_iso (abses_path_data_inverse p).</pre>
</div>
<div class="code" title="File: Core.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 311
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 312
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
  equiv_intro (equiv_path_abses_iso (E:=E) (F:=F))^-1 p; induction p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 313
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (ap _ (eisretr _ _) @ _); symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 314
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  nrefine (ap (equiv_path_abses_iso o abses_path_data_inverse) equiv_path_absesV_1 @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 315
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  refine (ap equiv_path_abses_iso gpd_strong_rev_1 @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 316
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact equiv_path_abses_1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 317
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 318
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Composition of path data corresponds to composition of paths. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 320
Time: 0.009s">
<div class="time" style="width: 3.0405405405405%"></div>
<pre>Definition abses_path_compose_beta `{Univalence} {B A : AbGroup@{u}} {E F G : AbSES B A}
          (p : E = F) (q : F = G)
 : p @ q = equiv_path_abses_iso
             (abses_path_data_compose
                (equiv_path_abses_iso^-1 p) (equiv_path_abses_iso^-1 q)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 325
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction p, q.</pre>
</div>
<div class="code" title="File: Core.v
Line: 326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_path_abses_1^ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply (ap equiv_path_abses_iso).</pre>
</div>
<div class="code" title="File: Core.v
Line: 328
Time: 0.043s">
<div class="time" style="width: 14.527027027027%"></div>
<pre>
  apply path_sigma_hprop.</pre>
</div>
<div class="code" title="File: Core.v
Line: 329
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  by apply equiv_path_groupisomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 330
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A second beta-principle where you start with path data instead of actual paths. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 333
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Definition abses_path_data_compose_beta `{Univalence} {B A : AbGroup@{u}} {E F G : AbSES B A}
           (p : abses_path_data_iso E F) (q : abses_path_data_iso F G)
  : equiv_path_abses_iso p @ equiv_path_abses_iso q
    = equiv_path_abses_iso (abses_path_data_compose p q).</pre>
</div>
<div class="code" title="File: Core.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 337
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  generalize p, q.</pre>
</div>
<div class="code" title="File: Core.v
Line: 338
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
  equiv_intro ((equiv_path_abses_iso (E:=E) (F:=F))^-1) x.</pre>
</div>
<div class="code" title="File: Core.v
Line: 339
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
  equiv_intro ((equiv_path_abses_iso (E:=F) (F:=G))^-1) y.</pre>
</div>
<div class="code" title="File: Core.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine ((eisretr _ _ @@ eisretr _ _) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 341
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rapply abses_path_compose_beta.</pre>
</div>
<div class="code" title="File: Core.v
Line: 342
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 343
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Homotopies of path data *)

</pre>
</div>
<div class="code" title="File: Core.v
Line: 346
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Definition equiv_path_data_homotopy `{Univalence} {X : Type} {B A : AbGroup@{u}}
           (f g : X -&gt; AbSES B A) : (f $=&gt; g) &lt;~&gt; f == g.</pre>
</div>
<div class="code" title="File: Core.v
Line: 347
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 348
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_functor_forall_id; intro x; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 349
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact equiv_path_abses_iso.</pre>
</div>
<div class="code" title="File: Core.v
Line: 350
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 351
Time: 0.007s">
<div class="time" style="width: 2.3648648648649%"></div>
<pre>

Definition pmap_abses_const {B' A' B A : AbGroup@{u}} : AbSES B A --&gt;* AbSES B' A'
  := Build_BasepointPreservingFunctor (const pt) (Id pt).</pre>
</div>
<div class="code" title="File: Core.v
Line: 354
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>

Definition to_pointed `{Univalence} {B' A' B A : AbGroup@{u}}
  : (AbSES B A --&gt;* AbSES B' A') -&gt; (AbSES B A -&gt;* AbSES B' A')
  := fun f =&gt; Build_pMap f (equiv_path_abses_iso (bp_pointed f)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 358
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma pmap_abses_const_to_pointed `{Univalence} {B' A' B A : AbGroup@{u}}
  : pconst ==* to_pointed (@pmap_abses_const B' A' B A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 362
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Core.v
Line: 363
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 364
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply moveL_pV.</pre>
</div>
<div class="code" title="File: Core.v
Line: 365
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  refine (concat_1p _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 366
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  exact equiv_path_abses_1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 367
Time: 0.007s">
<div class="time" style="width: 2.3648648648649%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 368
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>

Lemma abses_ap_fmap `{Univalence} {B0 B1 A0 A1 : AbGroup@{u}}
      (f : AbSES B0 A0 -&gt; AbSES B1 A1) `{!Is0Functor f, !Is1Functor f}
      {E F : AbSES B0 A0} (p : E $== F)
  : ap f (equiv_path_abses_iso p) = equiv_path_abses_iso (fmap f p).</pre>
</div>
<div class="code" title="File: Core.v
Line: 373
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 374
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 375
Time: 0.02s">
<div class="time" style="width: 6.7567567567568%"></div>
<pre>
  apply (equiv_ind equiv_path_abses_iso^-1%equiv);
    intro p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 377
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (ap (ap f) (eisretr _ _) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 379
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  nrefine (_ @ ap equiv_path_abses_iso _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2: {</pre>
</div>
<div class="code" title="File: Core.v
Line: 381
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre> tapply path_hom.</pre>
</div>
<div class="code" title="File: Core.v
Line: 381
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
       srefine (_ $@ fmap2 _ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 382
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
       2: exact (Id E).</pre>
</div>
<div class="code" title="File: Core.v
Line: 383
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
       2: intro x; reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 384
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
       exact (fmap_id f _)^$.</pre>
</div>
<div class="code" title="File: Core.v
Line: 385
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Core.v
Line: 385
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact equiv_path_abses_1^.</pre>
</div>
<div class="code" title="File: Core.v
Line: 386
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 387
Time: 0.007s">
<div class="time" style="width: 2.3648648648649%"></div>
<pre>

Definition to_pointed_compose `{Univalence} {B0 B1 B2 A0 A1 A2 : AbGroup@{u}}
           (f : AbSES B0 A0 --&gt;* AbSES B1 A1) (g : AbSES B1 A1 --&gt;* AbSES B2 A2)
           `{!Is1Functor f, !Is1Functor g}
  : to_pointed g o* to_pointed f ==* to_pointed (g $o* f).</pre>
</div>
<div class="code" title="File: Core.v
Line: 392
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 393
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Core.v
Line: 394
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 395
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  lazy beta.</pre>
</div>
<div class="code" title="File: Core.v
Line: 396
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  napply moveL_pV.</pre>
</div>
<div class="code" title="File: Core.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  nrefine (concat_1p _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 398
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold pmap_compose, Build_pMap, pointed_fun, point_eq, dpoint_eq.</pre>
</div>
<div class="code" title="File: Core.v
Line: 399
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  refine (_ @ ap (fun x =&gt; x @ _) _^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 400
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  2: apply (abses_ap_fmap g).</pre>
</div>
<div class="code" title="File: Core.v
Line: 401
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  nrefine (_ @ (abses_path_data_compose_beta _ _)^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 402
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  napply (ap equiv_path_abses_iso).</pre>
</div>
<div class="code" title="File: Core.v
Line: 403
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  tapply path_hom.</pre>
</div>
<div class="code" title="File: Core.v
Line: 404
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 405
Time: 0.042s">
<div class="time" style="width: 14.189189189189%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 406
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>

Definition equiv_ptransformation_phomotopy `{Univalence} {B' A' B A : AbGroup@{u}}
           {f g : AbSES B A --&gt;* AbSES B' A'}
  : f $=&gt;* g &lt;~&gt; to_pointed f ==* to_pointed g.</pre>
</div>
<div class="code" title="File: Core.v
Line: 410
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 411
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (issig_pforall _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 412
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  apply (equiv_functor_sigma' (equiv_path_data_homotopy f g)); intro h.</pre>
</div>
<div class="code" title="File: Core.v
Line: 413
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_concat_r _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 414
Time: 0.009s">
<div class="time" style="width: 3.0405405405405%"></div>
<pre>
  1: exact ((abses_path_data_compose_beta _ _)^ @ ap (fun x =&gt; _ @ x) (abses_path_data_V _)^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 415
Time: 0.009s">
<div class="time" style="width: 3.0405405405405%"></div>
<pre>
  refine (equiv_ap' equiv_path_abses_iso _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 416
Time: 0.036s">
<div class="time" style="width: 12.162162162162%"></div>
<pre>
  refine (equiv_path_sigma_hprop _ _ oE _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 417
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>
  apply equiv_path_groupisomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 418
Time: 0.045s">
<div class="time" style="width: 15.202702702703%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 419
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Characterisation of loops of short exact sequences *)

(** Endomorphisms of the trivial short exact sequence in [AbSES B A] correspond to homomorphisms [B -&gt; A]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 423
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>Lemma abses_endomorphism_trivial `{Funext} {B A : AbGroup@{u}}
  : {phi : GroupHomomorphism (point (AbSES B A)) (point (AbSES B A)) &amp;
             (phi o inclusion _ == inclusion _)
             * (projection _ == projection _ o phi)}
      &lt;~&gt; (B $-&gt; A).</pre>
</div>
<div class="code" title="File: Core.v
Line: 427
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 428
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_adjointify.</pre>
</div>
<div class="code" title="File: Core.v
Line: 429
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 430
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [phi _].</pre>
</div>
<div class="code" title="File: Core.v
Line: 430
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    exact (ab_biprod_pr1 $o phi $o ab_biprod_inr).</pre>
</div>
<div class="code" title="File: Core.v
Line: 431
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 432
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro f.</pre>
</div>
<div class="code" title="File: Core.v
Line: 432
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    snrefine (_;_).</pre>
</div>
<div class="code" title="File: Core.v
Line: 433
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 434
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (ab_biprod_rec ab_biprod_inl _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 434
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (ab_biprod_corec f grp_homo_id).</pre>
</div>
<div class="code" title="File: Core.v
Line: 435
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 436
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre> split; intro x; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 436
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      *</pre>
</div>
<div class="code" title="File: Core.v
Line: 437
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply path_prod; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 437
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        --</pre>
</div>
<div class="code" title="File: Core.v
Line: 438
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre> exact (ap _ (grp_homo_unit f) @ right_identity _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 438
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        --</pre>
</div>
<div class="code" title="File: Core.v
Line: 439
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre> exact (right_identity _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 439
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      *</pre>
</div>
<div class="code" title="File: Core.v
Line: 440
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre> exact (left_identity _)^.</pre>
</div>
<div class="code" title="File: Core.v
Line: 440
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 441
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro f.</pre>
</div>
<div class="code" title="File: Core.v
Line: 441
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    rapply equiv_path_grouphomomorphism; intro b; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 442
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    exact (left_identity _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 443
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 444
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre> intros [phi [p q]].</pre>
</div>
<div class="code" title="File: Core.v
Line: 444
Time: 0.06s">
<div class="time" style="width: 20.27027027027%"></div>
<pre>
    apply path_sigma_hprop; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 445
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
    rapply equiv_path_grouphomomorphism; intros [a b]; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 446
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply path_prod; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 447
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 448
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite (grp_prod_decompose a b).</pre>
</div>
<div class="code" title="File: Core.v
Line: 448
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
      refine (_ @ (grp_homo_op (ab_biprod_pr1 $o phi) _ _)^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 449
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
      apply grp_cancelR; symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 450
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (ap fst (p a)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 451
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 452
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite (grp_prod_decompose a b).</pre>
</div>
<div class="code" title="File: Core.v
Line: 452
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
      refine (_ @ (grp_homo_op (ab_biprod_pr2 $o phi) _ _)^); cbn; symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 453
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
      exact (ap011 _ (ap snd (p a)) (q (group_unit, b))^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 454
Time: 0.058s">
<div class="time" style="width: 19.594594594595%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 455
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Consequently, the loop space of [AbSES B A] is [GroupHomomorphism B A]. (In fact, [B $-&gt; A] are the loops of any short exact sequence, but the trivial case is easiest to show.) *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 457
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>Definition loops_abses `{Univalence} {A B : AbGroup}
  : (B $-&gt; A) &lt;~&gt; loops (AbSES B A)
  := equiv_path_abses oE abses_endomorphism_trivial^-1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 459
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** We can transfer a loop of the trivial short exact sequence to any other. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 461
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition hom_loops_data_abses {A B : AbGroup} (E : AbSES B A)
  : (B $-&gt; A) -&gt; abses_path_data E E.</pre>
</div>
<div class="code" title="File: Core.v
Line: 462
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 463
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro phi.</pre>
</div>
<div class="code" title="File: Core.v
Line: 464
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srefine (_; (_, _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 465
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 466
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (grp_homo_id + (inclusion E $o phi $o projection E)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 466
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 467
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro a; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 467
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (ap (fun x =&gt; _ + inclusion E (phi x)) _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 468
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply iscomplex_abses.</pre>
</div>
<div class="code" title="File: Core.v
Line: 469
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    refine (ap (fun x =&gt; _ + x) (grp_homo_unit (inclusion E $o phi)) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 470
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply grp_unit_r.</pre>
</div>
<div class="code" title="File: Core.v
Line: 471
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 472
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro e; symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 472
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (grp_homo_op (projection E) _ _ @ _); cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 473
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (ap (fun x =&gt; _ + x) _ @  _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 474
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply iscomplex_abses.</pre>
</div>
<div class="code" title="File: Core.v
Line: 475
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply grp_unit_r.</pre>
</div>
<div class="code" title="File: Core.v
Line: 476
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 477
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Morphisms of short exact sequences *)

(** A morphism between short exact sequences is a natural transformation between the underlying diagrams. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 481
Time: 0.006s">
<div class="time" style="width: 2.027027027027%"></div>
<pre>Record AbSESMorphism {A X B Y : AbGroup@{u}}
  {E : AbSES B A} {F : AbSES Y X} := {
    component1 : A $-&gt; X;
    component2 : middle E $-&gt; middle F;
    component3 : B $-&gt; Y;
    left_square : (inclusion _) $o component1 == component2 $o (inclusion _);
    right_square : (projection _) $o component2 == component3 $o (projection _);
  }.</pre>
</div>
<div class="code" title="File: Core.v
Line: 488
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments AbSESMorphism {A X B Y} E F.</pre>
</div>
<div class="code" title="File: Core.v
Line: 490
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Build_AbSESMorphism {_ _ _ _ _ _} _ _ _ _ _.</pre>
</div>
<div class="code" title="File: Core.v
Line: 491
Time: 0.065s">
<div class="time" style="width: 21.959459459459%"></div>
<pre>

Definition issig_AbSESMorphism {A X B Y : AbGroup@{u}}
           {E : AbSES B A} {F : AbSES Y X}
  : { f : (A $-&gt; X) * (middle E $-&gt; middle F) * (B $-&gt; Y)
          &amp; ((inclusion _) $o (fst (fst f)) == (snd (fst f)) $o (inclusion _))
            * ((projection F) $o (snd (fst f)) == (snd f) $o (projection _)) }
      &lt;~&gt; AbSESMorphism E F := ltac:(make_equiv).</pre>
</div>
<div class="code" title="File: Core.v
Line: 498
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The identity morphism from [E] to [E]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 500
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma abses_morphism_id {A B : AbGroup@{u}} (E : AbSES B A)
  : AbSESMorphism E E.</pre>
</div>
<div class="code" title="File: Core.v
Line: 501
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 502
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply (Build_AbSESMorphism grp_homo_id grp_homo_id grp_homo_id).</pre>
</div>
<div class="code" title="File: Core.v
Line: 503
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  1,2: reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 504
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 505
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition absesmorphism_compose {A0 A1 A2 B0 B1 B2 : AbGroup@{u}}
           {E : AbSES B0 A0} {F : AbSES B1 A1} {G : AbSES B2 A2}
           (g : AbSESMorphism F G) (f : AbSESMorphism E F)
  : AbSESMorphism E G.</pre>
</div>
<div class="code" title="File: Core.v
Line: 510
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 511
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  rapply (Build_AbSESMorphism (component1 g $o component1 f)
                              (component2 g $o component2 f)
                              (component3 g $o component3 f)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 514
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 515
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro x; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 515
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (left_square g _ @ ap _ (left_square f _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 516
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 517
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro x; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 517
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (right_square g _ @ ap _ (right_square f _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 518
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 519
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Characterization of split short exact sequences *)

(* We characterize trivial short exact sequences in [AbSES] as those for which [projection] splits. *)

(** If [projection E] splits, we get an induced map [fun e =&gt; e - s (projection E e)] from [E] to [ab_kernel (projection E)]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 525
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Definition projection_split_to_kernel {B A : AbGroup} (E : AbSES B A)
           {s : B $-&gt; E} (h : projection _ $o s == idmap)
  : (middle E) $-&gt; (@ab_kernel E B (projection _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 527
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 528
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  snapply (grp_kernel_corec (G:=E) (A:=E)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 529
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 530
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (grp_homo_id - (s $o projection _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 530
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 531
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro x; simpl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 531
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (grp_homo_op (projection _) x _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 532
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    refine (ap (fun y =&gt; (projection _) x + y) _ @ right_inverse ((projection _) x)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 533
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (grp_homo_inv _ _ @ ap (-) _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 534
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply h.</pre>
</div>
<div class="code" title="File: Core.v
Line: 535
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 536
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The composite [A -&gt; E -&gt; ab_kernel (projection E)] is [grp_cxfib]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 538
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>Lemma projection_split_to_kernel_beta {B A : AbGroup} (E : AbSES B A)
      {s : B $-&gt; E} (h : (projection _) $o s == idmap)
  : (projection_split_to_kernel E h) $o (inclusion _) == grp_cxfib cx_isexact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 540
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 541
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro a.</pre>
</div>
<div class="code" title="File: Core.v
Line: 542
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
  apply path_sigma_hprop; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 543
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply grp_cancelL1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 544
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (ap (fun x =&gt; - s x) _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 545
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: tapply cx_isexact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 546
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (ap _ (grp_homo_unit _) @ grp_inv_unit).</pre>
</div>
<div class="code" title="File: Core.v
Line: 547
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 548
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The induced map [E -&gt; ab_kernel (projection E) + B] is an isomorphism. We suffix it with 1 since it is the first composite in the desired isomorphism [E -&gt; A + B]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 550
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Definition projection_split_iso1 {B A : AbGroup} (E : AbSES B A)
           {s : GroupHomomorphism B E} (h : (projection _) $o s == idmap)
  : GroupIsomorphism E (ab_biprod (@ab_kernel E B (projection _)) B).</pre>
</div>
<div class="code" title="File: Core.v
Line: 552
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 553
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
  srapply Build_GroupIsomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 554
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 555
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (ab_biprod_corec _ (projection _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 555
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (projection_split_to_kernel E h).</pre>
</div>
<div class="code" title="File: Core.v
Line: 556
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 557
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> srapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: Core.v
Line: 557
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 558
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (ab_biprod_rec _ s).</pre>
</div>
<div class="code" title="File: Core.v
Line: 558
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      rapply subgroup_incl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 559
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 560
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre> intros [a b]; simpl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 560
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply path_prod'.</pre>
</div>
<div class="code" title="File: Core.v
Line: 561
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      *</pre>
</div>
<div class="code" title="File: Core.v
Line: 562
Time: 0.009s">
<div class="time" style="width: 3.0405405405405%"></div>
<pre> srapply path_sigma_hprop; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 562
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
        refine ((associativity _ _ _)^ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 563
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        apply grp_cancelL1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 564
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (ap _ _ @ right_inverse _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 565
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        apply (ap negate).</pre>
</div>
<div class="code" title="File: Core.v
Line: 566
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        apply (ap s).</pre>
</div>
<div class="code" title="File: Core.v
Line: 567
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (grp_homo_op (projection _) a.1 (s b) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 568
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
        exact (ap (fun y =&gt; y + _) a.2 @ left_identity _ @ h b).</pre>
</div>
<div class="code" title="File: Core.v
Line: 569
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      *</pre>
</div>
<div class="code" title="File: Core.v
Line: 570
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (grp_homo_op (projection _) a.1 (s b) @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 570
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
        exact (ap (fun y =&gt; y + _) a.2 @ left_identity _ @ h b).</pre>
</div>
<div class="code" title="File: Core.v
Line: 571
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 572
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro e; simpl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 572
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      by apply grp_moveR_gM.</pre>
</div>
<div class="code" title="File: Core.v
Line: 573
Time: 0.011s">
<div class="time" style="width: 3.7162162162162%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 574
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The full isomorphism [E -&gt; A + B]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 576
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Definition projection_split_iso {B A : AbGroup@{u}}
  (E : AbSES B A) {s : GroupHomomorphism B E}
  (h : (projection _) $o s == idmap)
  : GroupIsomorphism E (ab_biprod A B).</pre>
</div>
<div class="code" title="File: Core.v
Line: 579
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 580
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  etransitivity (ab_biprod (ab_kernel _) B).</pre>
</div>
<div class="code" title="File: Core.v
Line: 581
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 582
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (projection_split_iso1 E h).</pre>
</div>
<div class="code" title="File: Core.v
Line: 582
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 583
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre> srapply (equiv_functor_ab_biprod
               (grp_iso_inverse _) grp_iso_id).</pre>
</div>
<div class="code" title="File: Core.v
Line: 584
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    rapply grp_iso_cxfib.</pre>
</div>
<div class="code" title="File: Core.v
Line: 585
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 586
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>

Proposition projection_split_beta {B A : AbGroup} (E : AbSES B A)
            {s : B $-&gt; E} (h : (projection _) $o s == idmap)
  : projection_split_iso E h o (inclusion _) == ab_biprod_inl.</pre>
</div>
<div class="code" title="File: Core.v
Line: 590
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 591
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro a.</pre>
</div>
<div class="code" title="File: Core.v
Line: 592
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* The next two lines might help the reader, but both are definitional equalities:
  lhs napply (ap _ (grp_prod_corec_natural _ _ _ _)).
  lhs napply ab_biprod_functor_beta.
  *)
 </pre>
</div>
<div class="code" title="File: Core.v
Line: 597
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>napply path_prod'.</pre>
</div>
<div class="code" title="File: Core.v
Line: 597
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2: tapply cx_isexact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 598
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* The LHS of the remaining goal is definitionally equal to
       (grp_iso_inverse (grp_iso_cxfib (isexact_inclusion_projection E)) $o
         (projection_split_to_kernel E h $o inclusion E)) a
     allowing us to do: *)
 </pre>
</div>
<div class="code" title="File: Core.v
Line: 603
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>lhs napply (ap _ (projection_split_to_kernel_beta E h a)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 603
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply eissect.</pre>
</div>
<div class="code" title="File: Core.v
Line: 604
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 605
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A short exact sequence [E] in [AbSES B A] is trivial if and only if [projection E] splits. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 607
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Proposition iff_abses_trivial_split `{Univalence}
  {B A : AbGroup@{u}} (E : AbSES B A)
  : {s : B $-&gt; E &amp; (projection _) $o s == idmap}
    &lt;-&gt; (E = point (AbSES B A)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 610
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 611
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (iff_compose _ (iff_equiv equiv_path_abses_iso)); split.</pre>
</div>
<div class="code" title="File: Core.v
Line: 612
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 613
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [s h].</pre>
</div>
<div class="code" title="File: Core.v
Line: 613
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (projection_split_iso E h).</pre>
</div>
<div class="code" title="File: Core.v
Line: 614
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    split.</pre>
</div>
<div class="code" title="File: Core.v
Line: 615
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 616
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> napply projection_split_beta.</pre>
</div>
<div class="code" title="File: Core.v
Line: 616
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 617
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 617
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 618
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [phi [g h]].</pre>
</div>
<div class="code" title="File: Core.v
Line: 618
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (grp_homo_compose (grp_iso_inverse phi) ab_biprod_inr).</pre>
</div>
<div class="code" title="File: Core.v
Line: 619
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro x; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 620
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (h _ @ ap snd (eisretr _ _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 621
Time: 0.004s">
<div class="time" style="width: 1.3513513513514%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 622
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Constructions of short exact sequences *)

(** Any inclusion [i : A $-&gt; E] determines a short exact sequence by quotienting. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 626
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition abses_from_inclusion `{Univalence}
  {A E : AbGroup@{u}} (i : A $-&gt; E) `{IsEmbedding i}
  : AbSES (QuotientAbGroup E (grp_image_embedding i)) A.</pre>
</div>
<div class="code" title="File: Core.v
Line: 628
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 629
Time: 0.007s">
<div class="time" style="width: 2.3648648648649%"></div>
<pre>
  srapply (Build_AbSES E i).</pre>
</div>
<div class="code" title="File: Core.v
Line: 630
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact grp_quotient_map.</pre>
</div>
<div class="code" title="File: Core.v
Line: 631
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  1: exact _.</pre>
</div>
<div class="code" title="File: Core.v
Line: 632
Time: 0.012s">
<div class="time" style="width: 4.0540540540541%"></div>
<pre>
  srapply Build_IsExact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 633
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 634
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> srapply phomotopy_homotopy_hset.</pre>
</div>
<div class="code" title="File: Core.v
Line: 634
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro x.</pre>
</div>
<div class="code" title="File: Core.v
Line: 635
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    apply qglue; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 636
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (-x).</pre>
</div>
<div class="code" title="File: Core.v
Line: 637
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (grp_homo_inv _ _ @ (grp_unit_r _)^).</pre>
</div>
<div class="code" title="File: Core.v
Line: 638
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 639
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre> snapply (conn_map_homotopic (Tr (-1)) (B:=grp_kernel (@grp_quotient_map E _))).</pre>
</div>
<div class="code" title="File: Core.v
Line: 639
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 640
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (grp_kernel_quotient_iso _ o ab_image_in_embedding i).</pre>
</div>
<div class="code" title="File: Core.v
Line: 640
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 641
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro a.</pre>
</div>
<div class="code" title="File: Core.v
Line: 641
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
      by rapply (isinj_embedding (subgroup_incl _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 642
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Core.v
Line: 643
Time: 0.01s">
<div class="time" style="width: 3.3783783783784%"></div>
<pre> rapply conn_map_isequiv.</pre>
</div>
<div class="code" title="File: Core.v
Line: 643
Time: 0.008s">
<div class="time" style="width: 2.7027027027027%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 644
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Conversely, given a short exact sequence [A -&gt; E -&gt; B], [A] is the kernel of [E -&gt; B]. (We don't need exactness at [B], so we drop this assumption.) *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 646
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Lemma abses_kernel_iso `{Funext} {A E B : AbGroup} (i : A $-&gt; E) (p : E $-&gt; B)
  `{IsEmbedding i, IsExact (Tr (-1)) _ _ _ i p}
  : GroupIsomorphism A (ab_kernel p).</pre>
</div>
<div class="code" title="File: Core.v
Line: 648
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 649
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_GroupIsomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 650
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 651
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (grp_kernel_corec i).</pre>
</div>
<div class="code" title="File: Core.v
Line: 651
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact cx_isexact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 652
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 653
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply isequiv_surj_emb.</pre>
</div>
<div class="code" title="File: Core.v
Line: 653
Time: 0.213s">
<div class="time" style="width: 71.959459459459%"></div>
<pre>
    2: tapply (cancelL_mapinO _ (grp_kernel_corec _ _) _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 654
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros [y q].</pre>
</div>
<div class="code" title="File: Core.v
Line: 655
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    assert (a : Tr (-1) (hfiber i y)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 656
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
    1: by tapply isexact_preimage.</pre>
</div>
<div class="code" title="File: Core.v
Line: 657
Time: 0.032s">
<div class="time" style="width: 10.810810810811%"></div>
<pre>
    strip_truncations; destruct a as [a r].</pre>
</div>
<div class="code" title="File: Core.v
Line: 658
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    rapply contr_inhabited_hprop.</pre>
</div>
<div class="code" title="File: Core.v
Line: 659
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (tr (a; _)); cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 660
Time: 0.008s">
<div class="time" style="width: 2.7027027027027%"></div>
<pre>
    apply path_sigma_hprop; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 661
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact r.</pre>
</div>
<div class="code" title="File: Core.v
Line: 662
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 663
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A computation rule for the inverse of [abses_kernel_iso i p]. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 665
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>Lemma abses_kernel_iso_inv_beta `{Funext} {A E B : AbGroup} (i : A $-&gt; E) (p : E $-&gt; B)
  `{IsEmbedding i, IsExact (Tr (-1)) _ _ _ i p}
  : i o (abses_kernel_iso i p)^-1 == subgroup_incl _.</pre>
</div>
<div class="code" title="File: Core.v
Line: 667
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 668
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
  rapply (equiv_ind (abses_kernel_iso i p)); intro a.</pre>
</div>
<div class="code" title="File: Core.v
Line: 669
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (ap i (eissect (abses_kernel_iso i p) _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 670
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 671
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Any surjection [p : E $-&gt; B] induces a short exact sequence by taking the kernel. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 673
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma abses_from_surjection {E B : AbGroup@{u}} (p : E $-&gt; B) `{IsSurjection p}
  : AbSES B (ab_kernel p).</pre>
</div>
<div class="code" title="File: Core.v
Line: 674
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 675
Time: 0.065s">
<div class="time" style="width: 21.959459459459%"></div>
<pre>
  srapply (Build_AbSES E _ p).</pre>
</div>
<div class="code" title="File: Core.v
Line: 676
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (subgroup_incl _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 677
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact _.</pre>
</div>
<div class="code" title="File: Core.v
Line: 678
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
  snapply Build_IsExact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 679
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 680
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre> apply phomotopy_homotopy_hset.</pre>
</div>
<div class="code" title="File: Core.v
Line: 680
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros [e q]; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 681
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact q.</pre>
</div>
<div class="code" title="File: Core.v
Line: 682
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 683
Time: 0.01s">
<div class="time" style="width: 3.3783783783784%"></div>
<pre> rapply conn_map_isequiv.</pre>
</div>
<div class="code" title="File: Core.v
Line: 683
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 684
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Conversely, given a short exact sequence [A -&gt; E -&gt; B], [B] is the cokernel of [A -&gt; E]. In fact, we don't need exactness at [A], so we drop this from the statement. *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 686
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>Lemma abses_cokernel_iso `{Funext}
  {A E B : AbGroup@{u}} (f : A $-&gt; E) (g : GroupHomomorphism E B)
  `{IsSurjection g, IsExact (Tr (-1)) _ _ _ f g}
  : GroupIsomorphism (ab_cokernel f) B.</pre>
</div>
<div class="code" title="File: Core.v
Line: 689
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 690
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_GroupIsomorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 691
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 692
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre> snapply (quotient_abgroup_rec _ _ g).</pre>
</div>
<div class="code" title="File: Core.v
Line: 692
Time: 0.007s">
<div class="time" style="width: 2.3648648648649%"></div>
<pre>
    intros e; rapply Trunc_rec; intros [a p].</pre>
</div>
<div class="code" title="File: Core.v
Line: 693
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (ap _ p^ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 694
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    tapply cx_isexact.</pre>
</div>
<div class="code" title="File: Core.v
Line: 695
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Core.v
Line: 696
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply isequiv_surj_emb.</pre>
</div>
<div class="code" title="File: Core.v
Line: 696
Time: 0.296s">
<div class="time" style="width: 100%"></div>
<pre>
    1: rapply cancelR_conn_map.</pre>
</div>
<div class="code" title="File: Core.v
Line: 697
Time: 0.005s">
<div class="time" style="width: 1.6891891891892%"></div>
<pre>
    apply isembedding_isinj_hset.</pre>
</div>
<div class="code" title="File: Core.v
Line: 698
Time: 0.009s">
<div class="time" style="width: 3.0405405405405%"></div>
<pre>
    srapply Quotient_ind2_hprop; intros x y.</pre>
</div>
<div class="code" title="File: Core.v
Line: 699
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro p.</pre>
</div>
<div class="code" title="File: Core.v
Line: 700
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply qglue; cbn.</pre>
</div>
<div class="code" title="File: Core.v
Line: 701
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
    refine (isexact_preimage (Tr (-1)) _ _ (-x + y) _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 702
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (grp_homo_op _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Core.v
Line: 703
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite grp_homo_inv.</pre>
</div>
<div class="code" title="File: Core.v
Line: 704
Time: 0.002s">
<div class="time" style="width: 0.67567567567568%"></div>
<pre>
    apply grp_moveL_M1^-1.</pre>
</div>
<div class="code" title="File: Core.v
Line: 705
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact p^.</pre>
</div>
<div class="code" title="File: Core.v
Line: 706
Time: 0.006s">
<div class="time" style="width: 2.027027027027%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 707
Time: 0.003s">
<div class="time" style="width: 1.0135135135135%"></div>
<pre>

Definition abses_cokernel_iso_inv_beta `{Funext}
  {A E B : AbGroup} (f : A $-&gt; E) (g : GroupHomomorphism E B)
  `{IsSurjection g, IsExact (Tr (-1)) _ _ _ f g}
  : (abses_cokernel_iso f g)^-1 o g == grp_quotient_map.</pre>
</div>
<div class="code" title="File: Core.v
Line: 712
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 713
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro x; by apply moveR_equiv_V.</pre>
</div>
<div class="code" title="File: Core.v
Line: 714
Time: 0.001s">
<div class="time" style="width: 0.33783783783784%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Core.v
Line: 716
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

