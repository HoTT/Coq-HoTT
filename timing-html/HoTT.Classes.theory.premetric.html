<html>
<head>
<title>premetric.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for premetric.v</h1>

<div class="code" title="File: premetric.v
Line: 1
Time: 0.089s">
<div class="time" style="width: 100%"></div>
<pre>Require Import
  HoTT.Classes.interfaces.abstract_algebra
  HoTT.Classes.interfaces.rationals
  HoTT.Classes.interfaces.orders
  HoTT.Classes.implementations.peano_naturals
  HoTT.Classes.implementations.natpair_integers
  HoTT.Classes.theory.groups
  HoTT.Classes.theory.integers
  HoTT.Classes.theory.dec_fields
  HoTT.Classes.orders.dec_fields
  HoTT.Classes.orders.sum
  HoTT.Classes.theory.rationals
  HoTT.Classes.orders.lattices
  HoTT.Classes.implementations.assume_rationals
  HoTT.Classes.tactics.ring_quote
  HoTT.Classes.tactics.ring_tac.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Import NatPair.Instances.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Import Quoting.Instances.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable Variables A B.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Set Universe Minimization ToSet.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 22
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Class Closeness@{i} (A : Type@{i}) := close : Q+ -&gt; Relation@{i i} A.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 24
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Instance Q_close@{} : Closeness Q := fun e q r =&gt; - ' e &lt; q - r &lt; ' e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Class Separated A `{Closeness A}
  := separated : forall x y, (forall e, close e x y) -&gt; x = y :&gt; A.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 29
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Class Triangular A `{Closeness A}
  := triangular : forall u v w e d, close e u v -&gt; close d v w -&gt;
  close (e+d) u w.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 33
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>

Class Rounded@{i j} (A:Type@{i}) `{Closeness A}
  := rounded : forall e u v, iff@{i j j} (close e u v)
    (merely@{j} (sig@{UQ j} (fun d =&gt; sig@{UQ j} (fun d' =&gt;
      e = d + d' /\ close d u v)))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 38
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre>

Class PreMetric@{i j} (A:Type@{i}) {Aclose : Closeness A} :=
  { premetric_prop :: forall e, is_mere_relation A (close e)
  ; premetric_refl :: forall e, Reflexive (close (A:=A) e)
  ; premetric_symm :: forall e, Symmetric (close (A:=A) e)
  ; premetric_separated :: Separated A
  ; premetric_triangular :: Triangular A
  ; premetric_rounded :: Rounded@{i j} A }.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance premetric_hset@{i j} `{Funext}
  {A:Type@{i} } `{PreMetric@{i j} A} : IsHSet A.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (@HSet.ishset_hrel_subpaths@{j i j} _ (fun x y =&gt; forall e, close e x y)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x;reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 53
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre> apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply separated.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 55
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>

Record Approximation@{i} (A:Type@{i}) {Aclose : Closeness A} :=
  { approximate :&gt; Q+ -&gt; A
  ; approx_equiv : forall d e, close (d+e) (approximate d) (approximate e) }.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 59
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma approx_eq `{Funext} `{Closeness A} `{forall e x y, IsHProp (close e x y)}
  : forall x y : Approximation A,
  approximate _ x = approximate _ y -&gt; x = y.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros [x Ex] [y Ey];simpl;intros E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
destruct E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply ap.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 66
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre> apply path_ishprop.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 66
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 67
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>


Definition IsLimit@{i} {A:Type@{i} } {Aclose : Closeness A}
  (x : Approximation A) (l : A)
  := forall e d : Q+, close (e+d) (x d) l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Class Lim@{i} (A:Type@{i}) {Aclose : Closeness A} := lim : Approximation A -&gt; A.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Class CauchyComplete@{i} (A:Type@{i}) {Aclose : Closeness A} {Alim : Lim A}
  := cauchy_complete : forall x : Approximation A, IsLimit x (lim x).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 77
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section contents.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {funext : Funext} {univalence : Univalence}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 80
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma rounded_plus `{Rounded A} : forall d d' u v, close d u v -&gt;
  close (d+d') u v.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 83
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 84
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
intros d d' u v xi;apply rounded.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 85
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply tr;exists d,d';auto.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 86
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 87
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma rounded_le' `{Rounded A}
  : forall e u v, close e u v -&gt;
  forall d, ' e &lt;= ' d -&gt; close d u v.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi d E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 93
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre>
apply le_equiv_lt in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct E as [E|E].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply pos_eq in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite &lt;-E;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 96
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> pose proof (pos_eq _ (_ + _) (Qpos_diff_pr _ _ E)) as E'.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite E'.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_plus.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 97
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Coq pre 8.8 produces phantom universes, see coq/coq#6483 **)</pre>
</div>
<div class="code" title="File: premetric.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition rounded_le@{i j} := ltac:(first [exact @rounded_le'@{j i Ularge}|
                                            exact @rounded_le'@{j i Ularge j}|
                                            exact @rounded_le'@{i j}]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments rounded_le {A _ _} e u v _ d _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section close_prod.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA UB i.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context (A:Type@{UA}) (B:Type@{UB}) `{Closeness A} `{Closeness B}
  `{forall e, is_mere_relation A (close e)}
  `{forall e, is_mere_relation B (close e)}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 109
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance close_prod@{} : Closeness@{i} (A /\ B)
  := fun e x y =&gt; close e (fst x) (fst y) /\ close e (snd x) (snd y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance close_prod_refl@{}
  `{forall e, Reflexive (close (A:=A) e)}
  `{forall e, Reflexive (close (A:=B) e)}
  : forall e, Reflexive (close (A:=A /\ B) e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e;split;reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 120
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance close_prod_symm@{}
  `{forall e, Symmetric (close (A:=A) e)}
  `{forall e, Symmetric (close (A:=B) e)}
  : forall e, Symmetric (close (A:=A /\ B) e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 125
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;split;symmetry;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance close_prod_separated@{}
  `{!Separated A}
  `{!Separated B}
  : Separated (A /\ B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x y E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 135
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply Prod.path_prod;apply separated;intros;apply E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance close_prod_triangular@{}
  `{!Triangular A}
  `{!Triangular B}
  : Triangular (A /\ B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 143
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
intros u v w e d E1 E2;split;(eapply triangular;[apply E1|apply E2]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 144
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma close_prod_rounded'
  `{!Rounded A} 
  `{!Rounded B}
  : Rounded (A /\ B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [E0 E0'];apply rounded in E0;apply rounded in E0'.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 153
Time: 0.013s">
<div class="time" style="width: 14.606741573034%"></div>
<pre>
  revert E0;apply (Trunc_ind _);intros [d1 [d1' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 154
Time: 0.012s">
<div class="time" style="width: 13.483146067416%"></div>
<pre>
  revert E0';apply (Trunc_ind _);intros [d2 [d2' [E3 E4]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 155
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply tr;exists (join d1 d2), (meet d1' d2');split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qpos_sum_eq_join_meet.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite &lt;-E1;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: premetric.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_le with d1;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply join_ub_l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: premetric.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_le with d2;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply join_ub_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 163
Time: 0.049s">
<div class="time" style="width: 55.056179775281%"></div>
<pre> apply (Trunc_ind _);intros [d [d' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 163
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  rewrite E1;split;apply rounded_plus,E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 164
Time: 0.006s">
<div class="time" style="width: 6.7415730337079%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Coq pre 8.8 produces phantom universes, see coq/coq#6483 **)</pre>
</div>
<div class="code" title="File: premetric.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition close_prod_rounded@{j} := ltac:(first [exact @close_prod_rounded'@{j j j j j}|
                                                  exact @close_prod_rounded'@{j j}|
                                                  exact @close_prod_rounded'@{j j j}]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments close_prod_rounded {_ _} _ _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 170
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
#[export] Existing Instance close_prod_rounded.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 171
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma prod_premetric@{j} `{!PreMetric@{UA j} A} `{!PreMetric@{UB j} B}
  : PreMetric@{i j} (A /\ B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 175
Time: 0.03s">
<div class="time" style="width: 33.707865168539%"></div>
<pre>
split;try apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 176
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
#[export] Existing Instance prod_premetric.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {Alim : Lim A} {Blim : Lim B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance prod_lim@{} : Lim (A /\ B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros xy.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 184
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre> split;apply lim;
[exists (fun e =&gt; fst (xy e))|exists (fun e =&gt; snd (xy e))];intros;apply xy.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance prod_cauchy_complete `{!CauchyComplete A} `{!CauchyComplete B}
  : CauchyComplete (A /\ B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros xy e d;split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (cauchy_complete
    {| approximate := fun e0 : Q+ =&gt; fst (xy e0); approx_equiv := _ |}).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (cauchy_complete
    {| approximate := fun e0 : Q+ =&gt; snd (xy e0); approx_equiv := _ |}).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 195
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End close_prod.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section close_arrow.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type} `{Bclose : Closeness B} `{!PreMetric B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Using [forall x, close e (f x) (g x)] works for closed balls, not open ones. *)</pre>
</div>
<div class="code" title="File: premetric.v
Line: 203
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>#[export] Instance close_arrow : Closeness (A -&gt; B)
  := fun e f g =&gt; merely (exists d d', e = d + d' /\ forall x, close d (f x) (g x)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma close_arrow_apply : forall e (f g : A -&gt; B), close e f g -&gt;
  forall x, close e (f x) (g x).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 208
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre>
intros e f g E x;revert E;apply (Trunc_ind _);intros [d [d' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite E1;apply rounded_plus;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 210
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance close_arrow_premetric : PreMetric (A -&gt; B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 216
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre> apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 217
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> intros e f;apply tr; exists (e/2), (e/2);split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (pos_split2 e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x;reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 220
Time: 0.024s">
<div class="time" style="width: 26.966292134831%"></div>
<pre> intros e f g;apply (Trunc_ind _);intros [d [d' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply tr;exists d, d';split;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros x;symmetry;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros f g E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply path_forall;intros x.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply separated.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 224
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (merely_destruct (E e)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [d [d' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_plus.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros f g h e d E1 E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 227
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (merely_destruct E1);intros [d1 [d1' [E3 E4]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 228
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (merely_destruct E2);intros [d2 [d2' [E5 E6]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 229
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply tr;exists (d1+d2),(d1'+d2').</pre>
</div>
<div class="code" title="File: premetric.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite E3,E5.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 231
Time: 0.034s">
<div class="time" style="width: 38.202247191011%"></div>
<pre>
   abstract (apply pos_eq; ring_tac.ring_with_nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 233
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> apply triangular with (g x);trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros e f g.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 235
Time: 0.01s">
<div class="time" style="width: 11.23595505618%"></div>
<pre> apply (Trunc_ind _).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [d [d' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 235
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre>
    apply tr;exists (d+d'/2),(d'/2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: premetric.v
Line: 237
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre> rewrite &lt;-Qpos_plus_assoc,&lt;-pos_split2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: premetric.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply tr.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 238
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre> exists d, (d'/2);split;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 239
Time: 0.012s">
<div class="time" style="width: 13.483146067416%"></div>
<pre> apply (Trunc_ind _);intros [d [d' [E1 E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 239
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
    apply tr;exists d,d';split;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply close_arrow_apply.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 241
Time: 0.025s">
<div class="time" style="width: 28.089887640449%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {Blim : Lim B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance arrow_lim : Lim (A -&gt; B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros f x.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply lim.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exists (fun e =&gt; f e x).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply close_arrow_apply.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply approx_equiv.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments arrow_lim _ / _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context `{!CauchyComplete B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
#[export] Instance arrow_cauchy_complete : CauchyComplete (A -&gt; B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 254
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros f e d.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold lim;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply tr.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 258
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> exists (e/2 + d), (e/2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
+</pre>
</div>
<div class="code" title="File: premetric.v
Line: 259
Time: 0.06s">
<div class="time" style="width: 67.415730337079%"></div>
<pre> abstract (set (e' := e/2);rewrite (pos_split2 e);unfold e';
  apply pos_eq;ring_tac.ring_with_nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
+</pre>
</div>
<div class="code" title="File: premetric.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 261
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  set (S := {| approximate := fun e0 : Q+ =&gt; (f e0) x
            ;  approx_equiv := _ |}).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  pose proof (cauchy_complete S) as E;red in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 265
Time: 0.027s">
<div class="time" style="width: 30.337078651685%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End close_arrow.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 268
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Class NonExpanding `{Closeness A} `{Closeness B} (f : A -&gt; B)
  := non_expanding : forall e x y, close e x y -&gt; close e (f x) (f y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments non_expanding {A _ B _} f {_ e x y} _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 272
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Class Lipschitz `{Closeness A} `{Closeness B} (f : A -&gt; B) (L : Q+)
  := lipschitz : forall e x y, close e x y -&gt; close (L * e) (f x) (f y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 275
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments lipschitz {A _ B _} f L {_ e x y} _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 276
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Class Uniform `{Closeness A} `{Closeness B} (f : A -&gt; B) (mu : Q+ -&gt; Q+)
  := uniform : forall e x y, close (mu e) x y -&gt; close e (f x) (f y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments uniform {A _ B _} f mu {_} _ _ _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 280
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Class Continuous@{UA UB}
  {A:Type@{UA} } `{Closeness A}
  {B:Type@{UB} } `{Closeness B} (f : A -&gt; B)
  := continuous : forall u e, merely@{Ularge} (sig@{UQ Ularge}
    (fun d =&gt; forall v, close d u v -&gt;
    close e (f u) (f v))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments continuous {A _ B _} f {_} _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 288
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition BinaryDup@{i} {A : Type@{i} } : A -&gt; A /\ A := fun x =&gt; (x, x).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 290
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre>

Definition map2 {A B C D} (f : A -&gt; C) (g : B -&gt; D) : A /\ B -&gt; C /\ D
  := fun x =&gt; (f (fst x), g (snd x)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section closeness.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 295
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } `{Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance id_nonexpanding : NonExpanding (@id A).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 300
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
hnf;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 301
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 302
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance BinaryDup_nonexpanding@{} : NonExpanding (@BinaryDup A).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 304
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 305
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e x y E;split;exact E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Universe UB.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {B:Type@{UB} } `{Closeness B} (f : A -&gt; B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma nonexpanding_lipschitz' `{!NonExpanding f}
  : Lipschitz f 1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 313
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 314
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
red.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 315
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro;rewrite left_identity;apply non_expanding,_.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 315
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 316
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition nonexpanding_lipschitz@{} `{!NonExpanding f}
  : Lipschitz f 1
  := ltac:(first [exact nonexpanding_lipschitz'@{Ularge}|
                  exact nonexpanding_lipschitz'@{}]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 321
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
#[export] Existing Instance nonexpanding_lipschitz.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


Lemma lipschitz_nonexpanding@{} `{!Lipschitz f 1} : NonExpanding f.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 325
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
red.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 327
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> intros e x y E;rewrite &lt;-(left_identity e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (lipschitz f 1 E).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 328
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance const_nonexpanding@{} `{forall e, Reflexive (close (A:=B) e)}
  (b : B) : NonExpanding (fun _ : A =&gt; b).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
hnf.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 333
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros;reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 333
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 334
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance lipschitz_const@{} `{forall e, Reflexive (close (A:=B) e)}
  : forall (b:B) (L:Q+), Lipschitz (fun _ : A =&gt; b) L.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 337
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 338
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros;hnf.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 339
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e _ _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 341
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance lipschitz_uniform@{} (L:Q+) `{!Lipschitz f L}
  : Uniform f (fun e =&gt; e / L) | 5.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 344
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 345
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 346
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite &lt;-(pos_unconjugate L e),&lt;-Qpos_mult_assoc.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 347
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (lipschitz f L),xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 348
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 349
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma uniform_continuous@{} mu `{!Uniform@{UA UB} f mu} : Continuous f.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 351
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 352
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
hnf.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 353
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros u e;apply tr;exists (mu e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 354
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (uniform f mu).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 355
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 356
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Instance uniform_continuous | 5.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 357
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition lipschitz_continuous@{} (L:Q+) `{!Lipschitz f L} : Continuous f
  := _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 360
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition nonexpanding_continuous@{} `{!NonExpanding f} : Continuous f
  := _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 363
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End closeness.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 365
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section compositions.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 367
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 368
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } `{Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 369
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UB.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 370
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {B:Type@{UB} } `{Closeness B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 371
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UC.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 372
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {C:Type@{UC} } `{Closeness C} (g : B -&gt; C) (f : A -&gt; B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 373
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance nonexpanding_compose@{}
  {Eg : NonExpanding g} {Ef : NonExpanding f}
  : NonExpanding (Compose g f).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 377
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
hnf.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 379
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros e x y xi;exact (non_expanding g (non_expanding f xi)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 379
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 380
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance lipschitz_compose@{}
  Lg {Eg : Lipschitz g Lg} Lf {Ef : Lipschitz f Lf}
  : Lipschitz (Compose g f) (Lg * Lf).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 384
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 385
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros ??? He.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 386
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold Compose;apply Ef,Eg in He.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 387
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pattern (Lg * Lf * e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 388
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
eapply transport;[|exact He].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 389
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply associativity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 390
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 391
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma lipschitz_compose_nonexpanding_r'
  L {Eg : Lipschitz g L} {Ef : NonExpanding f}
  : Lipschitz (Compose g f) L.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 395
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 396
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite &lt;-(left_identity L),commutativity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 398
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance lipschitz_compose_nonexpanding_r@{}
  L {Eg : Lipschitz g L} {Ef : NonExpanding f}
  : Lipschitz (Compose g f) L
  := ltac:(first [exact (lipschitz_compose_nonexpanding_r'@{Ularge} L)|
                  exact (lipschitz_compose_nonexpanding_r'@{} L)]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 404
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma lipschitz_compose_nonexpanding_l'
  L {Eg : NonExpanding g} {Ef : Lipschitz f L}
  : Lipschitz (Compose g f) L.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 408
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 409
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite &lt;-(left_identity L).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 410
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 410
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 411
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance lipschitz_compose_nonexpanding_l@{}
  L {Eg : NonExpanding g} {Ef : Lipschitz f L}
  : Lipschitz (Compose g f) L
  := ltac:(first [exact (lipschitz_compose_nonexpanding_l'@{Ularge} L)|
                  exact (lipschitz_compose_nonexpanding_l'@{} L)]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 417
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma uniform_compose@{} mu {Eg : Uniform g mu} mu' {Ef : Uniform f mu'}
  : Uniform (Compose g f) (Compose mu' mu).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 420
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 421
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 422
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold Compose.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 422
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (uniform g _),(uniform f _),xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 423
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 424
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Instance uniform_compose.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 425
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance continuous_compose@{} {Eg : Continuous g} {Ef : Continuous f}
  : Continuous (Compose g f).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 428
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 429
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros u e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 430
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
apply (merely_destruct (continuous g (f u) e)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 431
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros [d E].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 432
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply (merely_destruct (continuous f u d)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 433
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros [d' E'].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 434
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply tr;exists d';intros v xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 435
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply E,E',xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 436
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 437
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End compositions.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 439
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section currying.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 441
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 442
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } `{Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 443
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UB.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 444
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {B:Type@{UB} } `{Closeness B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 445
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UC.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 446
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {C:Type@{UC} } `{Closeness C} `{!Triangular C}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 447
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance uncurry_lipschitz (f : A -&gt; B -&gt; C) L1 L2
  `{!forall x, Lipschitz (f x) L1}
  `{!forall y, Lipschitz (fun x =&gt; f x y) L2}
  : Lipschitz (uncurry f) (L1 + L2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 452
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 453
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e [u1 u2] [v1 v2] [xi1 xi2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 454
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl in xi1,xi2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 454
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 455
Time: 0.037s">
<div class="time" style="width: 41.573033707865%"></div>
<pre>
assert (Hrw : (L1 + L2) * e = L1 * e + L2 * e)
by abstract (apply pos_eq;ring_tac.ring_with_nat);
rewrite Hrw;clear Hrw.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 458
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (triangular _ (f u1 v2)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 459
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 460
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (lipschitz _ L1).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 460
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 460
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 461
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (lipschitz (fun u =&gt; f u v2) L2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 461
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 461
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 462
Time: 0.005s">
<div class="time" style="width: 5.6179775280899%"></div>
<pre>

Lemma uncurry_uniform
  `{!Rounded A} `{!Rounded B} (f : A -&gt; B -&gt; C) mu mu'
  `{!forall x, Uniform (f x) mu}
  `{!forall y, Uniform (fun x =&gt; f x y) mu'}
  : Uniform (uncurry f) (fun e =&gt; meet (mu (e/2)) (mu' (e/2))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 468
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 469
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
intros e [u1 u2] [v1 v2] [xi1 xi2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 470
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
simpl in *.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 471
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite (pos_split2 e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 472
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (triangular _ (f u1 v2)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 473
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 474
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (uniform (f u1) _).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 474
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  eapply rounded_le.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 475
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 476
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact xi2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 476
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 477
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply meet_lb_l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 477
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 478
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (uniform (fun v =&gt; f v v2) _).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 478
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  eapply rounded_le.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 479
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 480
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact xi1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 480
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 481
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply meet_lb_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 481
Time: 0.006s">
<div class="time" style="width: 6.7415730337079%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 482
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End currying.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 484
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section pair.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 486
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 487
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } `{Closeness A} `{forall e, Reflexive (close (A:=A) e)}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 488
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UB.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 489
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {B:Type@{UB} } `{Closeness B} `{forall e, Reflexive (close (A:=B) e)}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 490
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance pair_nonexpanding_l : forall x, NonExpanding (@pair A B x).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 492
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 493
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x e u v xi;split;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 494
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 495
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 495
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 496
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 496
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 497
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance pair_nonexpanding_r : forall y,
  NonExpanding (fun x =&gt; @pair A B x y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 500
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 501
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x e u v xi;split;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 502
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 503
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 503
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 504
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 504
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 505
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance fst_nonexpanding : NonExpanding (@fst A B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 507
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 508
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 509
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 510
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance snd_nonexpanding : NonExpanding (@snd A B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 512
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 513
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 514
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 515
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End pair.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 517
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section prod_equiv.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 519
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 520
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } `{Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 521
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UB.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 522
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {B:Type@{UB} } `{Closeness B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 523
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance equiv_prod_symm_nonexpanding
  : NonExpanding (@Prod.equiv_prod_symm A B).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 526
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 527
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;split;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 528
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 529
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance equiv_prod_symm_inv_nonexpanding
  : NonExpanding ((@Prod.equiv_prod_symm A B)^-1).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 532
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 533
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;split;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 534
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 535
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Universe UC.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 537
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {C:Type@{UC} } `{Closeness C}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 538
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance equiv_prod_assoc_nonexpanding
  : NonExpanding (@Prod.equiv_prod_assoc A B C).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 541
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 542
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;repeat split;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 543
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 544
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance equiv_prod_assoc_inc_nonexpanding
  : NonExpanding ((@Prod.equiv_prod_assoc A B C)^-1).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 547
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 548
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi;repeat split;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 549
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 550
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End prod_equiv.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 552
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section map2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 554
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 555
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } `{Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 556
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UB.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 557
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {B:Type@{UB} } `{Closeness B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 558
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UC.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 559
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {C:Type@{UC} } `{Closeness C}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 560
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UD.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 561
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {D:Type@{UD} } `{Closeness D}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 562
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Variables (f : A -&gt; C) (g : B -&gt; D).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 563
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma map2_nonexpanding'
  `{!NonExpanding f} `{!NonExpanding g}
  : NonExpanding (map2 f g).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 567
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 568
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
intros e u v xi;split;simpl; apply (non_expanding _),xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 569
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 570
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition map2_nonexpanding@{i} := @map2_nonexpanding'@{i i}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 572
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments map2_nonexpanding {_ _} e x y xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 573
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Instance map2_nonexpanding.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 574
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma map2_lipschitz' `{!Rounded C} `{!Rounded D} Lf Lg
  `{!Lipschitz f Lf} `{!Lipschitz g Lg}
  : Lipschitz (map2 f g) (join Lf Lg).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 578
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 579
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u v xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 580
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 580
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 581
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_le with (Lf * e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 581
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 582
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (lipschitz _ _),xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 582
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 583
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre> apply (order_preserving (.* ' e)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 583
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply join_ub_l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 584
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 585
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_le with (Lg * e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 585
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 586
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (lipschitz _ _),xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 586
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 587
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre> apply (order_preserving (.* ' e)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 587
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply join_ub_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 588
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 589
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Coq pre 8.8 produces phantom universes, see coq/coq#6483 **)</pre>
</div>
<div class="code" title="File: premetric.v
Line: 591
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition map2_lipschitz@{i} := ltac:(first [exact @map2_lipschitz'@{i i i}|exact @map2_lipschitz'@{i i i i}]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 591
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments map2_lipschitz {_ _} Lf Lg {_ _} e x y xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 592
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Instance map2_lipschitz.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 593
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma map2_continuous' `{!Rounded A} `{!Rounded B}
  `{!Continuous f} `{!Continuous g}
  : Continuous (map2 f g).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 597
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 598
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros u e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 599
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
apply (merely_destruct (continuous f (fst u) e));intros [d1 E1].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 600
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
apply (merely_destruct (continuous g (snd u) e));intros [d2 E2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 601
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply tr;exists (meet d1 d2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 602
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros v xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 602
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
split;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 603
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 604
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 604
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_le with (meet d1 d2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 604
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 605
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 605
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 606
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply meet_lb_l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 606
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 607
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 607
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply rounded_le with (meet d1 d2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 607
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 608
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 608
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 609
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply meet_lb_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 609
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 610
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Coq pre 8.8 produces phantom universes, see coq/coq#6483 **)</pre>
</div>
<div class="code" title="File: premetric.v
Line: 612
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition map2_continuous@{i} := ltac:(first [exact @map2_continuous'@{i i i}|exact @map2_continuous'@{i i i i}]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 612
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments map2_continuous {_ _ _ _} u e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 613
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Instance map2_continuous.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 614
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End map2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 616
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section interval.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 618
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA UALE.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 619
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type@{UA} } {Ale : Le@{UA UALE} A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 620
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition Interval a b := sig (fun x : A =&gt; a &lt;= x /\ x &lt;= b).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 622
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition interval_proj a b : Interval a b -&gt; A := pr1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 624
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {Ameet : Meet A} {Ajoin : Join A}
  `{!LatticeOrder@{UA UALE} Ale}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 627
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition Interval_restrict@{} (a b : A) (E : a &lt;= b) : A -&gt; Interval a b.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 629
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 630
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 631
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
exists (join a (meet x b)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 632
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 633
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 634
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply join_ub_l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 634
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 635
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply join_le.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 635
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 636
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 636
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 637
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply meet_lb_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 637
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 638
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma Interval_restrict_pr : forall a b E x (E': a &lt;= x /\ x &lt;= b),
  Interval_restrict a b E x = exist _ x E'.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 641
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 642
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros a b E x E'.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 643
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold Interval_restrict.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 644
Time: 0.027s">
<div class="time" style="width: 30.337078651685%"></div>
<pre>
apply Sigma.path_sigma_hprop.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 645
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 646
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite meet_l;[apply join_r|];apply E'.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 646
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 647
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context `{Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 649
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance Interval_close (a b : A) : Closeness (Interval a b)
  := fun e x y =&gt; close e (interval_proj a b x) (interval_proj a b y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 652
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Interval_close _ _ _ _ _ /.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 653
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* NB: for some reason this forces UALE &lt;= UA *)</pre>
</div>
<div class="code" title="File: premetric.v
Line: 655
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma Interval_premetric@{i} `{!PreMetric@{UA i} A} a b
  : PreMetric@{UA i} (Interval a b).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 656
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 657
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 658
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 659
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold close;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 659
Time: 0.009s">
<div class="time" style="width: 10.112359550562%"></div>
<pre> apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 659
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 660
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros e u.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 660
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> red;red.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 660
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 660
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 661
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros e u v xi;red;red;symmetry;apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 661
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 662
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros u v E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 662
Time: 0.027s">
<div class="time" style="width: 30.337078651685%"></div>
<pre>
  apply Sigma.path_sigma_hprop.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 663
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply separated,E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 663
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 664
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros u v w e d xi1 xi2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 664
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  red;red.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 665
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (triangular _ (interval_proj a b v)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 665
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 666
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact xi1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 666
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 667
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact xi2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 667
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 668
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros e u v.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 668
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 668
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 669
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 669
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> do 2 red in xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 669
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (fst (rounded _ _ _)) in xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 669
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 670
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 671
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 671
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold close,Interval_close in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 671
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (snd (rounded _ _ _)) in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 671
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 672
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 673
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Instance Interval_premetric.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 674
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

#[export] Instance interval_proj_nonexpanding (a b : A)
  : NonExpanding (interval_proj a b)
  := fun _ _ _ xi =&gt; xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 678
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End interval.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 680
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section rationals.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 682
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma Qclose_alt : forall e (q r : Q), close e q r &lt;-&gt; abs (q - r) &lt; ' e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 684
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 685
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e q r;split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 686
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 687
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [E1 E2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 687
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  destruct (total le 0 (q - r)) as [E|E].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 688
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 689
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite (Qabs_of_nonneg _ E).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 689
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 690
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 691
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite (Qabs_of_nonpos _ E).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 691
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
    apply flip_lt_negate.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 692
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite involutive.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 692
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 692
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 693
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 693
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre> split;[apply flip_lt_negate;rewrite involutive|];
  apply le_lt_trans with (abs (q - r));trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 694
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 695
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qabs_le_neg_raw.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 695
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 696
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qabs_le_raw.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 696
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 697
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma Qclose_neg@{} : forall e (x y : Q), close e x y &lt;-&gt; close e (- x) (- y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 699
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 700
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
intros e x y;split;intros E;apply Qclose_alt in E;apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 701
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 702
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite &lt;-(negate_plus_distr),Qabs_neg.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 702
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 702
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 703
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite &lt;-(negate_plus_distr),Qabs_neg in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 703
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 703
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 704
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Q_close_symm@{} : forall e, Symmetric (@close Q _ e).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 706
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 707
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
red;unfold close;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 708
Time: 0.023s">
<div class="time" style="width: 25.842696629213%"></div>
<pre>
intros e x y [E1 E2];split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 709
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 710
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> apply flip_lt_negate.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 710
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite &lt;-negate_swap_r,involutive.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 710
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 711
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 712
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> apply flip_lt_negate.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 712
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  rewrite negate_swap_r,involutive.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 713
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 713
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 714
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma Q_triangular_one@{} : forall (q r : Q)
(e : Q+) (Hqr : close e q r)
(q0 : Q) (n : Q+),
  (close n q q0 -&gt; close (e + n) r q0).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 719
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 720
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold close;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 721
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros q r e [E1 E1'] s n [E2 E2'].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 722
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 723
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 724
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> apply flip_lt_negate.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 724
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> rewrite negate_swap_r,!involutive.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 724
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply flip_lt_negate in E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 725
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  rewrite negate_swap_r,!involutive in E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 726
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  pose proof (plus_lt_compat _ _ _ _ E1' E2) as E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 727
Time: 0.032s">
<div class="time" style="width: 35.955056179775%"></div>
<pre>
  assert (Hrw : s - r = q - r + (s - q))
    by abstract ring_tac.ring_with_integers (NatPair.Z nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 729
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite Hrw;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 730
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 731
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> apply flip_lt_negate in E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 731
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  rewrite negate_swap_r,!involutive in E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 732
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  pose proof (plus_lt_compat _ _ _ _ E1 E2') as E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 733
Time: 0.048s">
<div class="time" style="width: 53.932584269663%"></div>
<pre>
  assert (Hrw : r - s = r - q + (q - s))
    by abstract ring_tac.ring_with_integers (NatPair.Z nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 735
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite Hrw;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 736
Time: 0.013s">
<div class="time" style="width: 14.606741573034%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 737
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Q_triangular@{} : Triangular Q.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 739
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 740
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
hnf.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 741
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros u v w e d E1 E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 741
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Q_triangular_one with v.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 742
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 743
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> symmetry;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 743
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 744
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 744
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 745
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma Qclose_separating_not_lt : forall q r : Q, (forall e, close e q r) -&gt;
  ~ (q &lt; r).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 748
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 749
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros q r E1 E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 750
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pose proof (E1 (Qpos_diff _ _ E2)) as E3.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 751
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply symmetry in E3;apply Qclose_alt in E3.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 752
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold cast in E3;simpl in E3.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 753
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply (irreflexivity lt (r - q)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 754
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply le_lt_trans with (abs (r - q));trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 755
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qabs_le_raw.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 756
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 757
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qclose_separating : Separated Q.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 759
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 760
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
hnf.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 761
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros q r E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 761
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply tight_apart.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 762
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 762
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply apart_iff_total_lt in E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 763
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct E2 as [E2|E2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 763
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 764
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (Qclose_separating_not_lt _ _ E1 E2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 764
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 765
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (Qclose_separating_not_lt _ _ _ E2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 765
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros;symmetry;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 766
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 767
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qclose_rounded@{} : Rounded Q.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 769
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 770
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e q r;split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 771
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 772
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros E;apply Qclose_alt in E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 772
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  pose proof (Q_average_between _ _ E) as [E1 E2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 773
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply tr;simple refine (exist _ (mkQpos ((abs (q - r) + ' e) / 2) _) _).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 774
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: premetric.v
Line: 775
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre> apply pos_mult_compat;[|solve_propholds].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 775
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    red.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 776
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> apply pos_plus_le_lt_compat_r;[solve_propholds|apply Qabs_nonneg].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 776
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  }</pre>
</div>
<div class="code" title="File: premetric.v
Line: 777
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 778
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exists (Qpos_diff _ _ E2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 778
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 779
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 780
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply pos_eq.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 780
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (Qpos_diff_pr _ _ E2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 780
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 781
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 781
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact E1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 781
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 782
Time: 0.027s">
<div class="time" style="width: 30.337078651685%"></div>
<pre> apply (Trunc_ind _).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 782
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [d [d' [He xi]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 782
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Qclose_alt;rewrite He.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 783
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Qclose_alt in xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 784
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply lt_le_trans with (' d);trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 785
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply nonneg_plus_le_compat_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 786
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> solve_propholds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 786
Time: 0.009s">
<div class="time" style="width: 10.112359550562%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 787
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Q_premetric@{} : PreMetric Q.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 789
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 790
Time: 0.025s">
<div class="time" style="width: 28.089887640449%"></div>
<pre>
split;try apply _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 791
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e u;apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 792
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite plus_negate_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 792
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold abs.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 793
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite (fst (abs_sig 0).2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 793
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 794
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> solve_propholds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 794
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 795
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 795
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 796
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qneg_nonexpanding@{} : NonExpanding ((-) : Negate Q).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 798
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 799
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e x y.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 800
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qclose_neg.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 801
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 802
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


Instance Qplus_nonexpanding_l@{} : forall s : Q, NonExpanding (+ s).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 805
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 806
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
red.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 807
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold close,Q_close;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 807
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros s e q r E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 807
Time: 0.032s">
<div class="time" style="width: 35.955056179775%"></div>
<pre>
assert (Hrw : q + s - (r + s) = q - r)
  by abstract ring_tac.ring_with_integers (NatPair.Z nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 809
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite Hrw;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 810
Time: 0.005s">
<div class="time" style="width: 5.6179775280899%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 811
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qplus_nonexpanding_r@{} : forall s : Q, NonExpanding (s +).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 813
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 814
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
red;unfold close,Q_close;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 815
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros s e q r E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 815
Time: 0.027s">
<div class="time" style="width: 30.337078651685%"></div>
<pre>
assert (Hrw : s + q - (s + r) = q - r)
  by abstract ring_tac.ring_with_integers (NatPair.Z nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 817
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite Hrw;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 818
Time: 0.005s">
<div class="time" style="width: 5.6179775280899%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 819
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qabs_nonexpanding : NonExpanding (abs (A:=Q)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 821
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 822
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e q r xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 823
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qclose_alt in xi;apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 824
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply le_lt_trans with (abs (q - r));trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 825
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qabs_triangle_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 826
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 827
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qmeet_nonexpanding_l : forall s : Q, NonExpanding ( s).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 829
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 830
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros s e q r xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 831
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qclose_alt;apply Qclose_alt in xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 832
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply le_lt_trans with (abs (q - r));trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 833
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 833
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre>
destruct (total le q s) as [E1|E1], (total le r s) as [E2|E2];
rewrite ?(meet_l _ _ E1), ?(meet_r _ _ E1), ?(meet_l _ _ E2), ?(meet_r _ _ E2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 835
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 836
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 836
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 837
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre> rewrite (Qabs_of_nonpos (q - r))
  by (apply (snd (flip_nonpos_minus _ _)); transitivity s;trivial).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 838
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  rewrite &lt;-negate_swap_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 839
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  rewrite (Qabs_of_nonpos _ (snd (flip_nonpos_minus _ _) E1)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 840
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite &lt;-negate_swap_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 841
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (order_preserving (+ (- q))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 842
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 843
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 844
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre> rewrite (Qabs_of_nonneg (q - r))
  by (apply (snd (flip_nonneg_minus _ _)); transitivity s;trivial).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 845
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  rewrite (Qabs_of_nonneg _ (snd (flip_nonneg_minus _ _) E2)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 846
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (order_preserving (+ (- r))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 847
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 847
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 848
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> rewrite plus_negate_r,Qabs_of_nonneg by reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 848
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Qabs_nonneg.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 849
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 850
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qmeet_nonexpanding_r : forall s : Q, NonExpanding (s ).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 852
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 853
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros s e q r xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 854
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pose proof meet_sl_order_meet_sl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 855
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite !(commutativity s).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 856
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (non_expanding (fun x =&gt; meet x s)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 857
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 857
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 858
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qjoin_nonexpanding_l : forall s : Q, NonExpanding ( s).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 860
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 861
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros s e q r xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 862
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qclose_alt;apply Qclose_alt in xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 863
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply le_lt_trans with (abs (q - r));trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 864
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 864
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre>
destruct (total le q s) as [E1|E1], (total le r s) as [E2|E2];
rewrite ?(join_l _ _ E1), ?(join_r _ _ E1), ?(join_l _ _ E2), ?(join_r _ _ E2).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 866
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 867
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> rewrite plus_negate_r,Qabs_of_nonneg by reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 867
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Qabs_nonneg.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 868
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 869
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre> rewrite (Qabs_of_nonpos (q - r))
  by (apply (snd (flip_nonpos_minus _ _)); transitivity s;trivial).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 870
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  rewrite &lt;-negate_swap_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 871
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  rewrite (Qabs_of_nonpos _ (snd (flip_nonpos_minus _ _) E2)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 872
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rewrite &lt;-negate_swap_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 873
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (order_preserving (r +)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 874
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply (snd (flip_le_negate _ _)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 875
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 875
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 876
Time: 0.009s">
<div class="time" style="width: 10.112359550562%"></div>
<pre> rewrite (Qabs_of_nonneg (q - r))
  by (apply (snd (flip_nonneg_minus _ _)); transitivity s;trivial).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 877
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  rewrite (Qabs_of_nonneg _ (snd (flip_nonneg_minus _ _) E1)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 878
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
  apply (order_preserving (q +)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 879
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
  apply (snd (flip_le_negate _ _)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 880
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 880
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 881
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 881
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 882
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qjoin_nonexpanding_r : forall s : Q, NonExpanding (s ).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 884
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 885
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros s e q r xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 886
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pose proof join_sl_order_join_sl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 887
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite !(commutativity s).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 888
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (non_expanding (fun x =&gt; join x s)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 889
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 889
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 890
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qmult_lipschitz@{} : forall q : Q, Lipschitz (q *.) (pos_of_Q q).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 892
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 893
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros q e x y xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 894
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 895
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite negate_mult_distr_r,&lt;-plus_mult_distr_l,Qabs_mult.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 896
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
apply pos_mult_le_lt_compat;try split.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 897
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 898
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qabs_nonneg.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 898
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 899
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rewrite Qabs_is_join.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 899
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply join_le.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 899
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 900
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre> apply flip_le_negate;rewrite involutive; apply Q_abs_plus_1_bounds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 900
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 901
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Q_abs_plus_1_bounds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 901
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 902
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> solve_propholds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 902
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 903
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qabs_nonneg.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 903
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 904
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qclose_alt,xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 904
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 905
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance Qpos_upper_close e : Closeness (Qpos_upper e)
  := fun n x y =&gt; close n x.1 y.1.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 908
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Qpos_upper_close _ _ _ _ /.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 909
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Instance Q_recip_lipschitz (e : Q+)
  : Lipschitz ((/)  pr1  (Qpos_upper_inject e)) (/ (e * e)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 912
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 913
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros n q r xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 914
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold Compose;simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 915
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 915
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
assert (PropHolds (0 &lt; join q (' e))) as E
  by (apply lt_le_trans with (' e);[solve_propholds|apply join_ub_r]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 917
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre>
apply (strictly_order_reflecting ((join q (' e)) *.)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 918
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
assert (PropHolds (0 &lt; join r (' e))) as E'
  by (apply lt_le_trans with (' e);[solve_propholds|apply join_ub_r]).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 920
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre>
apply (strictly_order_reflecting ((join r (' e)) *.)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 921
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
set (X := join r (' e)) at 2 3.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 922
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite &lt;-(Qabs_of_nonneg (join r _)) by solve_propholds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 923
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
set (Y := join q (' e)) at 2 3.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 924
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite &lt;-(Qabs_of_nonneg (join q _)) by solve_propholds.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 925
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite &lt;-!Qabs_mult.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 926
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre>
rewrite !(plus_mult_distr_l (Aplus:=Qplus)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 927
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite dec_recip_inverse by (apply irrefl_neq,symmetric_neq in E;trivial).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 928
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite mult_1_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 929
Time: 0.032s">
<div class="time" style="width: 35.955056179775%"></div>
<pre>
assert (Hrw :  (r  ' e) * ((q  ' e) * - / (r  ' e)) = - Y * (X / X))
  by ring_tac.ring_with_integers (NatPair.Z nat).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 931
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite Hrw;clear Hrw.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 932
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
rewrite dec_recip_inverse by (apply irrefl_neq,symmetric_neq in E';trivial).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 933
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite mult_1_r.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 934
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold X, Y.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 934
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
eapply lt_le_trans.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 935
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 936
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qclose_alt.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 936
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> eapply (non_expanding ( ' e)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 936
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 936
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 936
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 937
Time: 0.009s">
<div class="time" style="width: 10.112359550562%"></div>
<pre> transitivity (' (((e * e) / (e * e)) * n)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 937
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 938
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> rewrite pos_recip_r,Qpos_mult_1_l;reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 938
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: premetric.v
Line: 939
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre> rewrite &lt;-!Qpos_mult_assoc.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 939
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre>
    change (' (e * (e * (/ (e * e) * n)))) with (' e * (' e * ' (/ (e * e) * n))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 940
Time: 0.017s">
<div class="time" style="width: 19.101123595506%"></div>
<pre>
    apply mult_le_compat;try solve_propholds;[apply join_ub_r|].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 941
Time: 0.021s">
<div class="time" style="width: 23.595505617978%"></div>
<pre>
    apply mult_le_compat;try solve_propholds;[apply join_ub_r|].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 942
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 943
Time: 0.027s">
<div class="time" style="width: 30.337078651685%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 944
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End rationals.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 946
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section cauchy.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 948
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Universe UA.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 949
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A : Type@{UA} } {Aclose : Closeness A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 950
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context `{!PreMetric A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 951
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma limit_unique : forall x l1 l2, IsLimit x l1 -&gt; IsLimit x l2 -&gt; l1 = l2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 953
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 954
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x l1 l2 E1 E2.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 955
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply separated.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 956
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 957
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre> rewrite (pos_split2 e),(pos_split2 (e/2)).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 957
Time: 0.004s">
<div class="time" style="width: 4.4943820224719%"></div>
<pre>
apply triangular with (x (e / 2 / 2));[symmetry;apply E1|apply E2].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 958
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 959
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma equiv_through_approx0 : forall (y : Approximation A) ly, IsLimit y ly -&gt;
  forall u e d, close e u (y d) -&gt; close (e+d) u ly.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 962
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 963
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros y ly E1 u e d xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 964
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>
apply (merely_destruct ((fst (rounded _ _ _) xi))).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 965
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros [d0 [d' [He E2]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 966
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pose proof (triangular _ _ _ _ _ E2 (E1 d' _)) as E3.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 967
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
assert (Hrw : e + d = d0 + (d' + d));[|rewrite Hrw;trivial].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 968
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite He.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 969
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 969
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply Qpos_plus_assoc.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 969
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 970
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {Alim : Lim A} `{!CauchyComplete A}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 972
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma equiv_through_approx : forall u (y : Approximation A) e d,
  close e u (y d) -&gt; close (e+d) u (lim y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 975
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 976
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros u y;apply equiv_through_approx0.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 977
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply cauchy_complete.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 977
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 978
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

Lemma equiv_lim_lim (x y : Approximation A) (e d n e' : Q+)
  : e = d + n + e' -&gt; close e' (x d) (y n) -&gt; close e (lim x) (lim y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 981
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 982
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros He xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 983
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
rewrite He.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 984
Time: 0.018s">
<div class="time" style="width: 20.224719101124%"></div>
<pre>
assert (Hrw : d + n + e' = e' + d + n) by (apply pos_eq;ring_tac.ring_with_nat);
rewrite Hrw;clear Hrw.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 986
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply equiv_through_approx.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 987
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
symmetry.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 988
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply equiv_through_approx.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 988
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> symmetry;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 988
Time: 0.006s">
<div class="time" style="width: 6.7415730337079%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 989
Time: 0.002s">
<div class="time" style="width: 2.247191011236%"></div>
<pre>

Lemma lim_same_distance@{} : forall (x y : Approximation A) e,
  (forall d n, close (e+d) (x n) (y n)) -&gt;
  forall d, close (e+d) (lim x) (lim y).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 993
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 994
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x y e E d.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 995
Time: 0.006s">
<div class="time" style="width: 6.7415730337079%"></div>
<pre>
apply equiv_lim_lim with (d/3) (d/3) (e + d/3);[|apply E].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 996
Time: 0.009s">
<div class="time" style="width: 10.112359550562%"></div>
<pre>
path_via (e + 3 / 3 * d).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 997
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 998
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre> rewrite pos_recip_r,Qpos_mult_1_l;trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 998
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: premetric.v
Line: 999
Time: 0.056s">
<div class="time" style="width: 62.921348314607%"></div>
<pre> apply pos_eq;ring_tac.ring_with_nat.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 999
Time: 0.08s">
<div class="time" style="width: 89.887640449438%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1000
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End cauchy.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1002
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section lipschitz_lim.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1004
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {A:Type} {Aclose : Closeness A} `{!PreMetric A}
  `{Bclose : Closeness B} `{!PreMetric B} {Blim : Lim B}
   `{!CauchyComplete B}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1007
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>

#[export] Instance lipschitz_lim_lipschitz (s : Approximation (A -&gt; B)) L
  `{!forall e, Lipschitz (s e) L} : Lipschitz (lim s) L.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1010
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1011
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros e x y xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1012
Time: 0.007s">
<div class="time" style="width: 7.8651685393258%"></div>
<pre>
apply rounded in xi;revert xi;apply (Trunc_ind _);intros [d [d' [E xi]]].</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1013
Time: 0.001s">
<div class="time" style="width: 1.123595505618%"></div>
<pre>
rewrite E,Qpos_plus_mult_distr_l.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1014
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply lim_same_distance.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1015
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
clear e d' E.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1016
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros d' n.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1017
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1017
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply rounded_plus.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1018
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (lipschitz (s n) L).</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1019
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> trivial.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1019
Time: 0.003s">
<div class="time" style="width: 3.3707865168539%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1020
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End lipschitz_lim.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1022
Time: 0.008s">
<div class="time" style="width: 8.9887640449438%"></div>
<pre>

End contents.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1024
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments rounded_le {_ _ A _ _} e u v _ d _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1026
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments non_expanding {A _ B _} f {_ e x y} _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1027
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments lipschitz {A _ B _} f L {_ e x y} _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1028
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments uniform {A _ B _} f mu {_} _ _ _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1029
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments continuous {A _ B _} f {_} _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1030
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments map2_nonexpanding {A _ B _ C _ D _} f g {_ _} e x y xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1032
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments map2_lipschitz {_ _ A _ B _ C _ D _} f g {_ _} Lf Lg {_ _} e x y xi.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1033
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments map2_continuous {_ _ A _ B _ C _ D _} f g {_ _ _ _} u e.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1034
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments Interval_close {_ _ _} _ _ _ _ _ /.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1036
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments Lim A {_}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1038
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments lim {A _ _} _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1039
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments Approximation A {_}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1041
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Build_Approximation {A _} _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1042
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments approximate {A _} _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1043
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments approx_equiv {A _} _ _ _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1044
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments CauchyComplete A {_ _}.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1046
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments arrow_lim {A B _ _ _} _ / _.</pre>
</div>
<div class="code" title="File: premetric.v
Line: 1049
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

