<html>
<head>
<title>Smallness.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Smallness.v</h1>

<div class="code" title="File: Smallness.v
Line: 1
Time: 0.035s">
<div class="time" style="width: 100%"></div>
<pre>Require Import Basics.Overture Basics.Equivalences Basics.Trunc Basics.Tactics
  Basics.Nat Types.Unit Types.Sigma Types.Universe Types.Equiv HFiber.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Minimization ToSet.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Facts about "small" types  *)

(** This closely follows Section 2 of the paper "Non-accessible localizations", by Dan Christensen, https://arxiv.org/abs/2109.06670 *)

(** Universe variables:  we most often use a subset of [i j k u].  We think of [Type@{i}] as containing the "small" types and [Type@{j}] the "large" types.  In some early results, there are no constraints between [i] and [j], and in others we require that [i &lt;= j], as expected.  While the case [i = j] isn't particularly interesting, we put some effort into ensuring that it is permitted as well, as there is no semantic reason to exclude it.  The universe variable [k] should be thought of as max(i+1,j), and it is generally required to satisfy [i &lt; k] and [j &lt;= k].  If we assume that [i &lt; j], then we can take [k = j], but we include [k] so that we also allow the case [i = j].  The universe variable [u] is only present because we occasionally use Univalence in [Type@{k}], so the equality types need a larger universe to live in.  Because of this, most results require [k &lt; u].

Summary of the most common situation:  [i &lt; k &lt; u, j &lt;= k], where [i] is for the small types, [j] is for the large types, [k = max(i+1,j)] and [u] is an ambient universe for Univalence.

We include universe annotations when they clarify the meaning (e.g. in [IsSmall] and when using [PropResizing]), and also when it is required in order to keep control of the universe variables.

Note that [IsSmall] is defined in Overture.v. *)

</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance ishprop_issmall@{i j k | i &lt; k, j &lt;= k}
  `{Univalence} (X : Type@{j})
  : IsHProp (IsSmall@{i j} X).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply hprop_inhabited_contr.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros [Z e].</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* [IsSmall X] is equivalent to [IsSmall Z], which is contractible since it is a based path space. *)
 </pre>
</div>
<div class="code" title="File: Smallness.v
Line: 24
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>rapply (istrunc_equiv_istrunc { Y : Type@{i} &amp; Y &lt;~&gt; Z } _).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 24
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  equiv_via (sig@{k k} (fun Y : Type@{i} =&gt; Y &lt;~&gt; X)).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 25
Time: 0.004s">
<div class="time" style="width: 11.428571428571%"></div>
<pre>
  2: issig.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 27
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro Y.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (equiv_functor_postcompose_equiv Y e).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 29
Time: 0.001s">
<div class="time" style="width: 2.8571428571429%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A type in [Type@{i}] is clearly small. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance issmall_in@{i j | i &lt;= j} (X : Type@{i}) : IsSmall@{i j} X | 10
  := Build_IsSmall X X equiv_idmap.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The small types are closed under equivalence. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition issmall_equiv_issmall@{i1 j1 i2 j2 | i1 &lt;= i2} {A : Type@{j1}} {B : Type@{j2}}
  (e : A &lt;~&gt; B) (sA : IsSmall@{i1 j1} A)
  : IsSmall@{i2 j2} B.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists (smalltype A).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (e oE (equiv_smalltype A)).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The small types are closed under dependent sums. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sigma_closed_issmall@{i j | } {A : Type@{j}}
  (B : A -&gt; Type@{j}) (sA : IsSmall@{i j} A)
  (sB : forall a, IsSmall@{i j} (B a))
  : IsSmall@{i j} { a : A &amp; B a }.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists { a : (smalltype A) &amp; (smalltype (B (equiv_smalltype A a))) }.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 48
Time: 0.001s">
<div class="time" style="width: 2.8571428571429%"></div>
<pre>
  snapply equiv_functor_sigma'; intros; apply equiv_smalltype.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If a map has small codomain and fibers, then the domain is small. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition issmall_issmall_codomain_fibers@{i j | } {X Y : Type@{j}}
  (f : X -&gt; Y)
  (sY : IsSmall@{i j} Y)
  (sF : forall y : Y, IsSmall@{i j} (hfiber f y))
  : IsSmall@{i j} X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  napply issmall_equiv_issmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (equiv_fibration_replacement f)^-1%equiv.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply sigma_closed_issmall; assumption.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Every contractible type is small. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition issmall_contr@{i j| } (X : Type@{j}) (T : Contr X)
  : IsSmall@{i j} X
  := issmall_equiv_issmall (equiv_contr_unit)^-1 _.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If we can show that [X] is small when it is inhabited, then it is in fact small. This is Remark 2.9 in the paper. It lets us simplify the statement of Proposition 2.8. Note that this implies propositional resizing, so the [PropResizing] assumption is necessary. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition issmall_inhabited_issmall@{i j k | i &lt; k, j &lt;= k} `{PropResizing} `{Univalence}
  (X : Type@{j})
  (isX : X -&gt; IsSmall@{i j} X)
  : IsSmall@{i j} X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* Since [IsSmall] is cumulative in the universe [j], it suffices to prove [IsSmall@{i k} X] for [k] the universe that [IsSmall@{i j}] lives in.  We think of [k] as max(i+1,j). *)
 </pre>
</div>
<div class="code" title="File: Smallness.v
Line: 73
Time: 0.005s">
<div class="time" style="width: 14.285714285714%"></div>
<pre>rapply (issmall_issmall_codomain_fibers@{i k} isX).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro sX.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 2.8571428571429%"></div>
<pre>
  rapply sigma_closed_issmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 76
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If a type [X] is truncated, then so is [smalltype X]. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance istrunc_smalltype@{i j | } (X : Type@{j}) (n : trunc_index)
  `{IsSmall@{i j} X, IsTrunc n X}
  : IsTrunc n (smalltype X)
  := istrunc_equiv_istrunc X (equiv_smalltype@{i j} X)^-1%equiv.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Locally small types *)

(** We say that a type [X] is 0-locally small if it is small, and (n+1)-locally small if its identity types are n-locally small. *)
(* TODO: Can we make this an inductive type and avoid the extra universe variable [k]? *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 86
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Fixpoint IsLocallySmall@{i j k | i &lt; k, j &lt;= k} (n : nat) (X : Type@{j}) : Type@{k}
  := match n with
    | 0%nat =&gt; IsSmall@{i j} X
    | S m =&gt; forall x y : X, IsLocallySmall m (x = y)
    end.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Existing Class IsLocallySmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Hint Unfold IsLocallySmall : typeclass_instances.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance ishprop_islocallysmall@{i j k | i &lt; k, j &lt;= k} `{Univalence}
  (n : nat) (X : Type@{j})
  : IsHProp@{k} (IsLocallySmall@{i j k} n X).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* Here and later we use [simple_induction] to control the universe variable. *)
 </pre>
</div>
<div class="code" title="File: Smallness.v
Line: 99
Time: 0.003s">
<div class="time" style="width: 8.5714285714286%"></div>
<pre>revert X; simple_induction n n IHn; exact _.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A small type is n-locally small for all [n]. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance islocallysmall_in@{i j k | i &lt;= j, j &lt;= k, i &lt; k}
  (n : nat) (X : Type@{i})
  : IsLocallySmall@{i j k} n X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n; intro X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply issmall_in.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x y.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (IHn (x = y)).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The n-locally small types are closed under equivalence. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition islocallysmall_equiv_islocallysmall
  @{i j1 j2 k | i &lt; k, j1 &lt;= k, j2 &lt;= k}
  (n : nat) {A : Type@{j1}} {B : Type@{j2}}
  (e : A &lt;~&gt; B) (lsA : IsLocallySmall@{i j1 k} n A)
  : IsLocallySmall@{i j2 k} n B.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert A B e lsA.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple_induction n n IHn.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 121
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact @issmall_equiv_issmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 121
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B e lsA b b'.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    napply IHn.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (equiv_ap' (e^-1%equiv) b b')^-1%equiv.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 125
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply lsA.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 125
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A small type is n-locally small for all n. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance islocallysmall_issmall@{i j k | i &lt; k, j &lt;= k} (n : nat)
  (X : Type@{j}) (sX : IsSmall@{i j} X)
  : IsLocallySmall@{i j k} n X
  := islocallysmall_equiv_islocallysmall n (equiv_smalltype X) _.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If a type is n-locally small, then it is (n+1)-locally small. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance islocallysmall_succ@{i j k | i &lt; k, j &lt;= k} (n : nat)
  (X : Type@{j}) (lsX : IsLocallySmall@{i j k} n X)
  : IsLocallySmall@{i j k} n.+1 X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert X lsX; simple_induction n n IHn; intros X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply islocallysmall_issmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro lsX.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros x y.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply IHn, lsX.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The n-locally small types are closed under dependent sums. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 144
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance sigma_closed_islocallysmall@{i j k | i &lt; k, j &lt;= k}
  (n : nat) {A : Type@{j}} (B : A -&gt; Type@{j})
  (lsA : IsLocallySmall@{i j k} n A)
  (lsB : forall a, IsLocallySmall@{i j k} n (B a))
  : IsLocallySmall@{i j k} n { a : A &amp; B a }.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert A B lsA lsB.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple_induction n n IHn.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact @sigma_closed_issmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B lsA lsB x y.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (islocallysmall_equiv_islocallysmall n (equiv_path_sigma _ x y)).</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply IHn.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply lsA.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    *</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro p.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply lsB.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If a map has n-locally small codomain and fibers, then the domain is n-locally small. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition islocallysmall_islocallysmall_codomain_fibers@{i j k | i &lt; k, j &lt;= k}
  (n : nat) {X Y : Type@{j}} (f : X -&gt; Y)
  (sY : IsLocallySmall@{i j k} n Y)
  (sF : forall y : Y, IsLocallySmall@{i j k} n (hfiber f y))
  : IsLocallySmall@{i j k} n X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  napply islocallysmall_equiv_islocallysmall.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (equiv_fibration_replacement f)^-1%equiv.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply sigma_closed_islocallysmall; assumption.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 170
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Under propositional resizing, every (n+1)-truncated type is (n+2)-locally small. This is Lemma 2.3 in the paper. *)</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance islocallysmall_trunc@{i j k | i &lt; k, j &lt;= k} `{PropResizing}
  (n : trunc_index) (X : Type@{j}) (T : IsTrunc n.+1 X)
  : IsLocallySmall@{i j k} (trunc_index_to_nat n) X.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 175
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  revert n X T.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple_induction n n IHn; cbn.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact issmall_hprop@{i j}.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros X T x y.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rapply IHn.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Smallness.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

