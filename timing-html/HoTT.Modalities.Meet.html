<html>
<head>
<title>Meet.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Meet.v</h1>

<div class="code" title="File: Meet.v
Line: 1
Time: 0.037s">
<div class="time" style="width: 74%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 1
Time: 0.04s">
<div class="time" style="width: 80%"></div>
<pre>
Require Import Extensions HFiber Truncations NullHomotopy Limits.Pullback.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 2
Time: 0.021s">
<div class="time" style="width: 42%"></div>
<pre>
Require Import Descent Lex Separated.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** We construct "canonical" binary meets of reflective subuniverses (that is, whose underlying subuniverse is an intersection), without assuming accessibility.  In particular, we will show:

1. Given two reflective subuniverses L and O, if [L O X] is [O]-modal, then it is a reflection into the canonical meet.  In particular, this is always the case if [L] preserves [O]-modal types; this is Theorem 3.30 of RSS.

1. If L and O are lex modalities satisfying an additional "composability" condition, then the composite functor [L o O] converges to a reflection into the canonical meet after n+2 applications when applied to an n-type for some finite n.

The latter gives in particular a synthetic approach to higher sheafification (stack completion).  As described at https://ncatlab.org/nlab/show/plus+construction+on+presheaves, for any site C the topos of presheaves on its Grothendieck topology is cohesive and even totally connected, so that its shape and sharp modalities are both lex.  Their canonical meet is the topos of sheaves for the given topology, and the composite functor [shape o sharp] is the usual "plus construction" on (higher) presheaves.  Thus, we recover synthetically the result that an n-truncated type can be stackified by (n+2) applications of the plus construction.  We also refer to [L o O] as a "plus construction" in the general case of reflective subuniverses.  *)

</pre>
</div>
<div class="code" title="File: Meet.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section RSUMeet.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context (L O : ReflectiveSubuniverse).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The canonical meet of two subuniverses is their intersection. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Meet : Subuniverse.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unshelve econstructor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros X; exact (In L X * In O X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 21
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre> intros ? X; exact _.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 22
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre> intros T U [? ?] f feq; split; exact (inO_equiv_inO _ f).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  #[export] Instance inO_inmeet_l (X : Type) `{im : In Meet X} : In L X := fst im.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  #[export] Instance inO_inmeet_r (X : Type) `{im : In Meet X} : In O X := snd im.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The basic tool in studying its reflectivity is the "plus construction" that applies the two reflectors in sequence. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Plus (X : Type) := L (O X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  #[export] Instance inO_plus_l (X : Type) : In L (Plus X) := _.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** This is not necessarily a reflector, but it is a well-pointed endofunctor. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition to_plus (X : Type) : X -&gt; Plus X
    := to L (O X) o to O X.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition plus_functor {X Y : Type} (f : X -&gt; Y) : Plus X -&gt; Plus Y
    := O_functor L (O_functor O f).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition to_plus_natural {X Y : Type} (f : X -&gt; Y)
    : plus_functor f o to_plus X == to_plus Y o f.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros x.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold plus_functor, to_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (to_O_natural L (O_functor O f) (to O X x) @ _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply ap.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply to_O_natural.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition wellpointed_plus (X : Type)
    : to_plus (Plus X) == plus_functor (to_plus X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 54
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>
    rapply (@O_indpaths L).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros ox.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold to_plus, plus_functor; cbn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ @ (to_O_natural L _ ox)^).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply ap.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    revert ox; apply O_indpaths; intros x.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact ((to_O_natural O _ x)^).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 61
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Moreover, it has the desired factorization property of a reflector (though it may not belong to the meet subuniverse itself). *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ooextendable_plus {X Y : Type} `{In Meet Y}
    : ooExtendableAlong (to_plus X) (fun _  =&gt; Y).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 68
Time: 0.003s">
<div class="time" style="width: 6%"></div>
<pre>
    apply (ooextendable_compose _ (to O X) (to L (O X)));
      rapply extendable_to_O.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 71
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>

  Definition plus_rec {P Q : Type} `{In Meet Q} (f : P -&gt; Q)
    : Plus P -&gt; Q
    := (fst (ooextendable_plus 1%nat) f).1.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 75
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>

  Definition plus_rec_beta {P Q : Type} `{In Meet Q} (f : P -&gt; Q) (x : P)
    : plus_rec f (to_plus P x) = f x
    := (fst (ooextendable_plus 1%nat) f).2 x.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 79
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>

  Definition plus_indpaths {P Q : Type} `{In Meet Q} (g h : Plus P -&gt; Q)
             (p : g o to_plus P == h o to_plus P)
    : g == h
    := (fst (snd (ooextendable_plus 2%nat) g h) p).1.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 84
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>

  Definition plus_indpaths_beta {P Q : Type} `{In Meet Q} (g h : Plus P -&gt; Q)
             (p : g o (to_plus P) == h o (to_plus P)) (x : P)
    : plus_indpaths g h p (to_plus P x) = p x
    := (fst (snd (ooextendable_plus 2%nat) g h) p).2 x.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Moreover, its fixed points, as a pointed endofunctor, are the types in the meet. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition isequiv_plus_inmeet (X : Type) `{In Meet X} : IsEquiv (to_plus X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 94
Time: 0.019s">
<div class="time" style="width: 38%"></div>
<pre>
    rapply (isequiv_compose (to O X) (to L (O X))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply isequiv_to_O_inO.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 96
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    exact (inO_equiv_inO X (to O X)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition inmeet_isequiv_plus (X : Type) `{IsEquiv _ _ (to_plus X)} : In Meet X.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    split.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 103
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre> exact (inO_equiv_inO (Plus X) (to_plus X)^-1).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> srapply inO_to_O_retract.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Meet.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact ((to_plus X)^-1 o (to L (O X))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Meet.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; apply (eissect (to_plus X)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** It follows that if [Plus X] ever *does* lie in the meet, then it is a reflection. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>#[export] Instance prereflects_plus_inO (X : Type) `{In O (Plus X)}
    : PreReflects Meet X.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unshelve econstructor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (Plus X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split; exact _.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply to_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  #[export] Instance reflects_plus_inO (X : Type) `{In O (Plus X)}
    : Reflects Meet X.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 121
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    constructor; intros; exact ooextendable_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Recalling that a type is connected for a reflective subuniverse if and only if its reflector is nullhomotopic, we define a type to be "plus-connected" if its map to plus is nullhomotopic.  If the meet is reflective, this coincides with connectedness for that reflective subuniverse. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition PlusConnected (X : Type) := NullHomotopy (to_plus X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition plusconnected_equiv {X Y : Type} (f : X &lt;~&gt; Y)
    : PlusConnected X -&gt; PlusConnected Y.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros [px e].</pre>
</div>
<div class="code" title="File: Meet.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (plus_functor f px); intros y.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ @ ap (plus_functor f) (e (f^-1 y))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite to_plus_natural.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    symmetry; apply ap, eisretr.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Similarly, we say a map is plus-connected if all of its fibers are. *)

 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition PlusConnMap {X Y : Type} (f : X -&gt; Y) := forall y, PlusConnected (hfiber f y).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 142
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>

End RSUMeet.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 144
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Let's now assume we are trying to intersect two lex modalities. *)

</pre>
</div>
<div class="code" title="File: Meet.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section LexMeet.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context (L O : Modality) `{Lex L} `{Lex O}.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The plus construction, being a composite of two lex functors, is also lex.  Thus, it preserves path-types. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition plus_path {X : Type} (x y : X)
    : Plus L O (x = y) &lt;~&gt; (to_plus L O X x = to_plus L O X y).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_path_O L (to O X x) (to O X y) oE _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_O_functor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rapply equiv_path_O.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 157
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>

  Definition plus_path_to_plus {X : Type} (x y : X)
    : plus_path x y o to_plus L O (x = y) == @ap _ _ (to_plus L O X) x y.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros p; unfold plus_path, to_plus, equiv_path_O, equiv_path_OO, path_OO.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    cbn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 163
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rewrite to_O_natural.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 164
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rewrite O_rec_beta.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 165
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rewrite (ap_compose (to O X) (to L (O X))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply ap.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply O_rec_beta.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 168
Time: 0.005s">
<div class="time" style="width: 10%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** This implies that plus-connected types are closed under path-spaces. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition plusconnected_path {X : Type} (x y : X)
             (pc : PlusConnected L O X) : PlusConnected L O (x = y).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 173
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold PlusConnected in *.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 175
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>
    apply (cancelL_nullhomotopy_equiv _ (plus_path x y)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (nullhomotopy_homotopic (fun u =&gt; (plus_path_to_plus x y u)^)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply nullhomotopy_ap; assumption.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** And hence plus-connected maps are closed under diagonals. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition plusconnmap_diagonal {X Y : Type} (f : X -&gt; Y)
    : PlusConnMap L O f -&gt; PlusConnMap L O (diagonal f).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros pc p.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (plusconnected_equiv L O (hfiber_diagonal f p)^-1 _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply plusconnected_path, pc.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The plus-construction also preserves fibers. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition plus_hfiber {X Y : Type} (f : X -&gt; Y) (y : Y)
    : Plus L O (hfiber f y) &lt;~&gt; hfiber (plus_functor L O f) (to_plus L O Y y).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_O_functor_hfiber L (O_functor O f) (to O Y y) oE _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_O_functor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 195
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rapply equiv_O_functor_hfiber.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 197
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>

  Definition plus_hfiber_to_plus {X Y : Type} (f : X -&gt; Y) (y : Y)
    : plus_hfiber f y o to_plus L O (hfiber f y)
      == functor_hfiber (fun u =&gt; (to_plus_natural L O f u)^) y.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros [x q]; unfold plus_hfiber, to_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    cbn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 204
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rewrite to_O_natural.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 205
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rewrite O_functor_hfiber_natural.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 206
Time: 0.008s">
<div class="time" style="width: 16%"></div>
<pre>
    unfold O_functor_hfiber, functor_hfiber, functor_sigma; cbn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 207
Time: 0.003s">
<div class="time" style="width: 6%"></div>
<pre>
    rewrite O_rec_beta; cbn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 208
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    apply ap.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold to_plus_natural.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 210
Time: 0.005s">
<div class="time" style="width: 10%"></div>
<pre>
    rewrite !inv_V, ap_pp, concat_p_pp.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply whiskerL.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite &lt;- ap_compose.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 214
Time: 0.035s">
<div class="time" style="width: 70%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** And pullbacks. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 218
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>Definition equiv_plus_pullback {A B C : Type} (f : B -&gt; A) (g : C -&gt; A)
    : Plus L O (Pullback f g) &lt;~&gt; Pullback (plus_functor L O f) (plus_functor L O g).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_O_pullback L (O_functor O f) (O_functor O g) oE _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_O_functor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 222
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rapply equiv_O_pullback.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** And diagonals. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 227
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>Definition diagonal_plus_functor {A B : Type} (f : A -&gt; B)
    : diagonal (plus_functor L O f) == equiv_plus_pullback f f o plus_functor L O (diagonal f).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros x.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (diagonal_O_functor L (O_functor O f) x @ _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 231
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    apply (ap (equiv_O_pullback L (O_functor O f) (O_functor O f))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (O_functor_homotopy L _ _ (diagonal_O_functor O f) x @ _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold plus_functor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (O_functor_compose L _ _ x).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 235
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Recall that a modality is characterized by connectedness of the units.  Analogously, we can now prove that the plus-units are all plus-connected.  This is equivalently a sort of coherence axiom for the homotopy [wellpointed_plus], that when precomposed with [to_plus] it becomes [to_plus_natural]. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition plusconnmap_to_plus (X : Type) : PlusConnMap L O (to_plus L O X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros y; unfold PlusConnected.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 241
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>
    apply (cancelL_nullhomotopy_equiv _ (plus_hfiber (to_plus L O X) y)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 242
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    apply (nullhomotopy_homotopic (fun u =&gt; (plus_hfiber_to_plus (to_plus L O X) y u)^)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold NullHomotopy, hfiber.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unshelve refine ((y ; _) ; _).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Meet.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> symmetry; apply wellpointed_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Meet.v
Line: 246
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    intros [x p]; destruct p.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 247
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    unfold functor_hfiber, functor_sigma; cbn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply ap.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 249
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    rewrite inv_V, concat_p1.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold wellpointed_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 251
Time: 0.003s">
<div class="time" style="width: 6%"></div>
<pre>
    rewrite !O_indpaths_beta.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 252
Time: 0.005s">
<div class="time" style="width: 10%"></div>
<pre>
    rewrite inv_pp, ap_V, !inv_V.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 254
Time: 0.03s">
<div class="time" style="width: 60%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Recall also (from [nsep_iff_trunc_to_O]) that a type is n-separated for a lex modality [O] if and only if its [O]-unit is an n-truncated map.  We can now prove the analogous fact for the plus-construction.  We state this using [MapIn (Tr n)] instead of [IsTrunc n] because we have more useful lemmas for [MapIn]. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition nsep_iff_trunc_plus (n : trunc_index) (X : Type)
    : In (nSep n (Meet L O)) X &lt;-&gt; MapIn (Tr n) (to_plus L O X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    revert X; induction n as [|n IHn]; intros X; split; intros H.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply contr_map_isequiv.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      rapply isequiv_plus_inmeet.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply inmeet_isequiv_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      rapply isequiv_contr_map.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply istruncmap_from_ap; intros x y.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply istruncmap_mapinO_tr.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      pose (i := fst (IHn _) (H x y)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 268
Time: 0.05s">
<div class="time" style="width: 100%"></div>
<pre>
      exact (mapinO_homotopic _ _ (plus_path_to_plus x y)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x y.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply (snd (IHn (x = y))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      pose (i := istruncmap_ap n (to_plus L O X) x y).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply mapinO_tr_istruncmap in i.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 273
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>
      apply (mapinO_homotopic _ ((plus_path x y)^-1 o (@ap _ _ (to_plus L O X) x y))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      {</pre>
</div>
<div class="code" title="File: Meet.v
Line: 275
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre> intros p; apply moveR_equiv_V; symmetry; apply plus_path_to_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 275
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Meet.v
Line: 275
Time: 0.003s">
<div class="time" style="width: 6%"></div>
<pre>
      rapply mapinO_compose.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 276
Time: 0.002s">
<div class="time" style="width: 4%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We now make one more assumption, that the plus-construction inverts plus-connected embeddings.  In the case of the plus-construction for stacks, this corresponds roughly to the "local character" condition on a Grothendieck topology. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context (composing : forall (X Y : Type) (f : X -&gt; Y)
                              (fe : IsEmbedding f) (fc : PlusConnMap L O f),
              IsEquiv (plus_functor L O f)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 282
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** This implies, by induction, that the plus-construction decreases the truncation-level of any finitely truncated plus-connected map. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 285
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>Definition istruncmap_plus_functor {n : trunc_index} {X Y : Type} (f : X -&gt; Y)
             `{MapIn (Tr n.+1) _ _ f} (pc : PlusConnMap L O f)
    : MapIn (Tr n) (plus_functor L O f).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 288
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    generalize dependent f; revert X Y; induction n as [|n IHn]; intros X Y f ? pc.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Meet.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply mapinO_tr_istruncmap, contr_map_isequiv, composing; assumption.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Meet.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    pose (O_eq_Tr n).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 291
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (mapinO_O_leq (Sep (Tr n)) _), mapinO_from_diagonal.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 292
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    napply (mapinO_homotopic (Tr n) _ (fun u =&gt; (diagonal_plus_functor f u)^)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply mapinO_compose.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 294
Time: 0.003s">
<div class="time" style="width: 6%"></div>
<pre>
    2:rapply mapinO_isequiv.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 295
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply IHn.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply mapinO_diagonal.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      pose (O_eq_Tr n.+1).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 298
Time: 0.029s">
<div class="time" style="width: 58%"></div>
<pre>
      rapply (mapinO_O_leq _ (Sep (Tr n.+1))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 300
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply plusconnmap_diagonal; assumption.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 300
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 301
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** It follows, by applying this to the plus-unit and using well-pointedness, that the plus-construction on *types* decreases their plus-separatedness. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 304
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition nsep_plus (n : trunc_index) (X : Type) `{In (nSep n.+1 (Meet L O)) X}
    : In (nSep n (Meet L O)) (Plus L O X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 305
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply nsep_iff_trunc_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    nrefine (mapinO_homotopic _ _ (fun u =&gt; (wellpointed_plus L O X u)^)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 308
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply mapinO_tr_istruncmap, istruncmap_plus_functor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply istruncmap_mapinO_tr, nsep_iff_trunc_plus; assumption.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 311
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply plusconnmap_to_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 311
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 312
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Therefore, if a type starts out as n-plus-separated, then n+2 applications of the plus-construction suffice to make it (-2)-plus-separated, i.e. in the meet subuniverse.  Hence it has a reflection. *)
 </pre>
</div>
<div class="code" title="File: Meet.v
Line: 315
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>#[export] Instance prereflects_plus_nsep (n : trunc_index) (X : Type) `{In (nSep n (Meet L O)) X}
    : PreReflects (Meet L O) X.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 316
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 317
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    generalize dependent X; induction n as [|n IHn]; intros X ?.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 318
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Meet.v
Line: 319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rapply prereflects_in.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Meet.v
Line: 319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    specialize (IHn (Plus L O X) (nsep_plus n X)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 320
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unshelve econstructor.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 321
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (O_reflector (Meet L O) (Plus L O X)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 323
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact _.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 323
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (to (Meet L O) (Plus L O X) o to_plus L O X).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 325
Time: 0.02s">
<div class="time" style="width: 40%"></div>
<pre>

  #[export] Instance reflects_plus_nsep (n : trunc_index) (X : Type) `{In (nSep n (Meet L O)) X}
    : Reflects (Meet L O) X.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 328
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 329
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    generalize dependent X; induction n as [|n IHn]; intros X ?.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 330
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Meet.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> rapply reflects_in.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Meet.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    specialize (IHn (Plus L O X) (nsep_plus n X)).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    constructor; intros.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 333
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
    apply (ooextendable_compose _ (to_plus L O X) (to (Meet L O) (Plus L O X))).</pre>
</div>
<div class="code" title="File: Meet.v
Line: 334
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (@extendable_to_O (Meet L O) (Plus L O X)); assumption.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Meet.v
Line: 336
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre> rapply ooextendable_plus.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 336
Time: 0.001s">
<div class="time" style="width: 2%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 337
Time: 0.028s">
<div class="time" style="width: 56%"></div>
<pre>

End LexMeet.</pre>
</div>
<div class="code" title="File: Meet.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

