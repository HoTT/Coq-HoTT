<html>
<head>
<title>Loops.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Loops.v</h1>

<div class="code" title="File: Loops.v
Line: 1
Time: 0.037s">
<div class="time" style="width: 24.832214765101%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 1
Time: 0.036s">
<div class="time" style="width: 24.161073825503%"></div>
<pre>
Require Import HFiber Factorization Truncations.Core Truncations.Connectedness HProp.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 2
Time: 0.003s">
<div class="time" style="width: 2.0134228187919%"></div>
<pre>
From HoTT.WildCat Require Import Core Equiv PointedCat NatTrans.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 3
Time: 0.018s">
<div class="time" style="width: 12.080536912752%"></div>
<pre>
Require Import Pointed.Core Pointed.pEquiv.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 4
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
Require Import Spaces.Nat.Core.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope pointed_scope.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Loop spaces *)

(** The type [x = x] is pointed. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance ispointed_loops A (a : A) : IsPointed (a = a) := 1.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition loops (A : pType) : pType
  := [point A = point A, 1].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition iterated_loops (n : nat) (A : pType) : pType
  := nat_iter n loops A.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Inner unfolding for iterated loops *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition unfold_iterated_loops (n : nat) (X : pType)
  : iterated_loops n.+1 X = iterated_loops n (loops X)
  := nat_iter_succ_r _ _ _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The loop space decreases the truncation level by one.  We don't bother making this an instance because it is automatically found by typeclass search, but we record it here in case anyone is looking for it. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 24
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition istrunc_loops {n} (A : pType) `{IsTrunc n.+1 A}
  : IsTrunc n (loops A) := _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Similarly for connectedness. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 27
Time: 0.009s">
<div class="time" style="width: 6.0402684563758%"></div>
<pre>Definition isconnected_loops `{Univalence} {n} (A : pType)
  `{IsConnected n.+1 A} : IsConnected n (loops A) := _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma pequiv_loops_punit : loops pUnit &lt;~&gt;* pUnit.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> srapply (equiv_adjointify (fun _ =&gt; tt) (fun _ =&gt; idpath)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: by intros [].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 34
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    rapply path_contr.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> 

(** ** Functoriality of loop spaces *)

(** Action on 1-cells *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance is0functor_loops : Is0Functor loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Build_Is0Functor.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros A B f.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 44
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  refine (Build_pMap (fun p =&gt; (point_eq f)^ @ (ap f p @ point_eq f)) _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ @ concat_Vp (point_eq f)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply whiskerL.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply concat_1p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 47
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 48
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>

Instance is1functor_loops : Is1Functor loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply Build_Is1Functor.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** Action on 2-cells *)
 </pre>
</div>
<div class="code" title="File: Loops.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Loops.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B f g p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 54
Time: 0.018s">
<div class="time" style="width: 12.080536912752%"></div>
<pre>
    pointed_reduce.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 55
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    srapply Build_pHomotopy; cbn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro q.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (_ @ (concat_p1 _)^ @ (concat_1p _)^).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply moveR_Vp.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply (concat_Ap (fun x =&gt; p x @ 1)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> generalize (p point0).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> generalize (g point0).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 61
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    intros _ [].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** Preservation of identity. *)
 </pre>
</div>
<div class="code" title="File: Loops.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Loops.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    srapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (concat_1p _ @ concat_p1 _ @ ap_idmap _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** Preservation of composition. *)
 </pre>
</div>
<div class="code" title="File: Loops.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>-</pre>
</div>
<div class="code" title="File: Loops.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B c g f.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    srapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine ((inv_pp _ _ @@ 1) @ concat_pp_p _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply whiskerL.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
      refine (((ap_V _ _)^ @@ 1) @ _ @ concat_p_pp _ _ _ @ ((ap_pp _ _ _)^ @@ 1)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply whiskerL.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 76
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
      refine (_ @ concat_p_pp _ _ _ @ ((ap_pp _ _ _)^ @@ 1)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 77
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply whiskerR.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply ap_compose.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 79
Time: 0.149s">
<div class="time" style="width: 100%"></div>
<pre>
    by pointed_reduce.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 80
Time: 0.12s">
<div class="time" style="width: 80.536912751678%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Properties of loops functor *)

(** Loops functor distributes over concatenation *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 85
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Lemma fmap_loops_pp {X Y : pType} (f : X -&gt;* Y) (x y : loops X)
  : fmap loops f (x @ y) = fmap loops f x @ fmap loops f y.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 86
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 87
Time: 0.006s">
<div class="time" style="width: 4.0268456375839%"></div>
<pre>
  pointed_reduce_rewrite.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap_pp.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 89
Time: 0.004s">
<div class="time" style="width: 2.6845637583893%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Loops is a pointed functor *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance ispointedfunctor_loops : IsPointedFunctor loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 93
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
  snapply Build_IsPointedFunctor'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1-4: exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact pequiv_loops_punit.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma fmap_loops_pconst {A B : pType} : fmap loops (@pconst A B) ==* pconst.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 100
Time: 0.025s">
<div class="time" style="width: 16.778523489933%"></div>
<pre>
  tapply fmap_zero_morphism.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** *** Iterated loops functor *)

(** Action on 1-cells *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance is0functor_iterated_loops n : Is0Functor (iterated_loops n).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  napply is0functor_compose; exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance is1functor_iterated_loops n : Is1Functor (iterated_loops n).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 116
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  napply is1functor_compose; exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 118
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>

Lemma fmap_iterated_loops_pp {X Y : pType} (f : X -&gt;* Y) n
  (x y : iterated_loops n.+1 X)
  : fmap (iterated_loops n.+1) f (x @ y)
    = fmap (iterated_loops n.+1) f x @ fmap (iterated_loops n.+1) f y.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 124
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  apply fmap_loops_pp.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 125
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The fiber of [fmap loops f] is equivalent to a fiber of [ap f]. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 128
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition hfiber_fmap_loops {A B : pType} (f : A -&gt;* B) (p : loops B)
  : {q : loops A &amp; ap f q = (point_eq f @ p) @ (point_eq f)^}
    &lt;~&gt; hfiber (fmap loops f) p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros q.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_moveR_Vp _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_moveR_pM.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 134
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The loop space functor decreases the truncation level by one.  *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 137
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Instance istrunc_fmap_loops {n} (A B : pType) (f : A -&gt;* B)
  `{IsTruncMap n.+1 _ _ f} : IsTruncMap n (fmap loops f).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 140
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre> exact (istrunc_equiv_istrunc _ (hfiber_fmap_loops f p)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** And likewise the connectedness.  *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 143
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Instance conn_map_fmap_loops `{Univalence} {n : trunc_index}
  (A B : pType) (f : A -&gt;* B) `{IsConnMap n.+1 _ _ f}
  : IsConnMap n (fmap loops f).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros p; eapply isconnected_equiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (hfiber_fmap_loops f p oE _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    symmetry; apply hfiber_ap.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 150
Time: 0.043s">
<div class="time" style="width: 28.859060402685%"></div>
<pre> exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 150
Time: 0.003s">
<div class="time" style="width: 2.0134228187919%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 151
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>

Definition conn_map_iterated_fmap_loops `{Univalence}
  (n : trunc_index) (k : nat) (A B : pType) (f : A -&gt;* B)
  (C : IsConnMap (trunc_index_inc' n k) f)
  : IsConnMap n (fmap (iterated_loops k) f).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction k in n, C |- *.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact C.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply conn_map_fmap_loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply IHk.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact C.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It follows that loop spaces "commute with images". *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 165
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition equiv_loops_image `{Univalence} n {A B : pType} (f : A -&gt;* B)
  : loops ([image n.+1 f, factor1 (image n.+1 f) (point A)])
  &lt;~&gt; image n (fmap loops f).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  set (C := [image n.+1 f, factor1 (image n.+1 f) (point A)]).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  pose (g := @Build_pMap A C (factor1 (image n.+1 f)) 1).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 170
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  pose (h := @Build_pMap C B (factor2 (image n.+1 f)) (point_eq f)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 171
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  transparent assert (I : (Factorization
    (@IsConnMap n) (@MapIn n) (fmap loops f))).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 173
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 174
Time: 0.072s">
<div class="time" style="width: 48.322147651007%"></div>
<pre> refine (@Build_Factorization (@IsConnMap n) (@MapIn n)
      (loops A) (loops B) (fmap loops f) (loops C)
      (fmap loops g) (fmap loops h) _ _ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros x; symmetry.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 177
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    refine (_ @ fmap_comp loops g h x).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 178
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 179
Time: 0.003s">
<div class="time" style="width: 2.0134228187919%"></div>
<pre>
    abstract (rewrite !concat_1p; reflexivity).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 180
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  exact (path_intermediate (path_factor (O_factsys n) (fmap loops f) I
    (image n (fmap loops f)))).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 182
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Loop inversion is a pointed equivalence *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition loops_inv (A : pType) : loops A &lt;~&gt;* loops A.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 186
Time: 0.008s">
<div class="time" style="width: 5.3691275167785%"></div>
<pre>
  srapply Build_pEquiv.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (Build_pMap inverse 1).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isequiv_path_inverse.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Loops functor preserves equivalences *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 192
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition pequiv_fmap_loops {A B : pType}
  : A $&lt;~&gt; B -&gt; loops A $&lt;~&gt; loops B
  := emap loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A version of [unfold_iterated_loops] that's an equivalence rather than an equality.  We could get this from the equality, but it's more useful to construct it explicitly since then we can reason about it. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition unfold_iterated_loops' (n : nat) (X : pType)
  : iterated_loops n.+1 X &lt;~&gt;* iterated_loops n (loops X).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  change (iterated_loops n.+2 X)
    with (loops (iterated_loops n.+1 X)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply pequiv_fmap_loops, IHn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** For instance, we can prove that it's natural. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 206
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition unfold_iterated_fmap_loops {A B : pType} (n : nat) (f : A -&gt;* B)
  : (unfold_iterated_loops' n B) o* (fmap (iterated_loops n.+1) f)
    ==* (fmap (iterated_loops n) (fmap loops f)) o* (unfold_iterated_loops' n A).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> srefine (Build_pHomotopy _ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Loops.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Loops.v
Line: 213
Time: 0.006s">
<div class="time" style="width: 4.0268456375839%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply moveL_pV.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (concat_1p _ @ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (concat_1p _ @ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (_ @ (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact ((ap_idmap _)^).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 218
Time: 0.004s">
<div class="time" style="width: 2.6845637583893%"></div>
<pre> refine ((fmap_comp loops _ _)^* @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 218
Time: 0.004s">
<div class="time" style="width: 2.6845637583893%"></div>
<pre>
    refine (_ @* (fmap_comp loops _ _)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 219
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
    tapply (fmap2 loops).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 220
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    exact IHn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 221
Time: 0.029s">
<div class="time" style="width: 19.463087248322%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Iterated loops preserves equivalences *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 224
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition pequiv_fmap_iterated_loops {A B} n
  : A &lt;~&gt;* B -&gt; iterated_loops n A &lt;~&gt;* iterated_loops n B
  := emap (iterated_loops n).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Loops preserves products. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma loops_prod (X Y : pType) : loops (X * Y) &lt;~&gt;* loops X * loops Y.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (equiv_path_prod (point (X * Y)) (point (X * Y)))^-1%equiv.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 232
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** There is a natural map from [loops (X * Y)] to [loops X * loops Y], and ideally it would definitionally underlie the equivalence [loops_prod].  That's not the case, but we show that [loops_prod] is homotopic to the expected maps after projecting to each factor. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 235
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition pfst_loops_prod (X Y : pType)
  : pfst o* loops_prod X Y ==* fmap loops pfst.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro p; simpl.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rhs napply concat_1p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    symmetry; apply concat_p1.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 242
Time: 0.003s">
<div class="time" style="width: 2.0134228187919%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 243
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>

Definition psnd_loops_prod (X Y : pType)
  : psnd o* loops_prod X Y ==* fmap loops psnd.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro p; simpl.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rhs napply concat_1p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    symmetry; apply concat_p1.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 252
Time: 0.016s">
<div class="time" style="width: 10.738255033557%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Iterated loops of products are products of iterated loops. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 255
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Lemma iterated_loops_prod (X Y : pType) {n}
  : iterated_loops n (X * Y) &lt;~&gt;* (iterated_loops n X) * (iterated_loops n Y).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n as [|n IHn].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 259
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  exact (loops_prod _ _ o*E emap loops IHn).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 260
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Similarly, we compute the projections here. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 263
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition pfst_iterated_loops_prod (X Y : pType) {n}
  : pfst o* iterated_loops_prod X Y ==* fmap (iterated_loops n) pfst.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n as [|n IHn].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 268
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre> change (_ ==* ?R) with (pfst o* (loops_prod _ _ o* fmap loops (iterated_loops_prod _ _)) ==* R).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 268
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine ((pmap_compose_assoc _ _ _)^* @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (pmap_prewhisker _ (pfst_loops_prod _ _) @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 270
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    refine ((fmap_comp loops _ _)^* @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 271
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    change (?L ==* _) with (L ==* fmap loops (fmap (iterated_loops n) pfst)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 272
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
    tapply (fmap2 loops); simpl.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact IHn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 274
Time: 0.005s">
<div class="time" style="width: 3.3557046979866%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 275
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>

Definition psnd_iterated_loops_prod (X Y : pType) {n}
  : psnd o* iterated_loops_prod X Y ==* fmap (iterated_loops n) psnd.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 278
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n as [|n IHn].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 281
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 281
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Loops.v
Line: 282
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre> change (_ ==* ?R) with (psnd o* (loops_prod _ _ o* fmap loops (iterated_loops_prod _ _)) ==* R).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 282
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine ((pmap_compose_assoc _ _ _)^* @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 283
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (pmap_prewhisker _ (psnd_loops_prod _ _) @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 284
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    refine ((fmap_comp loops _ _)^* @* _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 285
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    change (?L ==* _) with (L ==* fmap loops (fmap (iterated_loops n) psnd)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 286
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
    tapply (fmap2 loops); simpl.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact IHn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 288
Time: 0.006s">
<div class="time" style="width: 4.0268456375839%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* A dependent form of loops *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 291
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition loopsD {A} : pFam A -&gt; pFam (loops A)
  := fun Pp =&gt; Build_pFam (fun q : loops A =&gt; transport Pp q (dpoint Pp) = (dpoint Pp)) 1.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance istrunc_pfam_loopsD {n} {A} (P : pFam A)
       {H :IsTrunc_pFam n.+1 P}
  : IsTrunc_pFam n (loopsD P).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 297
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 298
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> pose (H (point A)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 298
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact _.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 298
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* psigma and loops 'commute' *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 301
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma loops_psigma_commute (A : pType) (P : pFam A)
  : loops (psigma P) &lt;~&gt;* psigma (loopsD P).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 302
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 303
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 304
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (equiv_path_sigma _ _ _)^-1%equiv.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 305
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* product and loops 'commute' *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma loops_pproduct_commute `{Funext} (A : Type) (F : A -&gt; pType)
  : loops (pproduct F) &lt;~&gt;* pproduct (loops o F).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 311
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 312
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply equiv_apD10.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 313
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 314
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 315
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* product and iterated loops commute *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 317
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma iterated_loops_pproduct_commute `{Funext} (A : Type) (F : A -&gt; pType) (n : nat)
  : iterated_loops n (pproduct F) &lt;~&gt;* pproduct (iterated_loops n o F).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 318
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 320
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 321
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (loops_pproduct_commute _ _ o*E _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 322
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
  tapply (emap loops).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 323
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact IHn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 325
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Loops neutralise sigmas when truncated *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma loops_psigma_trunc (n : nat) (Aa : pType)
  (Pp : pFam Aa) (istrunc_Pp : IsTrunc_pFam (trunc_index_inc minus_two n) Pp)
  : iterated_loops n (psigma Pp) &lt;~&gt;* iterated_loops n Aa.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 329
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 330
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n in Aa, Pp, istrunc_Pp |- *.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> snapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: exact (@equiv_sigma_contr _ _ istrunc_Pp).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 333
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 334
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 334
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (pequiv_inverse (unfold_iterated_loops' _ _) o*E _
    o*E unfold_iterated_loops' _ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (IHn _ _ _ o*E _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 337
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  tapply (emap (iterated_loops _)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 338
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply loops_psigma_commute.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 339
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* We can convert between loops in a type and loops in [Type] at that type. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 342
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition loops_type `{Univalence} (A : Type@{i})
  : loops [Type@{i}, A] &lt;~&gt;* [A &lt;~&gt; A, equiv_idmap].</pre>
</div>
<div class="code" title="File: Loops.v
Line: 343
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 344
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply issig_pequiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 345
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists (equiv_equiv_path A A).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 346
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 347
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 348
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* An iterated version.  Note that the statement with "-1" substituted for [n] is [loops [Type, A] &lt;~&gt;* [A -&gt; A, idmap]], which is not true in general. Compare the previous result. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 350
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma local_global_looping `{Univalence} (A : Type@{i}) (n : nat)
  : iterated_loops@{j} n.+2 [Type@{i}, A]
    &lt;~&gt;* pproduct (fun a =&gt; iterated_loops@{j} n.+1 [A, a]).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 352
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 353
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 354
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 355
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre> refine (_ o*E emap loops (loops_type A)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 355
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply issig_pequiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 356
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
    exists (equiv_inverse (equiv_path_arrow 1%equiv 1%equiv)
            oE equiv_inverse (equiv_path_equiv 1%equiv 1%equiv)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 358
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 359
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 359
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  exact (loops_pproduct_commute _ _ o*E emap loops IHn).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 360
Time: 0.004s">
<div class="time" style="width: 2.6845637583893%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* 7.2.7 *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 363
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Theorem equiv_istrunc_istrunc_loops `{Funext} n X
  : IsTrunc n.+2 X &lt;~&gt; forall (x : X), IsTrunc n.+1 (loops [X, x]).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 364
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 365
Time: 0.005s">
<div class="time" style="width: 3.3557046979866%"></div>
<pre>
  srapply equiv_iff_hprop.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 366
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro tr_loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 367
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply istrunc_S; intros x y.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 368
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply istrunc_S; intros p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 369
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 370
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  napply tr_loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 371
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 372
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* 7.2.9, with [n] here meaning the same as [n-1] there. Note that [n.-1] in the statement is short for [trunc_index_pred (nat_to_trunc_index n)] which is definitionally equal to [(trunc_index_inc minus_two n).+1]. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 374
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Theorem equiv_istrunc_contr_iterated_loops `{Funext} (n : nat) (A : Type)
  : IsTrunc n.-1 A &lt;~&gt; forall a : A, Contr (iterated_loops n [A, a]).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 375
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 376
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n in A |- *.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 377
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Loops.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact equiv_hprop_inhabited_contr.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Loops.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_istrunc_istrunc_loops n.-2 _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 379
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply equiv_functor_forall_id.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro a.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 381
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  cbn beta.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 382
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE IHn (loops [A, a])).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 383
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_inO_equiv (-2) (unfold_iterated_loops' n [A,a])^-1 oE _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 384
Time: 0.008s">
<div class="time" style="width: 5.3691275167785%"></div>
<pre>
  rapply equiv_iff_hprop.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 385
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros X p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 386
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (@contr_equiv' _ _ _ X).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 387
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
  tapply (emap (iterated_loops _)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 388
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 389
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (equiv_concat_lr p 1).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 390
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  cbn; unfold ispointed_loops.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 391
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (concat_p1 _ @ concat_p1 _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 392
Time: 0.002s">
<div class="time" style="width: 1.3422818791946%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 393
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** [loops_inv] is a natural transformation. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 395
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance is1natural_loops_inv : Is1Natural loops loops loops_inv.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 395
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 396
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snapply Build_Is1Natural.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros A B f.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 398
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 399
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Loops.v
Line: 400
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros p.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 400
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (inv_Vp _ _ @ whiskerR _ (point_eq f) @ concat_pp_p _ _ _).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 400
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (inv_pp _ _ @ whiskerL (point_eq f)^ (ap_V f p)^).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 401
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Loops.v
Line: 402
Time: 0.022s">
<div class="time" style="width: 14.765100671141%"></div>
<pre> pointed_reduce.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 402
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 402
Time: 0.056s">
<div class="time" style="width: 37.58389261745%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 403
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Loops on the pointed type of dependent pointed maps correspond to pointed dependent maps into a family of loops.  We define this in this direction, because the forward map is pointed by reflexivity. *)</pre>
</div>
<div class="code" title="File: Loops.v
Line: 405
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>Definition equiv_loops_ppforall `{Funext} {A : pType} (B : A -&gt; pType)
  : loops (ppforall x : A, B x) &lt;~&gt;* (ppforall x : A, loops (B x)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 406
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 407
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply Build_pEquiv'.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 408
Time: 0.001s">
<div class="time" style="width: 0.67114093959732%"></div>
<pre>
  1: symmetry; exact (equiv_path_pforall (point_pforall B) (point_pforall B)).</pre>
</div>
<div class="code" title="File: Loops.v
Line: 409
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 410
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Loops.v
Line: 412
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

