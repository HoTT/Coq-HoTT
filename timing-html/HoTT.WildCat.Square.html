<html>
<head>
<title>Square.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Square.v</h1>

<div class="code" title="File: Square.v
Line: 1
Time: 0.02s">
<div class="time" style="width: 76.923076923077%"></div>
<pre>Require Import Basics.Overture.</pre>
</div>
<div class="code" title="File: Square.v
Line: 1
Time: 0.003s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>
Require Import WildCat.Core.</pre>
</div>
<div class="code" title="File: Square.v
Line: 2
Time: 0.004s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>
Require Import WildCat.Equiv.</pre>
</div>
<div class="code" title="File: Square.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Squares of morphisms in a Wild Category.  *)

(** These come up a lot as naturality squares. In this file we define basic operations on squares, to conveniently work with them. *)

(** A Square is a cubical 2-cell in a 1-category. The order of the arguments is left-right-top-bottom: [Square l r t b].  It is defined to be [r $o t $== b $o l]. *)

</pre>
</div>
<div class="code" title="File: Square.v
Line: 10
Time: 0.002s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>Definition Square@{u v w} {A : Type@{u}} `{Is1Cat@{u w v} A} {x00 x20 x02 x22 : A}
  (f01 : x00 $-&gt; x02) (f21 : x20 $-&gt; x22) (f10 : x00 $-&gt; x20) (f12 : x02 $-&gt; x22) 
  : Type@{w}
  := f21 $o f10 $== f12 $o f01.</pre>
</div>
<div class="code" title="File: Square.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


Section Squares.</pre>
</div>
<div class="code" title="File: Square.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* We declare a context with a lot of variables: the first component is horizontal, the second vertical.
    x00 f10 x20 f30 x40
    f01     f21     f41
    x02 f12 x22 f32 x42
    f03     f23     f43
    x04 f14 x24 f34 x44 
  All morphisms are pointed to the right or down. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 24
Time: 0.003s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>Context {A : Type} `{Is1Cat A} {x x' x00 x20 x40 x02 x22 x42 x04 x24 x44 : A}
    {f10 f10' : x00 $-&gt; x20} {f30 : x20 $-&gt; x40} 
    {f12 f12' : x02 $-&gt; x22} {f32 : x22 $-&gt; x42} 
    {f14 : x04 $-&gt; x24} {f34 : x24 $-&gt; x44}
    {f01 f01' : x00 $-&gt; x02} {f21 f21' : x20 $-&gt; x22} {f41 f41' : x40 $-&gt; x42}
    {f03 : x02 $-&gt; x04} {f23 : x22 $-&gt; x24} {f43 : x42 $-&gt; x44}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We give a "constructor" and "destructor" for squares. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 32
Time: 0.001s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre>Definition Build_Square (p : f21 $o f10 $== f12 $o f01) : Square f01 f21 f10 f12 := p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 32
Time: 0.001s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre>
  Definition gpdhom_square (s : Square f01 f21 f10 f12) : f21 $o f10 $== f12 $o f01 := s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Squares degenerate in two sides given by a single 2-morphism. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 36
Time: 0.005s">
<div class="time" style="width: 19.230769230769%"></div>
<pre>Definition hdeg_square {f f' : x $-&gt; x'} (p : f $== f') : Square f f' (Id x) (Id x')
    := cat_idr f' $@ p^$ $@ (cat_idl f)^$.</pre>
</div>
<div class="code" title="File: Square.v
Line: 37
Time: 0.004s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>
  Definition vdeg_square {f f' : x $-&gt; x'} (p : f $== f') : Square (Id x) (Id x') f f'
    := cat_idl f $@ p $@ (cat_idr f')^$.</pre>
</div>
<div class="code" title="File: Square.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Squares degenerate in two sides given by the identity 2-morphism at some morphism. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 42
Time: 0.001s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre>Definition hrefl (f : x $-&gt; x') : Square f f (Id x) (Id x') := hdeg_square (Id f).</pre>
</div>
<div class="code" title="File: Square.v
Line: 42
Time: 0.001s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre>
  Definition vrefl (f : x $-&gt; x') : Square (Id x) (Id x') f f := vdeg_square (Id f).</pre>
</div>
<div class="code" title="File: Square.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The transpose of a square *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 46
Time: 0.001s">
<div class="time" style="width: 3.8461538461538%"></div>
<pre>Definition transpose (s : Square f01 f21 f10 f12) : Square f10 f12 f01 f21 := s^$.</pre>
</div>
<div class="code" title="File: Square.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Horizontal and vertical concatenation of squares *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 49
Time: 0.011s">
<div class="time" style="width: 42.307692307692%"></div>
<pre>Definition hconcat (s : Square f01 f21 f10 f12) (t : Square f21 f41 f30 f32)
    : Square f01 f41 (f30 $o f10) (f32 $o f12)
    := (cat_assoc _ _ _)^$ $@ (t $@R f10) $@ cat_assoc _ _ _ $@ (f32 $@L s) $@ (cat_assoc _ _ _)^$.</pre>
</div>
<div class="code" title="File: Square.v
Line: 51
Time: 0.01s">
<div class="time" style="width: 38.461538461538%"></div>
<pre>
  Definition vconcat (s : Square f01 f21 f10 f12) (t : Square f03 f23 f12 f14)
    : Square (f03 $o f01) (f23 $o f21) f10 f14
  := cat_assoc _ _ _ $@ (f23 $@L s) $@ (cat_assoc _ _ _)^$ $@ (t $@R f01) $@ cat_assoc _ _ _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** If the horizontal morphisms in a square are equivalences then we can flip the square by inverting them. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 57
Time: 0.026s">
<div class="time" style="width: 100%"></div>
<pre>Definition hinverse {HE : HasEquivs A} (f10 : x00 $&lt;~&gt; x20) (f12 : x02 $&lt;~&gt; x22) (s : Square f01 f21 f10 f12)
    : Square f21 f01 f10^-1$ f12^-1$
    := (cat_idl _)^$ $@ ((cate_issect f12)^$ $@R _) $@ cat_assoc _ _ _
      $@ (_ $@L ((cat_assoc _ _ _)^$ $@ (s^$ $@R _) $@ cat_assoc _ _ _
      $@ (_ $@L cate_isretr f10) $@ cat_idr _)).</pre>
</div>
<div class="code" title="File: Square.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The following four declarations modify one side of a Square using a 2-cell. The L or R indicate the side of the 2-cell. This can be thought of as rewriting the sides of a square using a homotopy. *)

  (** Rewriting the left edge. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 66
Time: 0.003s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>Definition hconcatL (p : f01' $== f01) (s : Square f01 f21 f10 f12)
    : Square f01' f21 f10 f12
    := s $@ (f12 $@L p^$).</pre>
</div>
<div class="code" title="File: Square.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Rewriting the right edge. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 71
Time: 0.002s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>Definition hconcatR (s : Square f01 f21 f10 f12) (p : f21' $== f21)
    : Square f01 f21' f10 f12
    := (p $@R f10) $@ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Rewriting the top edge. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 76
Time: 0.002s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>Definition vconcatL (p : f10' $== f10) (s : Square f01 f21 f10 f12)
    : Square f01 f21 f10' f12
    := (f21 $@L p) $@ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Rewriting the bottom edge. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 81
Time: 0.003s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>Definition vconcatR (s : Square f01 f21 f10 f12) (p : f12' $== f12)
    : Square f01 f21 f10 f12'
    := s $@ (p^$ $@R f01).</pre>
</div>
<div class="code" title="File: Square.v
Line: 83
Time: 0.002s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>

End Squares.</pre>
</div>
<div class="code" title="File: Square.v
Line: 85
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Squares2.</pre>
</div>
<div class="code" title="File: Square.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We declare the context again, now that we can reuse some declarations where the variables have been inserted. This would not need to be done if Coq could generalize variables within sections. Currently this is possible in Lean and Agda. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 90
Time: 0.003s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>Context {A : Type} `{HasEquivs A}
    {x x' x00 x20 x40 x02 x22 x42 x04 x24 x44 : A}
    {f10 f10' : x00 $-&gt; x20} {f30 : x20 $-&gt; x40} 
    {f12 f12' : x02 $-&gt; x22} {f32 : x22 $-&gt; x42} 
    {f14 : x04 $-&gt; x24} {f34 : x24 $-&gt; x44}
    {f01 f01' : x00 $-&gt; x02} {f21 f21' : x20 $-&gt; x22} {f41 f41' : x40 $-&gt; x42}
    {f03 : x02 $-&gt; x04} {f23 : x22 $-&gt; x24} {f43 : x42 $-&gt; x44}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** If the vertical morphisms in a square are equivalences then we can flip the square by inverting them. *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 99
Time: 0.005s">
<div class="time" style="width: 19.230769230769%"></div>
<pre>Definition vinverse (f01 : x00 $&lt;~&gt; x02) (f21 : x20 $&lt;~&gt; x22) (s : Square f01 f21 f10 f12)
    : Square (f01^-1$) (f21^-1$) f12 f10
    := transpose (hinverse _ _ (transpose s)).</pre>
</div>
<div class="code" title="File: Square.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Whisker a map in one of the corners. For the bottom-left and top-right we have two choices. *)

 </pre>
</div>
<div class="code" title="File: Square.v
Line: 105
Time: 0.007s">
<div class="time" style="width: 26.923076923077%"></div>
<pre>Definition whiskerTL {f : x $-&gt; x00} (s : Square f01 f21 f10 f12)
    : Square (f01 $o f) f21 (f10 $o f) f12
    := (cat_assoc _ _ _)^$ $@ (s $@R f) $@ cat_assoc _ _ _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 107
Time: 0.015s">
<div class="time" style="width: 57.692307692308%"></div>
<pre>

  Definition whiskerBR {f : x22 $-&gt; x} (s : Square f01 f21 f10 f12)
    : Square f01 (f $o f21) f10 (f $o f12)
    := cat_assoc _ _ _ $@ (f $@L s) $@ (cat_assoc _ _ _)^$.</pre>
</div>
<div class="code" title="File: Square.v
Line: 111
Time: 0.011s">
<div class="time" style="width: 42.307692307692%"></div>
<pre>

  Definition whiskerBL {f : x $&lt;~&gt; x02} (s : Square f01 f21 f10 f12)
    : Square (f^-1$ $o f01) f21 f10 (f12 $o f)
    := s $@ ((compose_hh_V _ _)^$ $@R f01) $@ cat_assoc _ _ _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 115
Time: 0.011s">
<div class="time" style="width: 42.307692307692%"></div>
<pre>

  Definition whiskerLB {f : x02 $&lt;~&gt; x} (s : Square f01 f21 f10 f12)
    : Square (f $o f01) f21 f10 (f12 $o f^-1$)
    := s $@ ((compose_hV_h _ _)^$ $@R f01) $@ cat_assoc _ _ _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 119
Time: 0.009s">
<div class="time" style="width: 34.615384615385%"></div>
<pre>

  Definition whiskerTR {f : x20 $&lt;~&gt; x} (s : Square f01 f21 f10 f12)
    : Square f01 (f21 $o f^-1$) (f $o f10) f12
    := cat_assoc _ _ _ $@ (f21 $@L compose_V_hh _ _) $@ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 123
Time: 0.01s">
<div class="time" style="width: 38.461538461538%"></div>
<pre>

  Definition whiskerRT {f : x $&lt;~&gt; x20} (s : Square f01 f21 f10 f12)
    : Square f01 (f21 $o f) (f^-1$ $o f10) f12
    := cat_assoc _ _ _ $@ (f21 $@L compose_h_Vh _ _) $@ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Moving around maps in a square. Associativity laws. *)

 </pre>
</div>
<div class="code" title="File: Square.v
Line: 131
Time: 0.004s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>Definition move_bottom_left {f01 : x00 $-&gt; x} {f01' : x $-&gt; x02}
    (s : Square (f01' $o f01) f21 f10 f12) 
    : Square f01 f21 f10 (f12 $o f01')
    := s $@ (cat_assoc _ _ _)^$.</pre>
</div>
<div class="code" title="File: Square.v
Line: 134
Time: 0.002s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>

  Definition move_left_bottom {f12 : x02 $-&gt; x} {f12' : x $-&gt; x22}
    (s : Square f01 f21 f10 (f12' $o f12)) 
    : Square (f12 $o f01) f21 f10 f12'
    := s $@ cat_assoc _ _ _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 139
Time: 0.003s">
<div class="time" style="width: 11.538461538462%"></div>
<pre>

  Definition move_right_top {f10 : x00 $-&gt; x} {f10' : x $-&gt; x20}
    (s : Square f01 f21 (f10' $o f10) f12) 
    : Square f01 (f21 $o f10') f10 f12
    := cat_assoc _ _ _ $@ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 144
Time: 0.005s">
<div class="time" style="width: 19.230769230769%"></div>
<pre>

  Definition move_top_right {f21 : x20 $-&gt; x} {f21' : x $-&gt; x22}
    (s : Square f01 (f21' $o f21) f10 f12) 
    : Square f01 f21' (f21 $o f10) f12
    := (cat_assoc _ _ _)^$ $@ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 149
Time: 0.01s">
<div class="time" style="width: 38.461538461538%"></div>
<pre>

  Definition fmap_square {B : Type} `{Is1Cat B} (f : A -&gt; B) `{!Is0Functor f} `{!Is1Functor f}
    (s : Square f01 f21 f10 f12)
    : Square (fmap f f01) (fmap f f21) (fmap f f10) (fmap f f12)
    := (fmap_comp f _ _)^$ $@ fmap2 f s $@ fmap_comp f _ _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 154
Time: 0.002s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>

End Squares2.</pre>
</div>
<div class="code" title="File: Square.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "s $@h t" := (hconcat s t).</pre>
</div>
<div class="code" title="File: Square.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s $@v t" := (vconcat s t).</pre>
</div>
<div class="code" title="File: Square.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s $@hR p" := (hconcatR s p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s $@hL p" := (hconcatL p s).</pre>
</div>
<div class="code" title="File: Square.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s $@vR p" := (vconcatR s p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s $@vL p" := (vconcatL p s).</pre>
</div>
<div class="code" title="File: Square.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s ^h$" := (hinverse _ _ s).</pre>
</div>
<div class="code" title="File: Square.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "s ^v$" := (vinverse _ _ s).</pre>
</div>
<div class="code" title="File: Square.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

